// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"jimu/dijit/GridLayout":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dijit/_WidgetBase dojo/dom-geometry dojo/dom-class dojo/Evented dojo/debounce".split(" "),function(n,e,k,l,d,h,b,a){return n([l,b],{baseClass:"jimu-dijit-gridlayout",declaredClass:"jimu.dijit.GridLayout",container:null,layoutDefinition:null,components:null,editable:!1,_layout:null,_coordinates:null,_isCreatingLayout:null,postCreate:function(){this.inherited(arguments);this._isCreatingLayout=
!1;this._createLayout(this.layoutDefinition)},restoreLayout:function(a){a=a||this.layoutDefinition;this._createLayout(a)},destroy:function(){k.forEach(this.components,function(a){a.dijit.destroy()});this._layout.destroy();this.inherited(arguments)},getLayoutDefinition:function(){return this._layout.toConfig().content},resize:function(){var a=d.getMarginBox(this.container);this._layout.updateSize(a.w,a.h)},getComponentSize:function(a){return(a=this._layout.root.contentItems[0].getItemsById(a))&&0<
a.length?(a=a[0].container,{w:a.width,h:a.height}):{w:0,h:0}},getSize:function(){return{w:this._layout.width,h:this._layout.height}},setVisible:function(a,b){var f=this._layout.root.contentItems[0].getItemsById(a);f&&0<f.length&&!1===b?this._hideComponent(f[0]):f&&0!==f.length||!0!==b||this._showComponent(a)},highlightItem:function(a){(a=this._layout.root.contentItems[0].getItemsById(a))&&0<a.length&&a[0].highlight()},unhighlightItem:function(a){(a=this._layout.root.contentItems[0].getItemsById(a))&&
0<a.length&&a[0].unhighlight()},_createLayout:function(b){if(!this._isCreatingLayout){this._coordinates={};this._isCreatingLayout=!0;var c={settings:{hasHeaders:!1,resizeEnabled:this.editable,reorderEnabled:this.editable,selectionEnabled:this.editable,highlightEnabled:this.editable},dimensions:{borderWidth:1,dragProxyWidth:0,dragProxyHeight:0},content:b},f=this._layout;require(["libs/goldenlayout/goldenlayout"],e.hitch(this,function(b){this._layout=new b(c,this.container);this._layout.registerComponent("jimu grid",
e.hitch(this,function(f,b){var c;f.parent.config.id=b.id;k.some(this.components,function(a){if(a.id===b.id)return c=a.dijit,f.getElement().html(a.dijit.domNode),!0},this);f.on("resize",a(e.hitch(this,function(){0<f.width&&0<f.height&&c&&"function"===typeof c.resize&&c.resize(f.width,f.height)}),200));f.on("select",e.hitch(this,function(){this.editable&&f.parent.select();this.emit("mask-click",f.parent.config.id)}))}));this._layout.on("initialised",e.hitch(this,function(){this._resetCoordinate();this.emit("initialised");
this._isCreatingLayout=!1;f&&f.destroy()}));this._layout.on("stateChanged",e.hitch(this,function(){this._resetCoordinate()}));this._layout.init();this.editable||h.add(this._layout.root.childElementContainer[0],"viewonly");h.add(this._layout.root.childElementContainer[0],"jimu-dijit-gridlayout");setTimeout(e.hitch(this,this.resize),100)}))}},_hideComponent:function(a){a.parent&&a.parent.removeChild(a,!0)},_showComponent:function(a){var b,f,c,p,d,h,q;k.some(this.components,function(f){if(f.id===a)return b=
f,!0},this);b&&(p={id:a,type:"component",componentName:"jimu grid",componentState:{id:a}},f=this._coordinates[a],d=this._layout.root,f?(f[0].type!==d.contentItems[0].type&&(h=d.contentItems[0],d.replaceChild(h,{type:f[0].type,content:[]}),d.contentItems[0].addChild(h)),c=d,k.forEach(f,function(a){q=a.index<=c.contentItems.length?a.index:c.contentItems.length;"component"===a.type?c.addChild(p,q):("stack"!==a.type&&c.contentItems[a.index].type===a.type||c.addChild({type:a.type,content:[]},q),c=c.contentItems[q])},
this)):("stack"===d.contentItems[0].type&&(h=d.contentItems[0],d.replaceChild(h,{type:"column",content:[]}),d.contentItems[0].addChild(h)),d.contentItems[0].addChild(p)))},_resetCoordinate:function(){var a=this._layout.root.getItemsByType("component"),b=function(a,c){var f=a.parent;f&&(k.some(f.contentItems,function(f,b){if(f===a)return c.push({type:f.type,index:b}),!0}),b(f,c))};k.forEach(a,function(a){var f=[];b(a,f);this._coordinates[a.config.id]=f.reverse()},this)}})})},"widgets/Infographic/DijitFactory":function(){define("dojo/aspect dojo/_base/lang ./dijits/TextDijit ./dijits/ImageDijit ./dijits/ChartDijit ./dijits/GaugeDijit ./dijits/NumberDijit".split(" "),
function(n,e,k,l,d,h,b){var a={},c={},g=null,f=null,m=null,p=null,r={};a._dijits=c;a.createDijit=function(a){var q=null;if(c[a.id])return(q=c[a.id])&&"function"===typeof q.setVisible&&q.setVisible(a.visible),q;var u;switch(a.type){case "text":u=k;break;case "image":u=l;break;case "chart":u=d;break;case "gauge":u=h;break;case "number":u=b}if(!u)return console.error("Unknow type:",a.type),null;q={nls:g,config:a.config,map:f,inSettingPage:m,appConfig:p,jsonId:a.id,visible:a.visible};e.mixin(q,r);q=new u(q);
n.after(q,"destroy",function(){delete c[a.id]});return c[a.id]=q};a.setNls=function(a){g=a};a.setMap=function(a){f=a;Object.keys(c).forEach(function(a){c[a].setMap(f)})};a.setInSettingPage=function(a){m=a;Object.keys(c).forEach(function(a){c[a].setInSettingPage(m)})};a.setAppConfig=function(a){p=a;Object.keys(c).forEach(function(a){c[a].setAppConfig(p)})};a.setContext=function(a){r=a;Object.keys(c).forEach(function(a){e.mixin(c[a],r)})};return a})},"widgets/Infographic/dijits/TextDijit":function(){define(["dojo/_base/declare",
"dojo/_base/html","./BaseDijit","./styleUtils"],function(n,e,k,l){return n([k],{templateString:"\x3cdiv\x3e\x3c/div\x3e",type:"text",config:null,postCreate:function(){this.setConfig(this.config)},setConfig:function(d){this.config=d;e.empty(this.domNode);e.addClass(this.domNode,"table-layout-container");e.addClass(this.domNode,"no-trim");this.innerDom=e.create("div",{},this.domNode);e.place(this.innerDom,this.domNode);d={};l.background.setStyle(this.config.background,d,this);l.font.setStyle(this.config.font,
d);l.font.setText(this.config,this);e.setStyle(this.innerDom,d)}})})},"widgets/Infographic/dijits/BaseDijit":function(){define(["dojo/_base/declare","dijit/_WidgetBase","dijit/_TemplatedMixin"],function(n,e,k){return n([e,k],{templateString:"\x3cdiv\x3ePlease create a sub class\x3c/div\x3e",type:"BaseDijit",config:null,inSettingPage:!0,appConfig:null,constructor:function(e){this.config=e.config},setInSettingPage:function(e){this.inSettingPage=e},setConfig:function(e){this.config=e},setMap:function(e){this.map=
e},setDataSource:function(e){this.dataSource=e},resize:function(){},setAppConfig:function(e){this.appConfig=e},onDataSourceDataUpdate:function(e){this.data=e},isDarkTheme:function(){var e=!1;this.appConfig&&("DashboardTheme"!==this.appConfig.theme.name||"default"!==this.appConfig.theme.styles[0]&&"style3"!==this.appConfig.theme.styles[0]?"DartTheme"===this.appConfig.theme.name&&(e=!0):e=!0);return e}})})},"widgets/Infographic/dijits/styleUtils":function(){define(["dojo/on","dojo/_base/lang","jimu/utils"],
function(n,e,k){var l={background:{setStyle:function(d,h,b){if(!d)return{};h||(h={});l.background.setBackgroundColor(d,h);l.background.setAlignment(d,h);l.background.setLink(d,h,b)},setBackgroundColor:function(d,h){d.backgroundColor&&(h.backgroundColor=d.backgroundColor)},setAlignment:function(d,h){if(d.alignment){if(d.alignment.horizontal)switch(d.alignment.horizontal){case "left":h.textAlign="left";break;case "center":h.textAlign="center";break;case "right":h.textAlign="right";break;default:h.textAlign=
"center"}if(d.alignment.vertical)switch(h.display="table-cell",d.alignment.vertical){case "top":h.verticalAlign="top";break;case "middle":h.verticalAlign="middle";break;case "bottom":h.verticalAlign="bottom";break;default:h.verticalAlign="middle"}}},setLink:function(d,h,b){b.clickHanlder&&(b.clickHanlder[0]&&b.clickHanlder[0].remove(),b.clickHanlder=null,h.cursor="auto");d.link&&(b.clickHanlder=b.own(n(b.domNode,"click",e.hitch(b,function(){window.open(d.link)}))),h.cursor="pointer")}},font:{setText:function(d,
h){var b="";d.text&&(b=d.text);h.innerDom.innerHTML=b},setStyle:function(d,h){if(!d)return{};h||(h={});l.font.setFont(d,h);l.font.setTextColor(d,h);l.font.setFontSize(d,h)},setFont:function(d,h){h.fontWeight="normal";h.fontStyle="normal";h.textDecoration="none";d.font&&(d.font.fontFamily&&(h.fontFamily=d.font.fontFamily),d.font.bold&&(h.fontWeight="bold"),d.font.italic&&(h.fontStyle="italic"),d.font.underline&&(h.textDecoration="underline"))},setTextColor:function(d,h){d.textColor&&(h.color=d.textColor)},
setFontSize:function(d,h){d.fontSize&&(h.fontSize=d.fontSize+"px")}},image:{setStyle:function(d,h,b){if(!d)return{};h||(h={});l.image.setBackgroundImg(d,h,b);l.image.setAlignment(d,h)},setBackgroundImg:function(d,h,b){var a="";if(a=d&&!d.image&&b&&b.folderUrl?"url("+b.folderUrl+"/images/default_image.png)":"url("+k.processUrlInWidgetConfig(d.image,b.folderUrl)+")")h.backgroundImage=a,h.backgroundRepeat="no-repeat",h.backgroundSize="contain"},setAlignment:function(d,h){if(d&&d.background){var b="center",
a="center";if(d.background.alignment){d.background.alignment.horizontal&&(b=d.background.alignment.horizontal);if(d.background.alignment.vertical)switch(d.background.alignment.vertical){case "top":a="top";break;case "middle":a="center";break;case "bottom":a="bottom";break;default:h.verticalAlign="center"}h.backgroundPosition=b+" "+a}}}},dataFormat:{getText:function(d,h){var b="";d.dataFormat&&(b=h?h:d.text,b=l.dataFormat.setDataFomat(d,b),d.dataFormat.prefix&&(b=d.dataFormat.prefix+" "+b),d.dataFormat.suffix&&
(b=b+" "+d.dataFormat.suffix));return b},setDataFomat:function(d,h){var b=d.dataFormat.unit;"none"===d.dataFormat.unit?b="":"percentage"===d.dataFormat.unit&&(b="%");return h=h+b+"("+d.dataFormat.decimalPlaces+") "}}};return l})},"widgets/Infographic/dijits/ImageDijit":function(){define(["dojo/_base/declare","dojo/_base/html","./BaseDijit","./styleUtils"],function(n,e,k,l){return n([k],{templateString:"\x3cdiv\x3e\x3c/div\x3e",type:"image",config:null,constructor:function(d){this.config=d.config},
postCreate:function(){this.setConfig(this.config)},setConfig:function(d){this.config=d;this.domNode.innerHTML="";e.addClass(this.domNode,"table-layout-container");this.innerDom=e.create("div",{"class":"image-node"},this.domNode);e.place(this.innerDom,this.domNode);d={};l.background.setStyle(this.config.background,d,this);l.image.setStyle(this.config,d,this);e.setStyle(this.innerDom,d)}})})},"widgets/Infographic/dijits/ChartDijit":function(){define("dojo/_base/lang dojo/_base/html dojo/_base/declare ./BaseDijit dojo/text!./ChartDijit.html moment/moment jimu/dijit/_chartDijitOption jimu/dijit/Chart jimu/DataSourceManager jimu/LayerInfos/LayerInfos ../utils".split(" "),
function(n,e,k,l,d,h,b,a,c,g,f){window.makeTwix(h);return k([l],{templateString:d,type:"chart",baseClass:"infographic-chart-dijit",layerInfosObj:null,dataSourceManager:null,featuresCountForPreview:50,dataSource:null,config:null,map:null,maxTimeIntervals:1E4,maxLabels:1E4,dsType:"",constructor:function(a){this.visible=a.visible;this.layerInfosObj=g.getInstanceSync();this.dataSourceManager=c.getInstance();this.config=a.config;this.popupInfo=this.layerObject=this.featureLayerForFrameWork=null},postCreate:function(){this.inherited(arguments);
this._init()},setLayerInfo:function(a,f,b){this.layerObject=a;this.popupInfo=b;this.featureLayerForFrameWork=f;this._initChartDijitOption()},getDataURL:function(){if(this.chart)return this.chart.getDataURL()},resize:function(){this.chart&&this.chart.resize()},setVisible:function(a){this.visible=a},destroy:function(){this.chart&&this.chart.destroy();this.chart=null;this.inherited(arguments)},clearChart:function(){this.chart&&this.chart.clear();this.showNodata()},setBackgroundColor:function(a){this.domNode.style.backgroundColor=
a},_setyAxisName:function(){var a=this.config&&this.config.display;(a=a&&a.yAxis)&&a.show&&"undefined"!==typeof a.name?(this._showyAxisName(),this._setyAxisNameText(a.name),(a=a.nameTextStyle)&&a.color&&this._setyAxisNameColor(a.color)):this._hideyAxisName()},_setyAxisNameText:function(a){this.yAxisName.innerHTML=a},_setyAxisNameColor:function(a){e.setStyle(this.yAxisName,"color",a)},_hideyAxisName:function(){e.setStyle(this.yAxisName,"display","none")},_showyAxisName:function(){e.setStyle(this.yAxisName,
"display","flex")},resetData:function(){this.dataSource=null;this.dsType="";this.data=null;this._hasStatisticsed=void 0;this.featureLayerForFrameWork=this.popupInfo=this.layerObject=null;this.chartDijitOption.init(null,null,null,this.map)},setDataSource:function(a){this.inherited(arguments);this.dataSource=a;this._calcDataSourceType(this.dataSource)},onUpdateDataStart:function(){this._showOverlay()},onUpdateDataDone:function(){this._hideOverlay()},_calcDataSourceType:function(a){a.layerId?this.dsType=
"CLIENT_FEATURES":a.frameWorkDsId&&(a=(a=f.getDsTypeInfoMeta(a.frameWorkDsId,this.appConfig))&&a.dsMeta)&&("Features"===a.type?this.dsType="FRAMEWORK_FEATURES":"FeatureStatistics"===a.type&&(this.dsType="FRAMEWORK_STATISTICS"))},setConfig:function(a){this.config=a},onDataSourceDataUpdate:function(a){a&&"undefined"!==typeof a.features&&(this.inSettingPage&&a.features.length>this.featuresCountForPreview&&(a.features=a.features.slice(0,this.featuresCountForPreview)),this.data=a,this._hasStatisticsed=
!!a.hasStatisticsed)},startRendering:function(){this.specialChartConfig(this.config);this._shouldRenderChart()&&((this.chart||this._createJimuChart(),this._updateBackgroundColor(),this._setyAxisName(),this._splitConfig(),this._createChartSeriesOption(),this.seriesOption)?this._checkIsTooManyLabels(this.seriesOption)||(this._createChartOption(),this.chart.updateConfig(this.chartOption),this.chart.resize()):this.showNodata())},_createChartOption:function(){var a=this._isSameFeatures(),b=f.isEqual(this.dataOption,
this._oldDataOption)&&f.isEqual(this.displayOption,this._oldDisplayOption);a&&b||(this.chartOption=null,this.seriesOption&&(this.chartOption=this.chartDijitOption.updateChartOptionDisplay(n.clone(this.seriesOption),this.displayOption,this.dataOption),this._oldDisplayOption=null,this._oldDisplayOption=n.clone(this.displayOption)))},_createChartSeriesOption:function(){var a=this._isSameFeatures(),b=f.isEqual(this.dataOption,this._oldDataOption);a&&b||(this._oldDataOption=null,this._oldDataOption=n.clone(this.dataOption),
a=this.dataOption,a.features=this.features,b=this.chartDijitOption.getClientStatisticsData(a),this.seriesOption=null,b&&(this.chartDijitOption.bindChartEvent(this.chart,a,b),this.seriesOption=this.chartDijitOption.getChartOptionSeries(this.dataOption,b)))},_splitConfig:function(){if(this.config){var a=this.config.data,f=this.config.display;this.features=this._cleanFeatures(this.data.features);var b=this.dataSource.filterByExtent,c=this.dataSource.useSelection,g=this._isStatisticsed(),b={filterByExtent:b,
useSelection:c,hasStatisticsed:g};this.dataOption=null;this.dataOption=n.mixin(b,a);this.displayOption=null;this.displayOption=f}},_cleanFeatures:function(a){if(a&&a.length)return a.map(function(a){return{attributes:a.attributes}})},_isSameFeatures:function(){var a=this.features;if(!a)return!0;a=a.map(function(a){return a.attributes});if(f.isEqual(a,this._oldFeatureAttrs))return!0;this._oldFeatureAttrs=a},_isStatisticsed:function(){return this.inSettingPage?"FRAMEWORK_STATISTICS"===this.dsType:!!this._hasStatisticsed},
_shouldRenderChart:function(){if(this.visible&&this.config){var a=this.domNode&&this.data&&this.data.features&&this._hasVaildConfig(this.config.data),f;if("CLIENT_FEATURES"===this.dsType)f=!!this.layerObject;else if("FRAMEWORK_FEATURES"===this.dsType||"FRAMEWORK_STATISTICS"===this.dsType)f=!!this.featureLayerForFrameWork;if(a&&f){if(this._checkIsTooManyTimeInterval(this.data.features))return this.showNodata(this.nls.parsingperiodTip),!1}else return this.showNodata(),!1;this.hideNodata();return!0}},
_hasVaildConfig:function(a){if(!a||!a.mode)return!1;var f=a.valueFields;if("feature"===a.mode)return a.clusterField&&f&&f.length;if("category"===a.mode)return a.clusterField&&a.operation&&f&&f.length;if("count"===a.mode)return a.clusterField;if("field"===a.mode)return a.operation&&f&&f.length},_getNodataTextColor:function(){var a;a=this.config&&this.config.display;var f=this.config&&this.config.data;if(!a||!f)return"#666";(a="pie"===f.type?a.dataLabelColor:a.horizontalAxisTextColor||a.verticalAxisTextColor)||
(a="#666");return a},specialChartConfig:function(a){if(a){var b=this._getChartTheme();f.specialChartConfig(a,b);return a}},_showOverlay:function(){e.removeClass(this.overlap,"hide")},_hideOverlay:function(){e.addClass(this.overlap,"hide")},showNodata:function(a){e.addClass(this.domNode,"no-data");this._setNoDataColor();a&&(this.noDataDiv.innerHTML=a)},_setNoDataColor:function(){var a=this._getNodataTextColor();this.noDataDiv&&this.noDataDiv.style&&(this.noDataDiv.style.color=a)},_initChartDijitOption:function(){if(this.chartDijitOption){var a=
null,a="CLIENT_FEATURES"===this.dsType?this.layerObject:this.featureLayerForFrameWork;this.chartDijitOption.init(a,this.layerObject,this.popupInfo,this.map,this.layerObject)}},_checkIsTooManyLabels:function(a){return(a=a.labels)&&a.length>this.maxLabels?(this.showNodata(this.nls.manyCategoryTip),!0):!1},_checkIsTooManyTimeInterval:function(a){var f=this.config&&this.config.data,f=f&&f.dateConfig;if(!f||"automatic"===f.minPeriod)return!1;var b=f.clusterField,c=a.map(n.hitch(this,function(a){return a.attributes[b]})),
c=c.filter(function(a){return!!a});a=Math.min.apply(Math,c);c=Math.max.apply(Math,c);a=h(a).subtract(1,"seconds").local();c=h(c).add(1,"seconds").local();return Math.round(c.diff(a,f.minPeriod,!0))>=this.maxTimeIntervals},_createChartDijitOption:function(){var a={map:null};this.inSettingPage||(a.map=this.map);this.chartDijitOption=new b(a)},_init:function(){this._createChartDijitOption();this._updateBackgroundColor()},_createJimuChart:function(){var f=this.config&&this.config.data;this.DEFAULT_CONFIG=
{type:f&&f.type||"column",theme:this._getChartTheme(),labels:[],series:[{data:[]}]};this.chart=new a({chartDom:this.chartDomNode,config:this.DEFAULT_CONFIG});this.chart.placeAt(this.chartDomNode);this.chart.resize()},_getChartTheme:function(){return this.isDarkTheme()?"dark":"light"},_updateBackgroundColor:function(){var a=this.config&&this.config.display;a&&a.backgroundColor&&this.setBackgroundColor(a.backgroundColor)},hideNodata:function(){e.removeClass(this.domNode,"no-data")}})})},"jimu/dijit/_chartDijitOption":function(){define(["dojo/_base/declare",
"dijit/_WidgetBase","dojo/_base/lang","jimu/clientStatisticsUtils","jimu/_chartHelpUtils"],function(n,e,k,l,d){return n([e],{postMixInProperties:function(){this.nls=window.jimuNls.statisticsChart},constructor:function(h){this.map=h.map;this.chartHelpUtils=new d({map:this.map,clientStatisticsUtils:l})},init:function(d,b,a,c,g){this.chartHelpUtils.setLayerFeatureLayer(d);this.chartHelpUtils.setSymbolLayer(b);this.chartHelpUtils.setPopupInfo(a);this.chartHelpUtils.setMap(c);this.chartHelpUtils.setLayerObject(g)},
getClientStatisticsData:function(d){var b=l.getClietStatisticsData(d),b=l.sortClientStatisticsData(b,d),b=l.getDataForMaxLabels(b,d.maxLabels);return b=this.chartHelpUtils.keepStatisticsDataBestDecimalPlace(d,b,d.mode)},bindChartEvent:function(d,b,a){this.chartHelpUtils.bindChartEvent(d,b,a)},getChartOptionSeries:function(d,b){return this._createOptionSeries(d,b)},updateChartOptionDisplay:function(d,b,a){this._assigneeSettingColorToSeries(d,b,a);this.chartHelpUtils.updateChartSeriesDisplayName(d,
b,a);return this._mapSettingConfigToChartOption(d,b,a)},_assigneeSettingColorToSeries:function(d,b,a){if(!d||!d.series)return d;this.chartHelpUtils.assigneeSettingColor(b,d.series,a)},_createOptionSeries:function(d,b){var a=d.type,c=d.mode;d=d.valueFields;var g=[],g="count"===c?[""]:"field"===c?[""]:k.clone(d),f=null,f={type:a,labels:[],series:[]};f.series=g.map(k.hitch(this,function(f){return{name:f,type:a,data:[]}}));b.forEach(k.hitch(this,function(a){var b=a.label;f.labels.push(b);for(var m=0;m<
a.values.length;m++){var g={value:a.values[m],name:b,unit:a.unit};"feature"===c&&(g.originValue=a.originalValues[m]);f.series[m].data.push(g)}}));return f},_mapSettingConfigToChartOption:function(d,b,a){var c=a.type;this._settingColorArrayForPie(d,b,c,a.mode);this._settingAxisDisplay(d,b,c);d.type=c;d.dataZoom=["inside","slider"];d.confine=!0;d.backgroundColor=b.backgroundColor;b.marks&&b.marks.markLine&&(d.markLine=k.clone(b.marks.markLine));b.marks&&b.marks.markArea&&(d.markArea=k.clone(b.marks.markArea));
b.legend&&(d.legend=k.clone(b.legend));b.xAxis&&(d.xAxis=k.clone(b.xAxis));b.yAxis&&(d.yAxis=k.clone(b.yAxis));b.dataLabel&&(d.dataLabel=k.clone(b.dataLabel));"pie"===c&&(d.innerRadius=b.innerRadius);d.theme=b.theme||"light";return d},_settingColorArrayForPie:function(d,b,a,c){"pie"===a&&"field"!==c&&(b=b.seriesStyle)&&b.styles&&b.styles[0]&&(b=b.styles[0].style)&&Array.isArray(b.color)&&(a=k.clone(b.color),2===a.length&&(a=this.chartHelpUtils.getColors(k.clone(b.color),6)),d.color=a)},_settingAxisDisplay:function(d,
b,a){if(!(0>["column","bar","line"].indexOf(a))){b.stack||(b.stack=!1);if("column"===a||"bar"===a||"line"===a&&b.area)d.stack=b.stack;"line"!==a||b.area||(b.area=!1);"line"===a&&(d.area=b.area);d.axisPointer=!0;d.scale=!1}}})})},"jimu/clientStatisticsUtils":function(){define(["dojo/_base/lang","moment/moment","./_chartHelpUtils","jimu/utils"],function(n,e,k,l){window.makeTwix&&window.makeTwix(e);return{getClietStatisticsData:function(d){var e=d.mode;if("feature"===e)return this.getFeatureModeStatisticsData(d);
if("category"===e)return this.getCategoryModeStatisticsData(d);if("count"===e)return this.getCountModeStatisticsData(d);if("field"===e)return this.getFieldModeStatisticsData(d)},sortClientStatisticsData:function(d,e){return this.sortStatisticsData(d,e.mode,e.sortOrder,e.clusterField,e.valueFields)},getDataForMaxLabels:function(d,e){return d&&d.length&&"number"===typeof e&&0<e&&e<d.length?d.slice(0,e):d},getFeatureModeStatisticsData:function(d){var e=d.features,b=d.clusterField,a=d.valueFields;d=void 0!==
d.showNullLabelData?d.showNullLabelData:!0;var c=this.separateFeaturesWhetherFieldValueNull(b,e),e=c.notNullLabelFeatures,c=c.nullLabelFeatures,e=d?e.concat(c):e;d=[];return d=e.map(function(c){var f=c.attributes,m=f&&f[b],m=this.convertingNullOrUndefinedAsPlaceholders(m);c={label:m,values:[],features:[c]};c.values=a.map(function(a){return f[a]});return c}.bind(this))},getCategoryModeStatisticsData:function(d){function e(f){var p=[],d=null,e;for(e in f){d=f[e];e=this.keepFieldValueType(e,d.type,g);
var r=this.calcValuesByFeaturesForCatetoryMode(a,d,b,c,m);p.push({label:e,values:r,features:d.features,unit:d.unit})}return p}var b=d.hasStatisticsed,a=d.valueFields,c=d.operation,g=d.dateConfig,f=void 0!==d.showNullLabelData?d.showNullLabelData:!0,m=d.nullValue,p=[],p=this.getCluseringObj(d.clusterField,d.features,g);d=p.nullLabel;p=e.call(this,p.notNullLabel);d=e.call(this,d);return p=f?p.concat(d):p},getCountModeStatisticsData:function(d){function e(a){var f=[],c=null,d;for(d in a){var c=a[d],
e=this.calcValuesByFeaturesForCountMode(c,g);d=this.keepFieldValueType(d,c.type,b);f.push({label:d,values:e,features:c.features,unit:c.unit})}return f}var b=d.dateConfig,a=void 0!==d.showNullLabelData?d.showNullLabelData:!0,c=[],g=d.hasStatisticsed&&!b,c=this.getCluseringObj(d.clusterField,d.features,b);d=c.nullLabel;c=e.call(this,c.notNullLabel);d=e.call(this,d);return c=a?c.concat(d):c},calcValuesByFeaturesForCountMode:function(d,e){return e?d.features.map(function(b){var a=(b=b.attributes)&&b.STAT_COUNT;
"undefined"===typeof a&&(a=b.stat_count);return a}.bind(this)):[d.count]},getFieldModeStatisticsData:function(d){var e=d.hasStatisticsed,b=d.features,a=d.operation,c=d.nullValue,g=[];return g=d.valueFields.map(n.hitch(this,function(f){var m=this.getValuesByValueFieldForFieldMode(f,b,e,a),m=this.calcValueByOperation(m,a,c);return{label:f,values:[m]}}))},getValuesByValueFieldForFieldMode:function(d,e,b,a){a="average"===a?"avg":a;if(b)var c=l.upperCaseString(d+"_"+a),g=l.lowerCaseString(d+"_"+a);return e.map(n.hitch(this,
function(a){if(a=a.attributes){var f;b?(f=a[c],"undefined"===typeof f&&(f=a[g])):f=a[d];return f}}))},sortStatisticsData:function(d,e,b,a,c){function g(f,b,g){var m;if("category"===b)g.isLabelAxis?g.isLabelAxis&&(m=f.label):g.field||1!==f.values.length?(g=c.indexOf(g.field),m=f.values[g]):m=f.values[0];else if("count"===b)m=f.label,m=g.isLabelAxis?m:f.values[0];else if("field"===b)m=g.isLabelAxis?f.label:f.values[0];else if("feature"===b){var p=g.field;f&&f.features&&f.features[0]&&(b=f.features[0].attributes)&&
(g.isLabelAxis?m=b[a]:p?m=b[p]:f.values.length&&(m=f.values[0]))}return m}if(!b)return d;var f=b.isAsc;if(!Array.isArray(d))return d;d.sort(function(a,c){a=g(a,e,b);c=g(c,e,b);"_NULL\x26UNDEFINED_"===a&&(a=Infinity);"_NULL\x26UNDEFINED_"===c&&(c=Infinity);l.isNumberOrNumberString(a)&&(a=Number(a));l.isNumberOrNumberString(c)&&(c=Number(c));var m=a>c?f:!f;Infinity===a?m=f:Infinity===c&&(m=!f);var p=0;a!==c&&(p=m?1:-1);return p}.bind(this));return d},convertingNullOrUndefinedAsPlaceholders:function(d){return null===
d||void 0===d?"_NULL\x26UNDEFINED_":d},keepFieldValueType:function(d,e,b){"number"===e&&(d=Number(d));b&&"_NULL\x26UNDEFINED_"!==d&&(d=Number(d));return d},calcValuesByFeaturesForCatetoryMode:function(d,e,b,a,c){return d.map(function(g){g=this.getValuesByValueFieldForCategoryMode(g,e.features,b,a);return this.calcValueByOperation(g,a,c)}.bind(this))},getValuesByValueFieldForCategoryMode:function(d,e,b,a){a="average"===a?"avg":a;if(b)var c=l.upperCaseString(d+"_"+a),g=l.lowerCaseString(d+"_"+a);return e.map(n.hitch(this,
function(a){if(a=a.attributes){var f;b?(f=a[c],"undefined"===typeof f&&(f=a[g])):f=a[d];return f}}))},_isNumber:function(d){return"[object number]"===Object.prototype.toString.call(d).toLowerCase()},_getDateUnit:function(d,h){var b=h;"automatic"===h&&(h=e(d[0]).local(),d=e(d[1]).local(),d=Math.round(d.diff(h,"minute",!0)),0<=d&&1>=d?b="second":1<d&&60>=d?b="minute":60<d&&1440>=d?b="hour":1440<d&&43200>=d?b="day":43200<d&&518400>=d?b="month":518400<d&&(b="year"));return b},_getTimeRange:function(d,
e){var b=d.map(n.hitch(this,function(a){return(a=a.attributes)&&a[e]})),b=b.filter(function(a){return!!a});d=Math.min.apply(Math,b);b=Math.max.apply(Math,b);return[d,b]},_getTimeTwixs:function(d,h,b){if(0>"year month day hour minute second automatic".split(" ").indexOf(b))return console.log("Invaild data formatter: "+b),!1;d=this._getTimeRange(d,h);if(d[0]===d[1])return!1;b=this._getDateUnit(d,b);h=this.getStartTimeByUnit(d[0],b);h=e(h).local();d=e(d[1]).local();d=h.twix(d).split(1,b);h={startValue:d[d.length-
1].end().valueOf(),endValue:Infinity};d.push(h);return{twixs:d,dateUnit:b}},getCluseringObj:function(d,e,b){var a={},c={};b?(d=this.getClusteringObjForDateType(d,e,b),a=d.notNullLabel,c=d.nullLabel):(a=this.separateFeaturesWhetherFieldValueNull(d,e),e=a.nullLabelFeatures,a=this.getClusteringObjByField(a.notNullLabelFeatures,d),c=this.getClusteringObjByField(e,d));return{notNullLabel:a,nullLabel:c}},calcValueByOperation:function(d,e,b){if(d&&1===d.length){if(!b)return d[0];if(!this._isNumber(d[0]))return 0}var a;
if(0!==d.length){a=0;"max"===e?a=-Infinity:"min"===e&&(a=Infinity);d=b?d.map(function(a){this._isNumber(a)||(a=0);return a}.bind(this)):d.filter(function(a){return this._isNumber(a)}.bind(this));var c=0;d.forEach(n.hitch(this,function(b){c++;"average"===e||"sum"===e?a+=b:"max"===e?a=Math.max(a,b):"min"===e&&(a=Math.min(a,b))}));0<c?"average"===e&&(a/=c):a=null}else a=null;return a},getClusteringObjByField:function(d,e){var b={};d.forEach(n.hitch(this,function(a){var c=a.attributes,c=c&&c[e],g=typeof c,
c=this.convertingNullOrUndefinedAsPlaceholders(c),f=null;b.hasOwnProperty(c)?(f=b[c],f.features.push(a),f.count++):(f={count:1,features:[a],type:g},b[c]=f)}));return b},_removeNaNDataItem:function(d){return d.filter(function(d){var b=!1;d=d.category;"number"===typeof d&&(b=isNaN(d));return!b})},separateFeaturesWhetherFieldValueNull:function(d,e){var b=[],a=[];Array.isArray(e)&&(a=e.filter(function(a){var c=a.attributes,c=c&&c[d];if(null===c||void 0===c)b.push(a);else return!0}));return{nullLabelFeatures:b,
notNullLabelFeatures:a}},getStartTimeByUnit:function(d,h){return e(d).startOf(h).utc().valueOf()},_mosaicFieldNameWithOperatorAndUpper:function(d,e){return l.upperCaseString(d+"_"+e)},_mosaicFieldNameWithOperatorAndLower:function(d,e){return l.lowerCaseString(d+"_"+e)},getClusteringObjForDateType:function(d,e,b){function a(a,f,b){a[f]?(a=a[f],a.count+=b.count,a.features=a.features.concat(b.features)):a[f]=b}function c(a,f,b,c){f=Number(f);c=this.getStartTimeByUnit(f,c);a[c]?(a=a[c],a.count+=b.count,
a.features=a.features.concat(b.features)):(b.originTime=f,a[c]=b)}function g(a,f,b){b[a[0].attributes[f]]={count:1,features:a};return b}var f=this.separateFeaturesWhetherFieldValueNull(d,e),m=f.notNullLabelFeatures;e={};e=this.getClusteringObjByField(f.nullLabelFeatures,d);f={};if(1===m.length)f=g.call(this,m,d,f,b);else if(0!==m.length){var p=this._getTimeTwixs(m,d,b.minPeriod);if(p){var r={},h=p.dateUnit;p.twixs.forEach(function(f){var c="undefined"!==typeof f.startValue?f.startValue:f.start().valueOf(),
g="undefined"!==typeof f.endValue?f.endValue:f.end().valueOf(),p={unit:h,count:0,features:[]};m.forEach(n.hitch(this,function(a){var f=a.attributes,f=f&&f[d];f>=c&&f<g&&(p.features.push(a),p.count++)}));b.isNeedFilled?a.call(this,r,c,p):0<p.count&&a.call(this,r,c,p)}.bind(this));var p={},q,l;for(q in r)r.hasOwnProperty(q)&&(l=r[q],c.call(this,p,q,l,h));for(q in p)if(p.hasOwnProperty(q)){l=p[q];var k=l.originTime;delete l.originTime;f[k]=l}}else f=g.call(this,m,d,f,b)}return{notNullLabel:f,nullLabel:e}},
_mapOptions:function(d,e){"feature"===e?(e=d.labelField,delete d.labelField,d.clusterField=e,d.showNullLabelData=!0):"category"===e?(e=d.categoryField,delete d.categoryField,d.clusterField=e,d.showNullLabelData=!0):"count"===e?(e=d.categoryField,delete d.categoryField,d.clusterField=e):"field"===e&&(d.showNullLabelData=!0);return d},_mapDataItemForStatisticsChart:function(d,e){var b,a,c;return d.map(function(g){b=g.label;delete g.label;a=g.values;delete g.values;c=g.features;delete g.features;"feature"===
e?(g.category=b,g.valueFields=a,g.dataFeatures=c):"category"===e?(g.category=b,g.valueFields=a,g.dataFeatures=c):"count"===e?(g.fieldValue=b,g.count=a[0],g.dataFeatures=c):"field"===e&&(g.label=b,g.value=a[0]);return g})},getFeatureModeStatisticsInfo:function(d){var e=new k({featureLayer:d.layerDefinition,popupInfo:d.popupFieldInfosObj});d=this._mapOptions(d,"feature");var b=d.clusterField,a=this.getFeatureModeStatisticsData(d),a=this.sortStatisticsData(a,"feature",d.sortOrder,b),a=this.getDataForMaxLabels(a,
d.maxLabels),a=e.getBestLabelDisplay(a,b,"feature"),a=e.keepStatisticsDataBestDecimalPlace(d,a,"feature");return this._mapDataItemForStatisticsChart(a,"feature")},getCategoryModeStatisticsInfo:function(d){var e=new k({featureLayer:d.layerDefinition,popupInfo:d.popupFieldInfosObj});d=this._mapOptions(d,"category");var b=d.clusterField,a=this.getCategoryModeStatisticsData(d),a=this.sortStatisticsData(a,"category",d.sortOrder,null,d.valueFields),a=this._removeNaNDataItem(a),a=this.getDataForMaxLabels(a,
d.maxLabels),a=e.getBestLabelDisplay(a,b,"category"),a=e.keepStatisticsDataBestDecimalPlace(d,a,"category");return this._mapDataItemForStatisticsChart(a,"category")},getCountModeStatisticsInfo:function(d){var e=new k({featureLayer:d.layerDefinition,popupInfo:d.popupFieldInfosObj});d=this._mapOptions(d,"count");var b=d.clusterField,a=this.getCountModeStatisticsData(d),a=this.sortStatisticsData(a,"count",d.sortOrder),a=this.getDataForMaxLabels(a,d.maxLabels),a=e.getBestLabelDisplay(a,b,"count");return this._mapDataItemForStatisticsChart(a,
"count")},getFieldModeStatisticsInfo:function(d){var e=new k({featureLayer:d.layerDefinition,popupInfo:d.popupFieldInfosObj});d=this._mapOptions(d,"category");var b=this.getFieldModeStatisticsData(d),b=this.sortStatisticsData(b,"field",d.sortOrder),b=this.getDataForMaxLabels(b,d.maxLabels),b=e.getBestLabelDisplay(b,null,"field"),b=e.keepStatisticsDataBestDecimalPlace(d,b,"field");return this._mapDataItemForStatisticsChart(b,"field")}}})},"jimu/_chartHelpUtils":function(){define("dojo/_base/declare jimu/utils dojo/_base/lang dojo/_base/config dojo/_base/Color ./_dateFormat moment/moment esri/lang esri/graphic esri/symbols/jsonUtils".split(" "),
function(n,e,k,l,d,h,b,a,c,g){return n(null,{constructor:function(a){a&&k.mixin(this,a);this.popupInfo||(this.popupInfo={});this.featureLayer||(this.featureLayer={});this._cachePlaces={}},setLayerFeatureLayer:function(a){this.featureLayer=a},setLayerObject:function(a){this.layerObject=a},setSymbolLayer:function(a){this.symbolLayer=a},setPopupInfo:function(a){this.popupInfo=a},setMap:function(a){this.map=a},getBestLabelDisplay:function(a,b,c){if("feature"===c)return this.betterDataCategoryForFeatureMode(a,
b);if("category"===c||"count"===c)return this.betterDataCategoryForCategoryCountMode(a,b);if("field"===c)return this.betterDataCategoryForFieldMode(a)},betterDataCategoryForFeatureMode:function(a,b){a.forEach(k.hitch(this,function(a){a.label=this.getBestDisplayValue(b,a.label)}));return a},betterDataCategoryForFieldMode:function(a){a.forEach(k.hitch(this,function(a){a.label=this.getFieldAlias(a.label)}));return a},betterDataCategoryForCategoryCountMode:function(a,b){a.forEach(k.hitch(this,function(a){a.label=
"undefined"!==typeof a.unit?this.getCategoryDisplayForDateUnit(a.label,a.unit):this.getBestDisplayValue(b,a.label)}));return a},keepStatisticsDataBestDecimalPlace:function(a,b,c){if("count"===c)return b;var f=a.valueFields,m=a.operation;this.cacheDecimalPlace(f,a.features,this.popupInfo);var g=null;"feature"===c||"category"===c?b.forEach(k.hitch(this,function(a){a.originalValues=k.clone(a.values);f.forEach(k.hitch(this,function(f,b){var c=a.values[b];this.isIntegerNumberField(f)&&"average"===m?c=
this.getBestValueForIntegerFieldAverage(c,6):(g=this._getFieldDecimalPlaceFromCache(f),c=this.formatValuePlaces(c,g));a.values[b]=c}))})):"field"===c&&f.forEach(k.hitch(this,function(a){b.some(k.hitch(this,function(f){if(f.label===a){var b=f.values[0];this.isIntegerNumberField(a)&&"average"===m?b=this.getBestValueForIntegerFieldAverage(b,6):(g=this._getFieldDecimalPlaceFromCache(a),b=this.formatValuePlaces(b,g));f.values[0]=b;return!0}return!1}))}));return b},isIntegerNumberField:function(a){if(!this.featureLayer||
!this.featureLayer.fields)return!1;var f=["esriFieldTypeSmallInteger","esriFieldTypeInteger"];return this.featureLayer.fields.some(k.hitch(this,function(b){return b.name===a&&0<=f.indexOf(b.type)}))},formatValuePlaces:function(a,b){return"number"!==typeof b||!a&&0!==a?a:a.toFixed(b)},getBestValueForIntegerFieldAverage:function(a,b){a=Number(a);if("number"!==typeof a)return a;var f=0,c=a.toString().split(".");1===c.length?f=0:2===c.length&&(f=c[1].length);return 0<f?(f>b&&(f=b),a=a.toFixed(f),parseFloat(a)):
a},_getFieldDecimalPlaceFromCache:function(a){var b;this._cachePlaces&&(a=this._cachePlaces[a],"number"===typeof a&&(b=a));return b},cacheDecimalPlace:function(a,b,c){this._cachePlaces={};if(a&&a.length){var f=a.filter(k.hitch(this,function(a){return this.isFloatNumberField(a)})),m={};f.forEach(k.hitch(this,function(a){m[a]=[]}));b&&0<b.length&&b.forEach(k.hitch(this,function(a){var b=a.attributes;b&&f.forEach(k.hitch(this,function(a){var f=b[a];"number"===typeof f&&m[a].push(f)}))}));f.forEach(k.hitch(this,
function(a){var b=this.getFieldInfoFromPopupInfo(c,a);this._cachePlaces[a]=0;var f=m[a];if(0<f.length)try{var g=this.getBestDecimalPlaceForArrayValues(f);this._cachePlaces[a]=g}catch(t){this._cachePlaces[a]=0,console.error(t)}c&&((b=this.getPlacesFromPopupFieldInfo(b))||0===b)&&(this._cachePlaces[a]=b)}))}},getBestDecimalPlaceForArrayValues:function(a){var b=0,f={};a.forEach(function(a){a=a.toString().split(".");var b=null;1===a.length?b=0:2===a.length&&(b=a[1].length);null!==b&&(f[b]=void 0===f[b]?
1:f[b]+1)});a=null;for(var c in f){c=parseInt(c,10);var g=f[c];a?g>a.value&&(a={key:c,value:g}):a={key:c,value:g}}a&&(b=parseInt(a.key,10));return b},getFieldInfoFromPopupInfo:function(a,b){var f=null;return a&&a.fieldInfos?f=a.fieldInfos.filter(function(a){return a.fieldName===b})[0]:f},getPlacesFromPopupFieldInfo:function(a){return a&&a.format&&a.format.places},getAliasFromPopupInfo:function(a,b){var f=b;if(!a||!a.fieldInfos)return f;(a=a.fieldInfos)&&0<a.length&&a.some(function(a){if(a.fieldName===
b)return f=a.label,!0});return f},isFloatNumberField:function(a){if(!this.featureLayer||!this.featureLayer.fields)return!1;var b=["esriFieldTypeSingle","esriFieldTypeDouble"];return this.featureLayer.fields.some(k.hitch(this,function(f){return f.name===a&&0<=b.indexOf(f.type)}))},isNumberField:function(a){if(!this.featureLayer||!this.featureLayer.fields)return!1;var b=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return this.featureLayer.fields.some(k.hitch(this,
function(f){return f.name===a&&0<=b.indexOf(f.type)}))},isDateField:function(a){return(a=this.getFieldInfo(a))?"esriFieldTypeDate"===a.type:!1},getFieldInfo:function(a){if(this.featureLayer)for(var b=this.featureLayer.fields,f=0;f<b.length;f++)if(b[f].name===a)return b[f];return null},getFieldAliasArray:function(a){return a.map(k.hitch(this,function(a){return this.getFieldAlias(a)}))},getBestDisplayValue:function(a,b){if("_NULL\x26UNDEFINED_"===b)return"null";if(this.isDateField(a))return this.formatedDateByPopupInfoOrLocal(a,
b);var f={};f[a]=b;f=e.getDisplayValueForCodedValueOrSubtype(this.layerObject||this.featureLayer,a,f);f.isCodedValueOrSubtype?b=f.displayValue:this.isNumberField(a)&&(a=this.getFieldInfoFromPopupInfo(this.popupInfo,a),b=e.localizeNumberByFieldInfo(b,a));return b},formatedDateByPopupInfoOrLocal:function(b,c,g){g||(g=this.popupInfo);a:{if(g&&a.isDefined(g.fieldInfos))for(var f=0,m=g.fieldInfos.length;f<m;f++){var d=g.fieldInfos[f];if(d.fieldName===b){b=d.format;break a}}b=null}c=Number(c);return e.fieldFormatter.getFormattedDate(c,
b)},getDisplayValForNumberCodedValueSubTypes:function(a,b){var c=this.tryLocaleNumber(b,a);if(this.featureLayer&&this.featureLayer.typeIdField===a){var f=this.featureLayer.types;if(f&&0<f.length&&(f=f.filter(k.hitch(this,function(a){return a.id===b})),0<f.length))return c=f[0].name}(a=this.getFieldInfo(a))&&a.domain&&(a=a.domain.codedValues)&&0<a.length&&a.some(function(a){return a.code===b?(c=a.name,!0):!1});return c},tryLocaleNumber:function(b,c){var f=b;if(a.isDefined(b)&&isFinite(b))try{var m;
if(c&&this.isNumberField(c)){var g=this.popupInfo[c];m=g&&k.exists("format.places",g)?e.localizeNumberByFieldInfo(b,g):e.localizeNumber(b)}else m=b;"string"===typeof m&&(f=m)}catch(q){console.error(q)}return f+""},getCategoryDisplayForDateUnit:function(a,b){if(!b)return a;a=Number(a);return this._getFormatteredDate(a,b)},_getFormatteredDate:function(a,c){var f=this._getDateTemplate(c);0<=["year","month","day"].indexOf(c)?f=e.localizeDate(new Date(a),{selector:"date",datePattern:f.date}):(c=e.localizeDate(new Date(a),
{selector:"date",datePattern:f.date}),a=b(a).format(f.time),f=c+f.connector+a);return f},_getDateTemplate:function(a){var b=h[l.locale];(b=b||{},b.date)||(b.date={"short":"short"});b&&!b.time&&(b.time={medium:"HH:mm:ss a"});b&&!b.connector&&(b.connector=" ");b&&!b.sNoDay&&(b.sNoDay="MMM, y");var c={};"year"===a?c.date="y":"month"===a?c.date=b.date.sNoDay:"day"===a?c.date=b.date["short"]:"hour"===a?(c.date=b.date["short"],c.time="HH a",c.connector=b.connector):"minute"===a?(c.date=b.date["short"],
c.time="HH:mm a",c.connector=b.connector):"second"===a&&(c.date=b.date["short"],c.time=b.time.medium,c.connector=b.connector);return c},_getSymbolLayerGraphics:function(a,b){if(!this.symbolLayer)return null;if(!this.symbolLayer.refreshInterval&&this.symbolGraphics&&!1===this.symbolGraphics.filterByExtent&&!1===this.symbolGraphics.useSelection)return this.symbolGraphics.graphics;var c=null;this.map&&this.symbolLayer&&(c=e.getClientFeaturesFromMap(this.map,this.symbolLayer,b,!!a));this.symbolGraphics=
{filterByExtent:a,useSelection:b,graphics:c};return c},_isContainAttr:function(a,b){if("object"!==typeof b||"object"!==typeof b)return!1;var c=!0,f;for(f in b)b.hasOwnProperty(f)&&(c=b[f]===a[f]);return c},_getFeaturesByAttr:function(a,b){if(b){var c=null;b.some(function(b){return this._isContainAttr(b.attributes,a)?(c=b,!0):!1}.bind(this));return c}},_getFeaturesByClusterfield:function(a,b,c,g){var f=this._getSymbolLayerGraphics(c);if(f)return c=null,a=this.clientStatisticsUtils.getCluseringObj(a,
f,g),(b=k.mixin(a.notNullLabel,a.nullLabel)[b])&&b.features&&b.features.length&&(c=b.features),c},_getFeatureForSerieData:function(a,b,g){var f=b.clusterField,m=b.mode,d=b.filterByExtent;b=b.useSelection;var e={};e[f]=a.name;if("feature"===m)return this._getFeatureBySerieDataItem(a,f,g,d,b);if("category"===m||"count"===m)return new c(null,null,e)},_getFeatureBySerieDataItem:function(a,b,c,g,d){var f={};f[b]=a.name;f[c]=Number("undefined"!==typeof a.originValue?a.originValue:a.value);a=this._getSymbolLayerGraphics(g,
d);return this._getFeaturesByAttr(f,a)},_getFeatureBycsuDataItem:function(a,b,c,g,d,e){var f={};f[b]=a.label;a=a.originalValues||a.values;f[c]=Number(a&&a[g]);c=this._getSymbolLayerGraphics(d,e);return this._getFeaturesByAttr(f,c)},bindChartEvent:function(a,b,c){var f=b.filterByExtent,g=b.useSelection,m=b.clusterField,d=b.valueFields,e=null;"undefined"!==b.dateConfig&&(e=b.dateConfig);this.highLightColor=b.highLightColor||"#00ffff";var p=b.mode;if(this.map&&0!==c.length){b=k.hitch(this,function(a){if("series"===
a.componentType){var b=null,q=this._getSymbolLayerGraphics(f,g);if("field"===p)b=q;else if(q=c[a.dataIndex])if("feature"===p){var r=a.seriesIndex,l=d[r];if(!l)return;(q=this._getFeatureBycsuDataItem(q,m,l,r,f,g))&&(b=[q])}else q=q.label,"undefined"!==typeof q&&(b=this._getFeaturesByClusterfield(m,q,f,e));b&&"mouseover"===a.type&&(this._mouseoverFeatures=b,this._mouseOverChartItem(b))}});var l=k.hitch(this,function(){this._mouseoverFeatures&&(this._mouseOutChartItem(this._mouseoverFeatures),this._mouseoverFeatures=
null)});[{name:"mouseover",callback:b},{name:"mouseout",callback:l}].forEach(k.hitch(this,function(b){a.chart.off(b.name);a.chart.on(b.name,k.hitch(this,function(a){"mouseover"===a.type?(this._hasTriggerMouseoverEvent||(this._hasTriggerMouseoverEvent=!0,b.callback(a)),setTimeout(k.hitch(this,function(){this._hasTriggerMouseoverEvent=!1},500))):"mouseout"===a.type&&b.callback(a)}))}))}},_mouseOverChartItem:function(a){if(this.featureLayer&&this.featureLayer.getMap()&&this.featureLayer.visible){var b=
e.getTypeByGeometryType(this.featureLayer.geometryType);a.forEach(k.hitch(this,function(a){a._originalSymbol=a.symbol}));var f=null;if("point"===b)f=this._getHighLightMarkerSymbol(),this.tempGraphics=[],a.forEach(k.hitch(this,function(a){a=new c(a.geometry,f);this.tempGraphics.push(a);this.featureLayer.add(a)}));else if("polyline"===b)f=this._getHighLightLineSymbol(this.highLightColor),a.forEach(k.hitch(this,function(a){a.setSymbol(f)}));else if("polygon"===b){var g=this.featureLayer.getSelectedFeatures()||
[];a.forEach(k.hitch(this,function(a){var b=0<=g.indexOf(a),b=this._getHighLightFillSymbol(this.featureLayer,a,b);a.setSymbol(b)}));this._getSymbolLayerGraphics(!1,!1).length!==a.length&&"polygon"===b&&(a.forEach(k.hitch(this,function(a){this.featureLayer.remove(a)})),a.forEach(k.hitch(this,function(a){this.featureLayer.add(a)})))}}},_mouseOutChartItem:function(a){this._removeTempGraphics();a.forEach(k.hitch(this,function(a){a.setSymbol(a._originalSymbol||null)}))},_removeTempGraphics:function(){if(this.featureLayer&&
this.tempGraphics&&0<this.tempGraphics.length)for(;0<this.tempGraphics.length;)this.featureLayer.remove(this.tempGraphics[0]),this.tempGraphics.splice(0,1);this.tempGraphics=null},_getHighLightMarkerSymbol:function(){var a=g.fromJson({color:[255,255,255,0],size:18,angle:0,xoffset:0,yoffset:0,type:"esriSMS",style:"esriSMSSquare",outline:{color:[0,0,128,255],width:.75,type:"esriSLS",style:"esriSLSSolid"}});a.setSize(30);a.outline.setColor(new d(this.highLightColor));return a},_getHighLightLineSymbol:function(a){var b=
g.fromJson({color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"});b.setColor(new d(a||this.highLightColor));return b},_getDefaultHighLightFillSymbol:function(){var a=g.fromJson({color:[0,255,255,128],outline:{color:[0,255,255,255],width:1.5,type:"esriSLS",style:"esriSLSSolid"},type:"esriSFS",style:"esriSFSSolid"});a.outline.setColor(new d(this.highLightColor));return a},_getSymbolByRenderer:function(a,b){var c=this._getDefaultHighLightFillSymbol(),f=this.getVisualVariableByType("colorInfo",
a.visualVariables);if(f){if(a=a.getColor(b,{colorInfo:f}))a=k.clone(a),c.setColor(a)}else c=a.getSymbol(b);return c},getVisualVariableByType:function(a,b){return b&&(b=b.filter(function(b){return b.type===a&&!b.target}),b.length)?b[0]:null},_getHighLightFillSymbol:function(a,b,c){var f=null,m=b.symbol,f=a.renderer;!m&&f&&(m=this._getSymbolByRenderer(f,b));m&&"function"===typeof m.setOutline?(f=g.fromJson(m.toJson()),b=1.5,m.outline&&0<m.outline.width&&(b=m.outline.width+1),c=this._getHighLightLineSymbol(c?
"#ff0000":"#00ffff"),c.setWidth(b),f.setOutline(c)):f=this._getDefaultHighLightFillSymbol();return f},_isNumberField:function(a){var b=["esriFieldTypeSmallInteger","esriFieldTypeInteger","esriFieldTypeSingle","esriFieldTypeDouble"];return this.featureLayer.fields.some(k.hitch(this,function(c){return c.name===a&&0<=b.indexOf(c.type)}))},getFieldAlias:function(a){var b;this.popupInfo&&(b=this.getAliasFromPopupInfo(this.popupInfo,a));b||(b=a,(a=this.getFieldInfo(a))&&a.alias&&(b=a.alias));return b},
_removeDuplicateElementForObjArray:function(a){if(!Array.isArray(a))return a;var b=[];b.push(a[0]);a.forEach(function(a){b.some(function(b){return e.isEqual(b,a)})||b.push(a)});return b},assigneeSettingColor:function(a,b,c){if(!b||!b.length)return b;var f=a.seriesStyle;if(!f)return b;"layerSymbol"===f.type?b=this._assigneeStyleLayerSymbolColor(b,c):"series"===f.type?b=this._assigneeStyleSeriesColor(a,b):"custom"===f.type&&(b=this._assigneeStyleCustomColor(a,b));return b},_assigneeStyleCustomColor:function(a,
b){a=a.seriesStyle;if(!a||!a.customColor)return b;var c=a.customColor;a=c.categories;c=c.others;if(!(a&&a.length||c&&c.length))return b;c&&c.length&&this._setCustomOthersColor(c,b);a&&a.length&&this._setCustomCategoriesColor(a,b)},_setCustomCategoriesColor:function(a,b){b.forEach(function(b){(b=b.data)&&b.length&&b.forEach(function(b){if("undefined"!==typeof b.name){var c=this._getMatchingCustomColor(b.name,a);this.setColorToDataItem(b,c)}}.bind(this))}.bind(this))},_getMatchingCustomColor:function(a,
b){var c=!1;if(!b||!b.length)return c;(b=b.filter(function(b){return b.id===a})[0])&&b.color&&(c=b.color);return c},_getMatchingCustomLabel:function(a,b){var c=!1;if(!b||!b.length)return c;(b=b.filter(function(b){return b.id===a})[0])&&b.label&&(c=b.label);return c},_setCustomOthersColor:function(a,b){this._setOtherColorForCustomColor(a,b);this._setNullLabelColorForCustomColor(a,b)},_setOtherColorForCustomColor:function(a,b){(a=a.filter(function(a){return"others"===a.id})[0])&&a.color&&this.setColorToAllSerieDataItem(b,
a.color)},_setNullLabelColorForCustomColor:function(a,b){if((a=a.filter(function(a){return"null"===a.id})[0])&&a.color){var c=a.color;b.forEach(function(a){(a=a.data)&&a.length&&a.forEach(function(a){a.name&&"_NULL\x26UNDEFINED_"===a.name&&this.setColorToDataItem(a,c)}.bind(this))}.bind(this))}},_assigneeStyleSeriesColor:function(a,b){var c=a.seriesStyle;if(!c||!c.styles||!c.styles[0])return b;var f=a.mode,g=a.area;return b.map(function(a){var b=null,d=a.type;if("field"===f)"line"===d?(b=c.styles[0].style,
a=this._setStyleToSerie(b,a,g)):(d=a.data)&&d[0]&&(a.data=d.map(function(a){b=this._getMatchingStyle(a.name,c);return this.setStyleToSerieDataItem(b,a)}.bind(this)));else if("column"===d||"bar"===d||"line"===d)"count"===f?(b=c.styles[0].style,a=this._setStyleToSerie(b,a,g)):"undefined"!==typeof a.name&&(b=this._getMatchingStyle(a.name,c))&&(a=this._setStyleToSerie(b,a,g));return a}.bind(this))},_assigneeStyleLayerSymbolColor:function(a,b){a.forEach(function(a){var c=a.name;(a=a.data)&&a.length&&a.forEach(function(a){var f=
[this._getFeatureForSerieData(a,b,c)];if(f=this._getSymbolColorForDataItem(f))a.itemStyle={color:f}}.bind(this))}.bind(this))},_setStyleToSerie:function(a,b,c){b.itemStyle||(b.itemStyle={});a&&"undefined"!==typeof a.color&&(Array.isArray(a.color)?b.itemStyle.color=a.color[0]:b.itemStyle.color=a.color);a&&"undefined"!==typeof a.opacity&&(c?(b.areaStyle||(b.areaStyle={}),b.areaStyle.opacity=1-parseFloat(a.opacity/10)):b.itemStyle.opacity=1-parseFloat(a.opacity/10));return b},_getMatchingStyle:function(a,
b){var c=null;b=b.styles;if(!b||!b[0]||""===a)return c;b.forEach(function(b){b.name===a&&(c=b.style)});return c},_getSymbolColorForDataItem:function(a){var b=!1;if(!this.symbolLayer)return b;a=a&&a[0];return a?b=this._getColorForFeature(this.symbolLayer.renderer,a):b},_getColorForFeature:function(a,b){var c=!1,f=this.getVisualVariableByType("colorInfo",a.visualVariables);f?(a=a.getColor(b,{colorInfo:f}))&&(c=this._convertToEchartsRbga(a)):(a=a.getSymbol(b))&&"undefined"!==typeof a.color&&(c=this._convertToEchartsRbga(a.color));
return c},_convertToEchartsRbga:function(a){if(!a||"undefined"===typeof a.r)return a;a=window.JSON.parse(window.JSON.stringify(a));var b;b="rgba("+(a.r+",");b+=a.g+",";b+=a.b+",";return b+=a.a+")"},getColors:function(a,b){var c=[];if(2===a.length)c=this._createGradientColors(a[0],a[a.length-1],b);else{for(var f=Math.ceil(b/a.length),g=0;g<f;g++)c=c.concat(a);c=c.slice(0,b)}return c},_createGradientColors:function(a,b,c){var f=[];a=new d(a);var g=new d(b);b=(g.r-a.r)/c;for(var m=(g.g-a.g)/c,g=(g.b-
a.b)/c,e=new d,p=0,l=0,h=0,w=0;w<c;w++)p=parseInt(a.r+b*w,10),l=parseInt(a.g+m*w,10),h=parseInt(a.b+g*w,10),e.setColor([p,l,h]),f.push(e.toHex());return f},setStyleToSerieDataItem:function(a,b){b.itemStyle||(b.itemStyle={});a&&"undefined"!==typeof a.color&&(Array.isArray(a.color)?b.itemStyle.color=a.color[0]:b.itemStyle.color=a.color);a&&"undefined"!==typeof a.opacity&&(b.itemStyle.opacity=1-parseFloat(a.opacity/10));return b},setColorToSerie:function(a,b){if(!a||"object"!==typeof a||Array.isArray(a))return a;
a.itemStyle||(a.itemStyle={});b&&(a.itemStyle.color=b)},setColorToDataItem:function(a,b){if(!a||"object"!==typeof a)return a;a.itemStyle||(a.itemStyle={});b&&(a.itemStyle.color=b)},setColorToAllSerieDataItem:function(a,b){a.forEach(function(a){(a=a.data)&&a.length&&a.forEach(function(a){this.setColorToDataItem(a,b)}.bind(this))}.bind(this))},_updateDataItemNameForCustom:function(a,b,c){var f;"undefined"!==typeof a.name&&(f=a.name,"_NULL\x26UNDEFINED_"===a.name&&b?f=b:(b=this._getMatchingCustomLabel("undefined"!==
typeof a.originName?a.originName:a.name,c))&&(f=b),a.name=f);return f},_updateSerieDataItemName:function(a,b,c){var f=a.name,g=f,g=a.unit&&f?this.getCategoryDisplayForDateUnit(f,a.unit):"field"!==b?this.getBestDisplayValue(c,f):this.getFieldAlias(f);a.name=g;a.originName=f;return g},updateChartSeriesDisplayName:function(a,b,c){var f=c.clusterField,g=c.mode;c=a.series;var d=[];b=b.seriesStyle;var e,m,p;c.forEach(function(a,b){a.name&&(a.name=this.getFieldAlias(a.name));(a=a.data)&&a.length&&a.forEach(function(a,
c){p=this._updateSerieDataItemName(a,g,f);0===b&&(d[c]=p)}.bind(this))}.bind(this));"custom"===b.type&&((b=b.customColor)&&b.categories&&b.categories.length&&(e=b.categories,b=b.others||[],(b=b.filter(function(a){return"null"===a.id})[0])&&b.label&&(m=b.label)),c.forEach(function(a,b){(a=a.data)&&a.length&&a.forEach(function(a,c){p=this._updateDataItemNameForCustom(a,m,e);0===b&&(d[c]=p)}.bind(this))}.bind(this)));a.labels=null;a.labels=d}})})},"jimu/_dateFormat":function(){define([],function(){return{ar:{date:{"short":"d/M/y",
medium:"dd/MM/y","long":"d MMMM. y",onlyDate:"dd/MM",mNoDay:"MM/y",sNoDay:"M/y"},time:{"short":"h:mm a",medium:"h:mm:ss a"}},bs:{date:{"short":"d.M.yy.",medium:"d. MMM. y.","long":"d. MMMM y.",onlyDate:"d. MMM.",mNoDay:"MMM. y.",sNoDay:"M.yy"}},cs:{date:{"short":"dd.MM.yy",medium:"d. M. y",onlyDate:"d. M.",mNoDay:"M. y",sNoDay:"MM.yy"}},da:{date:{"short":"dd/MM/y",medium:"d. MMM y","long":"d. MMMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM/y"}},de:{date:{"short":"dd.MM.yy",medium:"dd.MM.y",onlyDate:"dd.MM."},
connector:" , ",mNoDay:"MM.y",sNoDay:"MM.yy"},el:{date:{"short":"d/M/yy",medium:"d MMM y",onlyDate:"d MMM"},connector:" , ",mNoDay:"MMM y",sNoDay:"M/yy"},en:{date:{"short":"M/d/yy",medium:"MMM d, y",onlyDate:"MMM d",mNoDay:"MMM, y",sNoDay:"M/yy"}},es:{date:{"short":"d/M/yy",medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"M/yy"}},et:{date:{"short":"d.MM.y",medium:"d. MMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM.y"},time:{"short":"H:mm",medium:"H:mm:ss"}},fi:{date:{"short":"d.M.y",medium:"d.M.y",
onlyDate:"d.M.",mNoDay:"M.y",sNoDay:"M.y"},connector:" 'klo' "},fr:{date:{"short":"dd/MM/y",medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM/y"},connector:" '\u00e0' "},he:{date:{"short":"dd/MM/yy",medium:"d '\u05d1'MMM y",onlyDate:"d '\u05d1'MMM",mNoDay:"'\u05d1'MMM y",sNoDay:"MM/yy"},connector:" , "},hi:{date:{"short":"d/M/yy",medium:"dd/MM/y","long":"d MMMM y",onlyDate:"dd/MM",mNoDay:"MM/y",sNoDay:"M/yy"},time:{"short":"h:mm a",medium:"h:mm:ss a",sNoDay:""},connector:" , "},hr:{date:{"short":"d.M.y",
medium:"d. MMM y.",onlyDate:"d. MMM",mNoDay:"MMM y.",sNoDay:"M.y"}},id:{"short":"dd/MM/yy",date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM/yy"}},it:{date:{medium:"dd MMM y","long":"d MMMM y",onlyDate:"dd MMM",mNoDay:"MMM y",sNoDay:"MM/yy"},connector:" , "},ja:{date:{medium:"y/MM/dd",onlyDate:"MM/dd",mNoDay:"y/MM",sNoDay:"y/MM"},time:{"short":"a h:mm",medium:"a h:mm:ss"}},ko:{date:{medium:"y. M. d.",onlyDate:"M. d.",mNoDay:"y. M.",sNoDay:"yy. M."}},lt:{date:{medium:"y-MM-dd","long":"y 'm'. MMMM d 'd'.",
onlyDate:"MM-dd",mNoDay:"y-MM",sNoDay:"y-MM"},time:{medium:"HH:mm:ss"}},lv:{date:{"short":"dd.MM.y",medium:"y. 'gada' d. MMM.","long":"y. 'gada' d. MMMM",onlyDate:"d. MMM.",mNoDay:"y. 'gada' MMM.",sNoDay:"MM.y"}},nb:{date:{"short":"dd.MM.y",medium:"d. MMM y","long":"d. MMMM y",onlyDate:"d. MMM",mNoDay:"MMM y",sNoDay:"MM.y"},time:{"short":"HH:mm",medium:"HH:mm:ss"},connector:" , "},nl:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM-yy"}},pl:{date:{medium:"d MMM y",onlyDate:"d MMM",
mNoDay:"MMM y",sNoDay:"MM.y"},connector:" , "},"pt-br":{date:{"short":"dd/MM/y",medium:"d 'de' MMM 'de' y",onlyDate:"d 'de' MMM",mNoDay:"MMM 'de' y",sNoDay:"MM/y"}},"pt-pt":{date:{medium:"dd/MM/y",onlyDate:"dd/MM",mNoDay:"MM/y",sNoDay:"MM/yy"}},ro:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"},connector:" , "},ru:{date:{"short":"dd.MM.y",medium:"d MMM y '\u0433.'",onlyDate:"d MMM",mNoDay:"MMM y '\u0433.'",sNoDay:"MM.y"},connector:" , "},sr:{date:{medium:"dd.MM.y.",onlyDate:"dd.MM.",
mNoDay:"MM.y.",sNoDay:"M.yy."},time:{"short":"HH:mm",medium:"HH:mm:ss"}},sv:{date:{medium:"d MMM. y",onlyDate:"d MMM.",mNoDay:"MMM. y",sNoDay:"y-MM"}},th:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"M/yy"}},tr:{date:{medium:"d MMM y",onlyDate:"d MMM",mNoDay:"MMM y",sNoDay:"MM.y"}},vi:{date:{"short":"dd/MM/y",medium:"d MMM, y","long":"'Ng\u00e0y' dd 'th\u00e1ng' MM 'n\u0103m' y",onlyDate:"d MMM",mNoDay:"MMM, y",sNoDay:"MM/y"},time:{"short":"hh:mm a",medium:"hh:mm:ss a"},connector:" , "},
"zh-cn":{date:{"short":"y/M/d",medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"y/M"}},"zh-hk":{date:{medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"M/y"}},"zh-tw":{date:{medium:"y'\u5e74'M'\u6708'd'\u65e5'",onlyDate:"M'\u6708'd'\u65e5'",mNoDay:"y'\u5e74'M'\u6708'",sNoDay:"y/M"}}}})},"jimu/dijit/Chart":function(){define("dojo/_base/declare dijit/_WidgetBase dojo/_base/lang dojo/_base/html dojo/Evented libs/echarts/echarts jimu/utils ./_chartUtils ./_Gauge ./_ChartOptionFactory libs/echarts/light libs/echarts/dark".split(" "),
function(n,e,k,l,d,h,b,a,c,g){return n([e,d],{baseClass:"jimu-dijit-chart",templateString:"\x3cdiv\x3e\x3c/div\x3e",declaredClass:"jimu.dijit.chart",config:null,postCreate:function(){this.inherited(arguments);this._initChart()},updateConfig:function(a){if(!a)return!1;this.config=a;this._specialThemeByConfig(a);var b=this._chartFactory(a);this.chart.setOption(b,!0);this._settingByGrid(a,b);return!0},_settingByGrid:function(a,b){if("gauge"===a.type)return this._resetGaugePosition(a);var c=this.chartUtils.getAxisZeroPosition();
a.layout=this.chartUtils.calcDefaultLayout(a);this.chartUtils.isAxisChart(a)&&(b=this.chartUtils.settingGrid(b,a),b=this.chartUtils.settingDataZoom(b,a,c));b=this.chartUtils.settingChartLayout(b,a);this.chart.setOption(b,!1)},_resetGaugePosition:function(a){this._resetGaugeGrid(a);this._resetGaugeGraphic(a)},setConfig:function(a){if(!a)return!1;this.config=a;this._specialThemeByConfig(this.config);this.clear();var b=this._chartFactory(this.config);this.chart.setOption(b,!0);this._setAixsGrid(a,b);
this._resetGaugePosition(a,b);return!0},destroy:function(){this._offEvents();this.clear();this.inherited(arguments)},_chartFactory:function(a){return this.option=this.chartOptionFactory.produceOption(a)},bindEvents:function(a){this.chart&&a.events&&a.events.length&&(this._offEvents(),a.events.forEach(k.hitch(this,function(a){this.chart.on(a.name,a.callback)})))},_offEvents:function(){this.config.events&&this.config.events[0]&&this.config.events.forEach(k.hitch(this,function(a){this.chart.off(a.name)}))},
getDataURL:function(){if(this.chart)return this.chart.getDataURL()},clear:function(){this.chart&&this.chart.clear()},resize:function(a,b){this.chart&&(l.setStyle(this.domNode,{width:a||"100%",height:b||"100%"}),this.chart.resize(),this._resizeDataZoom(),this._resetGaugePosition(this.config))},_resizeDataZoom:function(){var a=this.option,b=this.config;if(a&&b){var c=this.chartUtils.getAxisZeroPosition(),a=this.chartUtils.settingDataZoom(a,b,c);this.chart.setOption(a)}},_setAixsGrid:function(a,b){this.chartUtils.isAxisChart(a)&&
(b=this.chartUtils.settingGrid(b,a),this.chart.setOption(b,!1))},_resetGaugeGraphic:function(a){"gauge"===a.type&&this.gauge.resetGraphic(a)},_resetGaugeGrid:function(a){"gauge"===a.type&&this.gauge.resetGrid(a)},_specialChartTheme:function(){this.chart&&(this.chart._theme.tooltip.axisPointer={type:"cross",label:{show:!0,precision:2,formatter:function(a){return"number"===typeof a.value?(a=parseFloat(a.value).toFixed(2),this.chartUtils.tryLocaleNumber(a)):a.value}.bind(this)},lineStyle:{color:"#27727B",
type:"dashed"},crossStyle:{color:"#27727B"},shadowStyle:{color:"rgba(200,200,200,0.3)"}},this.chart._theme.valueAxis||(this.chart._theme.valueAxis={}),this.chart._theme.valueAxis.axisLabel||(this.chart._theme.valueAxis.axisLabel={}),this.chart._theme.valueAxis.axisLabel.formatter=function(a){return b.localizeNumber(a)})},_specialThemeByConfig:function(a){this._initChartTheme();a.color&&a.color[0]&&(this.chart._theme.color=a.color);this.chart._theme.tooltip.confine=!0;var b="percent"===a.stack;this.chart._theme.tooltip.formatter=
function(a){return this.chartUtils.handleToolTip(a,null,!1,b)}.bind(this)},_initChartTheme:function(){this.chart&&(this.chart._theme||(this.chart._theme={}),this.chart._theme.tooltip||(this.chart._theme.tooltip={}),this.chart._theme.valueAxis||(this.chart._theme.valueAxis={}),this.chart._theme.valueAxis.axisLabel||(this.chart._theme.valueAxis.axisLabel={}))},_initChart:function(){this.chart=h.init(this.domNode,this.config&&this.config.theme||"light");this.chartUtils=new a({chart:this.chart});this.gauge=
new c({chart:this.chart,chartUtils:this.chartUtils});this.chartOptionFactory=new g({chart:this.chart,gauge:this.gauge,chartUtils:this.chartUtils});this._specialChartTheme(this.config)}})})},"jimu/dijit/_chartUtils":function(){define(["dojo/_base/declare","jimu/utils","esri/lang","dojo/_base/lang","dojo/i18n!dojo/cldr/nls/number"],function(n,e,k,l,d){var h={curved:{name:"",type:"gauge",center:["50%","60%"],startAngle:200,endAngle:-20,axisLine:{lineStyle:{color:[[.31,"#5CB4CA"],[1,"#E5E5E5"]],shadowColor:"rgba(0, 0, 0, 0.5)",
shadowBlur:0}},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{distance:-52,textStyle:{color:"#000"}},pointer:{length:"65%",width:5},itemStyle:{opacity:.7},detail:{show:!0,offsetCenter:[0,"68%"],textStyle:{color:"#24B5CC"}},title:{show:!1},data:[{value:0}],animationEasingUpdate:"bounceOut",animationDurationUpdate:500},vertical:{yAxis:{show:!0,offset:-10,type:"value",interval:1,scale:!1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",
fontStyle:"normal",fontWeight:"normal"}},splitLine:{show:!1}},xAxis:{show:!1,type:"category",data:[]},series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{color:"#E5E5E5"},barGap:"-100%",data:[100],z:1},{name:"",type:"bar",barWidth:30,label:{show:!0,position:"insideTopLeft",offset:[30,-15],textStyle:{}},data:[{value:40,label:{textStyle:{color:"#24B5CC",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},itemStyle:{}}],itemStyle:{color:"#24B5CC"},z:10}]},
horizontal:{xAxis:{show:!0,offset:-27,type:"value",scale:!1,interval:1,axisTick:{show:!1},axisLine:{show:!1},axisLabel:{show:!1,showMinLabel:!0,showMaxLabel:!0,textStyle:{color:"#949494",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},splitLine:{show:!1}},yAxis:{show:!1,type:"category",data:[]},series:[{name:"",type:"bar",barWidth:30,silent:!0,animation:!1,itemStyle:{color:"#E5E5E5"},barGap:"-100%",data:[100],z:1},{name:"",type:"bar",barWidth:30,label:{show:!0,position:"top",
offset:[20,0],textStyle:{}},data:[{value:40,label:{textStyle:{color:"#24B5CC",fontStyle:"normal",fontWeight:"normal",fontFamily:"Avenir Next",fontSize:12}},itemStyle:{}}],itemStyle:{color:"#24B5CC"},z:10}]}};return n([],{constructor:function(b){this.chart=b&&b.chart;this.horIconUrl="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjdweCIgaGVpZ2h0PSI1cHgiIHZpZXdCb3g9IjAgMCA3IDUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNhcmRXaWRnZXRfTGF5b3V0NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg3NS4wMDAwMDAsIC0yOTcuMDAwMDAwKSIgZmlsbD0iIzkzOTM5MyI+DQogICAgICAgICAgICA8ZyBpZD0iQ2FyZDJfSG9yaXpvbnRhbEdhdWdlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTIuMDAwMDAwLCAxODEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikhvcml6b250YWxHYXVnZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDY2LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjguNTAwMDAwLCA0Mi41MDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMjguNTAwMDAwLCAtNDIuNTAwMDAwKSB0cmFuc2xhdGUoODYuMDAwMDAwLCAtODYuMDAwMDAwKSIgaWQ9Ik51bWJlcnMrVHJpYW5nbGVzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLjAwMDAwMCwgMC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iVHJpYW5nbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDIuNTAwMDAwLCAxNzAuNTQzODAzKSByb3RhdGUoLTE4MC4wMDAwMDApIHRyYW5zbGF0ZSgtMi41MDAwMDAsIC0xNzAuNTQzODAzKSAiIHBvaW50cz0iNSAxNzAuNTQzODAzIC0xLjcwNTMwMjU3ZS0xMyAxNzQuMDQzODAzIC0xLjY5NjQyMDc4ZS0xMyAxNjcuMDQzODAzIj48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4\x3d";
this.verIconUrl="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI4cHgiIHZpZXdCb3g9IjAgMCA1IDgiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkNhcmRXaWRnZXRfTGF5b3V0NCIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTg3Ni4wMDAwMDAsIC0zMjQuMDAwMDAwKSIgZmlsbD0iIzkzOTM5MyI+DQogICAgICAgICAgICA8ZyBpZD0iQ2FyZDJfSG9yaXpvbnRhbEdhdWdlIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg3OTIuMDAwMDAwLCAxODEuMDAwMDAwKSI+DQogICAgICAgICAgICAgICAgPGcgaWQ9Ikhvcml6b250YWxHYXVnZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsIDY2LjAwMDAwMCkiPg0KICAgICAgICAgICAgICAgICAgICA8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjguNTAwMDAwLCA0Mi41MDAwMDApIHJvdGF0ZSgtMjcwLjAwMDAwMCkgdHJhbnNsYXRlKC0xMjguNTAwMDAwLCAtNDIuNTAwMDAwKSB0cmFuc2xhdGUoODYuMDAwMDAwLCAtODYuMDAwMDAwKSIgaWQ9Ik51bWJlcnMrVHJpYW5nbGVzIj4NCiAgICAgICAgICAgICAgICAgICAgICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUwLjAwMDAwMCwgMC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cG9seWdvbiBpZD0iVHJpYW5nbGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMwLjYyODk1MiwgMTcwLjQ1ODY1NCkgcm90YXRlKC05MC4wMDAwMDApIHRyYW5zbGF0ZSgtMzAuNjI4OTUyLCAtMTcwLjQ1ODY1NCkgIiBwb2ludHM9IjMzLjEyODk1MjMgMTcwLjQ1ODY1NCAyOC4xMjg5NTIzIDE3My45NTg2NTQgMjguMTI4OTUyMyAxNjYuOTU4NjU0Ij48L3BvbHlnb24+DQogICAgICAgICAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICAgICAgICAgIDwvZz4NCiAgICAgICAgICAgICAgICA8L2c+DQogICAgICAgICAgICA8L2c+DQogICAgICAgIDwvZz4NCiAgICA8L2c+DQo8L3N2Zz4\x3d";
this.verIconUrlRTL="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjVweCIgaGVpZ2h0PSI3cHgiIHZpZXdCb3g9IjAgMCA1IDciIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+DQogICAgPCEtLSBHZW5lcmF0b3I6IFNrZXRjaCA0NC4xICg0MTQ1NSkgLSBodHRwOi8vd3d3LmJvaGVtaWFuY29kaW5nLmNvbS9za2V0Y2ggLS0+DQogICAgPHRpdGxlPlRyaWFuZ2xlPC90aXRsZT4NCiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4NCiAgICA8ZGVmcz48L2RlZnM+DQogICAgPGcgaWQ9IkxheW91dC0yTmV3IiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4NCiAgICAgICAgPGcgaWQ9IkFydGJvYXJkIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMTIxLjAwMDAwMCwgLTQ0Ny4wMDAwMDApIiBmaWxsPSIjOTM5MzkzIj4NCiAgICAgICAgICAgIDxwb2x5Z29uIGlkPSJUcmlhbmdsZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIzLjUwMDAwMCwgNDUwLjUwMDAwMCkgcm90YXRlKC0xODAuMDAwMDAwKSB0cmFuc2xhdGUoLTEyMy41MDAwMDAsIC00NTAuNTAwMDAwKSAiIHBvaW50cz0iMTI2IDQ1MC41IDEyMSA0NTQgMTIxIDQ0NyI+PC9wb2x5Z29uPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+";
b=l.clone(h);this.curved=b.curved;this.vertical=b.vertical;this.horizontal=b.horizontal;this.unitDistance=23;this.defultGrid={top:10,bottom:10,left:10,right:10,containLabel:!0}},getAxisZeroPosition:function(){if(!this.chart)return!1;var b;try{b=this.chart.convertToPixel({xAxisIndex:0,yAxisIndex:0},[0,0])}catch(f){}if(!b)return{};var a=b[0];b=b[1];var c=this.chart.getHeight(),g=this.chart.getWidth();return{left:a,right:g-a,top:b,bottom:c-b}},getTextWidth:function(b,a){if(!b&&0!==b)return 0;var c=(this.getTextWidth.canvas||
(this.getTextWidth.canvas=document.createElement("canvas"))).getContext("2d");c.font=a;return c.measureText(b).width},getHeightByFontSize:function(b){b=Math.round(b);if("number"!==typeof b||6>b||40<b)return 0;var a=0;b-=6;switch(!0){case 7>=b:a=1*b;break;case 8<=b&&11>=b:a=1*(b-1)+2;break;case 12<=b&&15>=b:a=1*(b-2)+4;break;case 16<=b&&19>=b:a=1*(b-3)+6;break;case 20<=b&&21>=b:a=1*(b-4)+8;break;case 22<=b&&23>=b:a=1*(b-5)+8;break;case 24<=b&&27>=b:a=1*(b-6)+10;break;case 28<=b&&31>=b:a=1*(b-7)+12;
break;case 32<=b&&34>=b:a=1*(b-8)+14}return 8+a},tryLocaleNumber:function(b){var a=b;if(k.isDefined(b)&&isFinite(b))try{var c=e.localizeNumber(b);"string"===typeof c&&(a=c)}catch(g){console.error(g)}return a+""},localizeNumberForDigitSeparator:function(b,a){b=e.localizeNumber(b);return!1===a?b.toString().replace(new RegExp("\\"+d.group,"g"),""):b},isAxisChart:function(b){return"column"===b.type||"bar"===b.type||"line"===b.type},isBaseChartType:function(b){return this.isAxisChart(b)||"pie"===b.type},
_getTooltipDisplayValue:function(b,a){"number"===typeof Number(b)&&(b=a?e.convertNumberToPercentage(b):this.tryLocaleNumber(b));return b},generateToolTip:function(b,a,c,g,f){var d="",d=c?'\x3cdiv class\x3d"tooltip-tr reverse"\x3e':'\x3cdiv class\x3d"tooltip-tr"\x3e';c="";b.color&&"auto"!==b.color&&(c='\x3cdiv class\x3d"colorEl marginRight5" style\x3d"background-color:'+e.encodeHTML(b.color)+'"\x3e\x3c/div\x3e');d+=c;c="";"radar"!==b.seriesType&&this._isVaildValue(b.seriesName)?c=b.seriesName:this._isVaildValue(f)&&
(c=f);d=""===c?d+("\x3cdiv\x3e"+c+"\x3c/div\x3e"):d+("\x3cdiv\x3e"+c+"\x3c/div\x3e\x3cdiv\x3e : \x3c/div\x3e");f="null";this._isNotZeroBoolean(a)?f=a:this._isVaildValue(b.value)&&(f=b.value);d+="\x3cdiv\x3e"+this._getTooltipDisplayValue(f,g)+"\x3c/div\x3e";"pie"===b.seriesType&&(b=b.percent,b=this._isVaildValue(b)?b/100:0,d+='\x3cdiv class\x3d"space-left"\x3e('+e.convertNumberToPercentage(b)+")\x3c/div\x3e");return d+"\x3c/div\x3e"},handleToolTip:function(b,a,c,g,f){var d='\x3cdiv class\x3d"tooltip-div"\x3e';
Array.isArray(b)||(b=[b]);this._isVaildValue(b[0].name)&&(d+='\x3cdiv class\x3d"tr"\x3e'+b[0].name+"\x3c/div\x3e");b.forEach(function(b){d="radar"!==b.seriesType?d+this.generateToolTip(b,a,c,g,f):d+this._handleRadarTooltip(b,c,g,f)}.bind(this));return d+="\x3c/div\x3e"},_handleRadarTooltip:function(b,a,c,g){var f="";(b.value||[]).forEach(function(d,e){f+=this.generateToolTip(b,d,a,c,g[e])}.bind(this));return f},_isVaildValue:function(b){return"%00-"===encodeURI(b)?!1:this._isNotZeroBoolean(b)},_isNotZeroBoolean:function(b){return 0===
b?!0:!!b},settingAdvanceOption:function(b,a){a.advanceOption&&("object"===typeof a.advanceOption?l.mixin(b,a.advanceOption):"function"===typeof a.advanceOption&&a.advanceOption(b));return b},settingColor:function(b,a){a.color&&a.color[0]&&(b.color=a.color);return b},settingToolTip:function(b,a){b.tooltip={};a.confine&&(b.tooltip.confine=!0);if("radar"===a.type)return b.tooltip.trigger="item",b;if(a.axisPointer){if(b.tooltip.trigger="axis","column"===a.type||"bar"===a.type)b.tooltip.axisPointer={type:"shadow",
snap:!0}}else b.tooltip.axisPointer={type:""};return b},settingDataZoom:function(b,a,c){return this.isAxisChart(a)&&a.series&&a.series.length?a.dataZoom&&a.dataZoom.length?b=this._settingDataZoom(a,b,c):(b.dataZoom=[],b):b},_settingDataZoom:function(b,a,c){if(!this.chart)return a;var g=this.chart.getWidth(),f=b.series[0].data.length,d=b.series.length,f=b.stack?f:f*d;if(!f||!g)return a.dataZoom=k,a;var g="bar"!==b.type?window.isRTL?c.left:g-c.left-a.grid.right:c.top,e=20>g/f,h=g/(20*f),h=parseFloat(100*
h,10).toFixed(3),h=100<h?100:h,h=0===h?.01:h,k=[],q="bar"===b.type?"yAxisIndex":"xAxisIndex",k=b.dataZoom.map(l.hitch(this,function(a){a={type:a,start:0,show:e};a[q]=[0];a.end=h;a.showDataShadow=!1;a.realtime=!1;return a}));a.dataZoom=k;return a},mockChartDataWhenNoData:function(b){b&&Array.isArray(b.labels)&&0===b.labels.length&&b.labels.push("");b&&Array.isArray(b.series)&&0<b.series.length&&b.series.forEach(function(a){a&&Array.isArray(a.data)&&0===a.data.length&&a.data.push(0)});return b},settingDefaultGrid:function(b){b.grid=
l.clone(this.defultGrid);return b},settingGrid:function(b,a){if(!this.isAxisChart(a))return b;b.grid.containLabel=a.yAxis&&a.yAxis.show;var c=a.layout;if(!c||!c.length)return b;var g=0,f=0,d=0,e=0,h=1;c.forEach(function(a){a=a.layout&&a.layout.position;if("xAixsName"===name||"yAixsName"===name)h=.7;"t"===a?g+=h:"b"===a?f+=h:"l"===a?d+=h:"r"===a&&(e+=h)}.bind(this));var k=l.clone(this.defultGrid),c=k.top||0,q=k.bottom||0,v=k.left||0,k=k.right||0,c=c+this.unitDistance*g,q=q+this.unitDistance*f,v=v+
this.unitDistance*d,k=k+this.unitDistance*e;a.yAxis&&!a.yAxis.show&&(q+=this.unitDistance);b.grid.top=c;b.grid.bottom=q;b.grid.left=v;b.grid.right=k;b=this._settingxAxisNameGap(b,a);return b=this._settingGridForMarkName(b,a)},_settingGridForMarkName:function(b,a){var c=a.markLine,g=a.markArea,f=[],d=[];c&&c.data&&c.data.length&&c.data.forEach(function(a){this._hasEndPosName(a)&&f.push(a.name+"");this._hasStartPosName(a)&&d.push(a.name+"")}.bind(this));g&&g.data&&g.data.length&&g.data.forEach(function(b){b=
b[0];this._hasOutRightAxisName(a.type,b)&&f.push(b.name+"");this._hasOutLeftAxisName(a.type,b)&&d.push(b.name+"")}.bind(this));if(!f.length&&!d.length)return b;if("bar"===a.type)return b.grid.top+=15,b;c=this._getyAxisLabelWidth(a);g=this._getMaxLengthString(f);g=this.getTextWidth(g,"normal 12px sans-serif");window.isRTL?b.grid.left+=g:b.grid.right+=g;g=this._getMaxLengthString(d);g=this.getTextWidth(g,"normal 12px sans-serif");g-=c;if(0>=g)return b;g+=10;window.isRTL?b.grid.right=g:b.grid.left=g;
return b},_getyAxisLabelWidth:function(b){var a=b&&b.yAxis;return a&&a.show?(b=this._getMaxData(b))||0===b?this.getTextWidth(b,"normal "+(a&&a.textStyle&&a.textStyle.fontSize||12)+"px sans-serif"):0:0},_getMaxData:function(b){if((b=b.series)&&b.length)return b=b.map(function(a){if((a=a.data)&&a.length)return a.map(function(a){var b;"number"===typeof a?b=a:a&&"undefined"!==typeof a.value&&(b=a.value);return b=parseInt(b,10)})}).map(function(a){if(a.length)return Math.max.apply(Math,a)}),b.length&&
Math.max.apply(Math,b)},_getMaxLengthString:function(b){return b.sort(function(a,b){a=this.getTextWidth(a);b=this.getTextWidth(b);return b-a}.bind(this))[0]},_hasOutRightAxisName:function(b,a){var c=a.name||0===a.name;a=a.label;var g=window.isRTL?"eft":"ight";b=a&&a.position&&-1<a.position.indexOf("bar"===b?"op":g);a=a&&a.position&&-1<a.position.indexOf("inside");return c&&b&&!a},_hasOutLeftAxisName:function(b,a){var c=a.name||0===a.name;a=a.label;var g=window.isRTL?"ight":"eft";b=a&&a.position&&
-1<a.position.indexOf("bar"===b?"op":g);a=a&&a.position&&-1<a.position.indexOf("inside");return c&&b&&!a},_hasEndPosName:function(b){var a=b.label,a=!a||!a.position||"end"===a.position;return(b.name||0===b.name)&&a},_hasStartPosName:function(b){var a=b.label,a=!a||!a.position||"start"===a.position;return(b.name||0===b.name)&&a},_settingxAxisNameGap:function(b,a){if(!this.isAxisChart(a)||!b.xAxis)return b;a=this.getHeightByFontSize(a.xAxis&&a.xAxis.textStyle&&a.xAxis.textStyle.fontSize||12);b.xAxis.nameGap=
10+a;return b},calcDefaultLayout:function(b){if(this.isBaseChartType(b)){var a=b.legend,c=b.xAxis,g=null;b=b.type;"pie"!==b&&(g="bar"!==b?{name:"dataZoom",layout:{position:"t",inner:!1}}:{name:"dataZoom",layout:{position:window.isRTL?"l":"r",inner:!1}});b=null;a&&a.show&&(b={name:"legend",layout:{position:"b",inner:!1}});a=null;c&&c.show&&"undefined"!==typeof c.name&&(a={name:"xAxisName",layout:{position:"b",inner:!1}},b&&(a.layout.inner=!0));c=[];b&&c.push(b);g&&c.push(g);a&&c.push(a);return c.length&&
c}},settingRenderOption:function(b,a){if("curved"===a.shape)return b.animationThreshold=99999999,b.hoverLayerThreshold=99999,b.progressiveThreshold=99999,b;b.hoverLayerThreshold=500;b.progressiveThreshold=500;b.progressive=100;b.animationThreshold=500;return b},settingBackgroundColor:function(b,a){a.backgroundColor&&(b.backgroundColor=a.backgroundColor);return b},settingAxisChartAxis:function(b,a){var c=a.xAxis,g=a.yAxis,f={nameLocation:"center"},d={nameLocation:"center"};"column"===a.type||"line"===
a.type&&a.labels?(f.data=a.labels,f.type="category",d.type="value"):"bar"===a.type&&a.labels&&(d.data=a.labels,d.type="category",f.type="value");a=null;c&&(f.name=c.name,f.show=!!c.show,c.textStyle&&(f.axisLabel=c.textStyle),c.nameTextStyle&&(f.nameTextStyle=c.nameTextStyle),a=c.format)&&(f.minInterval="int"===a.type?1:0);g&&(d.show=!!g.show,g.textStyle&&(d.axisLabel=g.textStyle),a=g.format)&&(d.minInterval="int"===a.type?1:0);window.isRTL&&(f.inverse=!0,d.position="right");b.xAxis=f;b.yAxis=d;return b},
settingRadar:function(b,a){if("radar"!==a.type)return b;b.radar={nameGap:6,radius:"70%"};b.radar.axisLabel={show:!0,formatter:function(){}};a.radarShape&&(b.radar.shape=a.radarShape);a.indicator?(this._handleRadarIndicator(a),b.radar.indicator=a.indicator):console.error("No radar indicator");return b},_handleRadarIndicator:function(b){var a=b.series[0].data,c=[];b.indicator.forEach(function(b,f){if("undefined"!==typeof b.max)return b;c=a.map(function(a){c.push(a.value[f])});var g=Math.max.apply(Math,
c);b.max=g})},settingArea:function(b,a){if("line"!==a.type||!a.area)return b;b.series=b.series.map(function(a){a.areaStyle||(a.areaStyle={});"undefined"===typeof a.areaStyle.opacity&&(a.areaStyle.opacity=.4);a.sthisoth=!0;a.smoothMonotone="x";return a});return b},_mockNegativeValue:function(b){return b&&b[0]&&b[0].data?b.map(function(a){a.data=a.data.map(function(a,b){var c=0===b%2;a&&"undefined"!==typeof a.value?(b=a.value,b=Number(b),a.value=c?-b:b):(b=Number(a),a=-(c?-b:b));return a});return a}):
b},hasNegativeValue:function(b){if((b=b.series)&&b[0]&&b[0].data)return b.some(function(a){return a.data.some(function(a){a=a&&"undefined"!==typeof a.value?a.value:a;a=Number(a);return"number"===typeof a&&0>a})})},allNegativeValue:function(b){return(b=b.series)&&b[0]&&b[0].data?b.every(function(a){return a.data.every(function(a){a=a&&a.value?a.value:a;a=Number(a);return"number"===typeof a&&0>a})}):!1},settingStack:function(b,a){a=this._stackForPercent(a);if("percent"===a.stack){var c=this.hasNegativeValue(a),
g=this.allNegativeValue(a),f=0,d=1;c&&(f=-1,g&&(d=0),"bar"===a.type?(b.xAxis.max=d,b.xAxis.min=f):(b.yAxis.max=d,b.yAxis.min=f))}a.stack&&(b.series=b.series.map(function(a){a.stack="stack";return a}));return b},_stackForPercent:function(b){if("percent"!==b.stack)return b;var a=[];b.series.forEach(function(b){l.clone(b.data).forEach(function(b,c){a[c]||(a[c]=[]);(b=b&&"undefined"!==typeof b.value?b.value:b)||(b=0);a[c].push(b)})});var c=[];a.forEach(function(a,b){c[b]||(c[b]=0);a.forEach(function(a){c[b]+=
Math.abs(a)})});var g=a.map(function(a,b){return a.map(function(a){return 0===c[b]?null:0<=a?Math.abs(a)/c[b]:-Math.abs(a)/c[b]})});b.series=b.series.map(function(a,b){var c=l.clone(a.data),c=c.map(function(a,c){if(!a)return a;"undefined"!==typeof a.value?a.value=g[c][b]:a=g[c][b];return a});a.data=c;return a});return b},settingLegend:function(b,a){var c=a.legend;if(!c)return b.legend={show:!1},b;var g={show:c.show,type:"scroll",itemHeight:11,orient:"horizontal",pageButtonPosition:"end",pageTextStyle:{color:"#939393"}};
c.textStyle&&(g.textStyle=c.textStyle);b.legend=g;return b=this._handleLegendRTL(b,a)},_handleLegendRTL:function(b,a){if(!a.legend)return b;a={};window.isRTL?(a.x="right",a.pageButtonPosition="start"):(a.x="left",a.pageButtonPosition="end");b.legend=l.mixin(b.legend,a);return b},settingScale:function(b,a){if(!a.scale)return b;if("bar"===a.type)b.xAxis.scale=!0;else if("line"===a.type||"column"===a.type)b.yAxis.scale=!0;return b},pieChartAvoidLegendLabelOverLap:function(b,a){if("pie"!==a.type)return b;
var c=a.dataLabel&&a.dataLabel.show?.75:.85;a.legend&&a.legend.show&&(c-=.12);b.series[0].radius[1]=100*c+"%";return b},settingChartLayout:function(b,a){if(!this.isBaseChartType(a))return b;(a=a.layout)&&a.length&&a.forEach(function(a){this._assigneeLayout(b,a)}.bind(this));return b},avoidAdjoiningColorSameForPie:function(b,a){if("pie"!==a.type||!b.color||2>=b.color.length)return b;b.series&&b.series[0]&&b.series.forEach(l.hitch(this,function(a){var c=a.data.length;0===(c-1)%b.color.length&&(a=a.data[c-
1],a.itemStyle||(a.itemStyle={}),a.itemStyle.color||(a.itemStyle.color=b.color[1]))}));return b},_assigneeLayout:function(b,a){var c=a.name;if("xAxisName"!==c&&"yAxisName"!==c){var g=a.layout;a=this._getOperateObjByProperty(b,c);if(!a)return b;var f=this._getSubPosition(g&&g.subPosition),d=g&&g.position,g=g&&g.inner,e={};"l"===d?e.left=g?this.unitDistance+this.defultGrid.left-5:this.defultGrid.left-5:"r"===d?e.right=g?this.unitDistance+this.defultGrid.right-5:this.defultGrid.right-5:"t"===d?e.top=
g?this.defultGrid.top+this.unitDistance-5:this.defultGrid.top-5:"b"===d&&(e.bottom=g?this.unitDistance+this.defultGrid.bottom-5:this.defultGrid.bottom-5);l.mixin(a,e);l.mixin(a,f);this._specialLegend(a,c,d);this._specialSliderDataZoom(a,c,d);return b}},_getSubPosition:function(b){if("l"===b)return{left:this.defultGrid.left-5,right:"auto"};if("r"===b)return{right:this.defultGrid.right-5,left:"auto"};if("t"===b)return{top:this.defultGrid.top-5,bottom:"auto"};if("b"===b)return{bottom:this.defultGrid.bottom-
5,top:"auto"}},_specialLegend:function(b,a,c){"legend"===a&&(b.orient="l"===c||"r"===c?"vertical":"horizontal")},_specialSliderDataZoom:function(b,a,c){"dataZoom"===a&&("l"===c||"r"===c?(b.orient="vertical",b.width=15):(b.orient="horizontal",b.height=15))},_getOperateObjByProperty:function(b,a){if("dataZoom"===a)return this._getSliderDataZoom(b);if("legend"===a)return b.legend},_getSliderDataZoom:function(b){var a=null;(b=b.dataZoom)&&b.length&&b.some(function(b){return"slider"===b.type?(a=b,!0):
!1});return a},settingAxisSeries:function(b,a){b=this._setTypeToSeries(b,a);b.series=a.series;return b},settingMarks:function(b,a){b=this.settingMarkLine(b,a);return b=this.settingMarkArea(b,a)},settingMarkLine:function(b,a){(a=a.markLine)&&a.data&&(a.silent=!0,a.data.forEach(function(a){a.label||(a.label={show:!1,position:"end"});"undefined"!==typeof a.name&&(a.label.show=!0,a.label.formatter=a.name)}),b.series[0].markLine=l.clone(a));return b},settingMarkArea:function(b,a){a.markArea&&(this._handleMarkAreaRTL(a.markArea),
a.markArea.silent=!0,b.series[0].markArea=a.markArea);return b},_handleMarkAreaRTL:function(b){window.isRTL&&b&&b.data&&b.data.length&&b.data.forEach(function(a){var b=(a=a&&a[0]&&a[0].label)&&a.position;b&&("left"===b?b="right":"right"===b?b="left":"insideLeft"===b?b="insideRight":"insideRight"===b&&(b="insideLeft"),a.position=b)})},_settingSeriesDataLabel:function(b,a){a=a.dataLabel;if(!a)return b;var c={};c.show=!!a.show;"undefined"!==typeof a.textStyle&&(c.textStyle=a.textStyle);b.series.forEach(function(a){a.label=
c});return b},settingRadarSeries:function(b,a){b=this._setTypeToSeries(b,a);b.series=a.series.map(l.hitch(this,function(b){b.data=this._handleSeriesDataForPieLikeType(b,a);return b=this._settingRaderSerie(b,a)}));return b},_settingRaderSerie:function(b,a){if("radar"!==b.type)return b;var c=a.indicator.map(function(a){return a.name});b.tooltip={};b.tooltip.formatter=function(a){return this.handleToolTip(a,null,!1,!1,c)};return b},settingFunnelSeries:function(b,a){b=this._setTypeToSeries(b,a);b.series=
a.series.map(l.hitch(this,function(b){b.data=this._handleSeriesDataForPieLikeType(b,a);return b=this._settingFunnelSerie(b,a)}));return b},_settingFunnelSerie:function(b,a){if("funnel"!==b.type)return b;b.minSize="0%";b.maxSize="100%";b.min=a.min.value;b.max=a.max.value;b.sort=a.funnelSort||"descending";return b},settingPieSeries:function(b,a){b=this._setTypeToSeries(b,a);b.series=a.series.map(l.hitch(this,function(b){b.data=this._handleSeriesDataForPieLikeType(b,a);return b=this._settingPieSerie(b,
a)}));return b},_settingPieSerie:function(b,a){if("pie"!==b.type)return b;var c=a.dataLabel&&a.dataLabel.show;b.selectedMode="single";b.selectedOffset=10;b.hoverOffset=5;b.radius=[0,"70%"];b.labelLine={show:!0,length:5,length2:5};b.labelLine.show="undefined"===typeof a.labelLine?!0:a.labelLine;c||(b.labelLine.show=!1);"number"===typeof a.innerRadius&&(0>a.innerRadius&&(a.innerRadius=0),60<a.innerRadius&&(a.innerRadius=60),b.radius[0]=a.innerRadius+"%");"rose"===a.pieMode&&(b.roseType=a.roseType||
"radius");return b=this._absoluteValueForPieChart(b)},_absoluteValueForPieChart:function(b){if(!b||!b.data||!b.data[0])return b;b.data=b.data.map(function(a){"number"===typeof a?a=Math.abs(a):"object"===typeof a&&"number"===typeof a.value&&(a.value=Math.abs(a.value));return a});return b},_handleSeriesDataForPieLikeType:function(b,a){return b.data.map(l.hitch(this,function(b,g){var c={};b||"number"===typeof b?(c.value="undefined"!==typeof b.value?b.value:b,b.itemStyle&&(c.itemStyle||(c.itemStyle={}),
c.itemStyle=l.mixin(c.itemStyle,b.itemStyle))):c.value=b;c.name=a.labels[g]||"";return c}))},_setTypeToSeries:function(b,a){var c=a.series;if(!c)return b;c.forEach(function(b){b.type||(b.type=a.type);b.type="column"===a.type?"bar":a.type});return b},splitAxisStackColumn:function(b,a){var c=b.series;if(!c||!c.length)return b;var g;c.some(function(b){b=b.data;if(!b||!b.length)return!0;b.some(function(b){if(b&&b.itemStyle&&"undefined"!==typeof b.itemStyle.color&&"line"!==a.type)return g=a.stack?"stack":
"single",!0;g=!1})});var f=0;"single"===g?f=.1:"stack"===g&&(f=1);var d="";"stack"===g&&(d="#fff",a.backgroundColor&&"transparent"!==a.backgroundColor&&(d=a.backgroundColor));b.series=b.series.map(function(a){if("bar"===a.type||"pie"===a.type)a.itemStyle||(a.itemStyle={}),a.emphasis||(a.emphasis={}),a.itemStyle.borderWidth=f,a.emphasis.borderWidth=f,d?(a.itemStyle.borderColor=d,a.emphasis.borderColor=d):(a.itemStyle.borderColor="transparent",a.emphasis.borderColor="transparent");return a});return b},
preProcessConfig:function(b,a){a.min=a.min||{value:0,format:{digitSeparator:!0}};a.max=a.max||{value:1E3,format:{digitSeparator:!0}};return b},settingLabelColor:function(b,a){var c="#000";a.gaugeOption&&a.gaugeOption.labelColor&&(c=a.gaugeOption.labelColor);"curved"===a.shape?b.series[0].axisLabel.textStyle.color=c:"horizontal"===a.shape?b.xAxis.axisLabel.textStyle.color=c:"vertical"===a.shape&&(b.yAxis.axisLabel.textStyle.color=c);return b},settingValueStyle:function(b,a){var c=a.gaugeOption&&a.gaugeOption.valueStyle,
g=c&&c.textStyle,c=c&&c.formatter;g&&l.mixin("curved"===a.shape?b.series[0].detail.textStyle:b.series[1].data[0].label.textStyle,g);c&&("curved"===a.shape?b.series[0].detail.formatter=c:b.series[1].data[0].label.formatter=c);return b},settingGaugeColumnColor:function(b,a){var c=a.gaugeOption&&a.gaugeOption.bgColor;a=a.gaugeOption&&a.gaugeOption.columnColor;c&&(b.series[0].itemStyle.color=c);a&&(b.series[1].data[0].itemStyle.color=a);return b},initHorizontalOption:function(b){l.mixin(b,this.horizontal);
return b},setHorizontalGrid:function(b){b.grid={top:"middle",height:90,left:"10%",right:"10%",containLabel:!0};return b},settingHorizontalAxis:function(b,a){b.xAxis.max=a.max.value;b.xAxis.min=a.min.value;b.xAxis.scale=!0;return b},settingHorizontalSeries:function(b,a){var c=b.series;if(!c||!c.length)return b;var g=c[1];c[0].data[0]=a.max.value;b=this._handleValueDisplayForColumnGauge(b,a);g.data[0].name=a.labels&&a.labels[0]||"";g.name=a.series[0].name||"";return b},settingHorizontalGaugeRTL:function(b){if(!window.isRTL)return b;
b.series[1].label.offset=[-20,0];b.xAxis.inverse=!0;b.yAxis.position="right";return b},initVerticalOption:function(b){l.mixin(b,this.vertical);return b},setVerticalGrid:function(b){b.grid={left:"middle",width:60,top:"10%",bottom:"10%",containLabel:!0};b.grid.left=this._getGridLeftOfVerticalGauge();return b},settingVerticalAxis:function(b,a){b.yAxis.max=a.max.value;b.yAxis.min=a.min.value;return b},settingVerticalSeries:function(b,a){var c=b.series;if(!c||!c.length)return b;var g=c[1];c[0].data[0]=
a.max.value;b=this._handleValueDisplayForColumnGauge(b,a);g.data[0].name=a.labels&&a.labels[0]||"";g.name=a.series[0].name||"";return b},settingVerticalGaugeRTL:function(b,a){if(!window.isRTL)return b;var c=(a.series[0].data[0]+"").length-1;a.gaugeOption&&a.gaugeOption.valueStyle&&"undefined"!==typeof a.gaugeOption.valueStyle.decimalPlaces&&(c+=a.gaugeOption.valueStyle.decimalPlaces);b.series[1].label.offset=[-17-9*c,-15];b.xAxis.inverse=!0;b.yAxis.position="right";return b},initCurvedOption:function(b){b.series=
[this.curved];return b},settingCurvedTooltip:function(b){b.tooltip.formatter=function(a){return this.handleToolTip(a,null,!1)}.bind(this);return b},settingCurvedSeries:function(b,a){var c=b.series&&b.series[0];if(!c)return b;var g=a.max.value,f=a.min.value;c.min=f;c.max=g;var d=a.series&&a.series[0]&&a.series[0].data&&a.series[0].data[0],d=d||0;c.data[0].value=d;g=d<=f?0:d>=g?1:parseFloat((d-f)/(g-f)).toFixed(2);c.axisLine.lineStyle.color[0][0]=g;if(g=a.labels&&a.labels[0])c.data[0].name=g;c.name=
a.series[0]&&a.series[0].name||"";c.axisLine.lineStyle.width=30;b.series=[c];return b},settingCurvedGaugeColor:function(b,a){var c=b.series&&b.series[0];a.gaugeOption&&(a.gaugeOption.bgColor&&(c.axisLine.lineStyle.color[1][1]=a.gaugeOption.bgColor),a.gaugeOption.columnColor&&(c.axisLine.lineStyle.color[0][1]=a.gaugeOption.columnColor,c.itemStyle.color=a.gaugeOption.columnColor));return b},settingCurvedTargets:function(b,a){if(!b.series)return b;b.series[0].splitNumber=1E3;b.series[0].axisTick.splitNumber=
1;b.series[0].axisTick.show=!1;var c=this._getTargetValues(a);return b=this._showTargetsForCurved(b,a,c)},createTargetGraphic:function(b){var a=b.shape,c=[];if("vertical"!==a&&"horizontal"!==a)return c;var g="#000";b.gaugeOption&&b.gaugeOption.labelColor&&(g=b.gaugeOption.labelColor);var f,d=b.min.value,e=b.max.value;b=this._getTargetValues(b);var l=b.range;b.values.forEach(function(b){if(!(b.value>e||b.value<d)){f=this._calcGraphicPosition(b.value,a);var m=f.top,p=f.textLeft,l=this._createGraphic(f.graphicLeft,
m,b,g,"image",a);b=this._createGraphic(p,m,b,g,"text",a);c.push(l);c.push(b)}}.bind(this));l.forEach(function(b){b.value>e||b.value<d||(f=this._calcGraphicPosition(b.value,a),b=this._createGraphic(f.textLeft,f.top,b,g,"text",a),c.push(b))}.bind(this));return c},_calcGraphicPosition:function(b,a){var c,d,f;"vertical"===a?(c=this.chart.convertToPixel({xAxisIndex:0},0),c=parseFloat(c,10).toFixed(2),c=Number(c),window.isRTL&&(c+=40),d=c-26,f=window.isRTL?d+11:d-11-6*(b.toString().length-1),c=this._getyAxisValueTop(b),
c-=2):"horizontal"===a&&(c=this.chart.convertToPixel({yAxisIndex:0},0),c=parseInt(c,10),c=Number(c)+16,d=this._getxAxisValueLeft(b),b=6*(b.toString().length-2),f=d,0<b&&(f=d-b));return{top:c,graphicLeft:d,textLeft:f}},_createGraphic:function(b,a,c,d,f,m){var g=this.horIconUrl;"vertical"===m&&(g=window.isRTL?this.verIconUrlRTL:this.verIconUrl);var l=null;"image"===f?l={z:10,type:"image",$action:"merge",id:"wab_gid_image-"+e.getRandomString(),left:b,style:{image:g,width:10,height:10},silent:!0,top:a}:
"text"===f&&(c=this.localizeNumberForDigitSeparator(c.value,c.format&&c.format.digitSeparator),l={z:10,type:"text",$action:"merge",id:"wab_gid_text-"+e.getRandomString(),left:b,style:{text:c,fill:d,font:"normal 11px sans-serif"},silent:!0});"text"===f&&(l.top="vertical"===m?a-2:a+11);return l},updateGridForVerticalGauge:function(b){if("gauge"===b.type&&"vertical"===b.shape)return{left:this._getGridLeftOfVerticalGauge(),width:60,top:"10%",bottom:"10%"}},_getTargetValues:function(b){var a=b.gaugeOption&&
b.gaugeOption.showTargetValueLabel,c=b.gaugeOption&&b.gaugeOption.showDataRangeLabel,d=b.gaugeOption&&b.gaugeOption.targetValue,f=b.min;b=b.max;var e={values:[],range:[]};d&&a&&d.forEach(function(a){e.values.push(a)});c&&(0>e.values.indexOf(f.value)&&(e.range[0]=f),0>e.values.indexOf(b.value)&&(e.range[1]=b));return e},_showTargetsForCurved:function(b,a,c){var d=c.values.concat(c.range),f=(a.max.value-a.min.value)/1E3;d.sort(function(a,b){return a.value-b.value});b.series[0].axisLabel.formatter=l.hitch(this,
function(a){var b,c;d.forEach(function(d){"undefined"===typeof b&&d.value>=a&&d.value<a+f&&(b=d.value,c=d.format)});"number"===typeof b&&(b=this.localizeNumberForDigitSeparator(b,c&&c.digitSeparator));return b});return b},_handleValueDisplayForColumnGauge:function(b,a){var c=a.min.value,d=a.max.value,f;f=a.series[0].data[0];a=f>=d?d:f<=c?c:f;b.tooltip.formatter=function(a){return this.handleToolTip(a,f,!1)}.bind(this);b.series[1].data[0].value=a;return b},_getGridLeftOfVerticalGauge:function(){return this.chart.getWidth()/
2-30},_getxAxisValueLeft:function(b){b=this.chart.convertToPixel({xAxisIndex:0},b);return parseFloat(b,10)-4},_getyAxisValueTop:function(b){b=this.chart.convertToPixel({yAxisIndex:0},b);return parseFloat(b,10)}})})},"jimu/dijit/_Gauge":function(){define(["dojo/_base/declare"],function(n){return n([],{constructor:function(e){this.chart=e.chart;this.chartUtils=e.chartUtils},produceOption:function(e,k){e=this.chartUtils.preProcessConfig(e,k);"curved"===k.shape?e=this.setCurvedGaugeOption(e,k):"vertical"===
k.shape?e=this.setVerticalGaugeOption(e,k):"horizontal"===k.shape?e=this.setHorizontalGaugeOption(e,k):console.error("invaild gauge shape");e=this.chartUtils.settingLabelColor(e,k);return e=this.chartUtils.settingValueStyle(e,k)},setCurvedGaugeOption:function(e,k){e=this.chartUtils.initCurvedOption(e);e=this.chartUtils.settingCurvedSeries(e,k);e=this.chartUtils.settingCurvedTooltip(e,k);e=this.chartUtils.settingCurvedGaugeColor(e,k);return e=this.chartUtils.settingCurvedTargets(e,k)},setVerticalGaugeOption:function(e,
k){e=this.chartUtils.initVerticalOption(e,this.vertical);e=this.chartUtils.setVerticalGrid(e);e=this.chartUtils.settingVerticalAxis(e,k);e=this.chartUtils.settingVerticalSeries(e,k);e=this.chartUtils.settingGaugeColumnColor(e,k);return e=this.chartUtils.settingVerticalGaugeRTL(e,k)},setHorizontalGaugeOption:function(e,k){e=this.chartUtils.initHorizontalOption(e,this.horizontal);e=this.chartUtils.setHorizontalGrid(e);e=this.chartUtils.settingHorizontalAxis(e,k);e=this.chartUtils.settingHorizontalSeries(e,
k);e=this.chartUtils.settingGaugeColumnColor(e,k);return e=this.chartUtils.settingHorizontalGaugeRTL(e,k)},resetGraphic:function(e){if("horizontal"===e.shape||"vertical"===e.shape)e=this.chartUtils.createTargetGraphic(e),this.clearGraphic(),this.chart.setOption({graphic:e}),this.cacheGraphic=null,this.cacheGraphic=e},clearGraphic:function(){this.cacheGraphic&&(this.cacheGraphic.forEach(function(e){e.$action="remove"}),this.chart.setOption({graphic:this.cacheGraphic}))},resetGrid:function(e){("horizontal"===
e.shape||"vertical"===e.shape)&&(e=this.chartUtils.updateGridForVerticalGauge(e))&&this.chart.setOption({grid:e})}})})},"jimu/dijit/_ChartOptionFactory":function(){define(["dojo/_base/declare"],function(n){return n([],{constructor:function(e){this.chart=e.chart;this.gauge=e.gauge;this.chartUtils=e.chartUtils},produceOption:function(e){if(e&&e.type){var k=e.type,l={},l=this.setCommonOption(l,e);this.chartUtils.isAxisChart(e)?l=this.setAxisChartOption(l,e):"pie"===k?l=this.setPieChartOption(l,e):"funnel"===
k?l=this.setFunnelChartOption(l,e):"radar"===k?l=this.setRadarChartOption(l,e):e.shape&&(l=this.setGaugeChartOption(l,e));return l=this.chartUtils.settingAdvanceOption(l,e)}},setPieChartOption:function(e,k){e=this.chartUtils.settingPieSeries(e,k);e=this.chartUtils._settingSeriesDataLabel(e,k);e=this.chartUtils.pieChartAvoidLegendLabelOverLap(e,k);return e=this.chartUtils.avoidAdjoiningColorSameForPie(e,k)},setGaugeChartOption:function(e,k){return e=this.gauge.produceOption(e,k)},setFunnelChartOption:function(e,
k){return e=this.chartUtils.settingFunnelSeries(e,k)},setRadarChartOption:function(e,k){e=this.chartUtils.settingRadar(e,k);return e=this.chartUtils.settingRadarSeries(e,k)},setAxisChartOption:function(e,k){e=this.chartUtils.settingDefaultGrid(e,k);e=this.chartUtils.settingAxisChartAxis(e,k);e=this.chartUtils.settingAxisSeries(e,k);e=this.chartUtils.settingMarks(e,k);e=this.chartUtils._settingSeriesDataLabel(e,k);e=this.chartUtils.splitAxisStackColumn(e,k);e=this.chartUtils.settingStack(e,k);e=this.chartUtils.settingArea(e,
k);return e=this.chartUtils.settingScale(e,k)},setCommonOption:function(e,k){this.chart._theme||(this.chart._theme={});e=this.chartUtils.settingRenderOption(e,k);e=this.chartUtils.settingBackgroundColor(e,k);e=this.chartUtils.settingColor(e,k);e=this.chartUtils.settingToolTip(e,k);return e=this.chartUtils.settingLegend(e,k)}})})},"libs/echarts/light":function(){(function(n,e){"function"===typeof define&&define.amd?define(["exports","./echarts"],e):"object"===typeof exports&&"string"!==typeof exports.nodeName?
e(exports,require("./echarts")):e({},n.echarts)})(this,function(n,e){e?e.registerTheme("light",{color:"#2ec7c9 #b6a2de #5ab1ef #ffb980 #d87a80 #8d98b3 #e5cf0d #97b552 #95706d #dc69aa #07a2a4 #9a7fd1 #588dd5 #f5994e #c05050 #59678c #c9ab00 #7eb00a #6f5553 #c14089".split(" "),textStyle:{},title:{textStyle:{color:"#008acd"},subtextStyle:{color:"#aaaaaa"}},line:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},
symbolSize:"6",symbol:"circle",smooth:!1},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#E5E5E5"]]}},itemStyle:{normal:{color:"#686868"},emphasis:{color:"#686868"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,
lineStyle:{color:"#008acd"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#333"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(0,0,0,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#2ec7c9"},emphasis:{borderColor:"#18a4a6"}}},legend:{textStyle:{color:"#333333"}},tooltip:{axisPointer:{lineStyle:{color:"#008acd",width:"1"},crossStyle:{color:"#008acd",width:"1"}}},
dataZoom:{backgroundColor:"#F4F4F4",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#E0E0E0",handleColor:"#777777",handleSize:"100%",borderColor:"#F4F4F4",textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},"libs/echarts/dark":function(){(function(n,e){"function"===typeof define&&define.amd?define(["exports","./echarts"],e):"object"===typeof exports&&"string"!==typeof exports.nodeName?e(exports,require("./echarts")):
e({},n.echarts)})(this,function(n,e){e?e.registerTheme("dark",{color:"#fc97af #87f7cf #f7f494 #72ccff #f7c5a0 #d4a4eb #d2f5a6 #76f2f2".split(" "),textStyle:{},title:{textStyle:{color:"#ffffff"},subtextStyle:{color:"#dddddd"}},line:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},radar:{itemStyle:{normal:{}},lineStyle:{normal:{width:"1"}},symbolSize:"5",symbol:"circle",smooth:!1},gauge:{axisLine:{lineStyle:{color:[[.31,"#58f7f3"],[1,"#1E5F6F"]]}},itemStyle:{normal:{color:"#D9D9D9"},
emphasis:{color:"#D9D9D9"}}},categoryAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},valueAxis:{axisLine:{show:!0,lineStyle:{color:"#333"}},axisTick:{show:!1,lineStyle:{color:"#333"}},axisLabel:{show:!0,textStyle:{color:"#939393"}},splitLine:{show:!0,
lineStyle:{type:"dashed",color:["rgba(255,255,255,0.1)"]}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},toolbox:{iconStyle:{normal:{borderColor:"#999999"},emphasis:{borderColor:"#666666"}}},legend:{textStyle:{color:"#999999"}},tooltip:{axisPointer:{lineStyle:{color:"#cccccc",width:1},crossStyle:{color:"#cccccc",width:1}}},dataZoom:{backgroundColor:"#525252",dataBackgroundColor:"rgba(47,69,84,0.3)",fillerColor:"#737373",handleColor:"#BDBDBD",handleSize:"100%",
borderColor:"#525252",textStyle:{color:"#939393"}}}):"undefined"!==typeof console&&console&&console.error&&console.error("ECharts is not Loaded")})},"widgets/Infographic/utils":function(){define("dojo/on jimu/utils dojo/_base/lang dojo/_base/Color dojo/_base/array dojo/Deferred esri/layers/FeatureLayer".split(" "),function(n,e,k,l,d,h,b){return{getClientFeaturesFromMap:function(a,b,d,f){return e.getClientFeaturesFromMap(a,b,d,f)},listenClientFeaturesFromMap:function(a,b,g,f,e){var c=[];g&&(c.push(n(b,
"selection-complete",k.hitch(this,function(){e(this.getClientFeaturesFromMap(a,b,g,f))}))),c.push(n(b,"selection-clear",k.hitch(this,function(){e(this.getClientFeaturesFromMap(a,b,g,f))}))));f&&c.push(n(a,"extent-change",k.hitch(this,function(){0<b.graphics.length&&e(this.getClientFeaturesFromMap(a,b,g,f))})));c.push(n(b,"update-end",k.hitch(this,function(){e(this.getClientFeaturesFromMap(a,b,g,f))})));e(this.getClientFeaturesFromMap(a,b,g,f));return{remove:function(){c&&d.forEach(c,k.hitch(this,
function(a){a.remove()}));c=null}}},getVaildIndicator:function(a,b,d){var c=[];b.map(k.hitch(this,function(b){(b=this._handleOperator(b,a,d))&&c.push(b)}));if(0<c.length)return c[c.length-1]},filterFeaturesByDataSourceSetting:function(a,b,g){if(0===a.length)return[];if(b.useSelection){var c=a[0].getLayer();if(c){var m=c.getSelectedFeatures();0<m.length&&(a=d.filter(a,function(a){return-1<m.indexOf(a)}))}}b.filterByExtent&&(a=e.filterFeaturesByExtent(g.extent,a));return a},_handleOperator:function(a,
b,d){function c(a){g={};a.valueColor&&(g.valueColor=a.valueColor);a.gaugeColor&&(g.gaugeColor=a.gaugeColor);a.iconInfo&&(g.iconInfo=a.iconInfo)}var g,e=a.value.map(k.hitch(this,function(b){return a.isRatio?b/100*d:b}));"greater"===a.operator&&b>e[0]?c(a):"smaller"===a.operator&&b<e[0]?c(a):"between"===a.operator&&b>e[0]&&b<e[1]?c(a):"equal"===a.operator&&b===e[0]?c(a):"notEqual"===a.operator&&b!==e[0]&&c(a);return g},isInteger:function(a){return"number"===typeof a&&0===a%1},_getFieldNamesByFields:function(a){if(a&&
a.length)return a.map(function(a){return this._getFieldNameByFieldInfo(a)}.bind(this))},_getFieldNameByFieldInfo:function(a){return a&&a.name},isBaseAxisChart:function(a){return"column"===a||"bar"===a||"line"===a},isEqual:function(a,b){return typeof a!==typeof b?!1:"object"!==typeof a?a===b:e.isEqual(a,b)},separationChartProperties:function(a,b){var c=["mode","type"],f=["backgroundColor","seriesStyle","legend","highLightColor"];"feature"===b?c=c.concat(["clusterField","valueFields"]):"category"===
b?c=c.concat(["clusterField","dateConfig","valueFields","operation","nullValue"]):"count"===b?c=c.concat(["clusterField","dateConfig"]):"field"===b&&(c=c.concat(["valueFields","operation","nullValue"]));c=c.concat(["sortOrder","maxLabels"]);f="pie"===a?f.concat(["dataLabel","innerRadius"]):f.concat(["xAxis","yAxis","stack","area","marks"]);return{dataProperties:c,displayProperties:f}},isValidChartConfig:function(a){if(a&&(a=a.data)){var b=a.mode,d=a.type;if(b&&d&&("count"===b||a.valueFields&&a.valueFields.length)&&
("pie"!==d||""!==a.maxLabels))return!0}},getChartConfig:function(a){if(a){var b=this.separationChartProperties(a.type,a.mode),d=b.displayProperties,f={},e={};b.dataProperties.forEach(k.hitch(this,function(b){f[b]=a[b]}));d.forEach(k.hitch(this,function(b){e[b]=a[b]}));b={data:f,display:e};return this.isValidChartConfig(b)?b:!1}},specialChartConfig:function(a,b){var c=a&&a.data;if(c){var f=c.sortOrder;"feature"===c.mode&&f&&f.field===c.clusterField&&(f.isLabelAxis=!0)}if(a=a&&a.display)c&&(a.mode=
c.mode),a.theme||(a.theme=b)},_cloneAndFormatDS:function(a){a=k.clone(a);var b={};a.name&&(b.name=a.name);a.dataSourceType&&(b.dataSourceType=a.dataSourceType);a.layerId&&(b.layerId=a.layerId);a.frameWorkDsId&&(b.frameWorkDsId=a.frameWorkDsId);a=null;return b},isDSEqual:function(a,b){if(a&&b)return a=this._cloneAndFormatDS(a),b=this._cloneAndFormatDS(b),this.isEqual(a,b)},separationGradientColors:function(a,b){var c=[];2===a.length&&(c=this._createGradientColors(a[0],a[a.length-1],b));return c},_createGradientColors:function(a,
b,d){var c=[];a=new l(a);var g=new l(b);b=(g.r-a.r)/d;for(var e=(g.g-a.g)/d,g=(g.b-a.b)/d,h=new l,k=0,q=0,v=0,n=0;n<d;n++)k=parseInt(a.r+b*n,10),q=parseInt(a.g+e*n,10),v=parseInt(a.b+g*n,10),h.setColor([k,q,v]),c.push(h.toHex());return c},mockLayerDefinitionForSTD:function(a){var b={type:"Table",fields:[]};b.fields=a.fields;b.fields.push({name:"STAT_COUNT",type:"esriFieldTypeInteger",alias:"STAT_COUNT"});return b},getLoadedLayer:function(a){var c=new h,d=null,d="string"===typeof a?new b(a):"esri.layers.FeatureLayer"===
a.declaredClass?a:new b({layerDefinition:k.clone(a),featureSet:null});if(d.loaded)c.resolve(d);else d.on("load",function(){c.resolve(d)});return c},parseDataSourceId:function(a){var b=a.split("~"),d={};if(2>b.length)return console.error("Bad data source id:",a),d;switch(b[0]){case "map":return b=a.lastIndexOf("~"),d={from:"map",layerId:a.substring(4,b)};case "widget":return d={from:"widget",widgetId:b[1]};case "external":return d={from:"external"};default:console.error("Bad data source id:",a)}},
getDsTypeInfoMeta:function(a,b){var c={dsTypeInfo:null,dsMeta:null};c.dsTypeInfo=this.parseDataSourceId(a);if(b=b.dataSource&&b.dataSource.dataSources)c.dsMeta=b[a];return c},getValueFromFeatures:function(a,b,d){if(!a||!b||!d)return!1;a=this.getSingleValueFromFeatures(a,b,d);a=this._getVaildValue(a);return"number"!==typeof a?!1:a},_getVaildValue:function(a){if(a||0===a)return Number(a)},cleanFeatures:function(a){if(a&&a.length)return a.map(function(a){return{attributes:a.attributes}})},getFieldAliasByFieldInfo:function(a,
b){var c="";if(!a)return c;var f=a.name,c=a.alias||f;b&&(c=this.getAliasFromPopupInfo(f,b));return c},getAliasFromPopupInfo:function(a,b){var c=a;if(!b)return c;(b=b.fieldInfos)&&0<b.length&&b.forEach(function(b){b.fieldName===a&&(c=b.label)});return c},isFolatNumber:function(a){return"number"!==typeof a?!1:/^(-?\d+)(\.\d+)?$/.test(a)},addAliasForLayerDefinition:function(a,b){a&&a.fields&&0<a.fields.length&&a.fields.forEach(k.hitch(this,function(a){var c=this.getFieldAliasByFieldInfo(a,b);c&&(a.alias=
c)}))},mockDataSourceForGaugeRange:function(a,b){var c=this.getRangeSourceInfo(a);a=this._mockDataSourceByStatSourceID(c.range1,b);b=this._mockDataSourceByStatSourceID(c.range2,b);return[a,b]},_mockDataSourceByStatSourceID:function(a,b){a=a||{};var c=a.id||b;a=a.id?a.label:b;var f;c&&(f={name:a,frameWorkDsId:c,dataSourceType:"DATA_SOURCE_FROM_FRAMEWORK"});return f},getStatisticForChart:function(a){var b,d,f,e=a.mode;d=a.valueFields;var l=a.operation,h=a.nullValue;"average"===l&&(l="avg");a=a.clusterField;
"count"!==e?(b=d,d=l):d="count";if("category"===e||"count"===e)f=[a];return{type:d,fields:b,groupByFields:f,nullValue:h}},getStatisticForGauge:function(a){var b={};a=a.statistics;if(!a||!a.length)return b;a.forEach(function(a){"value"===a.type&&(b.value=a.config.value);"range"===a.type&&"stat"===a.config.type&&(b[a.name]=a.config.value.statistic)});return b},getStatisticForNumber:function(a){if(a&&a.statistics&&a.statistics.length)return a.statistics[0].config.value},getRangeDataSource:function(a){var b=
{};if(!a||!a.config)return b;a=a.config.statistics;if(!a||!a.length)return b;a.forEach(function(a){"range"===a.type&&"stat"===a.config.type&&(b[a.name]={name:a.config.value.sourceLabel||a.config.value.sourceID,frameWorkDsId:a.config.value.sourceID,dataSourceType:"DATA_SOURCE_FROM_FRAMEWORK"})});return b},getRangeFixedValue:function(a){var b={};a=a.config.statistics;if(!a||!a.length)return b;a.forEach(function(a){"range"===a.type&&"fixed"===a.config.type&&(b[a.name]=a.config.value)});return b},checkDataSourceIsVaild:function(a,
b,d,f,e){var c={code:0,fields:[]},g=null;a?"DATA_SOURCE_FROM_FRAMEWORK"===a.dataSourceType?(c.label=a.name||a.frameWorkDsId,f&&f.dataSource&&f.dataSource.dataSources?(a=f.dataSource.dataSources[a.frameWorkDsId])?(g=a.dataSchema&&a.dataSchema.fields,b=this._getNeededFieldsByMainDijitJson(b,e),c=this._isDataSourceContainNeededFields(g,b,c)):c.code=1:c.code=1):"DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===a.dataSourceType&&(g=a.layerId,c.label=a.name||a.layerId,g&&d?(a=d.getLayer(g))?(g=a.fields,b=this._getNeededFieldsByMainDijitJson(b,
e),c=this._isDataSourceContainNeededFields(g,b,c)):c.code=1:c.code=1):c.code=1;return c},getCheckDataSourceResultCode:function(a){if(a&&a.length){a=k.clone(a);var b=a.shift();if(b.code)return b.code;var d=0;a.some(function(a){if(a&&1===a.code)return d=3,!0;if(a&&2===a.code)return d=2,!0});return d}},getRangeSourceInfo:function(a){var b={};if(!a||!a.length)return b;a.forEach(function(a){if("range"===a.type&&"stat"===a.config.type){var c=a.name,d=a.config.value.sourceID;a=a.config.value.sourceLabel;
c&&d&&(b[c]={id:d,label:a||d})}});return b},getGaugeNumberStatisticField:function(a){var b={};if(!a||!a.length)return b;a.forEach(function(a){if("range"===a.type&&"stat"===a.config.type){var c=a.name;a=a.config.value.statistic.field;c&&a&&(b[c]=a)}else"value"===a.type&&(a=a.config.value.field,b.value=a)});return b},_isDataSourceContainNeededFields:function(a,b,d){if(!a||!a.length)return d.code=1,d;var c=this._getFieldNamesByFields(a);if(!b||!b.length)return d.code=0,d;b.forEach(function(a){0>c.indexOf(a)&&
d.fields.push(a)});d.fields.length&&(d.code=2);return d},_getNeededFieldsByMainDijitJson:function(a,b){if(a)return this._getNeededFieldsByDijitConfig(a.type,a.config,b)},_getNeededFieldsByDijitConfig:function(a,b,d){var c=null;if(b){if("chart"===a){c=[];d=b.data;if(!d)return;d.clusterField&&c.push(d.clusterField);d.valueFields&&d.valueFields.length&&(c=c.concat(d.valueFields))}else if("gauge"===a||"number"===a)c=[],(a=b.statistics)&&(d=this.getGaugeNumberStatisticField(a)[d])&&c.push(d);if(c&&c.length)return c}},
formatterRangeNumber:function(a){"number"!==typeof a&&(a=Number(a));if(!a&&0!==a)return!1;this.isFolatNumber(a)&&(a=a.toFixed(2),a=Number(a));return a},upperCaseString:function(a){return a&&"string"===typeof a?a.toUpperCase():a},lowerCaseString:function(a){return a&&"string"===typeof a?a.toLowerCase():a},isStrictNaN:function(a){return"number"===typeof a&&isNaN(a)},isValidValue:function(a){return"undefined"!==typeof a&&null!==a&&""!==a&&!this.isStrictNaN(a)},getLayerIdByDataSource:function(a){if(a){var b=
a.layerId;a=a.frameWorkDsId;!b&&a&&(a=this.parseDataSourceId(a))&&"undefined"!==a.layerId&&(b=a.layerId);return b}}}})},"widgets/Infographic/dijits/GaugeDijit":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html ./BaseDijit jimu/utils jimu/dijit/Chart ../utils ./clientStatistic".split(" "),function(n,e,k,l,d,h,b,a){return n([l],{templateString:'\x3cdiv style\x3d"width:100%;height:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"noDataDiv"class\x3d"no-data-tip"\x3e${nls.noData}\x3c/div\x3e\x3cdiv class\x3d"gauge-dom" data-dojo-attach-point\x3d"gaugeDomNode"\x3e\x3c/div\x3e\x3c/div\x3e',
type:"gauge",baseClass:"infographic-gauge-dijit",config:null,defValueStyle:{state:!0,isRatio:!1,font:{font:{fontFamily:"Arial",bold:!1,italic:!1,underline:!1},textColor:"#59bad8"},dataFormat:{unit:"none",decimalPlaces:"",prefix:"",suffix:""}},constructor:function(a){this.inherited(arguments);this.visible=a.visible},postCreate:function(){this.inherited(arguments);this._features=null;this._upgradeConfig(this.config);this.setConfig(this.config);this._updateBackGroundColor()},_upgradeConfig:function(a){var b=
a&&a.display&&a.display.currentValue;(b=b&&b.dataFormat)&&"undefined"===typeof b.digitSeparator&&(b.digitSeparator=!0);b=(a=a&&a.display&&a.display.dataLabels)&&a.dataFormat||{};"undefined"===typeof b.digitSeparator&&(b.digitSeparator=!0);a.dataFormat=b},setLayerInfo:function(){},setVisible:function(a){this.visible=a},resetData:function(){this.gaugeValue=this._valueObj=this._r2fs=this._r1fs=this._features=this.dataSource=null},onDataSourceDataUpdate:function(a,d,f){this.inSettingPage?(a&&"undefined"!==
typeof a.features&&(this._features=b.cleanFeatures(a.features)),this.setRangeFeatures(d,"range1"),this.setRangeFeatures(f,"range2")):this._valueObj=a},setRangeFeatures:function(a,d){"range1"===d?this._r1fs=b.cleanFeatures(a):"range2"===d&&(this._r2fs=b.cleanFeatures(a))},resize:function(){this.chart&&this.chart.resize()},setDataSource:function(a){this.inherited(arguments);this.dataSource=a},setConfig:function(a){a&&(this.config=a)},startRendering:function(){if(this._shouldRenderGauge()){this.chart||
this._createJimuChart();this._updateBackGroundColor();var a=this._calculateGaugeValue();0===a?this.showNodata():-1===a?this.showNodata(this.nls.invalidRangeTip):(a=this._createChartOption(),this.chart.updateConfig(a))}},_splitStatistic:function(a){if(a&&a.length){var b={};a.forEach(function(a){if("value"===a.type)b.value=a.config.value;else if("range"===a.type){var c=a.name;"stat"===a.config.type?b[c]=a.config.value.statistic:"fixed"===a.config.type&&(b[c]={value:a.config.value})}});return b}},_getValueObjForSetting:function(){var c=
this.config&&this.config.statistics;if(c&&c.length){var d=this._splitStatistic(c),f=d.value,e=d.range1,d=d.range2,l=this.dataSource,c=b.mockDataSourceForGaugeRange(c),f=a.statistic(f,l,this._features);"undefined"!==typeof e.value?e=e.value:(e=a.statistic(e,c[0],this._r1fs),e=a.formatterRangeNumber(e));"undefined"!==typeof d.value?d=d.value:(d=a.statistic(d,c[1],this._r2fs),d=a.formatterRangeNumber(d));return{value:f,ranges:[e,d]}}},_calculateGaugeValue:function(){var a;a=this.inSettingPage?this._getValueObjForSetting():
this._valueObj;if(!b.isValidValue(a)||!b.isValidValue(a.value))return 0;if(!this._isEffectiveRange(a))return-1;this.gaugeValue=a;return 1},_createChartOption:function(){var a=this._splitValueObj(this.gaugeValue),b=a.min,d=a.max,e=a.value,e=this._parseRealValueDecimal(e),l=this.config,a=l.display&&l.display.dataLabels&&l.display.dataLabels.dataFormat,e={series:[{data:[e]}]};e.shape=l.shape;e.type="gauge";e.theme=this.isDarkTheme()?"dark":"light";l=this._createGaugeOption();e.gaugeOption=l;e.max={value:d,
format:a};e.min={value:b,format:a};return e},_parseRealValueDecimal:function(a){var b=this._getVaildValueDisplay();if(b=this._getVaildDecimalPlaces(b))a=a.toFixed(b),a=Number(a);return a},_createGaugeOption:function(){var a=this._splitValueObj(this.gaugeValue),b=a.value,d=this.config,e=d.display&&d.display.dataLabels&&d.display.dataLabels.dataFormat,l={},h=this._getValueStyle();h&&(l.valueStyle=h);this._setGaugeDisplay(l);a=this._getIndicatorInfo(d,b,a);a.targetValue&&(b=this._isShowTargetValue()?
a.targetValue:[],l.targetValue=b.map(function(a){return{value:a,format:e}}));a.columnColor&&(l.columnColor=a.columnColor);return l},_getIndicatorInfo:function(a,e,f){var c=!1,g=!1,l=!1,h=this._getIndicatorValues(a,f);d.isNotEmptyObject(h,!0)&&(c=h);if(a=a.indicators)(e=b.getVaildIndicator(e,a,f.max))&&e.gaugeColor&&(g=e.gaugeColor),e&&e.valueColor&&(l=e.valueColor);return{targetValue:c,columnColor:g,valueColor:l}},_getIndicatorValues:function(a,b){var c=[];a.indicators&&(a.indicators.forEach(function(a){a.value&&
a.value.forEach(e.hitch(this,function(d){c.push(this.betterDisplayNumberOfMultiDecimal(a.isRatio?d/100*b.max:d,2))}))}.bind(this)),c.sort(function(a,b){return a-b}),c=d.uniqueArray(c));return c},betterDisplayNumberOfMultiDecimal:function(a,b){if("number"!==typeof a)return a;var c=0,d=a.toString().split(".");1===d.length?c=0:2===d.length&&(c=d[1].length);return c?(c>b&&(c=b),a=a.toFixed(c),parseFloat(a)):a},_splitValueObj:function(a){var b;b=a.value;a=a.ranges;a.sort(function(a,b){return a-b});return{min:a[0],
max:a[1],value:b}},_isEffectiveRange:function(a){var b=this._splitValueObj(a);a=b.min;b=b.max;return"undefined"===typeof a||"undefined"===typeof b||b===a?!1:!0},_isRangeNeedFeatures:function(a,b){var c=!1;a=a.statistics;if(!a||!a.length)return c;a.some(function(a){if("range"===a.type&&a.name===b&&"stat"===a.config.type)return c=!0});return c},_shouldRenderGauge:function(){if(this.visible&&this.config){var a;if(this.inSettingPage){var b=this._isRangeNeedFeatures(this.config,"range1");a=this._isRangeNeedFeatures(this.config,
"range2");b=b?this._r1fs:!0;a=a?this._r2fs:!0;a=this.domNode&&this._features&&b&&a}else b=(a=this._valueObj)&&a.ranges,a=this.domNode&&a&&b&&"number"===typeof a.value&&"number"===typeof b[0]&&"number"===typeof b[1];a?this.hideNodata():this.showNodata();return!!a}},_updateBackGroundColor:function(){var a=this.config;(a=a&&a.display&&a.display.backgroundColor)&&k.setStyle(this.domNode,"backgroundColor",a)},_createJimuChart:function(){var a=this._getDefaultChartOption();this.chart=new h({chartDom:this.gaugeDomNode,
config:a});this.chart.placeAt(this.gaugeDomNode);this.chart.resize()},_generateValueFormatter:function(a){var b=this._splitValueObj(this.gaugeValue),c=b.max,l=b.min;if(a)return e.hitch(this,function(a,b){var f="",e,g,h=a.dataFormat;if(!h)return b;e=h.decimalPlaces;g=h.digitSeparator;if(e||0===e)e=Number(e);a.isRatio?b=b<=l?d.convertNumberToPercentage(0,e,g):d.convertNumberToPercentage((b-l)/(c-l),e,g):"percentage"===h.unit?b=d.convertNumberToPercentage(b,e,g):"thousand"===h.unit?(f=this.nls.thousandAbbreviation,
b/=1E3):"million"===h.unit?(f=this.nls.millionAbbreviation,b/=1E6):"billion"===h.unit&&(f=this.nls.billionAbbreviation,b/=1E9);a.isRatio||"percentage"===h.unit||(b=d.localizeNumberByFieldInfo(b,{format:{places:e,digitSeparator:g}}));f&&(b+=f);a=b;h.prefix&&(a=h.prefix+" "+a);h.suffix&&(a+=" "+h.suffix);return a},a,b.value)},_getVaildDecimalPlaces:function(a){if(a){if((a=(a=a.dataFormat)&&a.decimalPlaces)||0===a)a=Number(a);if("number"===typeof a)return a}},_getVaildValueDisplay:function(){var a=this.config;
if(a=a&&a.display)return a.currentValue&&a.currentValue.state?a.currentValue:e.clone(this.defValueStyle)},_generateTextStyle:function(a){var b=this._splitValueObj(this.gaugeValue),b=this._getIndicatorInfo(this.config,b.value,b),c=a&&a.font;if(c){a={};"undefined"!==typeof c.fontSize&&(a.fontSize=Number(c.fontSize));a.color=b.valueColor||c.textColor;b=c.font;if(!b)return a;a.fontWeight=b.bold?"bold":"normal";b.fontFamily&&(a.fontFamily=b.fontFamily);a.fontStyle=b.italic?"italic":"normal";return a}},
_isShowTargetValue:function(){var a=this.config&&this.config.display&&this.config.display.dataLabels;if(a)return!!a.targetValue},_setGaugeDisplay:function(a){var b=this.config.display;b&&(b.gaugeColor&&(a.columnColor=b.gaugeColor),b.bgColor&&(a.bgColor=b.bgColor),b.dataLabels&&b.dataLabels.state&&(b=b.dataLabels,a.showDataRangeLabel=!!b.dataRange,a.showTargetValueLabel=!!b.targetValue,a.labelColor=b.textColor||""))},_getValueStyle:function(){var a=this._getVaildValueDisplay();if(a){var b={},d=this._getVaildDecimalPlaces(a);
"number"===typeof d&&(b.decimalPlaces=d);b.formatter=this._generateValueFormatter(a);if(a=this._generateTextStyle(a))b.textStyle=a;return b}},_getDefaultChartOption:function(){var a={type:"gauge",confine:!0,shape:"curved",min:0,max:100,series:[{data:[0]}]};this.config&&this.config.shape&&(a.shape=this.config.shape);a.theme=this.isDarkTheme()?"dark":"light";return a},showNodata:function(a){this.chart&&this.chart.clear();k.addClass(this.domNode,"no-data");a&&(this.noDataDiv.innerHTML=a)},hideNodata:function(){k.removeClass(this.domNode,
"no-data")}})})},"widgets/Infographic/dijits/clientStatistic":function(){define(["jimu/DataSourceManager","jimu/statisticsUtils","../utils"],function(n,e,k){return{getSingleValueForServerStatFeature:function(e){e=e&&e[0]&&e[0].attributes;if(!e)return null;var d=Object.keys(e)[0];return Number(e[d])},getResultForExtraStatFeature:function(e,d){var l=d.field;d=d.type;l="count"===d?"STAT_COUNT":k.upperCaseString(l+"_"+d);d=e&&e[0]&&e[0].attributes;if(!d)return null;e=d[l];"undefined"===typeof e&&(l=k.lowerCaseString(l),
e=d[l]);return Number(e)},statistic:function(e,d,h,b){return e&&d&&h?"DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===d.dataSourceType?this.getStatisticResultFromFeatures(h,e):"Features"===this._getExtalDataSourceType(d,b)?this.getStatisticResultFromFeatures(h,e):this.statisticExtraStatSource(e,h):null},formatterRangeNumber:function(e){if(!e&&0!==e)return!1;"number"!==typeof e&&(e=Number(e));this.isFolatNumber(e)&&(e=e.toFixed(2),e=Number(e));return e},isFolatNumber:function(e){return"number"!==typeof e?!1:
/^\d+(\.\d+)$/.test(e)},statisticExtraStatSource:function(e,d){var h;if(d){if(0===d.length)h=void 0;else if(1===d.length)h=this._getValueFromFeatureOfExtraStatFeatures(d[0],e);else if(1<d.length){var b={count:0,sum:0},a,c,g,f=0,l=0;d.forEach(function(d){a=this._getValueFromFeatureOfExtraStatFeatures(d,e);switch(e.type){case "count":b.count+=a;break;case "sum":b.sum+=a;break;case "min":b.min="undefined"===typeof b.min?a:Math.min(b.min,a);break;case "max":b.max="undefined"===typeof b.max?a:Math.max(b.max,
a);break;case "avg":g=this._getValueFromFeatureOfExtraStatFeatures(d,{type:"count"}),c=this._getValueFromFeatureOfExtraStatFeatures(d,{field:e.field,type:"sum"}),f+=c,l+=g}}.bind(this));"avg"===e.type&&(b.avg=0===l?0:f/l);h=b[e.type]}return h}},_getValueFromFeatureOfExtraStatFeatures:function(e,d){if(!e||!e.attributes)return"count"===d.type?0:void 0;d="count"===d.type?"STAT_COUNT":k.upperCaseString(d.field+"_"+d.type);e=e.attributes;var h=e[d];"undefined"===typeof h&&(d=k.lowerCaseString(d),h=e[d]);
return h},_getCountValueFromFeatureOfExtraStatFeatures:function(e){if(e&&e.attributes){e=e.attributes;var d,h="STAT_COUNT";d=e[h];"undefined"===typeof d&&(h=k.lowerCaseString(h),d=e[h]);return d||0}},getStatisticResultFromFeatures:function(l,d){if(l){if("count"===d.type)return l.length;var h=d.type;return e.getStatisticsResultFromClientSync({featureSet:{features:l},fieldName:d.field,statisticTypes:[h]})[h+"Field"]}},_getExtalDataSourceType:function(e,d){return this._getExtalDataSourceInfo(e,d).type},
_getExtalDataSourceInfo:function(e,d){if(e){d=d||this.appConfig;var h=e.frameWorkDsId;if("undefined"!==typeof h){var b={};return b=(d=d&&d.dataSource&&d.dataSource.dataSources)?d[h]:n.getInstance().getDataSourceConfig(e.frameWorkDsId)}}}}})},"widgets/Infographic/dijits/NumberDijit":function(){define("dojo/_base/declare ./BaseDijit dojo/dom-style dojo/_base/html jimu/utils ../utils ./clientStatistic ./styleUtils".split(" "),function(n,e,k,l,d,h,b,a){return n([e],{templateString:'\x3cdiv style\x3d"height:100%;width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"noDataDiv"class\x3d"no-data-tip"\x3e${nls.noData}\x3c/div\x3e\x3ca data-dojo-attach-point\x3d"numberContent" class\x3d"number-content no-trim" target\x3d"_blank"\x3e\x3cdiv data-dojo-attach-point\x3d"leftIcon" class\x3d"icon"\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"number" class\x3d"number"\x3e\x3cdiv data-dojo-attach-point\x3d"prefix" class\x3d"prefix"\x3e\x3c/div\x3e\x3cdiv class\x3d"value-content" data-dojo-attach-point\x3d"valueContent"\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"suffix" class\x3d"suffix"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv data-dojo-attach-point\x3d"rightIcon" class\x3d"icon"\x3e\x3c/div\x3e\x3c/a\x3e\x3c/div\x3e',
baseClass:"infographic-number-dijit",type:"number",config:null,constructor:function(a){this.visible=a.visible},postCreate:function(){this.inherited(arguments);this._value=this._features=null;this._upgradeConfig(this.config);this.setConfig(this.config);this._updateBackGroundColor()},_upgradeConfig:function(a){(a=a&&a.dataFormat)&&"undefined"===typeof a.digitSeparator&&(a.digitSeparator=!0)},setLayerInfo:function(){},setVisible:function(a){this.visible=a},resetData:function(){this.numberValue=this._value=
this._features=this.dataSource=null},onDataSourceDataUpdate:function(a){this.inSettingPage?a&&"undefined"!==typeof a.features&&(this._features=h.cleanFeatures(a.features)):"number"===typeof a&&(this._value=a)},setDataSource:function(a){this.inherited(arguments);this.dataSource=a},setConfig:function(a){a&&(this.config=a)},startRendering:function(){this._shouldRenderNumber()&&(this._updateBackGroundColor(),this._calculateNumberValue(),"number"!==typeof this.numberValue?this.showNodata():this._renderNumber(this.numberValue))},
_calculateNumberValue:function(){var a;this.inSettingPage?(a=h.getStatisticForNumber(this.config),a=b.statistic(a,this.dataSource,this._features)):a=this._value;"undefined"!==typeof a&&!1!==a&&(this.numberValue=a)},_renderNumber:function(a){this._cleanNumberContent();this.valueContent.innerHTML=d.localizeNumber(a);this._setValueDisplay()},_setValueDisplay:function(){var a=this.config;a&&(this._setBackground(a),this._setFont(a),this._setDataFormat(a),this._setIndicatorStyle())},_shouldRenderNumber:function(){if(this.visible&&
this.config){var a;(a=this.inSettingPage?this.domNode&&this._features:this.domNode&&"number"===typeof this._value)?this.hideNodata():this.showNodata();return!!a}},_getIndicatorColor:function(){var a=!1,b=!1,f=this.config.indicators;f&&((f=h.getVaildIndicator(this.numberValue,f))&&f.valueColor&&(a=f.valueColor),f&&d.isNotEmptyObject(f.iconInfo)&&(b=f.iconInfo));return{color:a,icon:b}},_cleanNumberContent:function(){l.removeClass(this.leftIcon);l.addClass(this.leftIcon,["icon"]);l.removeClass(this.rightIcon);
l.addClass(this.rightIcon,["icon"]);this.replaceIcon&&(l.destroy(this.replaceIcon),this.replaceIcon=null);l.empty(this.valueContent);l.empty(this.prefix);l.empty(this.suffix);this._setValueColor("")},_updateBackGroundColor:function(){var a=this.config;(a=a&&a.background&&a.background.backgroundColor)&&l.setStyle(this.domNode,"backgroundColor",a)},_setBackground:function(a){if(a=a&&a.background){a.backgroundColor&&l.setStyle(this.domNode,"backgroundColor",a.backgroundColor);var b=a.alignment;b&&(l.removeClass(this.domNode),
l.addClass(this.domNode,"infographic-number-dijit"),b.horizontal&&l.addClass(this.domNode,"horizontal-"+b.horizontal),b.vertical&&l.addClass(this.domNode,"vertical-"+b.vertical));a.link?l.setAttr(this.numberContent,"href",a.link):l.removeAttr(this.numberContent,"href")}},_setFont:function(b){if(b&&b.font){var c={};a.font.setStyle(b.font,c);l.setStyle(this.number,c)}},_setDataFormat:function(a){var b,c="",e;b=this.numberValue;var h=a.dataFormat;h&&(a=h.decimalPlaces,e=h.digitSeparator,a&&(a=Number(a)),
"percentage"===h.unit?b=d.convertNumberToPercentage(b,a,e):"thousand"===h.unit?(c=this.nls.thousandAbbreviation,b/=1E3):"million"===h.unit?(c=this.nls.millionAbbreviation,b/=1E6):"billion"===h.unit&&(c=this.nls.billionAbbreviation,b/=1E9),"percentage"!==h.unit&&(b=d.localizeNumberByFieldInfo(b,{format:{places:a,digitSeparator:e}})),c&&(b+=c),this.valueContent.innerHTML=b,h.prefix&&(this.prefix.innerHTML=h.prefix),h.suffix&&(this.suffix.innerHTML=h.suffix))},_setIndicatorStyle:function(){var a=this._getIndicatorColor();
a.color&&this._setValueColor(a.color);a.icon&&this._setIndicatorIcon(a.icon)},_setValueColor:function(a){k.set(this.number,"color",a)},_setIndicatorIcon:function(a){a&&("left"===a.placement||"right"===a.placement?this._setLeftRightIcon(a):"replace"===a.placement&&this._setReplaceIcon(a))},_setReplaceIcon:function(a){var b=l.create("div",{"class":"indicator-icon "+a.icon});l.empty(this.valueContent);l.place(b,this.valueContent);k.set(b,"color",a.color);k.set(b,"display","inline-flex")},_setLeftRightIcon:function(a){var b;
"left"===a.placement?b=this.leftIcon:"right"===a.placement&&(b=this.rightIcon);l.addClass(b,"indicator-icon "+a.icon);k.set(b,"color",a.color)},showNodata:function(a){this._cleanNumberContent();l.addClass(this.domNode,"no-data");a&&(this.noDataDiv.innerHTML=a)},hideNodata:function(){l.removeClass(this.domNode,"no-data")}})})},"widgets/Infographic/dijits/SourceLauncher":function(){define("dojo/_base/declare dojo/_base/lang dojo/Evented dojo/on dojo/Deferred dijit/_WidgetBase jimu/utils ../utils jimu/LayerInfos/LayerInfos esri/geometry/geometryEngine esri/tasks/query esri/tasks/QueryTask esri/tasks/StatisticDefinition esri/layers/FeatureLayer ./clientStatistic".split(" "),
function(n,e,k,l,d,h,b,a,c,g,f,m,p,r,u){return n([h,k],{oidFieldType:"esriFieldTypeOID",constructor:function(a){this.uniqueID=b.getRandomString();this.map=a.map;this.useSelection=a.useSelection;this.filterByExtent=a.filterByExtent;this.returnFeatures=a.returnFeatures;this.statistic=a.statistic;this.dataSource=a.dataSource;this.config=a.config;this.isDateType=!!(this.config&&this.config.data||{}).dateConfig;this.layerInfosObj=c.getInstanceSync();this.layerObject=a.layerObject;this.timeIntervalHandle=
this.filterChangedHandle=this.updateEndHandle=this.refreshIntervalHandle=this.selectionHandle=this.exchetChangeHandle=this._oldQueryParameter=this._queryParameter=this._layerUrl=null;this._loadingTypes={}},start:function(){this.showLoading("sl-get-lyobj");this._tryGetLayerObject("sl-get-lyobj").then(function(){this.hideLoading("sl-get-lyobj");this.awake();this._listenEventsContinuousAccessFeatures()}.bind(this),function(a){console.error(a.message||a);this.hideLoading("sl-get-lyobj");this._onFailed()}.bind(this))},
awake:function(){this.sleeping=!1;this._getFeaturesForFirst()},sleep:function(){this.sleeping=!0},destroy:function(){this._loadingTypes={};this._removeHandles();this.inherited(arguments)},_getFeaturesForFirst:function(){this._trigerCallback()},_listenEventsContinuousAccessFeatures:function(){if(this.layerObject&&this.layerInfo){var a=this._shouldAccessClientFeatures();this.useSelection&&(this._resetSelectionHandle(),this.selectionHandle=l(this.layerObject,"selection-complete,selection-clear",e.hitch(this,
function(){this._trigerCallback()})));a||(this._resetFilterChangedHandle(),this.filterChangedHandle=l(this.layerInfo,"filterChanged",e.hitch(this,function(a){a&&a.zoomAfterFilter&&this.filterByExtent||this._trigerCallback()})));a&&(this._resetUpdateEndHandle(),this.updateEndHandle=l(this.layerObject,"update-end",e.hitch(this,function(){this._trigerCallback()})));this.filterByExtent&&this.map&&(this._resetExtentChangeHandle(),this.exchetChangeHandle=l(this.map,"extent-change",e.hitch(this,function(){this.emit("start");
this._trigerCallback(!0)})));a||(this._setTimeListener(),this._resetRefreshIntervalHandle(),this.refreshIntervalHandle=l(this.layerObject,"refresh-interval-change",e.hitch(this,this._setTimeListener)))}},_setTimeListener:function(){var a=this._getLayerRefreshInterval();a?(this._resetTimeIntervalHandle(),this.timeIntervalHandle=setInterval(e.hitch(this,function(){this._trigerCallback()}),6E4*a)):this._resetTimeIntervalHandle()},_trigerCallback:function(a){var b=this.computingTheWayToGetFeatures();
if(!a||2!==b||!this._isLayerOnDemandMode())switch(this.emit("start"),b){case 1:this._getFeaturesFromSelection(this.map,this.layerObject,this.filterByExtent,e.hitch(this,this._onDataUpdate));break;case 2:this._getClientFeaturesFromMap(this.map,this.layerObject,this.filterByExtent,e.hitch(this,this._onDataUpdate));break;case 3:this._getStatisticsFeaturesForServer(e.hitch(this,this._onDataUpdate))}},computingTheWayToGetFeatures:function(){var a=0;return this.sleeping||!this.layerObject?a:a=this._isMapLayer()?
this._shouldAccessFeaturesBySelection()?1:this._shouldAccessClientFeatures()?2:3:0},_getClientFeaturesFromMap:function(a,b,c,d){var f=b.graphics;c&&(f=this._filterFeaturesByExtent(a.extent,f));f=this._sortClientFeaturesByObjID(f,b);d(f)},_getFeaturesFromSelection:function(a,b,c,d){var f=[],e=!1,f=b.getSelectedFeatures(),e=!0;c&&(f=this._filterFeaturesByExtent(a.extent,f));f.isSelectedFeatures=e;f=this._sortClientFeaturesByObjID(f,b);d(f)},_getStatisticsFeaturesForServer:function(a){this._updateLayerInfoFilter();
this._tryGenerateQueryParameter();this._shouldLaunchQuery()&&(this.showLoading("sl-sev-st"),this.queryDeferred=this._doQuery(),this.queryDeferred.then(e.hitch(this,function(b){this.queryDeferred=null;this.hideLoading("sl-sev-st");b=b.features||[];b=this._calculateAverageWithNullValueAsZero(b,this.config);a(b,!0)}),e.hitch(this,function(a){this.queryDeferred=null;console.error(a.message||a);this.hideLoading("sl-sev-st");this._onFailed("sl-sev-st")})))},_updateLayerInfoFilter:function(){if(this.dataSource&&
"undefined"!==typeof this.dataSource.layerId){var a=this.layerInfosObj.getLayerInfoById(this.dataSource.layerId);a&&(this._layerFilter=a.getFilter())}},_onFailed:function(){this.emit("failed")},hideLoading:function(a){this._loadingTypes[a]=!1;this._shouldHideLoading()&&this._hideLoading()},showLoading:function(a){this._loadingTypes[a]=!0;this._showLoading()},_showLoading:function(){this.emit("loading",this.uniqueID)},_hideLoading:function(){this.emit("unloading",this.uniqueID)},_shouldHideLoading:function(){if(this._loadingTypes)return Object.keys(this._loadingTypes).map(function(a){return this._loadingTypes[a]}.bind(this)).every(function(a){return!a})},
_onDataUpdate:function(a,b){a=this._getValueByFeatures(a,b);this.emit("data-update",a);setTimeout(function(){this.emit("done")}.bind(this),500)},_getValueByFeatures:function(a,b){if(!a||!a.length)return null;var c=null;this.returnFeatures?a&&(c={features:a,hasStatisticsed:!!b}):c=this._getValueForNumber(a);return c},_getValueForNumber:function(a){return this._isNeededCalculateForClient()?u.statistic(this.statistic,this.dataSource,a):u.getSingleValueForServerStatFeature(a)},_isMapLayer:function(){return"DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===
this.dataSource.dataSourceType},_isLayerOnDemandMode:function(){return this.layerObject&&this.layerObject.currentMode===r.MODE_ONDEMAND},_shouldAccessFeaturesBySelection:function(){return this.useSelection&&this.layerObject&&this.layerObject.getSelectedFeatures().length},_shouldAccessClientFeatures:function(){var a=this.config&&this.config.data&&"feature"===this.config.data.mode,b=this.isDateType,c=this._isSupportServerStatByExtent();return a||b||!c},_isSupportServerStatByExtent:function(){var a=
this.layerObject&&this.layerObject.version&&10.11<=Number(this.layerObject.version),b=this._isLayerSupportStatistics();return a&&b},_isLayerSupportStatistics:function(){if(this.layerObject&&this.layerObject.url){var a=!1;return a=this.layerObject.advancedQueryCapabilities?!!this.layerObject.advancedQueryCapabilities.supportsStatistics:!!this.layerObject.supportsStatistics}},_getLayerRefreshInterval:function(){if(this.layerObject&&this.layerObject.refreshInterval)return this.layerObject.refreshInterval},
_sortClientFeaturesByObjID:function(a,c){if(0<a.length){var d=b.getObjectIdField(c);d&&(c=a[0])&&c.attributes&&c.attributes.hasOwnProperty(d)&&a.sort(function(a,b){a.attributes||(a.attributes={});b.attributes||(b.attributes={});a=a.attributes[d];b=b.attributes[d];return a<b?-1:a>b?1:0})}return a},_filterFeaturesByExtent:function(a,b){var c=a.normalize();return b=b.filter(e.hitch(this,function(a){try{if(a.geometry){var b="point"===a.geometry.type||"multipoint"===a.geometry;return c.some(e.hitch(this,
function(c){return b?c.contains(a.geometry):g.intersects(c,a.geometry)}))}}catch(w){console.error(w)}return!1}))},_calculateAverageWithNullValueAsZero:function(b,c){if(!this._shouldCalcAvgForNullValue(c)||!b||!b.length)return b;c=c.data&&c.data.valueFields;if(!c||!c.length)return b;var d=c.map(function(a){return a+"_sum"});b.forEach(function(b){var c=b.attributes;if(c){var f=c.STAT_COUNT;"undefined"===typeof f?(f=c.stat_count,delete c.stat_count):delete c.STAT_COUNT;var e,g,h;d.forEach(function(b){h=
b.replace(/_SUM$/gi,"");var d=a.upperCaseString(b);b=a.lowerCaseString(b);var k=a.upperCaseString(h+"_AVG");e=c[d];"undefined"===typeof e?(e=c[b],delete c[b]):delete c[d];!e&&"number"!==typeof e||!f?c[k]=null:(g=e/f,c[k]=g)})}});return b},_shouldCalcAvgForNullValue:function(a){var b=a&&a.data&&a.data.mode,c=a&&a.data&&a.data.operation;a=a&&a.data&&a.data.nullValue;return b&&("category"===b||"field"===b)&&a&&"average"===c},_shouldLaunchQuery:function(){var a=!0,c=!(!this.queryDeferred||this.queryDeferred.isResolved()||
this.queryDeferred.isRejected()),d=b.isEqual(this._queryParameter,this._oldQueryParameter);c&&d&&(a=!1);this._oldQueryParameter=e.clone(this._queryParameter);return a},_getOutStatistics:function(b){var c=b.fields,d=b.type,f=b.nullValue,e=d;f&&"avg"===d&&(e="sum");b=null;c&&c.length?(b=c.map(function(b){var c=a.upperCaseString(b+"_"+e),d=new p;d.statisticType=e;d.onStatisticField=b;d.outStatisticFieldName=c;return d}.bind(this)),f&&"avg"===d&&(c=new p,c.statisticType="count",c.onStatisticField=this._getStatisticsFieldForCountType(this.layerObject),
c.outStatisticFieldName="STAT_COUNT",b.push(c))):(c=new p,c.statisticType="count",c.onStatisticField=this._getStatisticsFieldForCountType(this.layerObject),c.outStatisticFieldName="STAT_COUNT",b=[c]);return b},_tryGenerateQueryParameter:function(){this._queryParameter={};this._layerUrl&&(this._queryParameter.url=this._layerUrl);this._layerFilter&&(this._queryParameter.where=this._layerFilter);var b,c,d;if(this.returnFeatures)this.statistic&&(this._queryParameter.outStatistics=this._getOutStatistics(this.statistic),
this.statistic.groupByFields&&(this._queryParameter.groupByFieldsForStatistics=this.statistic.groupByFields));else if(this.statistic){b=this.statistic.type;c=this.statistic.field;d=a.upperCaseString(c+"_"+b);"count"===this.statistic.type&&(c=this._getStatisticsFieldForCountType(this.layerObject),d="STAT_COUNT");var f=new p;f.statisticType=b;f.onStatisticField=c;f.outStatisticFieldName=d;this._queryParameter.outStatistics=[f]}},_getStatisticsFieldForCountType:function(a){var b=null;a&&(b=(a=(a=a.fields)&&
a.filter(function(a){return a.type===this.oidFieldType}.bind(this))[0])&&a.name);return b||"*"},_doQuery:function(){var a=new d;if(!this._queryParameter)return a.reject("Empty query parameter."),a;if(!this._queryParameter.url)return a.reject("Empty layer url."),a;var b=new m(this._queryParameter.url),c=new f;c.where=this._queryParameter.where||"1\x3d1";c.returnGeometry=!1;this.dataSource.filterByExtent&&this.map&&(c.geometry=this.map.extent);this._queryParameter.groupByFieldsForStatistics&&(c.groupByFieldsForStatistics=
this._queryParameter.groupByFieldsForStatistics);if(this._hasVaildOutStatistics(this._queryParameter.outStatistics))c.outStatistics=this._queryParameter.outStatistics;else return a.reject("Invaild outStatistics of query params."),a;this._queryParameter.orderByFields&&(c.orderByFields=this._queryParameter.orderByFields);return b.execute(c)},_hasVaildOutStatistics:function(a){return a&&a.length?a.every(function(a){return this._isTrueOrZero(a.onStatisticField)&&this._isTrueOrZero(a.outStatisticFieldName)&&
!!a.statisticType}.bind(this)):!1},_isTrueOrZero:function(a){return!!a||0===a},_tryGetLayerObject:function(){var a=new d;if("DATA_SOURCE_FEATURE_LAYER_FROM_MAP"!==this.dataSource.dataSourceType)return a.resolve(),a;var b=this.layerInfosObj.getLayerInfoById(this.dataSource.layerId);if(b)return this.layerInfo=b,this.layerObject?(this._layerUrl=this.layerObject.url,a.resolve(),a):b.getLayerObject().then(e.hitch(this,function(a){this.layerObject=a;this._layerUrl=this.layerObject.url}));a.reject("invaild data source");
return a},_isNeededCalculateForClient:function(){var a=this.layerObject&&this.useSelection&&0<this.layerObject.getSelectedFeatures().length,b=this._isSupportServerStatByExtent();return a||!b},_resetExtentChangeHandle:function(){this.exchetChangeHandle&&this.exchetChangeHandle.remove&&(this.exchetChangeHandle.remove(),this.exchetChangeHandle=null)},_resetUpdateEndHandle:function(){this.updateEndHandle&&this.updateEndHandle.remove&&(this.updateEndHandle.remove(),this.updateEndHandle=null)},_resetFilterChangedHandle:function(){this.filterChangedHandle&&
this.filterChangedHandle.remove&&(this.filterChangedHandle.remove(),this.filterChangedHandle=null)},_resetSelectionHandle:function(){this.selectionHandle&&this.selectionHandle.remove&&(this.selectionHandle.remove(),this.selectionHandle=null)},_resetRefreshIntervalHandle:function(){this.refreshIntervalHandle&&this.refreshIntervalHandle.remove&&(this.refreshIntervalHandle.remove(),this.refreshIntervalHandle=null)},_resetTimeIntervalHandle:function(){this.timeIntervalHandle&&(clearInterval(this.timeIntervalHandle),
this.timeIntervalHandle=null)},_removeHandles:function(){this._resetExtentChangeHandle();this._resetUpdateEndHandle();this._resetFilterChangedHandle();this._resetSelectionHandle();this._resetRefreshIntervalHandle();this._resetTimeIntervalHandle();this._resetSelectionHandle()}})})},"widgets/Infographic/dijits/ExtraSourceLauncher":function(){define("dojo/_base/declare dojo/Evented dijit/_WidgetBase jimu/DataSourceManager ../utils ./clientStatistic".split(" "),function(n,e,k,l,d,h){return n([k,e],{constructor:function(b){this.dataSourceManager=
l.getInstance();this.appConfig=b.appConfig;this.frameWorkDsId=b.dataSource.frameWorkDsId;this.returnFeatures=b.returnFeatures;this.formatResult=b.formatResult;this.statistic=b.statistic;this.exdsBeginUpdateHandle=null;this._isStatisticDataSource()},start:function(){this.awake()},awake:function(){this.sleeping=!1;this._getFeaturesForFirst()},sleep:function(){this.sleeping=!0},destroy:function(){this._removeHandles();this.inherited(arguments)},setAppConfigDSFeatures:function(b){this.sleeping||this._onDataUpdate(b)},
_getFeaturesForFirst:function(){var b=this.dataSourceManager.getData(this.dataSource.frameWorkDsId);this._onDataUpdate(b&&b.features)},_onDataUpdate:function(b){var a;this.returnFeatures?b&&(a={features:b,hasStatisticsed:!!this._isStatDataSource}):(a=this._isStatDataSource?h.statisticExtraStatSource(this.statistic,b):h.getStatisticResultFromFeatures(b,this.statistic),this.formatResult&&(a=d.formatterRangeNumber(a)));this.emit("data-update",a)},_isStatisticDataSource:function(){var b=this.appConfig.dataSource&&
this.appConfig.dataSource.dataSources,b=b&&b[this.frameWorkDsId];this._isStatDataSource=!(!b||"FeatureStatistics"!==b.type)},_resetExdsBeginUpdateHandle:function(){this.exdsBeginUpdateHandle&&this.exdsBeginUpdateHandle.remove&&(this.exdsBeginUpdateHandle.remove(),this.exdsBeginUpdateHandle=null)},_removeHandles:function(){this._resetExdsBeginUpdateHandle()}})})},"widgets/Infographic/_ChartSetting":function(){define(["dojo/_base/declare","dojo/_base/html","dijit/_WidgetBase","dijit/_TemplatedMixin",
"dojo/text!./_ChartSetting.html"],function(n,e,k,l,d){return n([k,l],{templateString:d,baseClass:"ig-chart-setting-dlg",postCreate:function(){var d=this.chartJson.config||{},b=d.data||{},d=d.display||{},a=b.type;"pie"===a?(e.setStyle(this.verticalAxisSection,"display","none"),e.setStyle(this.horizontalAxisSection,"display","none"),e.setStyle(this.withoutRecordsSection,"display","none")):e.setStyle(this.dataLabelsSection,"display","none");b.dateConfig||e.setStyle(this.withoutRecordsSection,"display",
"none");this._calcuteLegendDisplay(b,d)||e.setStyle(this.legendSection,"display","none");"count"!==b.mode&&"field"!==b.mode||"pie"===a||e.setStyle(this.legendSection,"display","none");(a=d.legend)&&a.show&&this._toggle(this.legendToggle);(a=d.dataLabel)&&a.show&&this._toggle(this.dataLabelsToggle);(a=d.xAxis)&&a.show&&this._toggle(this.horizontalAxisToggle);(d=d.yAxis)&&d.show&&this._toggle(this.verticalAxisToggle);b.dateConfig&&b.dateConfig.isNeedFilled&&this._toggle(this.withoutRecordsToggle)},
_calcuteLegendDisplay:function(d,b){var a=d.mode;"pie"===d.type?d=!0:(d=!0,"count"===a||"field"===a?d=!1:b.seriesStyle&&(d="layerSymbol"!==b.seriesStyle.type));return d},_toggle:function(d){e.hasClass(d,"toggle-on")?(e.removeClass(d,"toggle-on"),e.addClass(d,"toggle-off")):(e.removeClass(d,"toggle-off"),e.addClass(d,"toggle-on"))},_onToggleClick:function(d){var b=d.target;this._toggle(b);d=e.hasClass(b,"toggle-on")?!0:!1;b=e.attr(b,"data-id");"legend"===b?this.chartJson.config.display.legend.show=
d:"dataLabels"===b?this.chartJson.config.display.dataLabel.show=d:"horizontalAxis"===b?this.chartJson.config.display.xAxis.show=d:"verticalAxis"===b?this.chartJson.config.display.yAxis.show=d:"withoutRecords"===b&&this.chartJson.config.data.dateConfig&&(this.chartJson.config.data.dateConfig.isNeedFilled=d);this.chartDijit.setConfig(this.chartJson.config);this.chartDijit.startRendering()}})})},"widgets/Infographic/IGUtils":function(){define("dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/promise/all esri/tasks/query esri/tasks/QueryTask jimu/LayerInfos/LayerInfos jimu/DataSourceManager jimu/utils ./utils".split(" "),
function(n,e,k,l,d,h,b,a,c,g){return n([],{constructor:function(c){this.appConfig=c.appConfig;this.map=c.map;this.layerInfosObj=b.getInstanceSync();this.dataSourceManager=a.getInstance()},preprocessingDataSource:function(a){var b=new e;if(!a)return b.resolve(),b;var c=this._tryGetLayerIdDataSchema(a),d=c.dataSchema,c=this._tryGetLayerObject(c.layerId);a=this._tryGetLayerForFrameWork(d,a);l([c,a]).then(function(a){var c=a[0];b.resolve({layerObject:c&&c.layerObject,popupInfo:c&&c.popupInfo,featureLayerForFrameWork:a[1]})},
function(a){b.reject(a)});return b},preprocessingDataSourceForSetting:function(a){var b=new e;if(!a)return b.resolve(),b;var c=this._tryGetLayerIdDataSchema(a),d=c.layerId,f=c.dataSchema,c=this._tryGetLayerObject(d),f=this._tryGetLayerForFrameWork(f,a),d=this.getLayerDefinitionByDataSource(a,d);a=this.getFeaturesByDataSource(a);l([c,f,d,a]).then(function(a){var c=a[0],d=c&&c.layerObject,c=c&&c.popupInfo,f=a[1],e=a[2];a=a[3];a=this._cutFeaturesForSetting(a);b.resolve({layerObject:d,popupInfo:c,featureLayerForFrameWork:f,
definition:e,features:a})}.bind(this),function(a){b.reject(a)});return b},preprocessingDataSourceForRange:function(a){var b=new e;if(!a)return b.resolve(),b;var c=this._tryGetLayerIdDataSchema(a).layerId,c=this.getLayerDefinitionByDataSource(a,c);a=this.getFeaturesByDataSource(a);l([c,a]).then(function(a){var c=a[0];a=a[1];a=this._cutFeaturesForSetting(a);b.resolve({definition:c,features:a})}.bind(this),function(a){b.reject(a)});return b},_tryGetLayerIdDataSchema:function(a){var b={layerId:"",dataSchema:null};
if(a.layerId)this.dsType="CLIENT_FEATURES",b.layerId=a.layerId;else if(a.frameWorkDsId){a=(a=g.getDsTypeInfoMeta(a.frameWorkDsId,this.appConfig))&&a.dsMeta;if(!a)return b;"Features"===a.type?this.dsType="FRAMEWORK_FEATURES":"FeatureStatistics"===a.type&&(this.dsType="FRAMEWORK_STATISTICS");b.dataSchema=a.dataSchema;a=g.parseDataSourceId(a.id);b.layerId=a&&a.layerId}return b},_tryGetLayerObject:function(a){var b=new e;if(!a)return b.resolve(),b;a=this._tryGetLayerInfo(a);if(!a)return console.error("Invalid data source"),
b.resolve(),b;var c=a.getPopupInfo();a.getLayerObject().then(function(a){b.resolve({layerObject:a,popupInfo:c})}.bind(this),function(a){b.reject(a)});return b},_tryGetLayerForFrameWork:function(a,b){var c=new e;if(!a)return c.resolve(),c;var d=a;"FRAMEWORK_STATISTICS"===this._getDataSourceType(b)&&(d=g.mockLayerDefinitionForSTD(a));g.getLoadedLayer(d).then(function(a){c.resolve(a)}.bind(this),function(a){c.reject(a)});return c},_tryGetLayerInfo:function(a){var b=this.layerInfosObj.getLayerInfoById(a);
b||(b=this.layerInfosObj.getTableInfoById(a));return b},getLayerDefinitionByDataSource:function(a,b){var c=new e;if(!a)return console.error("Invalid data source"),c.resolve(),c;var d;if(a.layerId){b=this._tryGetLayerInfo(a.layerId);if(!b)return c.reject("Invalid data source"),c;d=b.getPopupInfo();this._getServiceDefinitionByLayerInfo(b).then(function(a){g.addAliasForLayerDefinition(a,d);c.resolve(a)}.bind(this),function(a){c.reject(a)});return c}if(a.frameWorkDsId){b&&(b=this._tryGetLayerInfo(b))&&
(d=b.getPopupInfo());b=null;a=(this.appConfig.dataSource&&this.appConfig.dataSource.dataSources)[a.frameWorkDsId];if("Features"===a.type)return b=k.clone(a.dataSchema),g.addAliasForLayerDefinition(b,d),c.resolve(b),c;if("FeatureStatistics"===a.type)return b={type:"Table",fields:[]},a=k.clone(a.dataSchema),b.fields=a.fields,a.groupByFields&&a.groupByFields[0]&&(b.groupByFields=k.clone(a.groupByFields)),g.addAliasForLayerDefinition(b,d),c.resolve(b),c}},_getDataSourceType:function(a){if(a){if(a.layerId)return"CLIENT_FEATURES";
if(a.frameWorkDsId&&(a=(a=g.getDsTypeInfoMeta(a.frameWorkDsId,this.appConfig))&&a.dsMeta)){if("Features"===a.type)return"FRAMEWORK_FEATURES";if("FeatureStatistics"===a.type)return"FRAMEWORK_STATISTICS"}}},_getServiceDefinitionByLayerInfo:function(a){var b=new e;a.getServiceDefinition().then(k.hitch(this,function(d){d?b.resolve(d):a.getLayerObject().then(function(a){a?(a=c.getFeatureLayerDefinition(a),b.resolve(a)):b.resolve(null)},function(a){b.reject(a)})}));return b},getFeaturesByDataSource:function(a){var b=
new e,c=null;if("DATA_SOURCE_FEATURE_LAYER_FROM_MAP"===a.dataSourceType){a=a.layerId;if(!a)return b.resolve(),b;this._getFeaturesForMapDS(a).then(function(a){c=a.features;b.resolve(c)},function(a){b.reject(a)})}else{a=a.frameWorkDsId;if(!a)return b.resolve(),b;this.getFeaturesForFrameDS(a).then(function(a){c=a.features;b.resolve(c)},function(a){b.reject(a)})}return b},_cutFeaturesForSetting:function(a){a&&1E3<a.length&&(a=a.slice(0,1E3));return a},_getFeaturesForMapDS:function(a){var b=new e,c=this._tryGetLayerInfo(a);
if(!c)return b.reject("Can not get layerInfo by the layer id of this data source."),b;a=c.getUrl();var f=c.getFilter();if(!a)return console.warn("Invalid layer url of data source, use client features."),c.getLayerObject().then(function(a){b.resolve({features:a.graphics})}),b;c=new d;c.outSpatialReference=this.map.spatialReference;c.where=f||"1\x3d1";c.outFields=["*"];c.returnGeometry=!1;return(new h(a)).execute(c)},getFeaturesForFrameDS:function(a){var b=new e;if("widget"===g.parseDataSourceId(a).from)return b.resolve({}),
b;a=this.dataSourceManager.getDataSourceConfig(a);a=k.clone(a);if(!a)return b.reject("Can not get vaild data source config by the frameWorkDsId of this data source."),b;a.filterByExtent=!1;this.dataSourceManager.doQuery(a).then(function(a){b.resolve(a)},function(a){b.reject(a)});return b}})})},"widgets/Infographic/_build-generate_module":function(){define(["dojo/text!./Widget.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/Infographic/dijits/ChartDijit.html":'\x3cdiv style\x3d"width:100%;height:100%;"\x3e\r\n    \x3cdiv style\x3d"display: none;" data-dojo-attach-point\x3d"yAxisName" class\x3d"y-axis-name rotate"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"chart-dijit" style\x3d"width:100%;height:100%;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"noDataDiv" class\x3d"no-data-tip"\x3e${nls.noData}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"overlap" class\x3d"over-lay hide"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"chart-dom" data-dojo-attach-point\x3d"chartDomNode"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Infographic/_ChartSetting.html":'\x3cdiv\x3e\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"legendSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.legend}"\x3e${nls.legend}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"legendToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"legend"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"dataLabelsSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.dataLabels}"\x3e${nls.dataLabels}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"dataLabelsToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"dataLabels"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"horizontalAxisSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.horizontalAxis}"\x3e${nls.horizontalAxis}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"horizontalAxisToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"horizontalAxis"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n  \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"verticalAxisSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.verticalAxis}"\x3e${nls.verticalAxis}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"verticalAxisToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"verticalAxis"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n   \x3cdiv class\x3d"flex section" data-dojo-attach-point\x3d"withoutRecordsSection"\x3e\r\n    \x3cdiv class\x3d"label textOverFlow" title\x3d"${nls.showPeriodsWithoutRecords}"\x3e${nls.showPeriodsWithoutRecords}\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"withoutRecordsToggle" data-dojo-attach-event\x3d"onclick:_onToggleClick" class\x3d"jimu-leading-margin10 toggle toggle-off" data-id\x3d"withoutRecords"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\r\n\x3c/div\x3e',
"url:widgets/Infographic/Widget.html":'\x3cdiv style\x3d"width: 100%;height: 100%;"\x3e\r\n\t \x3cdiv data-dojo-attach-point\x3d"shelter" class\x3d"loading hide"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',"url:widgets/Infographic/css/style.css":'@font-face {font-family: \'icomoon\'; src: url("fonts/icomoon.eot?oflavm"); src: url("fonts/icomoon.eot?oflavm#iefix") format(\'embedded-opentype\'), url("fonts/icomoon.ttf?oflavm") format(\'truetype\'), url("fonts/icomoon.woff?oflavm") format(\'woff\'), url("fonts/icomoon.svg?oflavm#icomoon") format(\'svg\'); font-weight: normal; font-style: normal;}.jimu-widget-infographic .indicator-icon,.jimu-widget-infographic-setting .indicator-icon {font-family: \'icomoon\' !important; speak: none; font-style: normal; font-weight: normal; font-variant: normal; text-transform: none; line-height: 1; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;}.jimu-widget-infographic .loading {position: absolute; overflow: hidden; bottom: 4px; right: 0; width: 17px; height: 17px; z-index: 101;}.jimu-rtl .jimu-widget-infographic .loading {left: 2px; right: auto;}.jimu-widget-infographic .loading {font-size: 10px; text-indent: -9999em; border-top: 3px solid rgba(219, 206, 206, 0.7); border-right: 3px solid rgba(219, 206, 206, 0.7); border-bottom: 3px solid rgba(219, 206, 206, 0.7); border-left: 3px solid #ffffff; -webkit-transform: translateZ(0); -ms-transform: translateZ(0); transform: translateZ(0); -webkit-animation: load8 1.1s infinite linear; animation: load8 1.1s infinite linear; box-shadow: 0 0 2px 0 rgba(0, 0, 0, 0.2); border-radius: 8px;}.jimu-widget-infographic .loading:after {border-radius: 50%; width: 24px; height: 24px;}.jimu-widget-infographic .hide {display: none !important;}.icon-like:before {content: "\\e900";}.icon-unlike:before {content: "\\e904";}.icon-stop:before {content: "\\e902";}.icon-danger:before {content: "\\e901";}.icon-star:before {content: "\\e903";}.icon-alarm:before {content: "\\e906";}.icon-down:before {content: "\\e909";}.icon-right:before {content: "\\e90f";}.icon-up:before {content: "\\e911";}.icon-wrong:before {content: "\\e912";}.lm_goldenlayout .lm_item .lm_content {position: relative;}.lm_goldenlayout .lm_item .lm_content .table-layout-container {display: table; table-layout: fixed; overflow: hidden; width: 100%; height: 100%;}.lm_goldenlayout .lm_item .lm_content .table-layout-container \x3e div {padding: 10px 15px;}.lm_goldenlayout .lm_item .lm_content .image-node {display: table-cell; overflow: hidden; position: relative; width: 100%; height: 100%;}.lm_goldenlayout .lm_item .lm_content .no-trim {white-space: pre-wrap;}.infographic-number-dijit {display: flex; justify-content: center; align-items: center;}.infographic-number-dijit .number-content .value-content {white-space: nowrap;}.infographic-number-dijit a,.infographic-number-dijit a:hover,.infographic-number-dijit a:visited,.infographic-number-dijit a:link,.infographic-number-dijit a:active {text-decoration: none;}.infographic-number-dijit.horizontal-left {justify-content: flex-start;}.infographic-number-dijit.horizontal-center {justify-content: center;}.infographic-number-dijit.horizontal-right {justify-content: flex-end;}.infographic-number-dijit.vertical-top {align-items: flex-start;}.infographic-number-dijit.vertical-middle {align-items: center;}.infographic-number-dijit.vertical-bottom {align-items: flex-end;}.infographic-number-dijit .number-content {display: flex; justify-content: center; max-width: 340px;}.infographic-number-dijit .number {display: flex; justify-content: space-between; align-items: baseline;}.infographic-number-dijit .indicator-icon {font-size: 22px; align-self: center; text-align: center;}.infographic-number-dijit .number .prefix {margin-right: 6px;}.infographic-number-dijit .number .suffix {margin-left: 6px;}.infographic-number-dijit .rightImgDiv {width: 35%; height: 100%; text-align: left;}.jimu-widget-infographic .infographic-number-dijit,.jimu-widget-infographic .infographic-chart-dijit,.jimu-widget-infographic .infographic-gauge-dijit {position: relative;}.infographic-chart-dijit .over-lay.hide {display: none !important;}.infographic-chart-dijit .over-lay {display: block; z-index: 99; position: absolute; left: 0; top: 0; height: 100%; width: 100%;}.infographic-number-dijit .no-data-tip,.infographic-chart-dijit .no-data-tip,.infographic-gauge-dijit .no-data-tip {display: none; position: absolute; left: 0; right: 0; height: 30px; top: calc(50% - 10px); text-align: center; color: #666;}.infographic-number-dijit.no-data .no-data-tip,.infographic-chart-dijit.no-data .no-data-tip,.infographic-gauge-dijit.no-data .no-data-tip {display: block; margin: 0 10px;}.infographic-number-dijit.no-data .chart-dom,.infographic-chart-dijit.no-data .chart-dom,.infographic-gauge-dijit.no-data .gauge-dom {visibility: hidden;}.infographic-number-dijit .chart-dom,.infographic-chart-dijit .chart-dom,.infographic-gauge-dijit .gauge-dom {visibility: visible; width: 100%; height: 100%;}.infographic-chart-dijit {display: flex;}.infographic-chart-dijit .y-axis-name {width: 30px; height: 100%; flex: 0 1 auto; justify-content: center; align-items: center; display: flex; white-space: nowrap; font-family: sans-serif; font-size: 12px;}.infographic-chart-dijit .y-axis-name.rotate {transform: rotate(-90deg); -webkit-transform: rotate(-90deg); -moz-transform: rotate(-90deg); -ms-transform: rotate(-90deg); -o-transform: rotate(-90deg); filter: progid:DXImageTransform.Microsoft.BasicImage(rotation\x3d3);}.infographic-chart-dijit .chart-dijit {width: calc(100% - 30px); height: 100%; flex: 1 1 auto;}.jimu-widget-infographic {position: relative; width: 100%; height: 100%;}.jimu-widget-infographic .chart-setting {position: absolute; top: 0; right: 0; cursor: pointer; width: 16px; height: 16px; background: no-repeat center center url(images/chart-setting.svg); z-index: 1;}.jimu-rtl .jimu-widget-infographic .chart-setting {left: 0; right: auto;}.ig-chart-setting-dlg .jimu-leading-margin10 {margin-left: 10px; margin-right: 0;}.jimu-rtl .ig-chart-setting-dlg .jimu-leading-margin10 {margin-right: 10px; margin-left: 0;}.ig-chart-setting-dlg .textOverFlow {white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}.ig-chart-setting-dlg .flex {display: flex; justify-content: space-between; margin-top: 8px;}.ig-chart-setting-dlg .label {width: 120px;}.ig-chart-setting-dlg .toggle {width: 38px; height: 18px; cursor: pointer;}.ig-chart-setting-dlg .toggle.toggle-on {background: no-repeat center left url(./images/toggle_on_light.svg);}.ig-chart-setting-dlg .toggle.toggle-off {background: no-repeat center left url(./images/toggle_off_light.svg);}',
"*now":function(n){n(['dojo/i18n!*preload*widgets/Infographic/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html dojo/on dojo/Deferred dijit/_WidgetsInTemplateMixin dijit/popup dijit/TooltipDialog jimu/BaseWidget jimu/dijit/GridLayout jimu/LayerInfos/LayerInfos jimu/utils ./DijitFactory jimu/DataSourceManager ./dijits/SourceLauncher ./dijits/ExtraSourceLauncher ./_ChartSetting ./IGUtils ./utils".split(" "),function(n,e,k,l,d,h,b,a,c,g,f,m,p,r,u,q,v,x,y,t){return n([g,b],{name:"Infographic",baseClass:"jimu-widget-infographic",dijits:null,
clientFeaturesHandle:null,layerInfosObj:null,dataSource:null,mainDijit:null,mainDijitJson:null,mainDijitVisible:!1,postMixInProperties:function(){this.inherited(arguments);this.layerInfosObj=m.getInstanceSync();this._loadingTypes={}},postCreate:function(){this.inherited(arguments);this._initGolbalInfo();this._listenDSManagerUpdateEvent();this._initDijitFactory();this._initSettingIconEvent()},startup:function(){this.inherited(arguments);this._renderByConfig(this.config);this.mainDijit=this._getMainDijit();
this._createRuntimeSettingIocn(this.config);this._checkDataSource(this.config);this.mainDijitVisible&&this._avalidDataSource&&(this._processdsdef=this._preprocessingDataSource())},_listenDSManagerUpdateEvent:function(){this.exdsBeginUpdateHandle=d(this.dataSourceManager,"begin-update",e.hitch(this,function(a){this._handleLoadingStatusForExds(a,!0)}))},_checkDataSource:function(a){a=this._checkDataSourceCode(a&&a.dataSource);this._avalidDataSource=0===a.code;!this._avalidDataSource&&this.mainDijit&&
this.mainDijit.showNodata(a.message)},onOpen:function(){this._processdsdef?this._processDataSource():this._onOpenTriger()},_onOpenTriger:function(){this.mainDijitVisible&&this._avalidDataSource&&this._isDOMInitialized().then(function(){clearInterval(this.domReadyInterval);this._initSourceLaunchers();this.resize()}.bind(this))},_onMainValueUpdate:function(a){if(this.mainDijit&&this._shouldUpdateValue(a,"MAIN")){if("gauge"===this.mainDijit.type&&(a=this._spellGaugeValueObj(),!this._isGaugeValueObjValid(a)))return;
this.mainDijit.onDataSourceDataUpdate(a);this.mainDijit.startRendering()}},_onRangeValueUpdate:function(a,b){this._shouldUpdateValue(a,b?"RANGE1":"RANGE2")&&(a=this._spellGaugeValueObj(),this._isGaugeValueObjValid(a)&&(this.mainDijit.onDataSourceDataUpdate(a),this.mainDijit.startRendering()))},_processDataSource:function(){this.showLoading("process-ds");this._processdsdef.then(function(){this.hideLoading("process-ds");this._processdsdef=null;this._setDataSource();this._setLayerInfoToMainDijit();this._onOpenTriger()}.bind(this),
function(a){this.hideLoading("process-ds");this._processdsdef=null;console.error(a)}.bind(this))},_setDataSource:function(){var a=this.config&&this.config.dataSource;a&&this.dijits&&this.dijits.length&&this.dijits.forEach(function(b){b.setDataSource(a)})},_initSourceLaunchers:function(){if(this.config.dataSource){var a=this.mainDijitJson||this._getMainDijitJson();this.sourceLauncher?this.sourceLauncher.awake():(this._initSourceLauncher(),this.sourceLauncher.start());"gauge"===a.type&&this._initRangeSourceLauncher(a)}},
resize:function(){this.inherited(arguments);this.layout&&this.layout.resize();this.mainDijit&&this.mainDijit.resize&&this.mainDijit.resize()},onClose:function(){this.sourceLauncher&&this.sourceLauncher.sleep();this.rangeSourceLauncher1&&this.rangeSourceLauncher1.sleep();this.rangeSourceLauncher2&&this.rangeSourceLauncher2.sleep();this.runtimeSettingDialog&&this.runtimeSettingDialog.isShow&&(a.close(this.runtimeSettingDialog),this.runtimeSettingDialog.isShow=!1)},onDataSourceDataUpdate:function(a,
b){this._handleLoadingStatusForExds(a,!1);var c=this.config.dataSource,d=this.rangeDataSource1,e=this.rangeDataSource2;c&&a===c.frameWorkDsId&&this.sourceLauncher&&this.sourceLauncher.setAppConfigDSFeatures(b.features);d&&a===d.frameWorkDsId&&this.rangeSourceLauncher1&&this.rangeSourceLauncher1.setAppConfigDSFeatures(b.features);e&&a===e.frameWorkDsId&&this.rangeSourceLauncher2&&this.rangeSourceLauncher2.setAppConfigDSFeatures(b.features)},_handleLoadingStatusForExds:function(a,b){var c=this.config.dataSource,
d=this.rangeDataSource1,e=this.rangeDataSource2,d=d&&d.frameWorkDsId,e=e&&e.frameWorkDsId;if(a===(c&&c.frameWorkDsId)||a===d||a===e)b?this.showLoading(a):this.hideLoading(a)},destroy:function(){this.sourceLauncher&&this.sourceLauncher.destroy();this.rangeSourceLauncher1&&this.rangeSourceLauncher1.destroy();this.rangeSourceLauncher2&&this.rangeSourceLauncher2.destroy();this.runtimeSettingDialog&&(this.runtimeSettingDialog.destroy(),this.runtimeSettingDialog=null);this.exdsBeginUpdateHandle&&this.exdsBeginUpdateHandle.remove&&
(this.exdsBeginUpdateHandle.remove(),this.exdsBeginUpdateHandle=null);this._loadingTypes={};this.inherited(arguments)},_initGolbalInfo:function(){this.dataSourceManager=u.getInstance();this._features=[];this.featureLayerForFrameWork=this.popupInfo=this.layerObject=null;if(this.mainDijitJson=this._getMainDijitJson())this._initRangeValue(this.mainDijitJson),this._ininRangeDataSource(this.mainDijitJson),this.mainDijitVisible=this.mainDijitJson&&this.mainDijitJson.visible,this.dijits=[],this.igUtils=
new y({appConfig:this.appConfig,map:this.map})},_initDijitFactory:function(){r.setNls(this.nls);r.setMap(this.map);r.setInSettingPage(!1);r.setAppConfig(this.appConfig);r.setContext({folderUrl:this.folderUrl})},_initSettingIconEvent:function(){this.on("click",e.hitch(this,function(){this.runtimeSettingDialog&&a.close(this.runtimeSettingDialog)}))},_renderByConfig:function(a){a&&a.layout&&a.dijits&&(this._clearDijits(),this._createLayoutWithDijits(a))},_initRangeSourceLauncher:function(a){var b=this._initRangeData(a);
a=b.rst1;b=b.rst2;this.rangeSourceLauncher1?this.rangeSourceLauncher1.awake():a&&this.rangeDataSource1&&(this._initRangeLauncher(a,this.rangeDataSource1,!0),this.rangeSourceLauncher1.start());this.rangeSourceLauncher2?this.rangeSourceLauncher2.awake():b&&this.rangeDataSource2&&(this._initRangeLauncher(b,this.rangeDataSource2,!1),this.rangeSourceLauncher2.start())},showLoading:function(a){this._loadingTypes[a]=!0;this._showLoading()},hideLoading:function(a){this._loadingTypes[a]=!1;this._shouldHideLoading()&&
this._hideLoading()},_shouldHideLoading:function(){if(this._loadingTypes)return Object.keys(this._loadingTypes).map(function(a){return this._loadingTypes[a]}.bind(this)).every(function(a){return!a})},_showLoading:function(){l.hasClass(this.shelter,"hide")&&l.removeClass(this.shelter,"hide")},_hideLoading:function(){l.hasClass(this.shelter,"hide")||l.addClass(this.shelter,"hide")},_HandlingOutliers:function(a){if(this.mainDijit&&!t.isValidValue(a))return this.mainDijit.showNodata(),!0},_spellGaugeValueObj:function(){return{value:this.MAIN_VALUE,
ranges:[this.RANGE1_VALUE,this.RANGE2_VALUE]}},_isGaugeValueObjValid:function(a){var b=a&&a.ranges;if(!a||!b)return!1;var c=b[0],b=b[1];(a=t.isValidValue(a.value)&&t.isValidValue(c)&&t.isValidValue(b))||this.mainDijit.showNodata();return a},_checkDataSourceCode:function(a){var b=this.mainDijitJson;if(!b)return{};var c,d;a=t.checkDataSourceIsVaild(a,b,this.map,this.appConfig,"value");"gauge"===b.type&&(this.rangeDataSource1&&(c=t.checkDataSourceIsVaild(this.rangeDataSource1,b,this.map,this.appConfig,
"range1")),this.rangeDataSource2&&(d=t.checkDataSourceIsVaild(this.rangeDataSource2,b,this.map,this.appConfig,"range2")));var b=[a,c,d],e="";c=t.getCheckDataSourceResultCode(b);b.forEach(function(a){e+=this._getDSErrorString(a)}.bind(this));return{code:c,message:e}},_getDSErrorString:function(a){var b="";if(!a)return b;if(1===a.code||3===a.code)a.label===this._lastDataSourceLabel?b="":(b=this.nls.dataSource+" "+a.label+" "+this.nls.dsErrorTipSuf,this._lastDataSourceLabel=a.label);2===a.code&&(b=this.nls.fieldString+
" "+a.fields.join(",")+" "+this.nls.dsErrorTipSuf);return b},_clearDijits:function(){this.dijits&&this.dijits.length&&this.dijits.forEach(e.hitch(this,function(a){a.destroy()}));this.dijits=[]},_createLayoutWithDijits:function(a){var b=a.dijits;b&&b.length&&(b=b.map(function(a){var b=r.createDijit(a);this.dijits.push(b);return{id:a.id,dijit:b}},this),this.layout=new f({components:b,layoutDefinition:a.layout.definition,container:this.domNode,editable:!1}),this.layout.on("initialised",e.hitch(this,
function(){k.forEach(this.dijits,e.hitch(this,function(a){a.startup()}))})))},_getMainDijit:function(){if(this.dijits&&this.dijits.length){var a=null,b=["number","gauge","chart"];return a=this.dijits.filter(function(a){return-1<b.indexOf(a.type)})[0]}},_getMainDijitJson:function(){if(this.config&&this.config.dijits&&this.config.dijits.length){var a=null,b=["number","gauge","chart"];return a=this.config.dijits.filter(function(a){return-1<b.indexOf(a.type)})[0]}},_initRangeValue:function(a){a&&"gauge"===
a.type&&(a=t.getRangeFixedValue(a),this.RANGE1_VALUE=a.range1,this.RANGE2_VALUE=a.range2)},_ininRangeDataSource:function(a){a=t.getRangeDataSource(a);this.rangeDataSource1=a.range1;this.rangeDataSource2=a.range2},_setLayerInfoToMainDijit:function(){this.mainDijit&&this.mainDijit.setLayerInfo(this.layerObject,this.featureLayerForFrameWork,this.popupInfo)},_createRuntimeSettingIocn:function(a){this.mainDijitVisible&&a.dijits&&a.dijits.length&&a.dijits.some(function(a){return a.visible&&"chart"===a.type},
this)&&(this.runtimeSettingIcon=l.create("div",{"class":"chart-setting"},this.domNode),this.own(d(this.runtimeSettingIcon,"click",e.hitch(this,this._onRuntimeSettingIconClicked))),this.runtimeSettingDialog=new c({content:this._createChartSettingContent(a)}),this.runtimeSettingDialog.isShow=!1)},_onRuntimeSettingIconClicked:function(b){this.runtimeSettingDialog.isShow?(a.close(this.runtimeSettingDialog),this.runtimeSettingDialog.isShow=!1):(a.open({popup:this.runtimeSettingDialog,around:this.runtimeSettingIcon}),
this.runtimeSettingDialog.isShow=!0);b.stopPropagation()},_createChartSettingContent:function(a){var b=a.dijits.filter(function(a){return"chart"===a.type})[0];return b?b.config?(new x({chartJson:b,chartDijit:this.dijits.filter(function(a){return a.jsonId===b.id})[0],nls:this.nls})).domNode:"\x3cdiv\x3e\x3c/div\x3e":(console.error("Unknow error"),"\x3cdiv\x3e\x3c/div\x3e")},_isDOMInitialized:function(){var a=new h;setTimeout(function(){this.domReadyInterval=setInterval(function(){var b=this.mainDijit&&
this.mainDijit.domNode;b&&(b=l.getMarginBox(b),b.w&&b.h&&a.resolve())}.bind(this),200)}.bind(this),200);return a},_initSourceLauncher:function(){var a=this.config.dataSource;if(a){var b=this._getMainDijitJson();if(b&&b.config){var c=null,c="chart"===b.type?t.getStatisticForChart(b.config.data):t.getStatisticForGauge(b.config).value;this.sourceLauncher="DATA_SOURCE_FROM_FRAMEWORK"===a.dataSourceType?new v({appConfig:this.appConfig,dataSource:a,statistic:c,returnFeatures:"chart"===b.type,formatResult:!1}):
new q({layerObject:this.layerObject,map:this.map,appConfig:this.appConfig,useSelection:a.useSelection,filterByExtent:a.filterByExtent,dataSource:a,config:b.config,statistic:c,returnFeatures:"chart"===b.type});this._listenSourceLauncherEvent()}}},_initRangeData:function(a){if("gauge"===a.type&&a&&a.config)return a=t.getStatisticForGauge(a.config),{rst1:a.range1,rst2:a.range2}},_initRangeLauncher:function(a,b,c){c?a&&(this.rangeSourceLauncher1=new v({appConfig:this.appConfig,dataSource:b,statistic:a,
returnFeatures:!1,formatResult:!0}),this._listenRangeLauncherEvent(this.rangeSourceLauncher1,!0)):a&&(this.rangeSourceLauncher2=new v({appConfig:this.appConfig,dataSource:b,statistic:a,returnFeatures:!1,formatResult:!0}),this._listenRangeLauncherEvent(this.rangeSourceLauncher2,!1))},_listenSourceLauncherEvent:function(){this.own(d(this.sourceLauncher,"data-update",e.hitch(this,function(a){this._onMainValueUpdate(a)})));this.own(d(this.sourceLauncher,"loading",e.hitch(this,function(a){this.showLoading(a)})));
this.own(d(this.sourceLauncher,"unloading",e.hitch(this,function(a){this.hideLoading(a)})));this.own(d(this.sourceLauncher,"failed",e.hitch(this,function(){this._HandlingOutliers()})));this.own(d(this.sourceLauncher,"start",e.hitch(this,function(){this._onMainSourceLauncherStart()})));this.own(d(this.sourceLauncher,"done",e.hitch(this,function(){this._onMainSourceLauncherDone()})))},_onMainSourceLauncherStart:function(){if(this.mainDijit&&"function"===typeof this.mainDijit.onUpdateDataStart)this.mainDijit.onUpdateDataStart()},
_onMainSourceLauncherDone:function(){if(this.mainDijit&&"function"===typeof this.mainDijit.onUpdateDataDone)this.mainDijit.onUpdateDataDone()},_listenRangeLauncherEvent:function(a,b){a&&this.own(d(a,"data-update",e.hitch(this,function(a){this._onRangeValueUpdate(a,b)})))},_isDifferentValues:function(a,b){var c=!0,d=this[b+"_VALUE"];if(a&&"undefined"!==typeof a.hasStatisticsed){var e=null,f=null;a.features&&(e=a.features.map(function(a){return a.attributes}));d&&d.features&&(f=d.features.map(function(a){return a.attributes}));
p.isEqual(f,e)&&(c=!1)}else c=a!==d;c&&(this[b+"_VALUE"]=a);return c},_shouldUpdateValue:function(a,b){b=this._isDifferentValues(a,b);a=this._HandlingOutliers(a);return b&&!a},_preprocessingDataSource:function(){var a=this.config&&this.config.dataSource,b=new h;return a?this.igUtils.preprocessingDataSource(a).then(function(a){this.layerObject=a&&a.layerObject;this.popupInfo=a&&a.popupInfo;this.featureLayerForFrameWork=a&&a.featureLayerForFrameWork}.bind(this)):(b.reject("Empty data source"),b)}})});