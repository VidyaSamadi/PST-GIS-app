// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Directions/setting/BarrierLayers":function(){define("dojo/_base/declare dojo/_base/lang jimu/LayerInfos/LayerInfos dijit/form/Select dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./BarrierLayers.html".split(" "),function(v,k,g,p,t,x,q,r){return v([t,x,q],{templateString:r,constructor:function(g){g&&(this.nls=g.nls)},postCreate:function(){this.inherited(arguments)},startup:function(){this.layerInfosObj=g.getInstanceSync();var z=[],r=[],m=[];
this.layerInfosObj.traversal(k.hitch(this,function(b){"esriGeometryPoint"===b.layerObject.geometryType&&this._isLayerInMap(b)&&z.push(b);"esriGeometryPolyline"===b.layerObject.geometryType&&this._isLayerInMap(b)&&r.push(b);"esriGeometryPolygon"===b.layerObject.geometryType&&this._isLayerInMap(b)&&m.push(b)}));this.pointLayers=(new p({name:"pointLayers",options:this._getOptionsByLayers(z,this.nls.noPointBarrier)})).placeAt(this.pointLayersNode);this.pointLayers.startup();this.polylineLayers=(new p({name:"polylineLayers",
options:this._getOptionsByLayers(r,this.nls.noLineBarrier)})).placeAt(this.polylineLayersNode);this.polylineLayers.startup();this.polygonLayers=(new p({name:"polygonLayers",options:this._getOptionsByLayers(m,this.nls.noPolygonBarrier)})).placeAt(this.polygonLayersNode);this.polygonLayers.startup();this.inherited(arguments)},destroy:function(){this.pointLayers&&this.pointLayers.destroy&&(this.pointLayers.closeDropDown(),this.pointLayers.destroy());this.polylineLayers&&this.polylineLayers.destroy&&
(this.polylineLayers.closeDropDown(),this.polylineLayers.destroy());this.polygonLayers&&this.polygonLayers.destroy&&(this.polygonLayers.closeDropDown(),this.polygonLayers.destroy())},_getOptionsByLayers:function(g,k){var m=[];m.push({label:k||"",value:"",selected:"true"});k=0;for(var b=g.length;k<b;k++){var e=g[k];m.push({label:e.title||e.id,value:e.layerObject.id})}return m},validate:function(){return!0},getValue:function(){var g={pointLayers:[],polylineLayers:[],polygonLayers:[]};g.pointLayers.push(this.pointLayers.getValue());
g.polylineLayers.push(this.polylineLayers.getValue());g.polygonLayers.push(this.polygonLayers.getValue());return g},setValue:function(g){this._selectItem(this.pointLayers,g.pointLayers||[]);this._selectItem(this.polylineLayers,g.polylineLayers||[]);this._selectItem(this.polygonLayers,g.polygonLayers||[])},_selectItem:function(g,k){for(var m=g.getOptions(),b=0,e=m.length;b<e;b++)m[b].value===k[0]&&g.setValue(k[0])},_isLayerInMap:function(g){for(var k=this.layerInfosObj.getLayerInfoArrayOfWebmap(),
m=g.getRootLayerInfo(),b=0,e=k.length;b<e;b++){var n=k[b];if(n.id===g.id||m&&m.id===n.id)return!0}return!1}})})},"widgets/Directions/setting/PresetDestinations":function(){define("dojo/_base/declare dojo/_base/lang dojo/on dojo/_base/html dojo/query esri/lang esri/tasks/locator dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./PresetDestinations.html esri/dijit/Search jimu/dijit/RadioBtn".split(" "),function(v,k,g,p,t,x,q,r,z,A,m,b){return v([r,z,A],{templateString:m,
_defaultLocations:null,_startSearchResults:null,_endSearchResults:null,_isSearchResultsShown:!1,_ERROR_CLASS:"have-error",constructor:function(e){e&&(this._defaultLocations=e.defaultLocations,this.nls=e.nls)},postCreate:function(){this.inherited(arguments)},startup:function(){this.startSearch=new b({enableSuggestions:!1,enableButtonMode:!1,theme:"arcgisSearch"});this.startSearch.placeAt(this.startSearchDom);this.own(g(this.startSearch,"search-results",k.hitch(this,"_onStartSearchResults")));this.own(g(this.startSearchResultsNode,
"li:click",k.hitch(this,"_onSelectStartSearchResult")));this.own(g(this.startSearch.inputNode,"focus",k.hitch(this,"_onCleanStartError")));this.own(g(this.startSearch.inputNode,"blur",k.hitch(this,function(){!1===this._isSearchResultsShown&&this.startSearch&&this.startSearch.search&&this.startSearch.search()})));this.endSearch=new b({enableSuggestions:!1,enableButtonMode:!1,theme:"arcgisSearch"});this.endSearch.placeAt(this.endSearchDom);this.own(g(this.endSearch,"search-results",k.hitch(this,"_onEndSearchResults")));
this.own(g(this.endSearchResultsNode,"li:click",k.hitch(this,"_onSelectEndSearchResult")));this.own(g(this.endSearch.inputNode,"focus",k.hitch(this,"_onCleanEndError")));this.own(g(this.endSearch.inputNode,"blur",k.hitch(this,function(){!1===this._isSearchResultsShown&&this.endSearch&&this.endSearch.search&&this.endSearch.search()})));this.own(g(window.document,"click",k.hitch(this,function(f){p.isDescendant(f.target,this.searchResultsNode)||this._hideResultMenu()})));if(this._defaultLocations&&this._defaultLocations.length&&
0<this._defaultLocations.length)for(var e=0,n=this._defaultLocations.length;e<n;e++)0===e?this.startSearch.set("value",this.defaultLocations[e]):1===e&&this.endSearch.set("value",this.defaultLocations[e]);this.inherited(arguments)},getValue:function(){var e=[],b=this.startSearch.get("value");e.push(b);b=this.endSearch.get("value");e.push(b);return e},setValue:function(e){e&&0<e.length&&(this._defaultLocations=e)},validate:function(){var e=!1;t(".searchLoading",this.domNode).forEach(k.hitch(this,function(){e=
!0}));return!1!==e||p.hasClass(this.startSearch,this._ERROR_CLASS)||p.hasClass(this.endSearch,this._ERROR_CLASS)?!1:!0},setSources:function(e){e&&e.url&&e.singleLineFieldName?(e={locator:new q(e.url||""),outFields:["*"],singleLineFieldName:e.singleLineFieldName},this.startSearch.set("sources",[e]),this.endSearch.set("sources",[e])):(this.startSearch.set("sources",[]),this.endSearch.set("sources",[]))},_onCleanError:function(e){p.removeClass(e,this._ERROR_CLASS)},_onCleanStartError:function(){this._onCleanError(this.startSearch)},
_onCleanEndError:function(){this._onCleanError(this.endSearch)},_onStartSearchResults:function(e){this._onSearchResults(e,{searchDijit:this.startSearch,searchResultsNode:this.startSearchResultsNode,searchError:this.startSearchError,results:"start"})},_onEndSearchResults:function(e){this._onSearchResults(e,{searchDijit:this.endSearch,searchResultsNode:this.endSearchResultsNode,searchError:this.endSearchError,results:"end"})},_onSearchResults:function(e,b){var f=b.searchDijit.get("sources"),l=b.searchDijit.get("activeSourceIndex"),
g=b.searchDijit.get("value"),n="",k=e.results;if(""!==g)if(k&&0<e.numResults){"start"===b.results?this._startSearchResults=k:"end"===b.results&&(this._endSearchResults=k);var n=n+'\x3cdiv class\x3d"searchMenu searchResultsMenu" role\x3d"menu"\x3e',m;for(m in k)if(k[m]&&k[m].length){e=f[parseInt(m,10)].name;1<f.length&&"all"===l&&(n+='\x3cdiv title\x3d"'+e+'" class\x3d"menuHeader"\x3e'+e+"\x3c/div\x3e");n+="\x3cul\x3e";e=new RegExp("("+g+")","gi");for(var r=f[m].maxResults||5,q=0,t=k[m].length;q<t&&
q<r;q++)var w=x.isDefined(k[m][q].name)?k[m][q].name:this.nls.untitled,n=n+('\x3cli title\x3d"'+w+'" data-index\x3d"'+q+'" data-source-index\x3d"'+m+'" role\x3d"menuitem" tabindex\x3d"0"\x3e'+w.toString().replace(e,"\x3cstrong \x3e$1\x3c/strong\x3e")+"\x3c/li\x3e");n+="\x3c/url\x3e"}b.searchResultsNode.innerHTML=n+"\x3c/div\x3e";this._showResultMenu(b.searchDijit,b.searchResultsNode);this._resetSelectorPosition(b.searchDijit,".searchResultsMenu")}else p.addClass(b.searchDijit,this._ERROR_CLASS),this._resetSelectorPosition(b.searchDijit,
".noResultsMenu")},_onSelectStartSearchResult:function(e){this._onSelectSearchResult(e,this.startSearch,this._startSearchResults)},_onSelectEndSearchResult:function(e){this._onSelectSearchResult(e,this.endSearch,this._endSearchResults)},_onSelectSearchResult:function(e,b,f){for(e=e.target;!p.hasAttr(e,"data-source-index")||!p.getAttr(e,"data-index");)e=e.parentNode;var l=null,l=p.getAttr(e,"data-source-index");e=parseInt(p.getAttr(e,"data-index"),10);"all"!==l&&(l=parseInt(l,10));f&&f[l]&&f[l][e]&&
(l=f[l][e],b.select(l),l.name&&b.set("value",l.name))},_showResultMenu:function(e,b){p.setStyle(b,"display","block");t(".searchMenu",b).style("display","block");this._isSearchResultsShown=!0;if(e=t(".searchInputGroup",e.domNode)[0])e={width:p.getMarginBox(e).w+"px"},t(".searchMenu",b).style(e)},_resetSelectorPosition:function(b,g){var f=p.getMarginBox(this.domNode.offsetParent);t(g,this.domNode).forEach(k.hitch(this,function(e){var l=p.position(e),n=p.position(b.domNode),n=".noResultsMenu"===g?0:
n.h;l.y+l.h>f.h&&p.setStyle(e,"top",-(l.h+n)-4+"px")}))},_hideResultMenu:function(){t(".searchMenu",this.domNode).style("display","none");this._isSearchResultsShown=!1}})})},"esri/tasks/locator":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/Deferred dojo/_base/json dojo/has ../kernel ../request ../deferredUtils ./Task ./AddressCandidate".split(" "),function(v,k,g,p,t,x,q,r,z,A,m){v=v(A,{declaredClass:"esri.tasks.Locator",_eventMap:{"address-to-locations-complete":["addresses"],
"addresses-to-locations-complete":["addresses"],"location-to-address-complete":["address"],"suggest-locations-complete":["suggestions"]},constructor:function(b){this._geocodeHandler=k.hitch(this,this._geocodeHandler);this._geocodeAddressesHandler=k.hitch(this,this._geocodeAddressesHandler);this._reverseGeocodeHandler=k.hitch(this,this._reverseGeocodeHandler);this.registerConnectEvents()},outSpatialReference:null,setOutSpatialReference:function(b){this.outSpatialReference=b},_geocodeHandler:function(b,
e,g,f,l){try{var n=b.candidates,k;e=[];var p,q=n.length,r=b.spatialReference,t;for(p=0;p<q;p++){k=n[p];if(t=k.location)t.spatialReference=r;e[p]=new m(k)}this._successHandler([e],"onAddressToLocationsComplete",g,l)}catch(B){this._errorHandler(B,f,l)}},_geocodeAddressesHandler:function(b,e,g,f,l){try{var n=b.locations;e=[];var k,p=n.length,q=b.spatialReference,r;for(k=0;k<p;k++){if(r=n[k].location)r.spatialReference=q;e[k]=new m(n[k])}this._successHandler([e],"onAddressesToLocationsComplete",g,l)}catch(C){this._errorHandler(C,
f,l)}},addressToLocations:function(b,e,g,f,l){var n,m,q,v,x,C,B;b.address&&(f=g,g=e,e=b.outFields,l=b.searchExtent,B=b.countryCode,n=b.magicKey,m=b.distance,C=b.categories,b.location&&this.normalization&&(q=b.location.normalize()),v=b.maxLocations,x=b.forStorage,b=b.address);l&&(l=l.shiftCentralMeridian());var w=this.outSpatialReference;b=this._encode(k.mixin({},this._url.query,b,{f:"json",outSR:w&&t.toJson(w.toJson()),outFields:e&&e.join(",")||null,searchExtent:l&&t.toJson(l.toJson()),category:C&&
C.join(",")||null,countryCode:B||null,magicKey:n||null,distance:m||null,location:q||null,maxLocations:v||null,forStorage:x||null}));var A=this._geocodeHandler,J=this._errorHandler,D=new p(z._dfdCanceller);D._pendingDfd=r({url:this._url.path+"/findAddressCandidates",content:b,callbackParamName:"callback",load:function(b,e){A(b,e,g,f,D)},error:function(b){J(b,f,D)}});return D},suggestLocations:function(b){var e;e=new p(z._dfdCanceller);b.hasOwnProperty("location")&&this.normalization&&(b.location=b.location.normalize());
b.searchExtent&&(b.searchExtent=b.searchExtent.shiftCentralMeridian());b=this._encode(k.mixin({},this._url.query,{f:"json",text:b.text,maxSuggestions:b.maxSuggestions,searchExtent:b.searchExtent&&t.toJson(b.searchExtent.toJson()),category:b.categories&&b.categories.join(",")||null,countryCode:b.countryCode||null,location:b.location||null,distance:b.distance||null},{f:"json"}));b=r({url:this._url.path+"/suggest",content:b,callbackParamName:"callback"});e._pendingDfd=b;b.then(k.hitch(this,function(b){b=
b.suggestions||[];this.onSuggestLocationsComplete(b);e.resolve(b)}),k.hitch(this,function(b){this._errorHandler(b);e.reject(b)}));return e},addressesToLocations:function(b,e,n){var f=this.outSpatialReference,l=[],m=b.categories,q=b.countryCode;g.forEach(b.addresses,function(b,f){l.push({attributes:b})});b=this._encode(k.mixin({},this._url.query,{category:m&&m.join(",")||null,sourceCountry:q||null},{addresses:t.toJson({records:l})},{f:"json",outSR:f&&t.toJson(f.toJson())}));var v=this._geocodeAddressesHandler,
x=this._errorHandler,A=new p(z._dfdCanceller);A._pendingDfd=r({url:this._url.path+"/geocodeAddresses",content:b,callbackParamName:"callback",load:function(b,f){v(b,f,e,n,A)},error:function(b){x(b,n,A)}});return A},_reverseGeocodeHandler:function(b,e,g,f,l){try{var k=new m({address:b.address,location:b.location,score:100});this._successHandler([k],"onLocationToAddressComplete",g,l)}catch(y){this._errorHandler(y,f,l)}},locationToAddress:function(b,e,g,f){b&&this.normalization&&(b=b.normalize());var l=
this.outSpatialReference;b=this._encode(k.mixin({},this._url.query,{outSR:l&&t.toJson(l.toJson()),location:b&&t.toJson(b.toJson()),distance:e,f:"json"}));var m=this._reverseGeocodeHandler,n=this._errorHandler,q=new p(z._dfdCanceller);q._pendingDfd=r({url:this._url.path+"/reverseGeocode",content:b,callbackParamName:"callback",load:function(b,e){m(b,e,g,f,q)},error:function(b){n(b,f,q)}});return q},onSuggestLocationsComplete:function(){},onAddressToLocationsComplete:function(){},onAddressesToLocationsComplete:function(){},
onLocationToAddressComplete:function(){}});x("extend-esri")&&k.setObject("tasks.Locator",v,q);return v})},"esri/tasks/AddressCandidate":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","../kernel","../geometry/Point"],function(v,k,g,p,t){v=v(null,{declaredClass:"esri.tasks.AddressCandidate",constructor:function(g){k.mixin(this,g);this.location=new t(this.location)}});g("extend-esri")&&k.setObject("tasks.AddressCandidate",v,p);return v})},"esri/dijit/Search":function(){define("require dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Evented dojo/Deferred dojo/keys dojo/on dojo/query dojo/uacss dojo/regexp dojo/dom dojo/dom-attr dojo/dom-class dojo/dom-style dojo/dom-construct dojo/date/locale dojo/i18n!../nls/jsapi dojo/text!./Search/templates/Search.html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_FocusMixin dijit/a11yclick dijit/focus ../lang ../InfoTemplate ../kernel ../SpatialReference ../graphic ../promiseList ../symbols/PictureMarkerSymbol ../symbols/SimpleMarkerSymbol ../symbols/SimpleLineSymbol ../symbols/SimpleFillSymbol ../symbols/TextSymbol ../symbols/Font ../geometry/Point ../geometry/Extent ../geometry/normalizeUtils ../geometry/scaleUtils ../tasks/locator ../tasks/query ../Color ../styles/basic".split(" "),
function(v,k,g,p,t,x,q,r,z,A,m,b,e,n,f,l,Q,y,R,S,T,C,B,w,F,J,D,U,E,G,V,W,K,X,Y,H,L,N,M,O,Z,P,aa,ba){function I(a,d){a&&d&&(a._layer=d,a._sourceLayer=d)}k=k([S,T,C,t],{declaredClass:"esri.dijit.Search",templateString:R,reHostedFS:/https?:\/\/services.*\.arcgis\.com/i,constructor:function(a,d){this.css={searchGroup:"searchGroup",searchInput:"searchInput",searchInputGroup:"searchInputGroup",searchBtn:"searchBtn",searchSubmit:"searchSubmit",searchIcon:"searchIcon esri-icon-search",searchButtonText:"searchButtonText",
searchToggle:"searchToggle",searchToggleIcon:"searchIcon esri-icon-down-arrow",searchMenu:"searchMenu",searchMenuHeader:"menuHeader",searchClear:"searchClear",searchClearIcon:"searchIcon esri-icon-close searchClose",searchSpinner:"searchIcon esri-icon-loading-indicator searchSpinner",searchSourceName:"sourceName",suggestionsMenu:"suggestionsMenu",sourcesMenu:"sourcesMenu",activeSource:"active",hasValue:"hasValue",hasButtonMode:"hasButtonMode",hasMultipleSources:"hasMultipleSources",showSuggestions:"showSuggestions",
showSources:"showSources",showNoResults:"showNoResults",searchLoading:"searchLoading",latLonHeader:"searchLatLongHeader",searchMoreResults:"moreResults",searchMoreResultsList:"resultsList",searchMoreResultsHeader:"moreHeader",searchMoreResultsItem:"moreItem",searchMoreResultsListHeader:"popupHeader",searchShowMoreResults:"showMoreResults",searchNoResultsMenu:"noResultsMenu",searchNoResultsBody:"noResultsBody",searchNoResultsHeader:"noResultsHeader",searchNoValueIcon:"noValueIcon esri-icon-notice-triangle",
searchNoValueText:"noValueText",searchNoResultsText:"noResultsText",searchExpandContainer:"searchExpandContainer",searchAnimateContainer:"searchAnimate",searchExpanded:"searchExpanded",searchCollapsed:"searchCollapsed",searchClearFloat:"searchClearFloat"};this._allIndex="all";this._objectIdIdentifier="_objectId";this._deferreds=[];this._sourceNames=[];this.defaultSource={locator:new Z("//geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer"),singleLineFieldName:"SingleLine",outFields:["Addr_type",
"Match_addr","StAddr","City"],name:y.widgets.Search.main.esriLocatorName,localSearchOptions:{minScale:3E5,distance:5E4},placeholder:y.widgets.Search.main.placeholder,highlightSymbol:(new V(v.toUrl("./Search/images/search-pointer.png"),36,36)).setOffset(9,18)};this.options={map:null,theme:"arcgisSearch",visible:!0,value:"",allPlaceholder:"",sources:[this.defaultSource],activeSourceIndex:0,suggestionDelay:150,enableSourcesMenu:!0,enableSuggestionsMenu:!0,enableInfoWindow:!0,showInfoWindowOnSelect:!0,
enableSuggestions:!0,enableButtonMode:!1,autoNavigate:!0,autoSelect:!0,addLayersFromMap:!1,zoomScale:1E3,graphicsLayer:null,enableHighlight:!0,highlightGraphic:null,enableLabel:!1,labelSymbol:(new Y).setColor(new aa([181,56,46,.9])).setFont(new H("14px",H.STYLE_NORMAL,H.VARIANT_NORMAL,H.WEIGHT_BOLD,"Arial")),labelGraphic:null,infoTemplate:new J(y.widgets.Search.main.searchResult,'\x3cdiv class\x3d"${searchTheme}"\x3e\x3cdiv id\x3d"${searchMoreResultsId}" class\x3d"${searchMoreResults}"\x3e\x3cdiv class\x3d"${searchMoreResultsItem}"\x3e${searchResult}\x3c/div\x3e\x3cdiv\x3e${searchMoreResultsHtml}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e'),
searchResults:null,suggestResults:null,selectedResult:null,magicKey:null,selectedFeatureId:null,expanded:!1,maxLength:128,maxResults:6,maxSuggestions:6,locationToAddressDistance:1500,minCharacters:1,enableSearchingAll:!0};a=g.mixin({},this.options,a);this.set(a);this._updateActiveSource();this._i18n=y;this._defaultSR=new U(4326);this.domNode=d},startup:function(){this.inherited(arguments);this.sources||(this.sources=[]);this._mapLoaded().then(g.hitch(this,this._init))},postCreate:function(){var a=
this;this.inherited(arguments);this._moreResultsId=this.id+"_more_results";this.own(r(this.submitNode,B,g.hitch(this,this._searchButton)));this.own(r(this.sourcesBtnNode,B,g.hitch(this,this._toggleSourcesMenu)));this.own(r(this.inputNode,B,g.hitch(this,this._inputClick)));this.own(r(this.clearNode,B,g.hitch(this,this._clearButton)));this.own(r(this.formNode,"submit",g.hitch(this,function(a){a.preventDefault();this._cancelSuggest();this.search()})));this.own(r(this.inputNode,"keyup",g.hitch(this,function(a){this._inputKey(a)})));
this.own(r(this.sourcesBtnNode,"keyup",g.hitch(this,function(a){this._sourceBtnKey(a)})));this.own(r(this.suggestionsNode,"li:click, li:keyup",function(d){a._suggestionsEvent(d,this)}));this.own(r(this.sourcesNode,"li:click, li:keyup",function(d){a._sourcesEvent(d,this)}));this.own(r(this.inputNode,"input, paste",g.hitch(this,function(){this._suggestDelay()})));this.map&&this.map.infoWindow&&this.map.infoWindow.domNode&&this.enableInfoWindow&&(this.own(r(this.map.infoWindow.domNode,"#"+this._moreResultsId+
"_show:click",g.hitch(this,function(a){this._showMoreResultsClick(a)}))),this.own(r(this.map.infoWindow.domNode,"#"+this._moreResultsId+"_list li a:click",g.hitch(this,function(a){this._moreResultsClick(a)}))),this.own(r(this.map.infoWindow.domNode,"#"+this._moreResultsId+" [data-switch-coordinates]:click",g.hitch(this,function(a){this._switchCoordinatesClick(a)}))));this.value&&this._checkStatus();this._hideMenus();this._updateVisible();this._insertSources(this.sources);this._setPlaceholder(this.activeSourceIndex);
this._updateButtonMode(this.enableButtonMode);this.toggle(this.expanded)},destroy:function(){this.clear();l.empty(this.domNode);this.inherited(arguments)},clear:function(){this.clearGraphics();e.get(this.inputNode,"value")&&e.set(this.inputNode,"value","");this._changeAttrValue("value","");this.set("searchResults",null);this.set("suggestResults",null);this.set("selectedResult",null);this.set("magicKey",null);this.set("selectedFeatureId",null);n.remove(this.containerNode,this.css.hasValue);e.set(this.clearNode,
"title","");this._hideMenus();this._closePopup();this._hideLoading();this.emit("clear-search")},show:function(){f.set(this.domNode,"display","block")},hide:function(){f.set(this.domNode,"display","none")},expand:function(){this.enableButtonMode&&(n.add(this.containerNode,this.css.searchExpanded),n.remove(this.containerNode,this.css.searchCollapsed),this._hideMenus(),this.set("expanded",!0))},collapse:function(){this.enableButtonMode&&(n.remove(this.containerNode,this.css.searchExpanded),n.add(this.containerNode,
this.css.searchCollapsed),this._hideMenus(),this.set("expanded",!1))},toggle:function(a){this.enableButtonMode&&("undefined"===typeof a&&(a=!this.expanded),a?this.expand():this.collapse())},search:function(a){var d=new x;this._mapLoaded().then(g.hitch(this,function(){this._searchDeferred(a).then(g.hitch(this,function(a){var c=a.results;this.set("searchResults",c);0===a.numResults&&(this._noResults(a.value),this._showNoResultsMenu());this._hideLoading();this.emit("search-results",a);this._selectFirstResult(c,
a.activeSourceIndex);d.resolve(c)}),g.hitch(this,function(a){d.reject(a)}))}));return d.promise},suggest:function(a){var d=new x;this._mapLoaded().then(g.hitch(this,function(){this._suggestDeferred(a).then(g.hitch(this,function(a){if(a){var c=a.results;this.set("suggestResults",c);this._insertSuggestions(c,a.value);this.emit("suggest-results",a);d.resolve(c)}}),g.hitch(this,function(a){d.reject(a)}))}));return d.promise},select:function(a){var d=this._getDefaultSymbol(a),h=this.labelSymbol,c,u=this.sources,
b=this.activeSourceIndex,f=this.enableHighlight,e=this.enableLabel,l=this.autoNavigate,k=this.showInfoWindowOnSelect,m=this.enableInfoWindow,n=this.infoTemplate,p=a.feature?new E(a.feature.toJson()):null,q=p?a.feature._sourceLayer:null;I(p,q);if(b===this._allIndex){var r=this._getSourceIndexOfResult(a);null!==r&&(c=u[r],b=r)}else c=u[b];c&&(c.hasOwnProperty("highlightSymbol")&&(d=c.highlightSymbol),c.hasOwnProperty("labelSymbol")&&(h=c.labelSymbol),c.hasOwnProperty("enableHighlight")&&(f=c.enableHighlight),
c.hasOwnProperty("enableLabel")&&(e=c.enableLabel),c.hasOwnProperty("autoNavigate")&&(l=c.autoNavigate),c.hasOwnProperty("showInfoWindowOnSelect")&&(k=c.showInfoWindowOnSelect),c.hasOwnProperty("enableInfoWindow")&&(m=c.enableInfoWindow),c.hasOwnProperty("infoTemplate")?n=c.infoTemplate:c.featureLayer&&c.featureLayer.infoTemplate&&(n=c.featureLayer.infoTemplate));this._hideMenus();this._hideLoading();if(p){var u=this.highlightGraphic,t=this.graphicsLayer,r=this.labelGraphic,y=g.mixin({},p.attributes,
{searchTheme:this.theme,searchResult:this._searchResultHTML(a),searchMoreResults:this.css.searchMoreResults,searchMoreResultsItem:this.css.searchMoreResultsItem,searchMoreResultsId:this._moreResultsId,searchMoreResultsHtml:this._moreResultsHTML(a)}),v=null;m&&(v=n);r?(r.setGeometry(p.geometry),r.setAttributes(y),r.setSymbol(h),h&&"textsymbol"===h.type&&r.symbol.setText(a.name)):(r=new E(p.geometry,h,y),I(r,q),h&&"textsymbol"===h.type&&r.symbol.setText(a.name),e&&(t?t.add(r):this.map&&this.map.graphics&&
this.map.graphics.add(r)));u?(u.setGeometry(p.geometry),u.setAttributes(y),u.setInfoTemplate(v),u.setSymbol(d)):(u=new E(p.geometry,d,y,v),I(u,q),f&&(t?t.add(u):this.map&&this.map.graphics&&this.map.graphics.add(u)));u&&u.symbol&&"textsymbol"===u.symbol.type&&u.symbol.setText(a.name);this.map&&this.map.infoWindow&&m&&k&&(this.map.infoWindow.setFeatures([u]),d=this._getPointFromGeometry(u.geometry),this.map.infoWindow.show(d));this.map&&l&&a&&a.hasOwnProperty("extent")&&"function"===typeof this.map.setExtent&&
this.map.setExtent(a.extent,!0);this.set("highlightGraphic",u);this.set("labelGraphic",r)}this.set("selectedResult",a);this.emit("select-result",{result:a,source:c,sourceIndex:b})},focus:function(){w.focus(this.inputNode)},blur:function(){this.inputNode.blur();w.curNode&&w.curNode.blur()},clearGraphics:function(){var a=this.highlightGraphic,d=this.graphicsLayer,h=this.labelGraphic;a&&(d?d.remove(a):this.map&&this.map.graphics&&this.map.graphics.remove(a));h&&(d?d.remove(h):this.map&&this.map.graphics&&
this.map.graphics.remove(h));this.set("labelGraphic",null);this.set("highlightGraphic",null)},_mapLoaded:function(){var a=new x;if(this.map)if(this.map.loaded)a.resolve();else r.once(this.map,"load",g.hitch(this,function(){a.resolve()}));else a.resolve();return a.promise},_init:function(){this._getMapLayers().then(g.hitch(this,function(){this.set("loaded",!0);this.emit("load")}))},_clearButton:function(){this.clear();w.focus(this.inputNode)},_error:function(a){return Error(this.declaredClass+" "+
a)},_searchDeferred:function(a){var d=new x,h=this.value,c=this.activeSourceIndex;a&&a.hasOwnProperty("index")&&(c=a.index);this._showLoading();this._hideMenus();this._closePopup();this.clearGraphics();var u={magicKey:this.magicKey,text:h};a?"string"===typeof a?(u.text=a,a=this._searchQueries(u)):a="object"===typeof a&&a.hasOwnProperty("magicKey")?this._searchQueries(a):"object"===typeof a&&a.hasOwnProperty("geometry")?this._searchQueries({geometry:a}):"object"===typeof a&&a.hasOwnProperty(this._objectIdIdentifier)?
this._searchQueries(a):"object"===typeof a&&"point"===a.type?this._searchQueries({point:a}):a instanceof Array&&2===a.length?this._searchQueries({latlon:a}):this._searchQueries(u):a=this._searchQueries(u);a.always(g.hitch(this,function(a){a=this._formatResults(a,c,h);d.resolve(a)}));return d.promise},_suggestDeferred:function(a){var d=new x;this._deferreds.push(d);a||(a=this.value);var h=this.activeSourceIndex;this._suggestQueries({text:a}).always(g.hitch(this,function(c){var u;if(c)for(var b=0;b<
c.length;b++)c[b]&&(u=!0);u?(c=this._formatResults(c,h,a),d.resolve(c)):d.resolve()}));return d.promise},_getDefaultSymbol:function(a){var d,h,c,u;this.map&&(u=this.map.getBasemap());u||(u="topo");a&&a.feature&&a.feature.geometry&&(c=a.feature.geometry.type);"polyline"===c?c="line":"circle"===c||"extent"===c?c="polygon":"multipoint"===c&&(c="point");if(c){if(a=ba.getSchemes({theme:"default",basemap:u,geometryType:c}))h=a.primaryScheme;if(h){h.color&&h.hasOwnProperty("opacity")&&(h.color.a=h.opacity);
d=h;a=h.color;h=h.size;var b;switch(c){case "point":b=new W;b.setColor(a);b.setSize(null!==h?h:d.size);c=new K;c.setColor(d.outline.color);c.setWidth(d.outline.width);b.setOutline(c);break;case "line":b=new K;b.setColor(a);b.setWidth(null!==h?h:d.width);break;case "polygon":b=new X,b.setColor(a),c=new K,c.setColor(d.outline.color),c.setWidth(d.outline.width),b.setOutline(c)}d=b}}return d},_selectFirstResult:function(a,d){if(this.autoSelect&&a){var h;d===this._allIndex?h=this._getFirstResult(a):a[d]&&
a[d][0]&&(h=a[d][0]);h&&this.select(h)}},_getSourceIndexOfResult:function(a){var d=this.searchResults;if(d)for(var h in d)if(d[h]&&d[h].length)for(var c=0;c<d[h].length;c++)if(d[h][c]===a)return parseInt(h,10);return null},_getFirstResult:function(a){if(a)for(var d in a)if(a[d]&&a[d][0])return a[d][0];return!1},_onFocus:function(){this.map&&"function"===typeof this.map.disableKeyboardNavigation&&this.map.disableKeyboardNavigation();this.emit("focus");this.inherited(arguments)},_onBlur:function(){this._hideMenus();
this.map&&"function"===typeof this.map.enableKeyboardNavigation&&this.map.enableKeyboardNavigation();this.enableButtonMode&&this.loaded&&this.collapse();this.emit("blur");this.inherited(arguments)},_getMapLayers:function(){var a=new x;if(this.addLayersFromMap&&this.map){var d=[],h=this.map.graphicsLayerIds;if(h&&h.length){for(var c=0;c<h.length;c++){var b=this.map.getLayer(h[c]);b&&d.push(this._featureLayerLoaded(b))}G(d).always(g.hitch(this,function(d){for(var c,h=this.sources,b=0;b<d.length;b++)d[b]&&
d[b].loaded&&"Feature Layer"===d[b].type&&(h.push({featureLayer:d[b],enableSuggestions:!0}),c=!0);c&&this.set("sources",h);a.resolve()}))}else a.resolve()}else a.resolve();return a.promise},_switchCoordinatesClick:function(a){a.preventDefault();if(a=e.get(a.target,"data-switch-coordinates"))this._cancelSuggest(),this.set("value",a),this.search()},_moreResultsClick:function(a){a.preventDefault();var d=a.target;a=parseInt(e.get(d,"data-source-index"),10);var d=parseInt(e.get(d,"data-index"),10),h=this.searchResults;
h&&h[a]&&(a=h[a][d])&&this.select(a)},_showMoreResultsClick:function(a){a.preventDefault();if(a=b.byId(this._moreResultsId)){n.toggle(a,this.css.searchShowMoreResults);var d=b.byId(this._moreResultsId+"_show");d&&(n.contains(a,this.css.searchShowMoreResults)?e.set(d,"textContent",y.widgets.Search.main.hideMoreResults):e.set(d,"textContent",y.widgets.Search.main.showMoreResults))}},_featureLayerLoaded:function(a){var d=new x;if(a.loaded)d.resolve(a);else if(a.loadError)d.reject(this._error("Layer failed to load."));
else{var h,c;h=r.once(a,"load",g.hitch(this,function(){c.remove();d.resolve(a)}));c=r.once(a,"error",g.hitch(this,function(){h.remove();d.reject(this._error("Layer could not be loaded."))}))}return d.promise},_getObjectSize:function(a){var d=0,h;for(h in a)a.hasOwnProperty(h)&&d++;return d},_sourcesEvent:function(a,d){var h=e.get(d,"data-index"),c=z("li",this.sourcesNode);d=p.indexOf(c,d);h!==this._allIndex&&(h=parseInt(h,10));"click"===a.type||a.keyCode===q.ENTER?(this.set("activeSourceIndex",h),
w.focus(this.inputNode),this._hideSourcesMenu()):a.keyCode===q.UP_ARROW?(a.stopPropagation(),a.preventDefault(),a=d-1,0>a?w.focus(this.sourcesBtnNode):w.focus(c[a])):a.keyCode===q.DOWN_ARROW?(a.stopPropagation(),a.preventDefault(),a=d+1,a>=c.length?w.focus(this.sourcesBtnNode):w.focus(c[a])):a.keyCode===q.ESCAPE&&(this._hideSourcesMenu(),w.focus(this.inputNode))},_suggestionsEvent:function(a,d){var h=e.get(d,"data-source-index"),c=parseInt(e.get(d,"data-index"),10),b=z("li",this.suggestionsNode),
f=this.sources;d=p.indexOf(b,d);h!==this._allIndex&&(h=parseInt(h,10));var l;this._clearQueryTimeout();"click"===a.type||a.keyCode===q.ENTER?((b=this.suggestResults)&&b[h]&&b[h][c]&&(l=b[h][c]),l&&(l.index=h,f[h].featureLayer?(h=f[h].featureLayer.objectIdField,l[this._objectIdIdentifier]=l.feature.attributes[h],this.set("value",this._getSuggestionName(l)),this.set("selectedFeatureId",l.feature.attributes[h])):l.magicKey&&l.text&&(this.set("value",l.text),this.set("magicKey",l.magicKey)),this.search(l),
w.focus(this.inputNode))):a.keyCode===q.BACKSPACE||a.keyCode===q.DELETE?w.focus(this.inputNode):a.keyCode===q.UP_ARROW?(a.stopPropagation(),a.preventDefault(),l=d-1,0>l?w.focus(this.inputNode):w.focus(b[l])):a.keyCode===q.DOWN_ARROW?(a.stopPropagation(),a.preventDefault(),l=d+1,l>=b.length?w.focus(this.inputNode):w.focus(b[l])):a.keyCode===q.ESCAPE&&(this._hideMenus(),w.focus(this.inputNode))},_getResultName:function(a){var d;a.hasOwnProperty("name")&&null!==a.name&&(d=a.name.toString());d||(d=y.widgets.Search.main.untitledResult);
return d},_getSuggestionName:function(a){var d;a.hasOwnProperty("name")&&null!==a.name&&(d=a.name.toString());a=a.text||d;a||(a=y.widgets.Search.main.untitledResult);return a},_searchResultHTML:function(a){var d="";if(a.feature&&a.feature.attributes&&a.feature.attributes.Addr_type&&"LatLong"===a.feature.attributes.Addr_type){var h=a.name.split(" "),c,b;2===h.length&&(c=h[0],b=h[1]);b&&c?(a=parseFloat(c),b=parseFloat(b),h=b+", "+a,d+='\x3cdiv class\x3d"'+this.css.searchMoreResultsItem+'"\x3e',d+='\x3cdiv class\x3d"'+
this.css.latLonHeader+'"\x3e'+y.widgets.Search.main.lonlat+"\x3c/div\x3e",d=d+(a+", "+b)+"\x3c/div\x3e"+('\x3cdiv class\x3d"'+this.css.searchMoreResultsItem+'"\x3e'),a===b||90<a||-90>a||180<b||-180>b||(d+='\x3cdiv class\x3d"'+this.css.latLonHeader+'"\x3e'+y.widgets.Search.main.reverseLonLatHeader+"\x3c/div\x3e",d=d+('\x3ca data-switch-coordinates\x3d"'+h+'" tabindex\x3d"0" href\x3d"#"\x3e'+h+"\x3c/a\x3e")+"\x3c/div\x3e")):d=a.name}else d=a.name;return d},_moreResultsHTML:function(a){var d="",h="",
c=this.searchResults,b=this.sources,f=0;if(c){var h=h+('\x3cdiv class\x3d"'+this.css.searchMoreResultsItem+'"\x3e'),h=h+('\x3ca href\x3d"#" id\x3d"'+this._moreResultsId+'_show"\x3e'+y.widgets.Search.main.showMoreResults+"\x3c/a\x3e"),h=h+"\x3c/div\x3e"+('\x3cdiv class\x3d"'+this.css.searchMoreResultsList+'"\x3e'),h=h+('\x3cdiv id\x3d"'+this._moreResultsId+'_list"\x3e'),e;for(e in c)if(c[e]){var l=c[e].length;if(l){var g=1===l&&c[e][0]===a;if(1<this._getObjectSize(c)&&!g)var k=this._getSourceName(e),
h=h+('\x3cdiv class\x3d"'+this.css.searchMoreResultsListHeader+'"\x3e'+k+"\x3c/div\x3e");if(l&&!g){h+="\x3cul\x3e";k=b[e].maxResults||this.maxResults;for(g=0;g<l&&g<k;++g)if(c[e][g]!==a){var m=this._getResultName(c[e][g]),h=h+('\x3cli\x3e\x3ca tabindex\x3d"0" data-index\x3d"'+g+'" data-source-index\x3d"'+e+'" href\x3d"#"\x3e'+m+"\x3c/a\x3e\x3c/li\x3e");f++}h+="\x3c/ul\x3e"}}}h+="\x3c/div\x3e\x3c/div\x3e"}f&&(d+=h);return d},_validField:function(a,d){return a.getField(d)},_validFields:function(a,d){if(a&&
d&&d.length){for(var h=0;h<d.length;h++)if(!this._validField(a,d[h]))return!1;return!0}return!1},_getCodedName:function(a,d){if(a&&a.length)for(var h=0,c=a.length;h<c;h++){var b=a[h];if(b.code===d)return b.name}},_getCodedValue:function(a,d,h){if(a&&a.length)for(var c=0,b=a.length;c<b;c++){var f=a[c],e=f.name,l=d;h||(e=e.toLowerCase(),l=l.toLowerCase());if(e===l)return f.code}return!1},_whereClause:function(a,d,h,c){var b=null;if(a){var f="";this.reHostedFS.test(d.url)&&this._containsNonLatinCharacter(a)&&
(f="N");if(h&&h.length)for(var e=0,l=h.length;e<l;e++){var g="",k=a.replace(/\'/g,"''"),g=h[e],m=d.getField(g),n=d.getDomain(g);n&&"codedValue"===n.type&&(k=this._getCodedValue(n.codedValues,k,c));!1!==k&&(m=m.type,"esriFieldTypeString"===m||"esriFieldTypeDate"===m?g=c?g+" \x3d "+f+"'"+k+"'":"UPPER("+g+") LIKE "+f+"'%"+k.toUpperCase()+"%'":"esriFieldTypeOID"===m||"esriFieldTypeSmallInteger"===m||"esriFieldTypeInteger"===m||"esriFieldTypeSingle"===m||"esriFieldTypeDouble"===m?(k=parseFloat(k),g=isNaN(k)?
!1:g+" \x3d "+k):g=g+" \x3d "+k,g&&(b=b?b+" or ":"",b+=g))}}return b},_suggest:function(a){a||(a={index:this.activeSourceIndex,text:this.value});var d=new x,b=a.index,c=this.sources[b],f=this.enableSuggestions;c.hasOwnProperty("enableSuggestions")&&(f=c.enableSuggestions);var e=0,l;a.hasOwnProperty("text")&&a.text&&(l=g.trim(a.text),e=a.text.length);a=c.minCharacters||this.minCharacters;if(f&&l&&e>=a&&this._supportsPagination(c)){var k="";c.prefix&&(k+=c.prefix);k+=l;c.suffix&&(k+=c.suffix);var m=
this._defaultSR;this.map&&(m=this.map.spatialReference);f={};c.locator?(c.categories&&(f.categories=c.categories),c.locator.outSpatialReference=m,this.map&&c.localSearchOptions&&c.localSearchOptions.hasOwnProperty("distance")&&c.localSearchOptions.hasOwnProperty("minScale")&&(e=this._getScale(),!c.localSearchOptions.minScale||e&&e<=parseFloat(c.localSearchOptions.minScale))&&(f.location=this.map.extent.getCenter(),f.distance=c.localSearchOptions.distance),f.text=k,c.useMapExtent&&this.map&&this.map.extent&&
(f.searchExtent=this.map.extent),c.searchExtent&&(f.searchExtent=c.searchExtent),f.maxSuggestions=c.maxSuggestions||this.maxSuggestions,c.sourceCountry&&(f.countryCode=c.sourceCountry),c.countryCode&&(f.countryCode=c.countryCode),c.locator.suggestLocations(f).then(g.hitch(this,function(a){d.resolve(a)}),g.hitch(this,function(a){a||(a=this._error("Locator suggestLocations could not be performed."));d.reject(a)}))):c.featureLayer?this._featureLayerLoaded(c.featureLayer).then(g.hitch(this,function(){var a=
this._getDisplayField(c),h=c.searchFields||[a],f=[];c.suggestionTemplate?c.suggestionTemplate.replace(/(?:\$\{([^}]+)\})/g,function(a,d){f.push(d)}):f=[a];-1===p.indexOf(f,c.featureLayer.objectIdField)&&f.push(c.featureLayer.objectIdField);var a=this._validField(c.featureLayer,a),e=this._validFields(c.featureLayer,f),l=this._validFields(c.featureLayer,h);if(a&&e&&l){a=new P;c.hasOwnProperty("suggestQueryParams")&&g.mixin(a,c.suggestQueryParams);a.outSpatialReference=m;a.returnGeometry=!1;a.num=c.maxSuggestions||
this.maxSuggestions;a.outFields=f;c.useMapExtent&&this.map&&this.map.extent&&(a.geometry=this.map.extent);c.searchExtent&&(a.geometry=c.searchExtent);var u;if(h=this._whereClause(k,c.featureLayer,h,!1))a.where=h,u=!0;u?c.featureLayer.queryFeatures(a,g.hitch(this,function(a){var c;(a=a.features)&&(c=this._hydrateResults(a,b,!0));d.resolve(c)}),g.hitch(this,function(a){a||(a=this._error("FeatureLayer queryFeatures errored with suggestions"));d.reject(a)})):d.resolve()}else d.reject(this._error("Invalid FeatureLayer field"))})):
d.reject(this._error("Invalid source"))}else d.resolve();return d.promise},_supportsPagination:function(a){var d;a.locator?d=!0:a.featureLayer&&a.featureLayer.advancedQueryCapabilities&&a.featureLayer.advancedQueryCapabilities.supportsPagination&&(d=!0);return d},_suggestQueries:function(a){var d=this.sources,b=this.activeSourceIndex,c=[],f;if(b===this._allIndex)for(b=0;b<d.length;b++)f=a,f.index=b,f=this._suggest(f),c.push(f);else a.index=b,f=this._suggest(a),c.push(f);return G(c)},_getPointFromGeometry:function(a){var d;
switch(a.type){case "extent":d=a.getCenter();break;case "multipoint":d=a.getPoint(0);break;case "point":d=a;break;case "polygon":d=a.getCentroid();break;case "polyline":d=a.getPoint(0,0)}return d},_searchQueries:function(a){a.hasOwnProperty("index")||(a.index=this.activeSourceIndex);var d=[],b;if(a.index===this._allIndex)for(var c=this.sources,f=0;f<c.length;f++)b=a,b.index=f,b=this._search(b),d.push(b);else a=this._search(a),d.push(a);return G(d)},_searchButton:function(){this.enableButtonMode&&
!this.expanded?(this.expand(),w.focus(this.inputNode)):(this._cancelSuggest(),this.search())},_search:function(a){a||(a={text:this.value,magicKey:null,geometry:null,point:null,index:this.activeSourceIndex,latlon:null});this.selectedFeatureId&&(a.text=null,a[this._objectIdIdentifier]=this.selectedFeatureId);var d,b=new x,c=a.index,f=this.sources[c],e;a.hasOwnProperty("text")&&a.text&&(e=g.trim(a.text));if(f){var l="";f.prefix&&!a.magicKey&&(l+=f.prefix);l+=e;f.suffix&&!a.magicKey&&(l+=f.suffix);var k=
this._defaultSR;this.map&&(k=this.map.spatialReference);if(f.locator)if(a.hasOwnProperty("text")&&e){var m={};f.categories&&(m.categories=f.categories);k&&(f.locator.outSpatialReference=k);if(this.map&&f.localSearchOptions&&f.localSearchOptions.hasOwnProperty("distance")&&f.localSearchOptions.hasOwnProperty("minScale")){var n=this._getScale();if(!f.localSearchOptions.minScale||n&&n<=parseFloat(f.localSearchOptions.minScale))m.location=this.map.extent.getCenter(),m.distance=f.localSearchOptions.distance}m.address=
{};m.maxLocations=f.maxResults||this.maxResults;f.useMapExtent&&this.map&&this.map.extent&&(m.searchExtent=this.map.extent);f.searchExtent&&(m.searchExtent=f.searchExtent);f.sourceCountry&&(m.countryCode=f.sourceCountry);f.countryCode&&(m.countryCode=f.countryCode);a.magicKey&&(m.magicKey=a.magicKey);f.singleLineFieldName?m.address[f.singleLineFieldName]=l:m.address["Single Line Input"]=l;f.outFields&&(m.outFields=f.outFields);f.locator.addressToLocations(m).then(g.hitch(this,function(a){a=this._hydrateResults(a,
c,!1);b.resolve(a)}),g.hitch(this,function(a){a||(a=this._error("Locator addressToLocations could not be performed"));b.reject(a)}))}else a.geometry?(d=this._getPointFromGeometry(a.geometry.geometry))?this._reverseGeocodePoint(c,d).then(function(a){b.resolve(a)},function(a){b.reject(a)}):b.reject(this._error("Invalid point to reverse geocode")):a.point?this._reverseGeocodePoint(c,a.point).then(function(a){b.resolve(a)},function(a){b.reject(a)}):a.latlon?(m=new L(a.latlon,this._defaultSR),this._reverseGeocodePoint(c,
m).then(function(a){b.resolve(a)},function(a){b.reject(a)})):a.hasOwnProperty("text")&&!e?b.resolve([]):b.reject(this._error("Invalid query type for Locator"));else f.featureLayer?this._featureLayerLoaded(f.featureLayer).then(g.hitch(this,function(){var h=this._getDisplayField(f),m=f.searchFields||[h],h=this._validField(f.featureLayer,h),n=this._validFields(f.featureLayer,m);if(h&&n){h=new P;f.hasOwnProperty("searchQueryParams")&&g.mixin(h,f.searchQueryParams);k&&(h.outSpatialReference=k,n=this.map&&
this.map.getMaxResolution()||1/O.getUnitValueForSR(k))&&(h.maxAllowableOffset=n);h.returnGeometry=!0;f.outFields&&(h.outFields=f.outFields);var u;a.hasOwnProperty(this._objectIdIdentifier)||(this._supportsPagination(f)&&(h.num=f.maxResults||this.maxResults),f.useMapExtent&&this.map&&this.map.extent&&(h.geometry=this.map.extent),f.searchExtent&&(h.geometry=f.searchExtent),u=f.exactMatch);a.hasOwnProperty("text")&&e?(m=this._whereClause(l,f.featureLayer,m,u))?(h.where=m,m=!0):m=!1:a.hasOwnProperty(this._objectIdIdentifier)?
(h.objectIds=[a[this._objectIdIdentifier]],m=!0):a.geometry?(h.geometry=a.geometry,m=!0):a.point?(h.geometry=a.point,m=!0):a.latlon?(d=new L(a.latlon,this._defaultSR),h.geometry=d,m=!0):(a.hasOwnProperty("text")&&!e?b.resolve([]):b.reject(this._error("Invalid query type for FeatureLayer")),m=!1);m?f.featureLayer.queryFeatures(h,g.hitch(this,function(a){a=a.features;var d;a&&(d=this._hydrateResults(a,c,!1));b.resolve(d)}),g.hitch(this,function(a){a||(a=this._error("FeatureLayer queryFeatures could not be performed"));
b.reject(a)})):b.resolve()}else b.reject(this._error("Invalid FeatureLayer field"))})):b.reject(this._error("Invalid source"))}else b.reject(this._error("Source is undefined"));return b.promise},_clearQueryTimeout:function(){this._queryTimer&&clearTimeout(this._queryTimer)},_formatResults:function(a,d,b){b={activeSourceIndex:d,value:b,numResults:0,numErrors:0,errors:null,results:null};var c={},f={};if(a)if(d===this._allIndex)for(d=0;d<a.length;d++)a[d]&&(a[d]instanceof Error?(c[d]=a[d],b.numErrors++):
(f[d]=a[d],b.numResults+=a[d].length));else a[0]&&(a[0]instanceof Error?(c[d]=a[0],b.numErrors++):(f[d]=a[0],b.numResults+=a[0].length));b.numErrors&&(b.errors=c);b.numResults&&(b.results=f);return b},_reverseGeocodePoint:function(a,d){var b=new x,c=this.sources[a];if(d&&c){var f=c.locationToAddressDistance||this.locationToAddressDistance;c.locator.outSpatialReference=this._defaultSR;this.map&&(c.locator.outSpatialReference=this.map.spatialReference);c.locator.locationToAddress(d,f,g.hitch(this,function(d){d=
this._hydrateResults([d],a,!1);b.resolve(d)}),g.hitch(this,function(a){a||(a=this._error("Locator locationToAddress could not be performed"));b.reject(a)}))}else b.reject(this._error("No point or source defined for reverse geocoding"));return b.promise},_cancelDeferreds:function(){if(this._deferreds&&this._deferreds.length)for(var a=0;a<this._deferreds.length;a++)this._deferreds[a].cancel(this.declaredClass+" cancelling request");this._deferreds=[]},_sourceBtnKey:function(a){if(a){var d=z("li",this.sourcesNode);
a.keyCode===q.UP_ARROW?(a.stopPropagation(),a.preventDefault(),this._showSourcesMenu(),(a=d.length)&&w.focus(d[a-1])):a.keyCode===q.DOWN_ARROW&&(a.stopPropagation(),a.preventDefault(),this._showSourcesMenu(),d[0]&&w.focus(d[0]))}},_inputKey:function(a){if(a){var d=z("li",this.suggestionsNode),b=this.suggestResults;if(a.keyCode===q.TAB||a.keyCode===q.ESCAPE)this._cancelSuggest(),this._hideMenus();else if(a.keyCode===q.UP_ARROW)a.stopPropagation(),a.preventDefault(),this._cancelSuggest(),b&&this._showSuggestionsMenu(),
(a=d.length)&&w.focus(d[a-1]);else if(a.keyCode===q.DOWN_ARROW)a.stopPropagation(),a.preventDefault(),this._cancelSuggest(),b&&this._showSuggestionsMenu(),d[0]&&w.focus(d[0]);else{if(a.ctrlKey||a.metaKey||a.keyCode===q.copyKey||a.keyCode===q.LEFT_ARROW||a.keyCode===q.RIGHT_ARROW||a.keyCode===q.ENTER)return a;this._suggestDelay()}}},_cancelSuggest:function(){this._cancelDeferreds();this._clearQueryTimeout()},_suggestDelay:function(){this._cancelSuggest();this._changeValue();this._queryTimer=setTimeout(g.hitch(this,
function(){this.suggest()}),this.suggestionDelay)},_changeValue:function(){this.set("magicKey",null);this.set("selectedFeatureId",null);this._changeAttrValue("value",this.inputNode.value);this._checkStatus()},_inputClick:function(){this._hideSourcesMenu();this._hideNoResultsMenu()},_getSourceName:function(a){return this._sourceNames[a]},_loadSources:function(a){a=p.filter(a,function(a){return!!a.featureLayer});a=p.map(a,function(a){return this._featureLayerLoaded(a.featureLayer)},this);return G(a)},
_createSourceNameMap:function(a){return this._loadSources(a).then(g.hitch(this,function(){var b=p.map(a,function(a){return a.name||a.featureLayer&&a.featureLayer.name||y.widgets.Search.main.untitledSource});this._preventDuplicateSourceNames(a,b);return b}))},_getDuplicateSourceNameIndexes:function(a){var b={},f=[];p.forEach(a,function(d,h){b.hasOwnProperty(d)?(-1===f.indexOf(b[d])&&f.push(b[d]),f.push(h)):a.lastIndexOf(d)!==h&&(b[d]=h)});return f},_preventDuplicateSourceNames:function(a,b){if(b&&
1<b.length){var d=this._getDuplicateSourceNameIndexes(b);p.forEach(d,function(d){b[d]+=this._getFieldsString(a[d])},this)}},_getFieldsString:function(a){var b="",f=a.featureLayer;if(f){a=a.searchFields||[this._getDisplayField(a)];for(var c=0;c<a.length;c++)var b=0===c?b+": ":b+", ",e=a[c],l=f.getFieldLabel(e),b=b+(l||e)}return b},_splitResult:function(a,b){b=m.escapeString(b);return a.replace(new RegExp("(^|)("+b+")(|$)","ig"),"$1|$2|$3").split("|")},_insertSuggestions:function(a,b){if(this.enableSuggestionsMenu&&
this.suggestionsNode){this._hideSourcesMenu();this._hideNoResultsMenu();var d,f=this.sources;if(a){d=l.create("div");for(var e in a)if(a[e]&&a[e].length){var g=this._getSourceName(e);1<f.length&&this.activeSourceIndex===this._allIndex&&l.create("div",{className:this.css.searchMenuHeader,textContent:g},d);for(var g=l.create("ul",{role:"menu"},d),m=f[e].maxSuggestions||this.maxSuggestions,k=0;k<a[e].length&&k<m;++k)for(var n=l.create("li",{"data-index":k,"data-source-index":e,role:"menuitem",tabindex:0},
g),p=this._getSuggestionName(a[e][k]),p=this._splitResult(p,b),r=p.length,q=0;q<r;q++){var t=p[q];t.toLowerCase()===b.toLowerCase()?l.create("strong",{textContent:t},n):(t=document.createTextNode(t),l.place(t,n))}}}d?(l.place(d,this.suggestionsNode,"only"),this._showSuggestionsMenu()):(l.empty(this.suggestionsNode),this._hideSuggestionsMenu())}},_insertSources:function(a){if(this.enableSourcesMenu&&a&&1<a.length){var b,f,c=this.activeSourceIndex,e=l.create("ul",{role:"menu"});this.enableSearchingAll&&
(b="",c===this._allIndex&&(b="active"),l.create("li",{"data-index":this._allIndex,role:"menuitem",className:b,tabIndex:0,textContent:y.widgets.Search.main.all},e));for(f=0;f<a.length;f++){b="";f===c&&(b=this.css.activeSource);var g=this._getSourceName(f);l.create("li",{"data-index":f,role:"menuitem",className:b,tabIndex:0,textContent:g},e)}n.add(this.containerNode,this.css.hasMultipleSources);l.place(e,this.sourcesNode,"only")}else n.remove(this.containerNode,this.css.hasMultipleSources),l.empty(this.sourcesNode)},
_showLoading:function(){n.add(this.containerNode,this.css.searchLoading)},_hideLoading:function(){n.remove(this.containerNode,this.css.searchLoading)},_checkStatus:function(){this.value?(n.add(this.containerNode,this.css.hasValue),e.set(this.clearNode,"title",y.widgets.Search.main.clearButtonTitle)):this.clear()},_closePopup:function(){this.enableInfoWindow&&this.map&&this.map.infoWindow&&this.map.infoWindow.hide()},_noResults:function(a){var b;a&&(b=g.trim(a));var f=l.create("div",{className:this.css.searchNoResultsBody});
a&&b?(l.create("div",{className:this.css.searchNoResultsHeader,textContent:y.widgets.Search.main.noResults},f),l.create("div",{className:this.css.searchNoResultsText,textContent:F.substitute({value:'"'+a+'"'},y.widgets.Search.main.noResultsFound)},f)):(a=l.create("div",{},f),l.create("span",{"aria-hidden":"true",className:this.css.searchNoValueIcon},a),l.create("span",{className:this.css.searchNoValueText,textContent:y.widgets.Search.main.emptyValue},a));l.place(f,this.noResultsMenuNode,"only")},
_hideMenus:function(){this._hideSourcesMenu();this._hideSuggestionsMenu();this._hideNoResultsMenu()},_hideNoResultsMenu:function(){n.remove(this.containerNode,this.css.showNoResults)},_showNoResultsMenu:function(){this._hideSourcesMenu();this._hideSuggestionsMenu();n.add(this.containerNode,this.css.showNoResults)},_hideSourcesMenu:function(){n.remove(this.containerNode,this.css.showSources)},_hideSuggestionsMenu:function(){n.remove(this.containerNode,this.css.showSuggestions)},_showSourcesMenu:function(){this._hideSuggestionsMenu();
this._hideNoResultsMenu();n.add(this.containerNode,this.css.showSources)},_showSuggestionsMenu:function(){this._hideSourcesMenu();this._hideNoResultsMenu();n.add(this.containerNode,this.css.showSuggestions)},_toggleSourcesMenu:function(){this._hideSuggestionsMenu();this._hideNoResultsMenu();n.toggle(this.containerNode,this.css.showSources)},_getFirstStringField:function(a){if(a&&(a=a.fields)&&a.length)for(var b=0;b<a.length;b++){var f=a[b];if("esriFieldTypeString"===f.type)return f.name}return""},
_getDisplayField:function(a){return a.displayField||a.featureLayer.displayField||this._getFirstStringField(a.featureLayer)},_validLocation:function(a){return a&&"number"===typeof a.x&&"number"===typeof a.y},_validExtent:function(a){return a&&"number"===typeof a.xmin&&"number"===typeof a.ymin&&"number"===typeof a.xmax&&"number"===typeof a.ymax},_hydrateResult:function(a,b,f){var c={},d=this._defaultSR,e;b=this.sources[b];this.map&&(d=this.map.spatialReference);if(a.hasOwnProperty("text")&&a.hasOwnProperty("magicKey"))return a;
if(a.hasOwnProperty("geometry"))e=new E(a.toJson()),c.feature=e,(e=c.feature.geometry)&&e.setSpatialReference(d);else if(a.hasOwnProperty("location")&&this._validLocation(a.location)){var l=new L(a.location.x,a.location.y,d);e={};a.hasOwnProperty("attributes")&&(e=a.attributes);a.hasOwnProperty("address")&&"object"===typeof a.address&&g.mixin(e,a.address);a.hasOwnProperty("score")&&(e.score=a.score);c.feature=new E(l,null,e,null)}!c.feature&&f&&(e={},a.hasOwnProperty("attributes")&&(e=a.attributes),
a.hasOwnProperty("score")&&(e.score=a.score),c.feature=new E(null,null,e,null));if(c.feature){if(a.hasOwnProperty("extent")&&this._validExtent(a.extent))c.extent=new N(a.extent),c.extent.setSpatialReference(d);else if(c.feature&&c.feature.geometry)switch(c.feature.geometry.type){case "extent":c.extent=c.feature.geometry;break;case "multipoint":c.extent=M.getDenormalizedExtent(c.feature.geometry);break;case "polygon":c.extent=M.getDenormalizedExtent(c.feature.geometry);break;case "polyline":c.extent=
M.getDenormalizedExtent(c.feature.geometry);break;case "point":this.map?(d=this.zoomScale,b&&b.zoomScale&&(d=b.zoomScale),this._getScale()>d?c.extent=O.getExtentForScale(this.map,d).centerAt(c.feature.geometry):c.extent=this.map.extent.centerAt(c.feature.geometry)):c.extent=new N({xmin:c.feature.geometry.x-.25,ymin:c.feature.geometry.y-.25,xmax:c.feature.geometry.x+.25,ymax:c.feature.geometry.y+.25,spatialReference:this._defaultSR})}else c.extent=null;c.name="";b.featureLayer?b.suggestionTemplate&&
f?c.name=F.substitute(a.attributes,b.suggestionTemplate):b.searchTemplate?c.name=F.substitute(a.attributes,b.searchTemplate):(e=this._getDisplayField(b),f=b.featureLayer.getField(e),d=b.featureLayer.getDomain(e),e&&a.hasOwnProperty("attributes")&&a.attributes.hasOwnProperty(e)&&(a=a.attributes[e],d&&"codedValue"===d.type?c.name=this._getCodedName(d.codedValues,a):f&&"esriFieldTypeDate"===f.type&&!isNaN(a)?c.name=Q.format(new Date(a)):c.name=a)):a.address&&b.searchTemplate?c.name=F.substitute(a.address,
b.searchTemplate):a.hasOwnProperty("name")?c.name=a.name:a.hasOwnProperty("attributes")&&"object"===typeof a.attributes&&a.attributes.LongLabel?c.name=a.attributes.LongLabel:a.hasOwnProperty("attributes")&&"object"===typeof a.attributes&&a.attributes.Match_addr?(c.name=a.attributes.Match_addr,a.attributes.Addr_type&&"POI"===a.attributes.Addr_type&&a.attributes.StAddr&&a.attributes.City?c.name+=" - "+a.attributes.StAddr+", "+a.attributes.City:a.attributes.Addr_type&&"POI"===a.attributes.Addr_type&&
a.attributes.City&&(c.name+=" - "+a.attributes.City)):a.hasOwnProperty("address")&&"string"===typeof a.address?c.name=a.address:a.hasOwnProperty("address")&&"object"===typeof a.address&&a.address.hasOwnProperty("Address")?a.address.hasOwnProperty("Match_addr")?c.name=a.address.Match_addr:a.address.hasOwnProperty("Address")&&(c.name=a.address.Address):c.feature&&c.feature.geometry&&(c.name=c.feature.geometry.x+","+c.feature.geometry.y);b.featureLayer&&c.feature&&I(c.feature,b.featureLayer);return c}},
_getScale:function(){var a;this.map&&"function"===typeof this.map.getScale&&(a=this.map.getScale());return a},_hydrateResults:function(a,b,f,c){c=[];var d=0;if(a&&a.length)for(d;d<a.length;d++){var e=this._hydrateResult(a[d],b,f);e&&c.push(e)}return c},_containsNonLatinCharacter:function(a){for(var b=0;b<a.length;b++)if(255<a.charCodeAt(b))return!0;return!1},_setPlaceholder:function(a){var b="",f=this.sources[a];a===this._allIndex?b=this.allPlaceholder||y.widgets.Search.main.allPlaceholder:f&&f.placeholder&&
(b=f.placeholder);var c=y.widgets.Search.main.all;f&&(c=this._getSourceName(a));e.set(this.sourceNameNode,"textContent",c);e.set(this.inputNode,"placeholder",b);e.set(this.inputNode,"title",b)},_updateActiveSource:function(){var a=this.sources,b=this.activeSourceIndex,f;a&&a[b]&&(f=a[b]);f?this.set("activeSource",f):this.set("activeSource",null)},_updateVisible:function(){this.visible?this.show():this.hide()},_updateButtonMode:function(a){a?(n.toggle(this.containerNode,this.css.searchExpanded,this.expanded),
n.toggle(this.containerNode,this.css.searchCollapsed,!this.expanded),n.add(this.containerNode,this.css.hasButtonMode)):(n.remove(this.containerNode,this.css.searchExpanded),n.remove(this.containerNode,this.css.searchCollapsed),n.remove(this.containerNode,this.css.hasButtonMode))},_setDefaultActiveSourceIndex:function(a){a&&1===a.length||!this.enableSearchingAll?this.set("activeSourceIndex",0):this.set("activeSourceIndex",this._allIndex)},_setEnableSourcesMenuAttr:function(a){this._set("enableSourcesMenu",
a);this._created&&this._insertSources(this.sources)},_setEnableSearchingAllAttr:function(a){this._set("enableSearchingAll",a);this._created&&(this._setDefaultActiveSourceIndex(this.sources),this._hideMenus(),this._insertSources(this.sources))},_setSourcesAttr:function(a){this._createSourceNameMap(a).then(g.hitch(this,function(b){this._sourceNames=b;this._created&&(this._setDefaultActiveSourceIndex(a),this._hideMenus(),this._insertSources(a))}));this._set("sources",a)},_setAllPlaceholderAttr:function(a){this._set("allPlaceholder",
a);this._created&&this._setPlaceholder(this.activeSourceIndex)},_setActiveSourceIndexAttr:function(a){this._set("activeSourceIndex",a);this._updateActiveSource();this._created&&(this._setPlaceholder(a),this._hideMenus(),this._insertSources(this.sources))},_setMaxLengthAttr:function(a){this._set("maxLength",a);this._created&&e.set(this.inputNode,"maxLength",a)},_setValueAttr:function(a){this.set("magicKey",null);this.set("selectedFeatureId",null);this._set("value",a);this._created&&(e.set(this.inputNode,
"value",a),this._checkStatus())},_setVisibleAttr:function(a){this._set("visible",a);this._created&&this._updateVisible()},_setEnableButtonModeAttr:function(a){this._set("enableButtonMode",a);this._created&&this._updateButtonMode(a)},_setThemeAttr:function(a){this._created&&(n.remove(this.domNode,this.theme),n.add(this.domNode,a));this._set("theme",a)}});A("extend-esri")&&g.setObject("dijit.Search",k,D);return k})},"esri/styles/basic":function(){define(["dojo/_base/array","dojo/_base/lang","dojo/has",
"../kernel","../Color"],function(v,k,g,p,t){function x(g,b){var e;if(g)switch(e={},e.color=new t(g.color),e.opacity=g.opacity||1,b){case "point":e.outline={color:new t(g.outline.color),width:g.outline.width};e.size=g.size;break;case "line":e.width=g.width;break;case "polygon":e.outline={color:new t(g.outline.color),width:g.outline.width}}return e}function q(g){if("esriGeometryPoint"===g||"esriGeometryMultipoint"===g)g="point";else if("esriGeometryPolyline"===g)g="line";else if("esriGeometryPolygon"===
g||"esriGeometryMultiPatch"===g)g="polygon";return g}var r={"default":{name:"default",label:"Default",description:"Default theme for basic visualization of features.",basemapGroups:{light:"streets gray topo terrain national-geographic oceans osm gray-vector streets-vector topo-vector streets-relief-vector streets-navigation-vector".split(" "),dark:["satellite","hybrid","dark-gray","dark-gray-vector","streets-night-vector"]},pointSchemes:{light:{primary:{color:[77,77,77,1],outline:{color:[255,255,
255,.25],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:1},size:8},{color:[255,255,255,1],outline:{color:[51,51,51,.25],width:1},size:8}]},dark:{primary:{color:[255,255,255,1],outline:{color:[92,92,92,.25],width:1},size:8},secondary:[{color:[226,119,40,1],outline:{color:[255,255,255,.25],width:1},size:8},{color:[26,26,26,1],outline:{color:[178,178,178,.25],width:1},size:8}]}},lineSchemes:{light:{primary:{color:[77,77,77,1],width:2},secondary:[{color:[226,
119,40,1],width:2},{color:[255,255,255,1],width:2}]},dark:{primary:{color:[255,255,255,1],width:2},secondary:[{color:[226,119,40,1],width:2},{color:[26,26,26,1],width:2}]}},polygonSchemes:{light:{primary:{color:[227,139,79,1],outline:{color:[255,255,255,.25],width:1},opacity:.8},secondary:[{color:[128,128,128,1],outline:{color:[255,255,255,.25],width:1},opacity:.8},{color:[255,255,255,1],outline:{color:[128,128,128,.25],width:1},opacity:.8}]},dark:{primary:{color:[227,139,79,1],outline:{color:[92,
92,92,.25],width:1},opacity:.8},secondary:[{color:[178,178,178,1],outline:{color:[92,92,92,.25],width:1},opacity:.8},{color:[26,26,26,1],outline:{color:[128,128,128,.25],width:1},opacity:.8}]}}}},z={};(function(){var g,b,e,k,f,l,p,q;for(g in r)for(k in b=r[g],e=b.basemapGroups,f=z[g]={basemaps:[].concat(e.light).concat(e.dark),point:{},line:{},polygon:{}},e)for(l=e[k],p=0;p<l.length;p++)q=l[p],b.pointSchemes&&(f.point[q]=b.pointSchemes[k]),b.lineSchemes&&(f.line[q]=b.lineSchemes[k]),b.polygonSchemes&&
(f.polygon[q]=b.polygonSchemes[k])})();var A={getAvailableThemes:function(g){var b=[],e,k,f;for(e in r)k=r[e],f=z[e],g&&-1===v.indexOf(f.basemaps,g)||b.push({name:k.name,label:k.label,description:k.description,basemaps:f.basemaps.slice(0)});return b},getSchemes:function(g){var b=g.theme,e=g.basemap,k=q(g.geometryType);g=z[b];var f;(g=(g=g&&g[k])&&g[e])&&(f={primaryScheme:x(g.primary,k),secondarySchemes:v.map(g.secondary,function(b){return x(b,k)})});return f},cloneScheme:function(g){var b;g&&(b=k.mixin({},
g),b.color&&(b.color=new t(b.color)),b.outline&&(b.outline={color:b.outline.color&&new t(b.outline.color),width:b.outline.width}));return b}};g("extend-esri")&&k.setObject("styles.basic",A,p);return A})},"jimu/dijit/ServiceURLComboBox":function(){define(["dojo/_base/declare","dojo/_base/html","dijit/form/ComboBox","jimu/dijit/ServiceURLInput"],function(v,k,g,p){return v([p,g],{declaredClass:"jimu.dijit.ServiceURLComboBox",postCreate:function(){this.inherited(arguments);k.addClass(this.domNode,"jimu-dijit-ServiceURLComboBox")},
setProcessFunction:function(){this.inherited(arguments)}})})},"widgets/Directions/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/Directions/setting/BarrierLayers.html":'\x3cdiv\x3e\r\n  \x3cspan class\x3d"title"\x3e${nls.barrierLayers}\x3c/span\x3e\r\n  \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd style\x3d"width:200px;"\x3e\r\n          \x3cspan class\x3d"impedance-attribute jimu-ellipsis"\x3e${nls.pointBarrier}\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd style\x3d"width:auto;"\x3e\r\n          \x3cdiv class\x3d"barrierLayersNode" data-dojo-attach-point\x3d"pointLayersNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n\r\n      \x3ctr\x3e\r\n        \x3ctd style\x3d"width:200px;"\x3e\r\n          \x3cspan class\x3d"impedance-attribute jimu-ellipsis"\x3e${nls.lineBarrier}\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd style\x3d"width:auto;"\x3e\r\n          \x3cdiv class\x3d"barrierLayersNode" data-dojo-attach-point\x3d"polylineLayersNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n\r\n      \x3ctr\x3e\r\n        \x3ctd style\x3d"width:200px;"\x3e\r\n          \x3cspan class\x3d"impedance-attribute jimu-ellipsis"\x3e${nls.polygonBarrier}\x3c/span\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd style\x3d"width:auto;"\x3e\r\n          \x3cdiv class\x3d"barrierLayersNode" data-dojo-attach-point\x3d"polygonLayersNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e',
"url:widgets/Directions/setting/PresetDestinations.html":'\x3cdiv\x3e\r\n  \x3cspan class\x3d"title"\x3e${nls.presetDestinations}\x3c/span\x3e\r\n  \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n    \x3ctbody\x3e\r\n    \x3ctr\x3e\r\n      \x3ctd style\x3d"width:50%;"\x3e\r\n        \x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n          \x3ctbody\x3e\r\n          \x3ctr\x3e\r\n            \x3ctd style\x3d"width:200px;"\x3e\r\n              \x3cspan class\x3d"impedance-attribute jimu-ellipsis"\x3e${nls.startPoint}\x3c/span\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd style\x3d"width:auto;"\x3e\r\n              \x3cspan data-dojo-attach-point\x3d"startSearchDom" style\x3d"width:220px;"\x3e\x3c/span\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"startSearchResultsNode" class\x3d"searchResults arcgisSearch"\x3e\x3c/div\x3e\r\n              \x3c!--\x3cdiv data-dojo-attach-point\x3d"startSearchError" class\x3d"hide preset-des-error"\x3eNo Results\x3c/div\x3e--\x3e\r\n            \x3c/td\x3e\r\n\r\n            \x3ctd style\x3d"width:200px;"\x3e\r\n              \x3cspan class\x3d"impedance-attribute jimu-ellipsis"\x3e${nls.endPoint}\x3c/span\x3e\r\n            \x3c/td\x3e\r\n            \x3ctd style\x3d"width:auto;"\x3e\r\n              \x3cspan data-dojo-attach-point\x3d"endSearchDom" class\x3d"end-search" style\x3d"width:220px;"\x3e\x3c/span\x3e\r\n              \x3cdiv data-dojo-attach-point\x3d"endSearchResultsNode" class\x3d"searchResults arcgisSearch"\x3e\x3c/div\x3e\r\n              \x3c!--\x3cdiv data-dojo-attach-point\x3d"endSearchError" class\x3d"hide preset-des-error"\x3eNo Results\x3c/div\x3e--\x3e\r\n            \x3c/td\x3e\r\n          \x3c/tr\x3e\r\n          \x3c/tbody\x3e\r\n        \x3c/table\x3e\r\n      \x3c/td\x3e\r\n    \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e',
"url:esri/dijit/Search/templates/Search.html":'\x3cdiv role\x3d"presentation" class\x3d"${theme}"\x3e\r\n  \x3cdiv role\x3d"presentation" class\x3d"${css.searchGroup}" data-dojo-attach-point\x3d"containerNode"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"expandNode" class\x3d"${css.searchExpandContainer}"\x3e\r\n      \x3cdiv class\x3d"${css.searchAnimateContainer}"\x3e\r\n        \x3cdiv role\x3d"button" title\x3d"${_i18n.widgets.Search.main.searchIn}" id\x3d"${id}_menu_button" class\x3d"${css.searchBtn} ${css.searchToggle}" tabindex\x3d"0" data-dojo-attach-point\x3d"sourcesBtnNode"\x3e\r\n          \x3cspan aria-hidden\x3d"true" role\x3d"presentation" class\x3d"${css.searchToggleIcon}"\x3e\x3c/span\x3e\x3cspan class\x3d"${css.searchSourceName}" data-dojo-attach-point\x3d"sourceNameNode"\x3e\x3c/span\x3e\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"${css.searchInputGroup}"\x3e\r\n          \x3cform data-dojo-attach-point\x3d"formNode"\x3e\r\n            \x3cinput maxlength\x3d"${maxLength}" autocomplete\x3d"off" type\x3d"text" tabindex\x3d"0" class\x3d"${css.searchInput}" value\x3d"${value}" aria-haspopup\x3d"true" id\x3d"${id}_input" data-dojo-attach-point\x3d"inputNode" role\x3d"textbox"\x3e\r\n          \x3c/form\x3e\r\n          \x3cdiv role\x3d"button" class\x3d"${css.searchClear}" tabindex\x3d"0" data-dojo-attach-point\x3d"clearNode"\x3e\x3cspan aria-hidden\x3d"true" class\x3d"${css.searchClearIcon}"\x3e\x3c/span\x3e\x3cspan aria-hidden\x3d"true" class\x3d"${css.searchSpinner}"\x3e\x3c/span\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"suggestionsNode" class\x3d"${css.searchMenu} ${css.suggestionsMenu}"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv role\x3d"button" title\x3d"${_i18n.widgets.Search.main.searchButtonTitle}" class\x3d"${css.searchBtn} ${css.searchSubmit}" tabindex\x3d"0" data-dojo-attach-point\x3d"submitNode"\x3e\r\n      \x3cspan aria-hidden\x3d"true" role\x3d"presentation" class\x3d"${css.searchIcon}"\x3e\x3c/span\x3e\r\n      \x3cspan class\x3d"${css.searchButtonText}"\x3e${_i18n.widgets.Search.main.searchButtonTitle}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"sourcesNode" class\x3d"${css.searchMenu} ${css.sourcesMenu}"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"noResultsMenuNode" class\x3d"${css.searchMenu} ${css.searchNoResultsMenu}"\x3e\x3c/div\x3e\r\n    \x3cdiv class\x3d"${css.searchClearFloat}"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Directions/setting/Setting.html":'\x3cdiv style\x3d"width:100%;height:auto;"\x3e\r\n\t\x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\x3ccolgroup\x3e\r\n\t\t\t\x3ccol width\x3d"187px" /\x3e\r\n\t\t\t\x3ccol width\x3d"auto" /\x3e\r\n\t\t\x3c/colgroup\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"jimu-ellipsis"\x3e${nls.routeUrl}\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"route-td"\x3e\r\n\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"routeUrl" data-dojo-type\x3d"jimu/dijit/ServiceURLComboBox"\r\n\t\t\t\t\t\t\t\t\tdata-dojo-attach-props\x3d"trim:true;hasDownArrow:false;autoComplete:true"\r\n\t\t\t\t\t\t\t\t\tid\x3d"routeLayer" name\x3d"routeLayer" style\x3d"width:100%;height:30px;"\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cspan class\x3d"jimu-ellipsis"\x3e${nls.locatorUrl}\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"locator-td"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"locatorUrl" data-dojo-type\x3d"jimu/dijit/ServiceURLComboBox"\r\n\t\t\t\t\tdata-dojo-attach-props\x3d"trim:true" type\x3d"text" style\x3d"width:100%;" placeHolder\x3d"${_locatorUrl}" /\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cspan\x3e${nls.travelModesUrl}\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"travelmodes-td"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"travelModesUrl" data-dojo-type\x3d"jimu/dijit/ServiceURLInput"\r\n\t\t\t\t\tdata-dojo-attach-props\x3d"trim:true" type\x3d"text" style\x3d"width:100%;"/\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\x3cspan\x3e${nls.trafficLayerUrl}\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"trafficlayer-td"\x3e\r\n\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"trafficLayerUrl" data-dojo-type\x3d"jimu/dijit/ServiceURLInput"\r\n\t\t\t\t\tdata-dojo-attach-props\x3d"trim:true" type\x3d"text" style\x3d"width:100%;"/\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\r\n\t\x3cspan class\x3d"title"\x3e${nls.geocoderOptions}\x3c/span\x3e\r\n\t\x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd colspan\x3d"2" class\x3d"auto-complete-td" data-dojo-attach-point\x3d"autoCompleteTd"\x3e\r\n\t\t\t\t\t\x3cspan\x3e${nls.autoComplete}\x3c/span\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:50%;"\x3e\r\n\t\t\t\t\t\x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:200px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cspan class\x3d"jimu-ellipsis"\x3e${nls.maximumSuggestions}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"maximumSuggestions" data-dojo-type\x3d"dijit/form/NumberSpinner" data-dojo-props\x3d\'required:true,value:6,smallDelta:1,largeDelta:1,constraints:{min:1},intermediateChanges:true\' type\x3d"text" style\x3d"width:220px;" /\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:50%;"\x3e\r\n\t\t\t\t\t\x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:200px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cspan class\x3d"min-characters jimu-ellipsis"\x3e${nls.minCharacters}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"minCharacters" data-dojo-type\x3d"dijit/form/NumberSpinner" data-dojo-props\x3d\'required:true,value:3,smallDelta:1,largeDelta:1,constraints:{min:3},intermediateChanges:true\' type\x3d"text" style\x3d"width:220px;" /\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:50%;"\x3e\r\n\t\t\t\t\t\x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:200px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cspan\x3e${nls.placeholder}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"placeholder" data-dojo-type\x3d"dijit/form/ValidationTextBox" type\x3d"text" style\x3d"width:220px;" /\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\r\n\t\t\t\t\x3ctd style\x3d"width:50%;"\x3e\r\n\t\t\t\t\t\x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:200px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cspan class\x3d"search-delay"\x3e${nls.searchDelay}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"searchDelay" data-dojo-type\x3d"dijit/form/NumberSpinner" data-dojo-props\x3d\'required:true,value:350,smallDelta:1,largeDelta:10,constraints:{min:10},intermediateChanges:true\' type\x3d"text" style\x3d"width:220px;" /\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cspan class\x3d"title"\x3e${nls.routeOptions}\x3c/span\x3e\r\n\t\x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:50%;"\x3e\r\n\t\t\t\t\t\x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:200px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cspan class\x3d"jimu-ellipsis"\x3e${nls.directionsLanguage}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"directionsLanguage" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d\'required:true\' style\x3d"width:220px;" /\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:50%;"\x3e\r\n\t\t\t\t\t\x3ctable  style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:200px"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cspan class\x3d"length-units jimu-ellipsis"\x3e${nls.directionsLengthUnits}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"directionsLengthUnits" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:220px;height:30px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"esriFeet"\x3e${nls.feet}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"esriKilometers" selected\x3e${nls.kilometers}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"esriMeters"\x3e${nls.meters}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"esriMiles"\x3e${nls.miles}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"esriNauticalMiles"\x3e${nls.nauticalMiles}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"esriYards"\x3e${nls.yards}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:50%;display: none;"\x3e\r\n\t\t\t\t\t\x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:200px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cspan class\x3d"jimu-ellipsis"\x3e${nls.directionsOutputType}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cselect data-dojo-attach-point\x3d"directionsOutputType" data-dojo-type\x3d"dijit/form/Select" style\x3d"width:220px;height:30px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"standard"\x3e${nls.standard}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"complete" selected\x3e${nls.complete}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"complete-no-events"\x3e${nls.completeNoEvents}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"instructions-only"\x3e${nls.instructionsOnly}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\t\x3coption value\x3d"summary-only"\x3e${nls.summaryOnly}\x3c/option\x3e\r\n\t\t\t\t\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd style\x3d"width:50%;"\x3e\r\n\t\t\t\t\t\x3ctable style\x3d"width:100%;" cellspacing\x3d"0"\x3e\r\n\t\t\t\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:200px;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cspan class\x3d"impedance-attribute jimu-ellipsis"\x3e${nls.impedanceAttribute}\x3c/span\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\t\x3ctd style\x3d"width:auto;"\x3e\r\n\t\t\t\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"impedanceAttribute" data-dojo-type\x3d"dijit/form/ValidationTextBox"  style\x3d"width:220px;" /\x3e\r\n\t\t\t\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\t\t\x3c/tbody\x3e\r\n\t\t\t\t\t\x3c/table\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\r\n\t\x3c!-- preset destinations --\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"presetDestinations"\x3e\x3c/div\x3e\r\n\r\n\t\x3c!-- BarrierLayers --\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"barrierLayersNode"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Directions/setting/css/style.css":".jimu-widget-directions-setting{font-size: 14px; margin-bottom: 20px;}.jimu-widget-directions-setting .title{display:inline-block; font-size: 16px; font-weight:bold; margin:10px 0 5px 0px;}.jimu-widget-directions-setting \x3e table \x3e tbody \x3e tr \x3e td{padding:5px 0;}.jimu-widget-directions-setting .route-td{padding-left: 10px;}.jimu-widget-directions-setting .jimu-ellipsis{white-space: normal;}.jimu-rtl .jimu-widget-directions-setting .route-td{padding-left: 0; padding-right: 10px;}.jimu-widget-directions-setting .locator-td{padding-left: 10px;}.jimu-rtl .jimu-widget-directions-setting .locator-td{padding-left: 0; padding-right: 10px;}.jimu-widget-directions-setting .travelmodes-td{padding-left: 10px;}.jimu-rtl .jimu-widget-directions-setting .travelmodes-td{padding-left: 0; padding-right: 10px;}.jimu-widget-directions-setting .trafficlayer-td{padding-left: 10px;}.jimu-rtl .jimu-widget-directions-setting .trafficlayer-td{padding-left: 0; padding-right: 10px;}.jimu-widget-directions-setting .auto-complete-td span{margin-left: 10px;}.jimu-rtl .jimu-widget-directions-setting .auto-complete-td span{margin-left: 0px; margin-right: 10px;}.jimu-widget-directions-setting .searchResults.arcgisSearch{position: relative;}.jimu-widget-directions-setting .arcgisSearch{width: 220px;}.jimu-widget-directions-setting .arcgisSearch .searchMenu {position: absolute;}.jimu-widget-directions-setting .arcgisSearch .searchMenu.searchResultsMenu{width: 220px !important;}.jimu-widget-directions-setting .arcgisSearch .showNoResults .noResultsMenu{height: 122px;}.jimu-widget-directions-setting .arcgisSearch .hasValue.showNoResults .noResultsMenu{display: block !important;}.jimu-widget-directions-setting .arcgisSearch .searchGroup .searchInput{width:168px; padding: 6px; border-radius: 0; border-left: 6px green solid; overflow: hidden; text-overflow:ellipsis; white-space: nowrap;}.jimu-widget-directions-setting .end-search .arcgisSearch .searchGroup .searchInput{border-left: 6px red solid;}.jimu-rtl .jimu-widget-directions-setting .arcgisSearch .searchGroup .searchInput{border-left: none; border-right: 6px green solid;}.jimu-rtl .jimu-widget-directions-setting .end-search .arcgisSearch .searchGroup .searchInput{border-left: none; border-right: 6px red solid;}.jimu-widget-directions-setting .arcgisSearch .searchBtn{border-radius: 0; border-left: 0; padding: 6px;}.jimu-rtl .jimu-widget-directions-setting .arcgisSearch .searchBtn{border-right: 0; border-left: 1px solid #57585A;}.jimu-widget-directions-setting .arcgisSearch .searchClear{display: none;}.jimu-widget-directions-setting .hide{display: none;}.jimu-widget-directions-setting .preset-des-error{color:red;}.jimu-widget-directions-setting .barrierLayersNode{padding: 5px 0;}.jimu-widget-directions-setting .barrierLayersNode \x3e table{background-color: transparent; width: 100%;}",
"*now":function(v){v(['dojo/i18n!*preload*widgets/Directions/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/on dojo/_base/html dojo/_base/config dojo/Deferred dijit/_WidgetsInTemplateMixin jimu/BaseWidgetSetting jimu/utils jimu/portalUtils ./BarrierLayers ./PresetDestinations jimu/dijit/Message jimu/dijit/CheckBox jimu/dijit/ServiceURLComboBox jimu/dijit/ServiceURLInput dijit/form/NumberSpinner dijit/form/ValidationTextBox dijit/form/Select".split(" "),function(v,k,g,p,t,x,q,r,z,A,m,b,e,n){return v([r,q],{baseClass:"jimu-widget-directions-setting",_ROUTE_WORLD:"Route_World",
_serviceUrlInputInvalidClass:"jimu-serviceurl-input-invalid",_routeTaskUrl:"http://route.arcgis.com/arcgis/rest/services/World/Route/NAServer/",_locatorUrl:"http://geocode.arcgis.com/arcgis/rest/services/World/GeocodeServer",_travelModesUrl:"http://logistics.arcgis.com/arcgis/rest/services/World/Utilities/GPServer",_trafficLayerUrl:"http://traffic.arcgis.com/arcgis/rest/services/World/Traffic/MapServer",postMixInProperties:function(){this.nls.complete||(this.nls.complete="Complete");this.nls.completeNoEvents||
(this.nls.completeNoEvents="Complete No Events");this.nls.instructionsOnly||(this.nls.instructionsOnly="Instructions Only");this.nls.standard||(this.nls.standard="Standard");this.nls.summaryOnly||(this.nls.summaryOnly="Summary Only");this.nls.travelModesUrl||(this.nls.travelModesUrl="Travel Modes URL");this.nls.example||(this.nls.example=this.nls.optional+" "+window.jimuNls.basicServiceChooser.example+" : ")},postCreate:function(){this.inherited(arguments);this.autoComplete=new n;this.autoComplete.placeAt(this.autoCompleteTd,
"first");p.addClass(this.autoComplete.domNode,"class","jimu-float-leading");this.portal=A.getPortal(this.appConfig.portalUrl);this.routeUrl.setProcessFunction(k.hitch(this,function(b){var f=!1;b&&b.data&&(f="esriNAServerRouteLayer"===b.data.layerType);if(!0===f)return f;this._setRouteUrl(b);b=this._getHandledUrlFromServiceUrlInput(this.routeUrl);return/\/rest\/services\/.+\/NAServer/i.test(b)}));this.locatorUrl.setProcessFunction(k.hitch(this,function(){var b=this._getHandledUrlFromServiceUrlInput(this.locatorUrl);
return/\/rest\/services\/.+\/GeocodeServer/gi.test(b)}));this.travelModesUrl.setProcessFunction(k.hitch(this,function(){var b=this._getHandledUrlFromServiceUrlInput(this.travelModesUrl);return/\/rest\/services\/.+\/GPServer/gi.test(b)}),k.hitch(this,function(){this.travelModesUrl.get("value")||p.removeClass(this.travelModesUrl.domNode,this._serviceUrlInputInvalidClass)}));this.trafficLayerUrl.setProcessFunction(k.hitch(this,function(){var b=this._getHandledUrlFromServiceUrlInput(this.trafficLayerUrl);
return/\/rest\/services\/.+\/MapServer/gi.test(b)}),k.hitch(this,function(){this.trafficLayerUrl.get("value")||p.removeClass(this.trafficLayerUrl.domNode,this._serviceUrlInputInvalidClass)}));this.portal.loadSelfInfo().then(k.hitch(this,function(b){var f=this._getRouteUrlFromPortalSelf(b);f&&this.routeUrl.set("placeHolder",f);(f=this._getLocatorUrlFromPortalSelf(b))&&this.locatorUrl.set("placeHolder",f);(f=this._getTravelModesUrlFromPortalSelf(b))?this.travelModesUrl.set("placeHolder",this.nls.example+
f):this.travelModesUrl.set("placeHolder",this.nls.example+this._travelModesUrl);(b=this._getTrafficLayerUrlFromPortalSelf(b))?this.trafficLayerUrl.set("placeHolder",this.nls.example+b):this.trafficLayerUrl.set("placeHolder",this.nls.example+this._trafficLayerUrl)}));this.barrierLayers=new m({nls:this.nls,map:this.map,barrierLayers:this.config.barrierLayers},this.barrierLayersNode);this.barrierLayers.startup();this.presetDestinations=new b({nls:this.nls,defaultLocations:this.config.defaultLocations},
this.presetDestinations);this.presetDestinations.startup()},_getHandledUrlFromServiceUrlInput:function(b){b=b.get("value");return z.removeSuffixSlashes(b)},startup:function(){this.inherited(arguments);this._setPresetDestinationsSources();this.setConfig(this.config)},destroy:function(){this.directionsLengthUnits&&this.directionsLengthUnits.destroy&&(this.directionsLengthUnits.closeDropDown(),this.directionsLengthUnits.destroy());this.barrierLayers&&this.barrierLayers.destroy&&this.barrierLayers.destroy();
this.inherited(arguments)},setConfig:function(b){if(this.config=b)(b=this.config.geocoderOptions)&&"object"===typeof b&&(this.autoComplete.setValue(!0===b.autoComplete),this.maximumSuggestions.set("value",b.maxLocations),this.minCharacters.set("value",b.minCharacters),this.searchDelay.set("value",b.searchDelay),(b=b.geocoders)&&0<b.length&&this.placeholder.set("value",b[0].placeholder||"")),(b=this.config.routeOptions)&&"object"===typeof b&&(this.directionsLanguage.set("value",b.directionsLanguage||
t.locale||"en_us"),this.directionsLengthUnits.set("value",b.directionsLengthUnits),this.impedanceAttribute.set("value",b.impedanceAttribute)),this._getRouteTaskUrl().then(k.hitch(this,function(b){this.routeUrl.set("value",b)})),this._getLocatorUrl().then(k.hitch(this,function(b){this.locatorUrl.set("value",b)})),this.config.travelModesUrl&&this.travelModesUrl.set("value",this.config.travelModesUrl),this.config.routeTaskUrl||this.placeholder.get("value")||this.placeholder.set("value",this.nls.searchPlaceholder),
this.config.trafficLayerUrl&&this.trafficLayerUrl.set("value",this.config.trafficLayerUrl),this.config.barrierLayers&&this.barrierLayers.setValue(this.config.barrierLayers)},_getRouteTaskUrl:function(){var b=new x;this.config.routeTaskUrl?b.resolve(this.config.routeTaskUrl):this.portal.loadSelfInfo().then(k.hitch(this,function(f){(f=this._getRouteUrlFromPortalSelf(f))?b.resolve(f):b.resolve(this._routeTaskUrl)}),k.hitch(this,function(f){console.error(f);b.resolve(this._routeTaskUrl)}));return b},
_suffixWithSlant:function(b,e){return b=this._endsWith(b,"/")?b+e:b+("/"+e)},_endsWith:function(b,e){return-1!==b.indexOf(e,b.length-e.length)},_getRouteUrlFromPortalSelf:function(b){var f="";b&&b.helperServices&&(b=b.helperServices.route)&&b.url&&(f=b.url);return f},_getLocatorUrl:function(){var b=new x,e=this.config.geocoderOptions&&this.config.geocoderOptions.geocoders&&this.config.geocoderOptions.geocoders[0];(e=e&&e.url)?b.resolve(e):this.portal.loadSelfInfo().then(k.hitch(this,function(f){(f=
this._getLocatorUrlFromPortalSelf(f))?b.resolve(f):b.resolve(this._locatorUrl)}),k.hitch(this,function(f){console.error(f);b.resolve(this._locatorUrl)}));return b},_getLocatorUrlFromPortalSelf:function(b){if(b&&b.helperServices){b=b.helperServices.geocode;for(var f=0,e=b.length;f<e;f++){var g=b[f];this.locatorUrl.store.put({id:f,name:g.url,value:g.url})}}return""},_getTravelModesUrlFromPortalSelf:function(b){var f="";b&&b.helperServices&&(b=b.helperServices.routingUtilities)&&b.url&&(f=b.url);return f},
_getTrafficLayerUrlFromPortalSelf:function(b){var f="";b&&b.helperServices&&(b=b.helperServices.traffic)&&b.url&&(f=b.url);return f},getConfig:function(){return"valid"!==this.routeUrl.getStatus()?(this._showValidationErrorTip(this.routeUrl),this._showParametersTip(),!1):"valid"!==this.locatorUrl.getStatus()?(this._showValidationErrorTip(this.locatorUrl),this._showParametersTip(),!1):this.travelModesUrl.get("value")&&"valid"!==this.travelModesUrl.getStatus()?(this._showValidationErrorTip(this.travelModesUrl),
this._showParametersTip(),!1):this.trafficLayerUrl.get("value")&&"valid"!==this.trafficLayerUrl.getStatus()?(this._showValidationErrorTip(this.trafficLayerUrl),this._showParametersTip(),!1):this.searchDelay.validate()?this.maximumSuggestions.validate()?this.minCharacters.validate()?this.directionsLanguage.validate()?this.barrierLayers.validate()?this.presetDestinations&&!1===this.presetDestinations.validate()?!1:this.config={routeTaskUrl:this._getHandledUrlFromServiceUrlInput(this.routeUrl),travelModesUrl:this._getHandledUrlFromServiceUrlInput(this.travelModesUrl),
trafficLayerUrl:this._getHandledUrlFromServiceUrlInput(this.trafficLayerUrl),routeOptions:{directionsLanguage:this.directionsLanguage.get("value"),directionsLengthUnits:this.directionsLengthUnits.get("value"),impedanceAttribute:this.impedanceAttribute.get("value")},geocoderOptions:{autoComplete:this.autoComplete.getValue(),maxLocations:this.maximumSuggestions.get("value"),minCharacters:this.minCharacters.get("value"),searchDelay:this.searchDelay.get("value"),arcgisGeocoder:!1,geocoders:[{url:this._getHandledUrlFromServiceUrlInput(this.locatorUrl),
placeholder:this.placeholder.get("value")}]},defaultLocations:this.presetDestinations.getValue(),barrierLayers:this.barrierLayers.getValue()}:(this._showValidationErrorTip(this.barrierLayers),this._showParametersTip(),!1):(this._showValidationErrorTip(this.directionsLanguage),this._showParametersTip(),!1):(this._showValidationErrorTip(this.minCharacters),this._showParametersTip(),!1):(this._showValidationErrorTip(this.maximumSuggestions),this._showParametersTip(),!1):(this._showValidationErrorTip(this.searchDelay),
this._showParametersTip(),!1)},_showValidationErrorTip:function(b){!b.validate()&&b.domNode&&b.focusNode&&(b.focusNode.focus(),setTimeout(k.hitch(this,function(){b.focusNode.blur()}),100))},_showParametersTip:function(){new e({message:this.nls.parametersTip})},_setRouteUrl:function(b){if(b&&b.data&&b.data.routeLayers){for(var f=this.routeUrl.getValue(),e=!1,g=0,k=b.data.routeLayers.length;g<k;g++){var m=b.data.routeLayers[g],n={id:m,name:this._suffixWithSlant(f,m),value:this._suffixWithSlant(f,m)};
m===this._ROUTE_WORLD&&(e=!0);this.routeUrl.store.put(n)}e&&this.routeUrl.setValue(this._suffixWithSlant(f,this._ROUTE_WORLD))}},_setPresetDestinationsSources:function(){this.own(g(this.locatorUrl,"Fetch",k.hitch(this,function(b){if(b&&b.url){var e="";b.data&&b.data.singleLineAddressField&&b.data.singleLineAddressField.name&&(e=b.data.singleLineAddressField.name);this.presetDestinations.setSources({url:b.url,singleLineFieldName:e})}})))}})});