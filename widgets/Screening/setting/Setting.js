// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Screening/setting/SymbolChooserPopup":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/_base/lang dojo/dom-class dojo/dom-construct dojo/on dojo/text!./SymbolChooserPopup.html jimu/dijit/SymbolChooser jimu/dijit/Popup dojo/domReady!".split(" "),function(g,h,m,l,e,c,d,a,f,n){return g([h,m],{templateString:a,baseClass:"jimu-widget-screening-setting",postCreate:function(){this.own(d(this.okButton,"click",l.hitch(this,this._onOKButtonClicked)));
this._initSymbolChooser();this._createSymbolChooserPopup()},_initSymbolChooser:function(){this.symbolChooser=new f(this.symbolParams,c.create("div",{},this.symbolData));this.symbolChooser.startup()},_createSymbolChooserPopup:function(){this.popup=new n({titleLabel:this.symbolChooserTitle,width:420,height:400,content:this.domNode})},_onOKButtonClicked:function(){if(!e.contains(this.okButton,"jimu-state-disabled"))this.onOkClick()},onOkClick:function(a){return a}})})},"widgets/Screening/setting/DownloadSettings":function(){define("dojo/_base/declare dijit/_WidgetsInTemplateMixin dojo/text!./DownloadSettings.html dojo/dom-class dojo/_base/lang dojo/on dojo/query dojo/dom-attr dojo/_base/html dojo/dom-construct dojo/string dojo/_base/Color jimu/BaseWidgetSetting jimu/dijit/CheckBox jimu/dijit/SimpleTable jimu/dijit/GpSource jimu/dijit/Popup jimu/dijit/Message jimu/dijit/ImageChooser jimu/portalUtils jimu/dijit/ColorPicker esri/request dojo/query dijit/form/Select dijit/form/ValidationTextBox dojo/_base/array jimu/dijit/PageUtils jimu/utils dojo/DeferredList dijit/form/RadioButton".split(" "),
function(g,h,m,l,e,c,d,a,f,n,p,k,u,w,r,t,v,q,x,z,b,C,A,D,H,y,G,E,I){return g([u,h],{templateString:m,baseClass:"jimu-widget-screening-download-settings",map:null,loadingIndicator:null,downloadOptions:null,_layerIndex:0,_layers:[],_extractDataTaskDownloadOptions:[],_extractDataTaskURL:"",_printTaskURL:"",_logo:"",_tableHeaderColor:null,_defaultOptions:{"A3 Portrait":{Orientation:"Portrait",SizeName:"A3"},"A3 Landscape":{Orientation:"Landscape",SizeName:"A3"},"A4 Portrait":{Orientation:"Portrait",SizeName:"A4"},
"A4 Landscape":{Orientation:"Landscape",SizeName:"A4"},"Letter ANSI A Portrait":{Orientation:"Portrait",SizeName:"Letter_ANSI_A"},"Letter ANSI A Landscape":{Orientation:"Landscape",SizeName:"Letter_ANSI_A"},"Tabloid ANSI B Portrait":{Orientation:"Portrait",SizeName:"Tabloid_ANSI_B"},"Tabloid ANSI B Landscape":{Orientation:"Landscape",SizeName:"Tabloid_ANSI_B"}},_pageSize:[],_customLayoutTable:null,_buddyTaskChoiceList:{},_customDropdownOption:[],_defaultPrintTemplateDropdownOption:[],_printServiceChoiceList:[],
_defaultPrintTemplateDropdownOptionObj:null,_clonedConfigurationCustomOptions:null,_buddyTaskEndPoint:["Get Layout Templates Info","Get Layout Templates Info Task"],_lastSelectedCustomDropdownRow:null,_isCustomOptionNoDefault:!1,constructor:function(b){this.downloadOptions=this.loadingIndicator=this.map=null;this._layerIndex=0;this._layers=[];this._extractDataTaskDownloadOptions=[];this._logo=this._printTaskURL=this._extractDataTaskURL="";this._customLayoutTable=this._tableHeaderColor=null;this._buddyTaskChoiceList=
{};this._customDropdownOption=[];this._defaultPrintTemplateDropdownOption=[];this._printServiceChoiceList=[];this._lastSelectedCustomDropdownRow=this._clonedConfigurationCustomOptions=this._defaultPrintTemplateDropdownOptionObj=null;e.mixin(this,b)},postCreate:function(){this._pageSize=[{value:null,label:null},{value:"MILLIMETER",label:this.nls.downloadTab.pageSizeUnits.millimeters},{value:"INCH",label:this.nls.units.inches},{value:"POINT",label:this.nls.downloadTab.pageSizeUnits.points},{value:"CENTIMETER",
label:this.nls.units.centimeters}];var b,a,f,d,q;this._initSyncEnableOptionTable();this._syncEnableOptionTable&&(this._layers=[],this._syncEnableOptionTable.clear());if(this.downloadOptions&&this.downloadOptions.layers){this._layers=this.downloadOptions.layers;var k=[];y.forEach(this.downloadOptions.layers,e.hitch(this,function(b){b=C({url:b.url+"?f\x3dpjson"});k.push(b)}));(new I(k)).then(e.hitch(this,function(b){y.forEach(b,e.hitch(this,function(b,a){b[0]?(b={version:b[1].currentVersion,capabilities:b[1].capabilities},
this.downloadOptions.layers[a]&&this._setFileOptionDataInTable(this.downloadOptions.layers[a],b)):b[1].name&&"Error"===b[1].name||(b={version:this.layerInfosObj.getLayerInfoById(this.downloadOptions.layers[a].id).layerObject.version,capabilities:""},this._setFileOptionDataInTable(this.downloadOptions.layers[a],b))}))}))}this.downloadOptions&&this.downloadOptions.type?this._chooseDownloadOption(this.downloadOptions.type,!0):this.syncEnableRadioButton.set("checked",!0);this._attachDownloadOptionEvent();
this.reportSettings&&this.reportSettings.printTaskURL&&""!==this.reportSettings.printTaskURL?(this.printGPServiceTextBox.set("value",this.reportSettings.printTaskURL),this._printTaskURL=this.reportSettings.printTaskURL):(q=z.getPortal(this.appConfig.portalUrl).helperServices)&&q.printTask.url&&(this.printGPServiceTextBox.set("value",q.printTask.url),this._printTaskURL=q.printTask.url);this.reportSettings&&this.reportSettings.footnote&&""!==this.reportSettings.footnote&&(this.footnoteTextArea.value=
this.reportSettings.footnote);b={portalUrl:this.appConfig.portalUrl};this.own(c(this.extractDataTaskSetButton,"click",e.hitch(this,function(){a=new t(b);d=this._onSetButtonClick(a);this._attachExtractDataTaskGPSourceEvents(a,d)})));this.own(c(this.printGPServiceSetButton,"click",e.hitch(this,function(){f=new t(b);d=this._onSetButtonClick(f);this._attachPrintReportGPSourceEvents(f,d)})));this._initImageChooser();this._tableHeaderColor=this._createColorPicker(this.reportSettings.columnTitleColor,this.columnTitleColorPickerNode);
this.reportSettings.hasOwnProperty("noDataConfiguredText")&&this.noDataTextRepresentationTextBox.set("value",this.reportSettings.noDataConfiguredText);this.reportSettings.hasOwnProperty("naTextConfiguredValue")&&this.naTextRepresentationTextBox.set("value",this.reportSettings.naTextConfiguredValue);this.reportTitleTextBox.set("value",this.reportSettings.reportTitle);this.own(c(this.addCustomOptionButton,"click",e.hitch(this,function(){l.contains(this.addCustomOptionButton,"esriCTCustomOptionButtonDisable")||
(this._isCustomOptionNoDefault&&this._emptyDefaultDropDown(),this._addCustomOptionsInTable())})));this._clonedConfigurationCustomOptions=e.clone(this.reportSettings);this._destroyLayouts();this.loadingIndicator.show();this._fetchChoiceList()},_attachExtractDataTaskGPSourceEvents:function(b,a){this.own(c(b,"ok",e.hitch(this,function(b){b&&0<b.length&&b[0].url&&this._requestExtractDataTaskURLInfo(b[0].url,a)})));this.own(c(b,"cancel",e.hitch(this,function(){a.close()})))},getExtractDataTaskURL:function(){return this._extractDataTaskURL?
this._extractDataTaskURL:""},_attachPrintReportGPSourceEvents:function(b,a){this.own(c(b,"ok",e.hitch(this,function(b){b&&0<b.length&&b[0].url?(this.printGPServiceTextBox.set("value",b[0].url),this._printTaskURL=b[0].url,this._clonedConfigurationCustomOptions=null,this._destroyLayouts(),this.loadingIndicator.show(),this._fetchChoiceList()):(this.printGPServiceTextBox.set("value",""),this._printTaskURL="");a.close()})));this.own(c(b,"cancel",e.hitch(this,function(){a.close()})))},_destroyLayouts:function(){n.empty(this.defaultLayoutTable);
n.empty(this.customLayoutTable);n.empty(this.defaultPrintTemplateDropdown);this._customLayoutTable=null;this._buddyTaskChoiceList={};this._customDropdownOption=[];this._printServiceChoiceList=[];this._defaultPrintTemplateDropdownOption=[];this._customLayoutTable&&n.destroy(this._customLayoutTable);this._defaultPrintTemplateDropdownOptionObj&&n.destroy(this._defaultPrintTemplateDropdownOptionObj.domNode);this._isCustomOptionNoDefault=!1},_initSyncEnableOptionTable:function(){this._syncEnableOptionTable=
new r({fields:[{name:this.nls.downloadTab.syncEnableTableHeaderTitle.layerNameLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.layerNameLabel,type:"empty",width:"40%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.csvFileFormatLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.csvFileFormatLabel,"class":"esriCTTableHeader",type:"empty",width:"15%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.fileGDBFormatLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.fileGDBFormatLabel,
"class":"esriCTTableHeader",type:"empty",width:"15%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.ShapefileFormatLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.ShapefileFormatLabel,type:"empty","class":"esriCTTableHeader",width:"15%"},{name:this.nls.downloadTab.syncEnableTableHeaderTitle.allowDownloadLabel,title:this.nls.downloadTab.syncEnableTableHeaderTitle.allowDownloadLabel,"class":"esriCTTableHeader",type:"empty",width:"15%"}],selectable:!1});this._syncEnableOptionTable.placeAt(this.downloadOptionTable);
this._syncEnableOptionTable.startup()},_setFileOptionDataInTable:function(b,a){var c;c=this._syncEnableOptionTable.addRow({});c.success&&c.tr&&this.checkLayerForDownloadOptions({url:b.url,id:b.id,layerName:b.layerName,allowDownload:b.allowDownload,layerVersion:a.version,capabilities:a.capabilities},c.tr.rowIndex)},checkLayerForDownloadOptions:function(b,a){var c,d;d=this._getTableRow(a);d.success&&d.tr&&(c={url:b.url,layerName:b.layerName,id:b.id,allowDownload:b.hasOwnProperty("allowDownload")?b.allowDownload:
!0},this._addLayerTitle(d.tr,b.layerName),this._addFileOption(d.tr,1),c.downloadingFileOption=[],c.downloadingFileOption.push("csv"),1<b.capabilities.split("Sync").length&&10.4<=b.layerVersion&&(this._addFileOption(d.tr,2),c.downloadingFileOption.push("filegdb"),E.isHostedService(b.url)&&(this._addFileOption(d.tr,3),c.downloadingFileOption.push("shapefile"))),this._addAllowDownloadCheckbox(d.tr,c),this._setLayerDownloadInfo(c,a),this.loadingIndicator.hide())},_getTableRow:function(b){-1<b&&this._syncEnableOptionTable.tbody.rows[b]?
(b={tr:this._syncEnableOptionTable.tbody.rows[b],success:!0},this._removeFileOptions(b.tr)):b=this._syncEnableOptionTable.addRow({});return b},_setLayerDownloadInfo:function(b,a){-1<a?this._layers.splice(a,1,b):this._layers.push(b)},_addLayerTitle:function(b,a){if(b=d(".simple-table-cell",b)[0])b.innerHTML=a},_removeFileOptions:function(b){var a;b=d(".simple-table-cell",b);for(a=1;4>a;a++)l.remove(b[a],"esriCTAvailableDownloadOption")},_addFileOption:function(b,a){(b=d(".simple-table-cell",b)[a])&&
l.add(b,"esriCTAvailableDownloadOption")},_addAllowDownloadCheckbox:function(b,f){var q;if(b=d(".simple-table-cell",b)[4])n.empty(b),q=new w({checked:f.allowDownload,"class":"esriCTAllowDownloadCheckbox"}),q.placeAt(b),this.own(c(q,"change",e.hitch(this,function(){f.allowDownload=a.get(q,"checked")})))},_attachDownloadOptionEvent:function(){var b,a;a=d("input[type\x3dradio]:checked",this.downloadOptionForm)[0].value;b=d("input",this.downloadOptionForm);y.forEach(b,e.hitch(this,function(b){this.own(c(b,
"click",e.hitch(this,function(c){b.value!==a&&(this._chooseDownloadOption(c.currentTarget.value,!1),a=c.currentTarget.value)})))}))},_chooseDownloadOption:function(b,a){switch(b){case "syncEnable":this.syncEnableRadioButton.set("checked",!0);l.remove(this.downloadOptionTable,"esriCTHidden");l.add(this.extractDataTaskInputContainer,"esriCTHidden");a&&this._resetExtractDataTaskOption(!0);break;case "extractDataTask":this.gpServiceRadioButton.set("checked",!0);l.add(this.downloadOptionTable,"esriCTHidden");
l.remove(this.extractDataTaskInputContainer,"esriCTHidden");a&&this.downloadOptions&&this.downloadOptions.extractDataTaskURL&&this._resetExtractDataTaskOption(!1);break;case "cannotDownload":this.cannotDownloadRadioButton.set("checked",!0),l.add(this.downloadOptionTable,"esriCTHidden"),l.add(this.extractDataTaskInputContainer,"esriCTHidden"),a&&this._resetExtractDataTaskOption(!0)}},getLayers:function(){return this._layers},deleteRow:function(b){this._syncEnableOptionTable.deleteRow(this._syncEnableOptionTable.tbody.rows[b]);
this._layers.splice(b,1)},rowUp:function(b){var a,c;-1<b&&this._syncEnableOptionTable.tbody.rows[b+1]&&(f.place(this._syncEnableOptionTable.tbody.rows[b],this._syncEnableOptionTable.tbody.rows[b+1],"after"),this._syncEnableOptionTable.updateUI(),a=this._layers[b],c=this._layers[b+1],this._layers.splice(b,2,c,a))},rowDown:function(b){var a,c;b<this._syncEnableOptionTable.tbody.rows.length&&this._syncEnableOptionTable.tbody.rows[b-1]&&(f.place(this._syncEnableOptionTable.tbody.rows[b],this._syncEnableOptionTable.tbody.rows[b-
1],"before"),this._syncEnableOptionTable.updateUI(),a=this._layers[b],c=this._layers[b-1],this._layers.splice(b-1,2,a,c))},_onSetButtonClick:function(b){return new v({titleLabel:this.nls.downloadTab.setGPTaskTitle,width:830,height:560,content:b})},_requestExtractDataTaskURLInfo:function(b,a){var c;c=!1;this.loadingIndicator.show();C({url:b+"?f\x3dpjson"}).then(e.hitch(this,function(d){(c=this._validateExtractDataTask(d))?(this.extractDataTaskTextBox.set("value",b),this._extractDataTaskURL=b):(this._showMessage(this.nls.downloadTab.errorMessages.invalidGPTaskURL),
this.extractDataTaskTextBox.set("value",""),this._extractDataTaskURL="");a.close();this.loadingIndicator.hide()}),e.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.invalidGPTaskURL);this.extractDataTaskTextBox.set("value","");this._extractDataTaskURL="";this.loadingIndicator.hide();a.close()}))},_validateExtractDataTask:function(b){var a,c,d;a=c=d=!1;return b&&"esriExecutionTypeAsynchronous"===b.executionType&&(y.forEach(b.parameters,e.hitch(this,function(b){switch(b.name){case "Area_of_Interest":a=
this._checkAOIParam(b);break;case "Feature_Format":c=this._checkFeatureFormatParam(b);break;case "Output_Zip_File":d=this._checkOutputParam(b)}})),a&&c&&d)?!0:!1},_checkAOIParam:function(b){return"GPFeatureRecordSetLayer"===b.dataType?b.defaultValue&&"esriGeometryPolygon"!==b.defaultValue.geometryType?!1:!0:!1},_checkFeatureFormatParam:function(b){var a;a=!1;this._extractDataTaskDownloadOptions=[];return"GPString"===b.dataType&&b.choiceList&&0<b.choiceList.length?(this._extractDataTaskDownloadOptions.push("csv"),
-1<b.choiceList.indexOf("File Geodatabase - GDB - .gdb")&&(this._extractDataTaskDownloadOptions.push("filegdb"),a=!0),-1<b.choiceList.indexOf("Shapefile - SHP - .shp")&&(this._extractDataTaskDownloadOptions.push("shapefile"),a=!0),a):!1},_checkOutputParam:function(b){return"GPDataFile"===b.dataType?!0:!1},_showMessage:function(b){(new q({message:b})).message=b},getDownloadingFileOptions:function(){var b,a;a=[];b=d("input[type\x3dradio]:checked",this.downloadOptionForm)[0].value;"syncEnable"===b?a=
this._getSyncEnableDownloadingOptions(this._layers):"extractDataTask"===b&&(a=this._extractDataTaskDownloadOptions);return a},_getSyncEnableDownloadingOptions:function(b){var a;a=[];y.some(b,e.hitch(this,function(b){b.allowDownload&&y.some(b.downloadingFileOption,e.hitch(this,function(b){-1===a.indexOf(b)&&a.push(b)}))}));return a},getPrintReportGPServiceURL:function(){return this._printTaskURL?this._printTaskURL:""},getReportTitle:function(){return this.reportTitleTextBox.value},getNoDataText:function(){return this.noDataTextRepresentationTextBox.value},
getNaTextValue:function(){return this.naTextRepresentationTextBox.value},getTableHeaderColor:function(){var b=this._tableHeaderColor.color.toHex();return b?b:""},getFootnoteForReport:function(){return this.footnoteTextArea.value?this.footnoteTextArea.value:""},_initImageChooser:function(){this.logoChooser=new x({cropImage:!1,showSelfImg:!1,goldenWidth:50,goldenHeight:50,displayImg:this.imageChooserPreview,format:[x.GIF,x.PNG,x.JPEG]});this.logoChooser.placeAt(this.logoChooserNode);this._createLogoPreview();
l.add(this.logoChooser.domNode,"esriCTImageChooserContent")},_createLogoPreview:function(){var b,c;b=this.folderUrl+"/images/default-logo.png";this.reportSettings&&this.reportSettings.logo&&(c=this.reportSettings.logo,-1<c.indexOf("${appPath}")?(b=this.folderUrl.slice(0,this.folderUrl.lastIndexOf("widgets")),b=p.substitute(c,{appPath:b})):b=c);a.set(this.imageChooserPreview,"src",b)},getLogo:function(){return this.logoChooser&&this.logoChooser.imageData?this.logoChooser.getImageData():this.reportSettings&&
this.reportSettings.logo?this.reportSettings.logo:"${appPath}/widgets/Screening/images/default-logo.png"},_resetExtractDataTaskOption:function(b){b?(this.extractDataTaskTextBox.set("value",""),this._extractDataTaskURL="",this._extractDataTaskDownloadOptions=[]):(this.extractDataTaskTextBox.set("value",this.downloadOptions.extractDataTaskURL),this._extractDataTaskURL=this.downloadOptions.extractDataTaskURL,this._extractDataTaskDownloadOptions=this.downloadOptions.downloadingFileOptions)},_createColorPicker:function(a,
c){c=n.create("table",{cellspacing:"0",cellpadding:"0"},c);c=n.create("tr",{style:"height:30px"},c);n.create("td",{},c);c=n.create("td",{},c);c=n.create("div",{"class":"esriCTColorChooserNode"},c);c=new b(null,n.create("div",{},c));c.setColor(new k(a));return c},_addFieldsRow:function(b,a){var c,d,f,q,t,e,z,B;c=this._customLayoutTable.addRow({});c.success&&c.tr&&(c=c.tr,d=A(".simple-table-cell",c),q=d[0],t=d[1],e=d[2],z=d[3],d=b.Width,f=b.Height,B=null!==d&&""!==d&&void 0!==d||null!==f&&""!==f&&void 0!==
f?b.PageUnits?b.PageUnits:null:null,this._displayLayout(q,c,b.SizeName),this._displayWidth(t,c,d,a),this._displayHeight(e,c,f,a),this._displayPageUnits(z,B,c))},_emptyDefaultDropDown:function(){for(var b in this._defaultOptions)this._defaultOptions.hasOwnProperty(b)&&G.PageSizes[this._defaultOptions[b].SizeName]&&this._defaultPrintTemplateDropdownOptionObj.removeOption({label:b,value:b})},_addOptionsInDefaultDropdown:function(){for(var b in this._defaultOptions)this._defaultOptions.hasOwnProperty(b)&&
G.PageSizes[this._defaultOptions[b].SizeName]&&this._defaultPrintTemplateDropdownOptionObj.addOption({label:b,value:b});this._defaultPrintTemplateDropdownOptionObj.set("value","Letter ANSI A Portrait")},_removeCustomOptionFromDefaultDropdown:function(){y.forEach(this._customDropdownOption,e.hitch(this,function(b){this._defaultPrintTemplateDropdownOptionObj.removeOption({label:b.value,value:b.value})}));this._defaultPrintTemplateDropdownOption=[];y.forEach(this._defaultPrintTemplateDropdownOptionObj.options,
e.hitch(this,function(b){this._defaultPrintTemplateDropdownOption.push({label:b.value,value:b.value})}))},_addConfiguredCustomOptionInDefaultDropdown:function(){var b;this._customLayoutTable&&(b=this._customLayoutTable.getRows(),y.forEach(b,e.hitch(this,function(b){var a=!1;E.has("ie")||E.has("edge")?y.forEach(this._defaultPrintTemplateDropdownOptionObj.options,e.hitch(this,function(c){c.value===b.customOptionLayoutDropdownObj.value&&(a=!0)})):a=this._defaultPrintTemplateDropdownOptionObj.options.find(function(a){return a.value===
b.customOptionLayoutDropdownObj.value});a||this._defaultPrintTemplateDropdownOptionObj.addOption({label:b.customOptionLayoutDropdownObj.value,value:b.customOptionLayoutDropdownObj.value})})))},_displayLayout:function(b,a,d){d=new D({"class":"esriCTFieldChooserDropdown",options:e.clone(this._customDropdownOption),value:d});d.placeAt(b);this.own(c(d,"MouseEnter",e.hitch(this,function(b){this._lastSelectedCustomDropdownRow=b.currentTarget.parentNode.parentNode})));this.own(c(d,"click",e.hitch(this,function(b){this._lastSelectedCustomDropdownRow=
b.currentTarget.parentNode.parentNode})));this.own(c(d,"change",e.hitch(this,function(b){this._buddyTaskChoiceList[b]?this._lastSelectedCustomDropdownRow&&(this._lastSelectedCustomDropdownRow.customOptionHeightTextbox.set("value",this._buddyTaskChoiceList[b].pageSize[1]),this._lastSelectedCustomDropdownRow.customOptionWidthTextbox.set("value",this._buddyTaskChoiceList[b].pageSize[0]),this._buddyTaskChoiceList[b].pageUnits?this._lastSelectedCustomDropdownRow.customOptionPageUnitsDropdownObj.set("value",
this._buddyTaskChoiceList[b].pageUnits):this._lastSelectedCustomDropdownRow.customOptionPageUnitsDropdownObj.set("value","")):(this._lastSelectedCustomDropdownRow.customOptionHeightTextbox.set("value",""),this._lastSelectedCustomDropdownRow.customOptionWidthTextbox.set("value",""),this._lastSelectedCustomDropdownRow.customOptionPageUnitsDropdownObj.set("value",""));this._removeCustomOptionFromDefaultDropdown();this._addConfiguredCustomOptionInDefaultDropdown()})));d.startup();a.customOptionLayoutDropdownObj=
d},_displayWidth:function(b,a,c,d){d||isNaN(parseFloat(c))||(c=parseFloat(c));c=new H({"class":"esriCTFieldValidationTextBox",regExp:"^\\d+(\\.\\d+)?$",invalidMessage:this.nls.downloadTab.errorMessages.invalidWidth,value:c,required:!0});c.placeAt(b);c.startup();a.customOptionWidthTextbox=c},_displayHeight:function(b,a,c,d){d||isNaN(parseFloat(c))||(c=parseFloat(c));c=new H({"class":"esriCTFieldValidationTextBox",regExp:"^\\d+(\\.\\d+)?$",invalidMessage:this.nls.downloadTab.errorMessages.invalidHeight,
value:c,required:!0});c.placeAt(b);c.startup();a.customOptionHeightTextbox=c},_displayPageUnits:function(b,a,c){a=new D({"class":"esriCTFieldChooserDropdown",options:e.clone(this._pageSize),required:!0,value:a});a.placeAt(b);a.startup();c.customOptionPageUnitsDropdownObj=a},_getDistinctFieldsOptionsObj:function(b){var a=[];y.forEach(b,e.hitch(this,function(b){a.push({label:this._entireFieldObj[b].alias||this._entireFieldObj[b].name,value:b})}));return a},_addDefaultPrintTemplateOptions:function(){this._defaultPrintTemplateDropdownOptionObj=
new D({"class":"esriCTFieldChooserDropdown",options:this._defaultPrintTemplateDropdownOption});this._defaultPrintTemplateDropdownOptionObj.placeAt(this.defaultPrintTemplateDropdown);this._defaultPrintTemplateDropdownOptionObj.startup();this._clonedConfigurationCustomOptions&&""!==this._clonedConfigurationCustomOptions.defaultPrintOption&&null!==this._clonedConfigurationCustomOptions.defaultPrintOption&&void 0!==this._clonedConfigurationCustomOptions.defaultPrintOption?this._defaultPrintTemplateDropdownOptionObj.set("value",
this._clonedConfigurationCustomOptions.defaultPrintOption):this._defaultPrintTemplateDropdownOptionObj.set("value","Letter ANSI A Portrait")},_disableAddCustomLayoutButton:function(){l.add(this.addCustomOptionButton,"esriCTCustomOptionButtonDisable");l.add(this.addCustomOptionButtonIcon,"esriCTCustomOptionBtnAddIconDisable")},_enableAddCustomLayoutButton:function(){l.remove(this.addCustomOptionButton,"esriCTCustomOptionButtonDisable");l.remove(this.addCustomOptionButtonIcon,"esriCTCustomOptionBtnAddIconDisable")},
_fetchChoiceList:function(){this.loadingIndicator.show();C({url:this._printTaskURL,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(e.hitch(this,function(b){this._extractChoiceList(b);this._createCustomOptionDropdownList();0<this._customDropdownOption.length?this._checkBuddyTask(b):(this._disableAddCustomLayoutButton(),this._addDefaultPrintTemplateOptions(),this.loadingIndicator.hide())}),e.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.failtofetchChoiceList);
this.loadingIndicator.hide()}))},_extractChoiceList:function(b){y.forEach(b.parameters,e.hitch(this,function(b){"Layout_Template"===b.name&&"Layout Template"===b.displayName&&(this._printServiceChoiceList=b.choiceList)}))},_checkBuddyTask:function(){C({url:this._printTaskURL.slice(0,this._printTaskURL.lastIndexOf("/")),content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(e.hitch(this,function(b){if(1<b.tasks.length){for(var a,c=0;c<b.tasks.length;c++)if(-1!==this._buddyTaskEndPoint.indexOf(b.tasks[c])){a=
b.tasks[c];break}a?this._executeBuddyTaskSync(a):(0<this._customDropdownOption.length?(this._enableAddCustomLayoutButton(),this._displayChoiceList()):this._disableAddCustomLayoutButton(),this.loadingIndicator.hide())}else 0<this._customDropdownOption.length?(this._enableAddCustomLayoutButton(),this._displayChoiceList()):(this._disableAddCustomLayoutButton(),this._addDefaultPrintTemplateOptions()),this.loadingIndicator.hide()}),e.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.failtofetchbuddyTaskName);
this.loadingIndicator.hide()}))},_executeBuddyTaskSync:function(b){C({url:this._printTaskURL.slice(0,this._printTaskURL.lastIndexOf("/"))+"/"+b+"/execute",content:{f:"json",outSR:102100},handleAs:"json",callbackParamName:"callback"}).then(e.hitch(this,function(b){0<b.results[0].value.length?(this._enableAddCustomLayoutButton(),y.forEach(b.results[0].value,e.hitch(this,function(b){this._buddyTaskChoiceList[b.layoutTemplate]=b})),this._displayChoiceList()):this._disableAddCustomLayoutButton();this.loadingIndicator.hide()}),
e.hitch(this,function(){this._showMessage(this.nls.downloadTab.errorMessages.failtofetchbuddyTaskDimension);this.loadingIndicator.hide()}))},_displayChoiceList:function(){this._createCustomLayoutTable();this._clonedConfigurationCustomOptions&&this._clonedConfigurationCustomOptions.customOptions&&0<this._clonedConfigurationCustomOptions.customOptions.length&&this._addConfiguredCustomOptionsInTable();this._addDefaultPrintTemplateOptions()},_createCustomLayoutTable:function(){this._customLayoutTable=
new r({fields:[{name:"field",title:"Layout",type:"empty",editable:"false",width:"40%"},{name:"field",title:"Width",type:"empty",editable:"true",width:"15%"},{name:"field",title:"Height",type:"empty",editable:"true",width:"15%"},{name:"field",title:"Page Units",type:"empty",editable:"false",width:"20%"},{name:"actions",title:this.nls.common.actions,"class":"actions",type:"actions",actions:["up","down","delete"],width:"10%"}]});this._customLayoutTable.placeAt(this.customLayoutTable);f.setStyle(this._customLayoutTable.domNode,
{height:"100%"});this._customLayoutTable.startup();this.own(c(this._customLayoutTable,"row-delete",e.hitch(this,function(){this._removeCustomOptionFromDefaultDropdown();0===this._customLayoutTable.getRows().length&&this._isCustomOptionNoDefault&&this._addOptionsInDefaultDropdown();this._addConfiguredCustomOptionInDefaultDropdown()})))},_addConfiguredCustomOptionsInTable:function(){y.forEach(this._clonedConfigurationCustomOptions.customOptions,e.hitch(this,function(b){this._addFieldsRow(b,!0)}))},
_addCustomOptionsInTable:function(){var b=this._customDropdownOption[0].value,a,c,d,f;d=c=null;f=this._pageSize[0].value;this._buddyTaskChoiceList[b]&&(c=this._buddyTaskChoiceList[b].pageSize[1],d=this._buddyTaskChoiceList[b].pageSize[0],this._buddyTaskChoiceList[b]&&this._buddyTaskChoiceList[b].pageUnits&&(f=this._buddyTaskChoiceList[b].pageUnits));var q={};q[b]={Height:c,Width:d,SizeName:b,MapLayout:b,PageUnits:f};this._addFieldsRow(q[b],!1);E.has("ie")||E.has("edge")?y.forEach(this._defaultPrintTemplateDropdownOptionObj.options,
e.hitch(this,function(c){c.value===b&&(a=c)})):a=this._defaultPrintTemplateDropdownOptionObj.options.find(function(a){return a.value===b});a||this._defaultPrintTemplateDropdownOptionObj.addOption({label:b,value:b,selected:!1})},_createCustomOptionDropdownList:function(){var b;b=!1;y.forEach(this._printServiceChoiceList,e.hitch(this,function(a){var c=e.clone(a);if("MAP_ONLY"!==c){if(this._defaultOptions[c]){b=!0;var d=this._defaultOptions[c];this._defaultPrintTemplateDropdownOption.push({label:G.PageSizes[d.SizeName].SizeName+
" "+G.Orientation[d.Orientation].Text,value:a})}this._defaultOptions[c]||this._customDropdownOption.push({value:c,label:c})}}));this._clonedConfigurationCustomOptions&&y.forEach(this._clonedConfigurationCustomOptions.customOptions,e.hitch(this,function(b){this._defaultPrintTemplateDropdownOption.push({label:b.SizeName,value:b.SizeName})}));if(!(b||(0<this._customDropdownOption.length&&(this._isCustomOptionNoDefault=!0),this._clonedConfigurationCustomOptions&&this._clonedConfigurationCustomOptions.customOptions&&
0<this._clonedConfigurationCustomOptions.customOptions.length)))for(var a in this._defaultOptions)this._defaultOptions.hasOwnProperty(a)&&G.PageSizes[this._defaultOptions[a].SizeName]&&this._defaultPrintTemplateDropdownOption.push({label:a,value:a})},getCustomOptions:function(){var b;b=[];if(this._customLayoutTable){var a=this._customLayoutTable.getRows();y.forEach(a,e.hitch(this,function(a){b.push({SizeName:a.customOptionLayoutDropdownObj.value,Width:a.customOptionWidthTextbox.getValue(),Height:a.customOptionHeightTextbox.getValue(),
MapLayout:a.customOptionLayoutDropdownObj.value,PageUnits:a.customOptionPageUnitsDropdownObj.value})}))}return b},validateCustomOptions:function(){var b,a;b=[];this._customLayoutTable&&(a=this._customLayoutTable.getRows(),y.forEach(a,e.hitch(this,function(a){a.customOptionWidthTextbox.isValid()||b.push(p.substitute(this.nls.downloadTab.errorMessages.invalidLayoutWidth,{customLayoutOptionValue:a.customOptionLayoutDropdownObj.value}));a.customOptionHeightTextbox.isValid()||b.push(p.substitute(this.nls.downloadTab.errorMessages.invalidLayoutHeight,
{customLayoutOptionValue:a.customOptionLayoutDropdownObj.value}));a.customOptionPageUnitsDropdownObj.isValid()||b.push(p.substitute(this.nls.downloadTab.errorMessages.invalidLayoutPageUnits,{customLayoutOptionValue:a.customOptionLayoutDropdownObj.value}))})));if(0<b.length)return b;y.forEach(a,e.hitch(this,function(a){b.push({SizeName:a.customOptionLayoutDropdownObj.value})}));(a=this._getDuplicateValue(b))&&0<a.length?(b=[],b.push(p.substitute(this.nls.downloadTab.errorMessages.duplicateCustomOption,
{duplicateValueSizeName:a[0].SizeName}))):b=[];return b},_getDuplicateValue:function(b){var a=0,c,d=b.length;for(a;a<d;a++){c=b[a];var f;f=E.has("ie")||E.has("edge")?Object.create(b):Object.assign([],b);f.splice(a,1);c=this._filterArray(f,c);if(0<c.length)break}return c},_filterArray:function(b,a){return b.filter(function(b){return Object.keys(a).every(function(c){return b[c]===a[c]})})},getDefaultPrintOption:function(){return this._defaultPrintTemplateDropdownOptionObj.value},closeDownloadTabDropdowns:function(){this._defaultPrintTemplateDropdownOptionObj&&
this._defaultPrintTemplateDropdownOptionObj.closeDropDown();var b;this._customLayoutTable&&(b=this._customLayoutTable.getRows(),y.forEach(b,e.hitch(this,function(b){b.customOptionLayoutDropdownObj.closeDropDown();b.customOptionPageUnitsDropdownObj.closeDropDown()})))}})})},"jimu/dijit/GpSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/GpSource.html dojo/_base/lang dojo/_base/html dojo/on dojo/Evented jimu/dijit/GpChooserFromPortal jimu/dijit/_GpServiceChooserContent jimu/portalUrlUtils dijit/form/RadioButton".split(" "),
function(g,h,m,l,e,c,d,a,f,n,p,k){var u=0;return g([h,m,l,f],{templateString:e,baseClass:"jimu-gp-source",declaredClass:"jimu.dijit.GpSource",nls:null,multiple:!1,portalUrl:null,uniqueID:null,mode:null,constructor:function(){this.inherited(arguments);this.uniqueID=++u},postMixInProperties:function(){this.nls=window.jimuNls.gpSource;this.portalUrl=k.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){var a=[];this.portalRadio.checked?
a=this.gpcPortal.getSelectedItems():this.urlRadio.checked&&(a=this.gpcUrl.getSelectedItems());return a},startup:function(){this._started||(this.inherited(arguments),this.gpcPortal.startup(),this.gpcUrl.startup());this._started=!0},_initSelf:function(){this._initRadios();this._createGpChooserFromPortal();this._createGpServiceChooserContent();this._onRadioClicked("url");this.own(a(this.urlRadio,"click",c.hitch(this,function(){this._onRadioClicked("url")})));this.own(a(this.portalRadio,"click",c.hitch(this,
function(){this._onRadioClicked("portal")})))},_createGpChooserFromPortal:function(){this.gpcPortal=new n({multiple:this.multiple,portalUrl:this.portalUrl,style:{width:"100%",height:"100%"}});this.gpcPortal.operationTip=this.nls.chooseItem;this.gpcPortal.placeAt(this.hflcContainer);this.own(a(this.gpcPortal,"next",c.hitch(this,function(){this.gpcPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.chooseTask;this._updateOperationTip()})));this.own(a(this.gpcPortal,"back",c.hitch(this,function(){this.gpcPortal.operationTip=
this.nls.chooseItem;this._updateOperationTip()})));this.own(a(this.gpcPortal,"ok",c.hitch(this,function(a){a&&0<a.length&&this.emit("ok",a)})));this.own(a(this.gpcPortal,"cancel",c.hitch(this,function(){this.emit("cancel")})));0<=(this.portalUrl||"").toLowerCase().indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},_createGpServiceChooserContent:function(){this.gpcUrl=new p({multiple:this.multiple,style:{width:"100%",height:"100%"}});
this.gpcUrl.operationTip=this.nls.setServiceUrl;this.gpcUrl.placeAt(this.flscContainer);this.own(a(this.gpcUrl,"ok",c.hitch(this,function(a){a&&0<a.length&&this.emit("ok",a)})));this.own(a(this.gpcUrl,"cancel",c.hitch(this,function(){this.emit("cancel")})))},_initRadios:function(){var a="gpSourceRadios_"+this._getRandomString();this.portalRadio.name=a;d.setAttr(this.portalRadio,"id","portalRadio_"+this._getRandomString());d.setAttr(this.portalLabel,"for",this.portalRadio.id);this.urlRadio.name=a;
d.setAttr(this.urlRadio,"id","urlRadio_"+this._getRandomString());d.setAttr(this.urlLabel,"for",this.urlRadio.id)},_getRandomString:function(){var a=Math.random().toString();return a=a.slice(2,a.length)},_onRadioClicked:function(a){this.mode!==a&&(this.mode=a,"portal"===a?(this.portalRadio.set("checked",!0),this.urlRadio.set("checked",!1),d.setStyle(this.hflcContainer,"display","block"),d.setStyle(this.flscContainer,"display","none"),this.operationTip.innerHTML=this.nls.chooseItem):"url"===a&&(this.portalRadio.set("checked",
!1),this.urlRadio.set("checked",!0),d.setStyle(this.hflcContainer,"display","none"),d.setStyle(this.flscContainer,"display","block"),this.operationTip.innerHTML=this.nls.setServiceUrl,setTimeout(c.hitch(this,function(){this.gpcUrl.focusInput()}),50)),this._updateOperationTip())},_updateOperationTip:function(){if(this.portalRadio.checked){this.operationTip.innerHTML=this.gpcPortal.operationTip;var a=this.gpcPortal.browserContainer;a.style.top=0;var c=this.operationTip.clientHeight;19<=c&&(a.style.top=
c-19+"px")}else this.urlRadio.checked&&(this.operationTip.innerHTML=this.gpcUrl.operationTip)}})})},"jimu/dijit/GpChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/GpChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/ItemSelector jimu/dijit/GpServiceBrowser jimu/portalUrlUtils esri/request".split(" "),function(g,
h,m,l,e,c,d,a,f,n,p,k,u,w,r,t,v){return g([h,m,l,k],{templateString:e,declaredClass:"jimu.dijit.GpChooserFromPortal",baseClass:"jimu-gp-chooser-from-portal",_serviceDef:null,portalUrl:null,multiple:!1,postMixInProperties:function(){this.nls=c.mixin({},window.jimuNls.common);this.portalUrl=t.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){return this.gpServiceBrowser.getSelectedItems()},_initSelf:function(){this.selector=
new w({portalUrl:this.portalUrl,itemTypes:["Geoprocessing Service"],onlyShowOnlineFeaturedItems:!1});this.own(f(this.selector,"item-selected",c.hitch(this,this._onItemSelected)));this.own(f(this.selector,"none-item-selected",c.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);this.selector.startup();this.gpServiceBrowser._onTreeClick=c.hitch(this,this._onBrowserClicked)},_onItemSelected:function(){d.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){d.addClass(this.btnNext,
"jimu-state-disabled")},_onBtnBackClicked:function(){this._serviceDef&&!this._serviceDef.isFulfilled()&&this._serviceDef.cancel();d.setStyle(this.btnOk,"display","none");d.setStyle(this.btnNext,"display","block");d.setStyle(this.btnBack,"display","none");d.addClass(this.btnOk,"jimu-state-disabled");d.setStyle(this.selectorContainer,"display","block");d.setStyle(this.browserContainer,"display","none");this._reset();this.emit("back")},_onBtnOkClicked:function(){var a=this.getSelectedItems();0<a.length&&
this.emit("ok",a)},_onBtnNextClicked:function(){var a=this.selector.getSelectedItem();a&&(this._reset(),d.setStyle(this.btnNext,"display","none"),d.setStyle(this.btnBack,"display","block"),d.setStyle(this.btnOk,"display","block"),d.addClass(this.btnOk,"jimu-state-disabled"),d.setStyle(this.selectorContainer,"display","none"),d.setStyle(this.browserContainer,"display","block"),this.gpServiceBrowser.setUrl(a.url||a.item).then(c.hitch(this,function(){0<this.getSelectedItems().length&&d.removeClass(this.btnOk,
"jimu-state-disabled")})),this.emit("next"))},_reset:function(){this.gpServiceBrowser.reset()},_onBrowserClicked:function(){0<this.gpServiceBrowser.getSelectedItems().length?d.removeClass(this.btnOk,"jimu-state-disabled"):d.addClass(this.btnOk,"jimu-state-disabled")},_onBtnCancelClicked:function(){this.emit("cancel")}})})},"jimu/dijit/ItemSelector":function(){define("dojo/_base/declare dojo/topic dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/ItemSelector.html dojo/Evented dojo/_base/lang dojo/_base/config dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/promise/all dojo/query dojo/on dojo/dom-style jimu/utils jimu/portalUtils jimu/tokenUtils jimu/portalUrlUtils jimu/dijit/ViewStack jimu/dijit/Search jimu/dijit/TabContainer3 jimu/dijit/_ItemTable dijit/form/RadioButton".split(" "),
function(g,h,m,l,e,c,d,a,f,n,p,k,u,w,r,t,v,q,x,z,b,C,A,D){return g([m,l,e,d],{templateString:c,declaredClass:"jimu.dijit.ItemSelector",baseClass:"jimu-item-selector",tab:null,_user:null,_group:null,_allPublicPortalQuery:null,_filterPublicPortalQuery:null,_allPublicOnlineQuery:null,_filterPublicOnlineQuery:null,_allOrganizationQuery:null,_filterOrganizationQuery:null,_allMyContentQuery:null,_filterMyContentQuery:null,_allGroupQuery:null,_filterGroupQuery:null,_isPublicTabShow:!1,_signIn:!1,_itemTypeQueryString:"",
_typeKeywordQueryString:"",portalUrl:null,itemTypes:"",typeKeywords:"",showOnlineItems:!0,onlyShowOnlineFeaturedItems:!1,showMyContent:!0,showMyOrganization:!0,showMyGroups:!0,showPublic:!0,showOnlyEditableGroups:!1,postMixInProperties:function(){this.portalUrl=z.getStandardPortalUrl(this.portalUrl);this.showOnlineItems=!1===this.showOnlineItems?!1:!0;this.itemTypes&&0<this.itemTypes.length||(this.itemTypes=[]);this._itemTypes="";n.forEach(this.itemTypes,a.hitch(this,function(b,a){this._itemTypes+=
'"'+b+'"';a!==this.itemTypes.length-1&&(this._itemTypes+=",")}));this._itemTypes="["+this._itemTypes+"]";this.typeKeywords&&0<this.typeKeywords.length||(this.typeKeywords=[]);this._typeKeywords="";n.forEach(this.typeKeywords,a.hitch(this,function(b,a){this._typeKeywords+='"'+b+'"';a!==this.typeKeywords.length-1&&(this._typeKeywords+=",")}));this._typeKeywords="["+this._typeKeywords+"]";this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);var b=this._getPortalUrl();
this.portal=q.getPortal(b);this._initOptions();this._initSearchQuery();this._initTabs();this._initPortalRadio();this._initItemTables();this._initPublic();this._initPrivate();this._updateUIbySignIn()},_initOptions:function(){this._itemTypeQueryString=v.getItemQueryStringByTypes(this.itemTypes);this._typeKeywordQueryString=v.getItemQueryStringByTypeKeywords(this.typeKeywords)},_initTabs:function(){var b={title:this.nls.myContent,content:this.mycontentTabNode},c={title:this.nls.myOrganization,content:this.organizationTabNode},
d={title:this.nls.myGroup,content:this.groupTabNode},f={title:this.nls.publicMap,content:this.publicTabNode};t.set(this.mycontentTabNode,"display","none");t.set(this.organizationTabNode,"display","none");t.set(this.groupTabNode,"display","none");t.set(this.publicTabNode,"display","none");var q=[];this.showMyContent&&(q.push(b),t.set(this.mycontentTabNode,"display","block"));this.showMyOrganization&&(q.push(c),t.set(this.organizationTabNode,"display","block"));this.showMyGroups&&(q.push(d),t.set(this.groupTabNode,
"display","block"));this.showPublic&&(q.push(f),t.set(this.publicTabNode,"display","block"));this.tab=new A({tabs:q},this.tabNode);this.own(r(this.tab,"tabChanged",a.hitch(this,function(b){p.setStyle(this.signinSection,"display","none");b!==this.nls.publicMap?(this._isPublicTabShow=!1,this._updateUIbySignIn()):this._isPublicTabShow=!0})))},_updateUIbySignIn:function(){p.setStyle(this.signinSection,"display","none");var b=w(".organization-tab-content-main,.group-tab-content-main,.mycontent-tab-content-main",
this.domNode);x.userHaveSignInPortal(this._getPortalUrl())?b.style("display","block"):(b.style("display","none"),this._isPublicTabShow||p.setStyle(this.signinSection,"display","block"))},_initPortalRadio:function(){var b=this._getPortalUrl(),b=z.getServerByUrl(b);this.portalPublicRaido.set("disabled",!1);this.onlinePublicRaido.set("disabled",!1);this.portalPublicRaido.set("checked",!0);var a=!1;z.isArcGIScom(b)?(a=!0,this.portalPublicLabel.innerHTML="ArcGIS.com"):(this.portalPublicLabel.innerHTML=
b,a=this.showOnlineItems?!1:!0);a&&(this.onlinePublicRaido.set("disabled",!0),p.setStyle(this.onlinePublicRaido,"display","none"),p.setStyle(this.onlinePublicLabel,"display","none"))},_initSearchQuery:function(){var b="esri_"+(f.locale&&f.locale.slice(0,2)||"en").toLowerCase(),c=n.filter("esri_he esri_fr esri_ja esri_nl esri_th esri_tr esri_nb esri_ro esri_it esri_pl esri_po esri_ru esri_pt esri_en esri_ar esri_et esri_es esri_ko esri_cs esri_da esri_zh esri_sv esri_lt esri_fi esri_lv esri_de esri_vi".split(" "),
a.hitch(this,function(a){return a!==b})),d="";n.forEach(c,a.hitch(this,function(b){d+=" -owner:"+b+" "}));c=" ";this.portal&&this.portal.user&&this.portal.user.orgId&&(c=" orgid:"+this.portal.user.orgId+" ");c=c+this._itemTypeQueryString+" AND access:public "+d+" "+this._typeKeywordQueryString;this._allPublicPortalQuery=this._getQuery({sortField:"numViews",sortOrder:"desc",q:c});this._filterPublicPortalQuery=this._getQuery({q:c,basicQ:c});this._allPublicOnlineQuery=this._getQuery({sortField:"numViews",
sortOrder:"desc",q:(this.onlyShowOnlineFeaturedItems?' (group:"c755678be14e4a0984af36a15f5b643e"  OR group:"b8787a74b4d74f7fb9b8fac918735153") ':" ")+this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._filterPublicOnlineQuery=this._getQuery({q:this._itemTypeQueryString+" AND access:public "+this._typeKeywordQueryString});this._allOrganizationQuery=this._getQuery();this._filterOrganizationQuery=this._getQuery();this._allMyContentQuery=this._getQuery();this._filterMyContentQuery=
this._getQuery();this._allGroupQuery=this._getQuery();this._filterGroupQuery=this._getQuery()},_getQuery:function(b){return a.mixin({start:1,num:16,f:"json"},b||{})},_getPortalUrl:function(){return z.getStandardPortalUrl(this.portalUrl)},_initItemTables:function(){"function"===typeof this.onCreateItemContent&&(this.mycontentItemTable.onCreateItemContent=this.onCreateItemContent,this.organizationItemTable.onCreateItemContent=this.onCreateItemContent,this.groupItemTable.onCreateItemContent=this.onCreateItemContent,
this.publicPortalItemTable.onCreateItemContent=this.onCreateItemContent,this.publicOnlineItemTable.onCreateItemContent=this.onCreateItemContent);this.own(r(this.publicPortalItemTable,"item-dom-clicked",a.hitch(this,this._onItemDomClicked)));this.own(r(this.publicOnlineItemTable,"item-dom-clicked",a.hitch(this,this._onItemDomClicked)));this.own(r(this.organizationItemTable,"item-dom-clicked",a.hitch(this,this._onItemDomClicked)));this.own(r(this.groupItemTable,"item-dom-clicked",a.hitch(this,this._onItemDomClicked)));
this.own(r(this.mycontentItemTable,"item-dom-clicked",a.hitch(this,this._onItemDomClicked)));this.own(r(this.publicPortalItemTable,"update",a.hitch(this,this._onItemTableUpdate)));this.own(r(this.publicOnlineItemTable,"update",a.hitch(this,this._onItemTableUpdate)));this.own(r(this.organizationItemTable,"update",a.hitch(this,this._onItemTableUpdate)));this.own(r(this.groupItemTable,"update",a.hitch(this,this._onItemTableUpdate)));this.own(r(this.mycontentItemTable,"update",a.hitch(this,this._onItemTableUpdate)));
var b=this._getPortalUrl();this.portalPublicRaido.get("disabled")||(this.publicPortalItemTable.set("portalUrl",b),this.publicPortalItemTable.searchAllItems(this._allPublicPortalQuery),this.publicPortalItemTable.set("filteredQuery",this._filterPublicPortalQuery));this.onlinePublicRaido.get("disabled")||(this.publicOnlineItemTable.set("portalUrl",window.location.protocol+"//www.arcgis.com"),this.publicOnlineItemTable.searchAllItems(this._allPublicOnlineQuery),this.publicOnlineItemTable.set("filteredQuery",
this._filterPublicOnlineQuery))},_initPublic:function(){this.own(r(this.portalPublicRaido,"click",a.hitch(this,this._onPublicRaidoClicked)));this.own(r(this.onlinePublicRaido,"click",a.hitch(this,this._onPublicRaidoClicked)));this._onPublicRaidoClicked()},_onPublicRaidoClicked:function(){this.portalPublicRaido.get("checked")?(this.publicPortalItemTable.show(),this.publicOnlineItemTable.hide()):this.onlinePublicRaido.get("checked")&&(this.publicPortalItemTable.hide(),this.publicOnlineItemTable.show())},
_onPublicSearch:function(b){(b=b&&a.trim(b))?(this.publicPortalItemTable.showFilterItemsSection(),this.publicOnlineItemTable.showFilterItemsSection(),this.portalPublicRaido.get("checked")?(this._filterPublicPortalQuery.q=b+" "+this._filterPublicPortalQuery.basicQ,this._filterPublicPortalQuery.start=1,this.publicPortalItemTable.searchFilteredItems(this._filterPublicPortalQuery)):this.onlinePublicRaido.get("checked")&&(this._filterPublicOnlineQuery.q=b+" "+this._itemTypeQueryString+" AND access:public "+
this._typeKeywordQueryString,this._filterPublicOnlineQuery.start=1,this.publicOnlineItemTable.searchFilteredItems(this._filterPublicOnlineQuery))):(this.publicPortalItemTable.showAllItemsSection(),this.publicOnlineItemTable.showAllItemsSection())},_initPrivate:function(){this._resetPortalMaps();this.own(r(this.groupsSelect,"change",a.hitch(this,this._onGroupsSelectChange)));var b=z.getServerByUrl(this._getPortalUrl());z.isArcGIScom(b)&&(b="ArcGIS.com");x.userHaveSignInPortal(this._getPortalUrl())&&
this._onSignIn()},_onOrganizationSearch:function(b){if(b=b&&a.trim(b)){if(this._allOrganizationQuery){var c=this._allOrganizationQuery.q;c&&(this._filterOrganizationQuery.q=b+" "+c,this._filterOrganizationQuery.start=1,this.organizationItemTable.searchFilteredItems(this._filterOrganizationQuery))}}else this.organizationItemTable.showAllItemsSection()},_onMyContentSearch:function(b){if(b=b&&a.trim(b)){if(this._allMyContentQuery){var c=this._allMyContentQuery.q;c&&(this._filterMyContentQuery.q=b+" "+
c,this._filterMyContentQuery.start=1,this.mycontentItemTable.searchFilteredItems(this._filterMyContentQuery))}}else this.mycontentItemTable.showAllItemsSection()},_onGroupSearch:function(b){if(b=b&&a.trim(b)){if(this._allGroupQuery){var c=this._allGroupQuery.q;c&&(this._filterGroupQuery.q=b+" "+c,this._filterGroupQuery.start=1,this.groupItemTable.searchFilteredItems(this._filterGroupQuery))}}else this.groupItemTable.showAllItemsSection()},_onSignIn:function(){this._updateUIbySignIn();if(!this._signIn){this._signIn=
!0;var b=this._getPortalUrl();q.getPortal(b).getUser().then(a.hitch(this,function(b){this.domNode&&(this._resetPortalMaps(),this._searchOrganization(b),this._searchMyContent(b),this._searchGroups(b))}))}},_onSignOut:function(){this._signIn=!1;this._resetPortalMaps();this._updateUIbySignIn()},_resetPortalMaps:function(){this.organizationItemTable.clear();this.mycontentItemTable.clear();this._resetGroupsSection()},_searchOrganization:function(b){this.organizationItemTable.clear();b=" orgid:"+b.orgId+
" AND "+this._itemTypeQueryString+" AND (access:org OR access:public) "+this._typeKeywordQueryString;var a=this._getPortalUrl();this._allOrganizationQuery=this._getQuery({q:b});this._filterOrganizationQuery=this._getQuery({q:b});this.organizationItemTable.set("portalUrl",a);this.organizationItemTable.searchAllItems(this._allOrganizationQuery)},_searchMyContent:function(b){this.mycontentItemTable.clear();var a=this._getPortalUrl();b="owner:"+b.username+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;
this._allMyContentQuery=this._getQuery({q:b});this._filterMyContentQuery=this._getQuery({q:b});this.mycontentItemTable.set("portalUrl",a);this.mycontentItemTable.searchAllItems(this._allMyContentQuery)},_searchGroups:function(b){this._resetGroupsSection();p.setStyle(this.groupsSection,"display","flex");b=b.getGroups();if(0<b.length){p.setStyle(this.groupSearch.domNode,"display","block");this.groupItemTable.show();p.empty(this.groupsSelect);for(var a=0;a<b.length;a++){var c=b[a];p.create("option",
{value:c.id,innerHTML:c.title},this.groupsSelect)}this._onGroupsSelectChange()}this._updateUIbyGroups(b.length)},_resetGroupsSection:function(){p.setStyle(this.groupsSection,"display","none");p.empty(this.groupsSelect);p.create("option",{value:"nodata",innerHTML:this.nls.noneGroups},this.groupsSelect);this.groupItemTable.clear();p.setStyle(this.groupSearch.domNode,"display","none");this.groupItemTable.hide();this._updateUIbyGroups(0)},_updateUIbyGroups:function(b){0===b?p.setStyle(this.groupsSection,
"top","15px"):p.setStyle(this.groupsSection,"top","50px")},_onGroupsSelectChange:function(){var b=this.groupsSelect.value;this.groupItemTable.clear();if("nodata"===b)p.setStyle(this.groupSearch,"display","none"),this.groupItemTable.hide();else{p.setStyle(this.groupSearch,"display","block");this.groupItemTable.show();var a=this._getPortalUrl(),b="group:"+b+" AND "+this._itemTypeQueryString+" "+this._typeKeywordQueryString;this._allGroupQuery=this._getQuery({q:b});this._filterGroupQuery=this._getQuery({q:b});
this.groupItemTable.set("portalUrl",a);this.groupItemTable.searchAllItems(this._allGroupQuery)}},_onItemTableUpdate:function(){this.emit("update")},_onItemDomClicked:function(b){var a=p.hasClass(b,"jimu-state-active");w(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active");a&&p.addClass(b,"jimu-state-active");(b=this.getSelectedItem())?this.emit("item-selected",b):this.emit("none-item-selected")},getSelectedItem:function(){var b=null,c=w(".item.jimu-state-active",this.domNode);
0<c.length&&(b=a.mixin({},c[0].item));return b}})})},"jimu/dijit/_ItemTable":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_ItemTable.html dojo/Evented dojo/_base/lang dojo/_base/array dojo/_base/html dojo/_base/Deferred dojo/query dojo/on jimu/utils jimu/portalUtils jimu/portalUrlUtils jimu/dijit/LoadingIndicator".split(" "),function(g,h,m,l,e,c,d,a,f,n,p,k,u,w,r,t){return g([h,m,l,c],{templateString:e,declaredClass:"jimu.dijit.ItemTable",
baseClass:"jimu-item-table",query:null,filteredQuery:null,portalUrl:null,hidden:!1,nls:null,types:"",typeKeywords:"",_defaultThumbnail:{"Web Mapping Application":"desktopapp.png","Mobile Application":"mobileapp.png"},postMixInProperties:function(){this.nls=window.jimuNls.itemSelector},postCreate:function(){this.inherited(arguments);this._initSelf()},_initSelf:function(){this.types&&0<this.types.length||(this.types=[]);(this.hidden=!0===this.hidden)&&this.hide();this.portalUrl&&(this.portalUrl=r.getStandardPortalUrl(this.portalUrl));
this.showAllItemsSection();this.searchAllItems()},show:function(){f.setStyle(this.domNode,"display","block")},hide:function(){f.setStyle(this.domNode,"display","none")},searchAllItems:function(a){this.showAllItemsSection();a&&(this.query=d.mixin({},a),this.query.start=1,this.clearAllItemsSection());this.portalUrl&&this.query&&0<this.query.start&&(this.allItemsShelter.show(),w.getPortal(this.portalUrl).queryItems(this.query).then(d.hitch(this,function(a){this.domNode&&(this.allItemsShelter.hide(),
this.query.start=a.nextStart,this._createItems(a,this.allItemTbody))}),d.hitch(this,function(a){console.error(a);this.domNode&&this.allItemsShelter.hide()})))},searchFilteredItems:function(a){this.showFilterItemsSection();a&&(this.filteredQuery=d.clone(a),this.filteredQuery.start=1,this.clearFilteredItemsSection());this.portalUrl&&this.filteredQuery&&0<this.filteredQuery.start&&(this.filteredItemShelter.show(),w.getPortal(this.portalUrl).queryItems(this.filteredQuery).then(d.hitch(this,function(c){this.domNode&&
(this.showFilterItemsSection(),a&&this.clearFilteredItemsSection(),this.filteredQuery.start=c.nextStart,this._createItems(c,this.filteredItemsTbody),this._filterItemCallback())}),d.hitch(this,function(a){console.error(a);this.domNode&&this._filterItemCallback()})))},_filterItemCallback:function(){this.filteredItemShelter.hide();0<this._getItemCount(this.filteredItemsTbody)?(f.setStyle(this.filteredItemsTableDiv,"display","block"),f.setStyle(this.searchNoneTipSection,"display","none")):(f.setStyle(this.filteredItemsTableDiv,
"display","none"),f.setStyle(this.searchNoneTipSection,"display","block"))},clear:function(){this.clearAllItemsSection();this.clearFilteredItemsSection()},clearAllItemsSection:function(){f.empty(this.allItemTbody)},clearFilteredItemsSection:function(){f.empty(this.filteredItemsTbody)},showAllItemsSection:function(){f.setStyle(this.allItemsSection,"display","block");f.setStyle(this.filteredItemsSection,"display","none")},showFilterItemsSection:function(){f.setStyle(this.allItemsSection,"display","none");
f.setStyle(this.filteredItemsSection,"display","block");f.setStyle(this.filteredItemsTableDiv,"display","block");f.setStyle(this.searchNoneTipSection,"display","none")},_onAllItemsSectionScroll:function(){this._isScrollToBottom(this.allItemsTableDiv)&&this.searchAllItems()},_onFilteredItemsSectionScroll:function(){this._isScrollToBottom(this.filteredItemsTableDiv)&&this.searchFilteredItems()},_isScrollToBottom:function(a){return u.isScrollToBottom(a)},_createItems:function(c,q){c=c.results;var t=
a.map(this.types,d.hitch(this,function(b){return b.toLowerCase()}));c=a.filter(c,d.hitch(this,function(b){b=b.type&&b.type.toLowerCase()||"";return 0<=a.indexOf(t,b)}));if(0!==c.length){var e,b=p("td.empty",q),k;if(0<b.length){var n=Math.min(c.length,b.length),v=c.splice(0,n);for(k=0;k<n;k++){var u=b[k];e=this._createItem(v[k]);f.place(e,u);f.removeClass(u,"empty")}}if(0!==c.length){b=Math.ceil(c.length/2);for(k=0;k<b;k++)for(e=f.toDom("\x3ctr\x3e\x3ctd\x3e\x3c/td\x3e\x3ctd\x3e\x3c/td\x3e\x3c/tr\x3e"),
f.place(e,q),n=p("td",e),v=0;v<n.length;v++)u=n[v],(e=c[2*k+v])?(e=this._createItem(e),f.place(e,u)):f.addClass(u,"empty");this.emit("update")}}},_getItemCount:function(a){return p(".item",a).length},_createItem:function(a){var c=f.toDom('\x3cdiv class\x3d"item"\x3e\x3cdiv class\x3d"item-border"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-thumbnail jimu-auto-vertical"\x3e\x3cdiv class\x3d"none-thumbnail-tip jimu-auto-vertical-content"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"item-info"\x3e\x3cdiv class\x3d"item-name"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-type-owner"\x3e\x3c/div\x3e\x3cdiv class\x3d"item-date"\x3e\x3c/div\x3e\x3ca class\x3d"item-details" target\x3d"_blank"\x3e\x3c/a\x3e\x3c/div\x3e\x3c/div\x3e');
c.item=a;var d=p(".item-thumbnail",c)[0],e=p(".item-name",c)[0],b=p(".item-type-owner",c)[0],t=p(".item-date",c)[0],k=p(".item-details",c)[0],n=p(".none-thumbnail-tip",c)[0];if(!a.thumbnailUrl){var u=this._defaultThumbnail[a.type];u&&(a.thumbnailUrl=require.toUrl("jimu")+"/images/"+u)}a.thumbnailUrl?f.setStyle(d,"backgroundImage","url("+a.thumbnailUrl+")"):n.innerHTML=this.nls.noneThumbnail;"function"===typeof this.onCreateItemContent?(t=p(".item-info",c)[0],this.onCreateItemContent(a,t)):(e.innerHTML=
a.title,e.title=e.innerHTML,b.innerHTML=a.type+" by "+a.owner,b.title=b.innerHTML,d=new Date,d.setTime(a.modified),t.innerHTML=d.toLocaleString(),t.title=t.innerHTML,k.innerHTML=this.nls.moreDetails,k.href=a.detailsPageUrl||"#");return c},_onItemsTableClicked:function(a){var c=a.target||a.srcElement;a=null;f.hasClass(c,"item-thumbnail")?a=c.parentNode:f.hasClass(c,"none-thumbnail-tip")&&(a=c.parentNode.parentNode);a&&(c=f.hasClass(a,"jimu-state-active"),p(".item.jimu-state-active",this.domNode).removeClass("jimu-state-active"),
c?f.removeClass(a,"jimu-state-active"):f.addClass(a,"jimu-state-active"),this.emit("item-dom-clicked",a))},getSelectedItem:function(){var a=null,c=p(".item.jimu-state-active",this.domNode);0<c.length&&(a=d.mixin({},c[0].item));return a}})})},"jimu/dijit/GpServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(g,h,m,l,e){return g([h],{baseClass:"jimu-gp-service-browser",declaredClass:"jimu.dijit.GpServiceBrowser",
url:"",multiple:!1,postMixInProperties:function(){this.inherited(arguments);this.rule=e.getGpServiceBrowserRule()},getSelectedItems:function(){var c=this.inherited(arguments);return c=l.map(c,m.hitch(this,function(c){return{name:c.name,url:c.url}}))}})})},"jimu/dijit/_BasicServiceBrowser":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/array dojo/Deferred dojo/promise/all dojo/store/Memory dojo/store/Observable dijit/tree/ObjectStoreModel jimu/utils jimu/dijit/_Tree jimu/dijit/LoadingIndicator".split(" "),
function(g,h,m,l,e,c,d,a,f,n,p,k,u,w,r){return g([h,m,l,e],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"shelter"  data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_currentUrl:"",_treeClass:"service-browser-tree",_def:null,url:"",multiple:!1,rule:null,postMixInProperties:function(){this.nls=window.jimuNls.basicServiceBrowser},postCreate:function(){this.inherited(arguments);d.addClass(this.domNode,
"jimu-basic-service-browser");this.multiple=!!this.multiple;this._createTree();this.url&&"string"===typeof this.url&&this.setUrl(this.url)},reset:function(){this.url="";this._clear()},getSelectedItems:function(){return this.tree.getSelectedItems()},setUrl:function(a){this._def&&(this._def.isFulfilled()||this._def.cancel(),this._def=null);this._def=new f;a&&"string"===typeof a&&a.replace(/\/*$/g,"")||this._def.reject();a=a.replace(/\/*$/g,"");a=c.trim(a);var d=a.match(/^http(s?):\/\//gi);d&&0<d.length||
(a="http://"+a);if(!(0>=a.search(/\/rest\/services/i))&&(this._clear(),this._currentUrl=a))return a=this._getRootItem(),a=w.isStringEndWith(this._currentUrl,"rest/services")?this._searchBaseServiceUrl(this._currentUrl,a):this._isUrlContainsServiceType(this._currentUrl)?this._searchServiceUrl(this._currentUrl,a):this._searchFolderServiceUrl(this._currentUrl,a),this.shelter.show(),a.then(c.hitch(this,function(a){this.domNode&&this.shelter.hide();var c=this.tree.getAllLeafTreeNodeWidgets();1===c.length&&
c[0].select();this._def.resolve(a)}),c.hitch(this,function(a){this.domNode&&this.shelter.hide();this._showRequestError();this._def.reject(a)})),this._def;this._def.reject()},_getItem:function(a){return this.rule.getItem(a)},_getSubItemUrls:function(a){return this.rule.getSubItemUrls(a)},_getSubItems:function(d){var e=new f;this._getSubItemUrls(d).then(c.hitch(this,function(d){d=a.map(d,c.hitch(this,function(a){return this._getItem(a)}));n(d).then(c.hitch(this,function(d){d=a.filter(d,c.hitch(this,
function(a){return a&&"object"===typeof a}));e.resolve(d)}),c.hitch(this,function(a){e.reject(a)}))}),c.hitch(this,function(a){e.reject(a)}));return e},_selectFirstLeafTreeNodeWidget:function(){var a=this.tree.getAllLeafTreeNodeWidgets();1===a.length&&a[0].select()},isLeafItem:function(a){return 0<=this.rule.leafTypes.indexOf(a.type)},isServiceTypeSupported:function(a){return this.rule.isServiceTypeSupported(a)},_getStringEndWith:function(a,c){var d="",f=a.indexOf(c);0<=f&&(d=a.slice(0,f+c.length));
return d},_isUrlContainsServiceType:function(a){return this.rule.isUrlContainsServiceType(a)},_getBaseServiceUrl:function(){return this._getStringEndWith(this._currentUrl,"rest/services")},_getServiceName:function(a){var c="";a=a.split("/");return c=a[a.length-1]},_searchBaseServiceUrl:function(d,e){var k=new f;this._getRestInfo(d).then(c.hitch(this,function(q){if(this.domNode){var z=[];a.map(q.folders,c.hitch(this,function(b){var k={name:b,type:"folder",url:d+"/"+b,parent:e.id};this._addItem(k);
var n=new f;this._doSearchFolderServiceUrl(k.url,k.id).then(c.hitch(this,function(b){0<b.length?a.forEach(b,c.hitch(this,function(b){b.parent=k.id;this._addItem(b)})):this._removeItem(k.id);n.resolve()}),c.hitch(this,function(b){n.reject(b)}));z.push(n);return n}));a.forEach(q.services,c.hitch(this,function(b){if(this.isServiceTypeSupported(b.type)){b=d+"/"+b.name+"/"+b.type;var a=new f;this.rule.getItem(b).then(c.hitch(this,function(b){b&&(b.parent=e.id,this._addItem(b));a.resolve()}),c.hitch(this,
function(b){console.error(b);a.reject(b)}));z.push(a)}}));n(z).then(c.hitch(this,function(){this.domNode&&k.resolve()}),c.hitch(this,function(b){console.error(b);this.domNode&&k.reject(b)}))}}),c.hitch(this,function(a){console.error(a);this.domNode&&k.reject({errorCode:"NETWORK_ERROR",error:a})}));return k},_searchFolderServiceUrl:function(d,e){var k=new f;this._doSearchFolderServiceUrl(d,e).then(c.hitch(this,function(d){this.domNode&&(a.forEach(d,c.hitch(this,function(a){a.parent=e.id;this._addItem(a)})),
k.resolve())}),c.hitch(this,function(a){console.error(a);this.domNode&&k.reject({errorCode:"NETWORK_ERROR",error:a})}));return k},_doSearchFolderServiceUrl:function(d){var e=new f,k=this._getBaseServiceUrl();this._getRestInfo(d).then(c.hitch(this,function(d){d=d.services;var f=[];d&&0<d.length&&a.forEach(d,c.hitch(this,function(b){this.isServiceTypeSupported(b.type)&&(b=this.rule.getItem(k+"/"+b.name+"/"+b.type),f.push(b))}));n(f).then(c.hitch(this,function(b){b=a.filter(b,c.hitch(this,function(b){return b}));
e.resolve(b)}),c.hitch(this,function(b){console.error(b);e.reject(b)}))}),c.hitch(this,function(a){console.error(a);e.reject(a)}));return e},_searchServiceUrl:function(d,e){var k=new f;this._getSubItems(d).then(c.hitch(this,function(f){f&&0<f.length?(a.forEach(f,c.hitch(this,function(a){a.parent=e.id;this._addItem(a)})),k.resolve()):this._getItem(d).then(c.hitch(this,function(a){a&&(a.parent=e.id,this._addItem(a));k.resolve()}),c.hitch(this,function(a){k.reject(a)}))}),c.hitch(this,function(a){k.reject(a)}));
return k},_getRestInfo:function(a){var d=new f;this.rule.getRestInfo(a).then(c.hitch(this,function(a){this.domNode&&d.resolve(a)}),c.hitch(this,function(a){this.domNode&&d.reject(a)}));return d},_clear:function(){var d=this._store.query({parent:"root"});a.forEach(d,c.hitch(this,function(a){a&&"root"!==a.id&&this._store.remove(a.id)}))},_showRequestError:function(){this.emit("error",this.nls.invalidUrlTip)},_addItem:function(a){this._id++;a.id=this._id.toString();this._store.add(a);return a},_removeItem:function(a){this._store.remove(a)},
_getRootItem:function(){return{id:"root",name:"Services Root",type:"root"}},_createTree:function(){var a=this._getRootItem(),a=new p({data:[a],getChildren:function(a){return this.query({parent:a.id})}});this._store=new k(a);a=new u({store:this._store,query:{id:"root"},mayHaveChildren:c.hitch(this,this._mayHaveChildren)});this.tree=new r({multiple:this.multiple,model:a,showRoot:!1,style:{width:"100%"},isLeafItem:c.hitch(this,this.isLeafItem),onOpen:c.hitch(this,function(a,c){this._onTreeOpen(a,c);
this.emit("tree-open",a,c)}),onClick:c.hitch(this,function(a,c,d){this._onTreeClick(a,c,d);this.emit("tree-click",a,c,d)}),getIconStyle:c.hitch(this,function(a,c){var d=null;if(!a)return null;var f={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},b=window.location.protocol+"//"+window.location.host+require.toUrl("jimu"),e=this._getIconImageName(a,c);e||("folder"===a.type?e=c?"folder_open_default.png":"folder_close_default.png":this.isServiceTypeSupported(a.type)&&
(e=c?"folder_open_default.png":"folder_close_default.png"));e&&(f.backgroundImage="url("+b+"/css/images/"+e+")",d=f);return d})});d.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.domNode)},_getIconImageName:function(a,c){var d="";"function"===typeof this.rule.getIconImageName&&(d=this.rule.getIconImageName(a,c));return d},_mayHaveChildren:function(a){return"root"===a.type?!0:!this.isLeafItem(a)},_onTreeOpen:function(d,f){"root"===d.id||0<this._store.query({parent:d.id}).length||
d.checking||d.checked||(d.checking=!0,this._getSubItems(d.url).then(c.hitch(this,function(f){a.forEach(f,c.hitch(this,function(a){a.parent=d.id;this._addItem(a)}));d.checking=!1;d.checked=!0}),c.hitch(this,function(a){console.error(a);d.checking=!1;d.checked=!0})))},_onTreeClick:function(a,c,d){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.inherited(arguments)}})})},"dijit/tree/ObjectStoreModel":function(){define("dojo/_base/array dojo/aspect dojo/_base/declare dojo/Deferred dojo/_base/lang dojo/when ../Destroyable".split(" "),
function(g,h,m,l,e,c,d){return m("dijit.tree.ObjectStoreModel",d,{store:null,labelAttr:"name",labelType:"text",root:null,query:null,constructor:function(a){e.mixin(this,a);this.childrenCache={}},getRoot:function(a,d){if(this.root)a(this.root);else{var f=this.store.query(this.query);f.then&&this.own(f);c(f,e.hitch(this,function(c){if(1!=c.length)throw Error("dijit.tree.ObjectStoreModel: root query returned "+c.length+" items, but must return exactly one");this.root=c[0];a(this.root);f.observe&&f.observe(e.hitch(this,
function(a){this.onChange(a)}),!0)}),d)}},mayHaveChildren:function(){return!0},getChildren:function(a,d,n){var f=this.store.getIdentity(a);if(this.childrenCache[f])c(this.childrenCache[f],d,n);else{var k=this.childrenCache[f]=this.store.getChildren(a);k.then&&this.own(k);k.observe&&this.own(k.observe(e.hitch(this,function(d,f,n){this.onChange(d);f!=n&&c(k,e.hitch(this,"onChildrenChange",a))}),!0));c(k,d,n)}},isItem:function(){return!0},getIdentity:function(a){return this.store.getIdentity(a)},getLabel:function(a){return a[this.labelAttr]},
newItem:function(a,c,d,e){return this.store.put(a,{parent:c,before:e})},pasteItem:function(a,c,d,p,k,u){var f=new l;if(c===d&&!p&&!u)return f.resolve(!0),f;c&&!p?this.getChildren(c,e.hitch(this,function(e){e=[].concat(e);var k=g.indexOf(e,a);e.splice(k,1);this.onChildrenChange(c,e);f.resolve(this.store.put(a,{overwrite:!0,parent:d,oldParent:c,before:u,isCopy:!1}))})):f.resolve(this.store.put(a,{overwrite:!0,parent:d,oldParent:c,before:u,isCopy:!0}));return f},onChange:function(){},onChildrenChange:function(){},
onDelete:function(){}})})},"jimu/dijit/_Tree":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/_TreeNode.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/_base/event dojo/query dojo/aspect dojo/on dojo/keys dojo/Evented dijit/registry dijit/Tree jimu/utils".split(" "),function(g,h,m,l,e,c,d,a,f,n,p,k,u,w,r,t){var v=g([r._TreeNode,u],{templateString:l,declaredClass:"jimu._TreeNode",isLeaf:!1,groupId:"",postCreate:function(){this.inherited(arguments);
c.addClass(this.domNode,"jimu-tree-node");this.isLeaf=!!this.isLeaf;this.groupId?(this.checkNode=c.toDom('\x3cinput type\x3d"radio" /\x3e'),this.checkNode.name=this.groupId):this.checkNode=c.toDom('\x3cinput type\x3d"checkbox" /\x3e');c.addClass(this.checkNode,"jimu-tree-check-node");c.place(this.checkNode,this.contentNode,"first");this.own(p(this.checkNode,"click",e.hitch(this,this._onClick)));this.own(p(this.rowNode,"keydown",e.hitch(this,function(a,c){c.target=a;c.keyCode!==k.ENTER&&c.keyCode!==
k.SPACE||this._onClick(c)},this.checkNode)));this.isLeaf?this.groupId?c.setStyle(this.checkNode,"display","none"):c.setStyle(this.checkNode,"display","inline"):c.setStyle(this.checkNode,"display","none");this.isLeaf?c.addClass(this.domNode,"jimu-tree-leaf-node"):c.addClass(this.domNode,"jimu-tree-not-leaf-node")},select:function(){this.isLeaf&&(this.checkNode.checked=!0,c.addClass(this.domNode,"jimu-tree-selected-leaf-node"))},unselect:function(){this.isLeaf&&(this.checkNode.checked=!1,c.removeClass(this.domNode,
"jimu-tree-selected-leaf-node"))},toggleSelect:function(){this.isLeaf&&(this.checkNode.checked?this.unselect():this.select())},_onClick:function(a){(a.target||a.srcElement)===this.checkNode?this.tree._onCheckNodeClick(this,this.checkNode.checked,a):this.tree._onClick(this,a)},_onChange:function(){this.isLeaf&&setTimeout(e.hitch(this,function(){this.checkNode.checked?this.emit("tn-select",this):this.emit("tn-unselect",this)}),100)},destroy:function(){delete this.tree;this.inherited(arguments)}});return g([r,
u],{declaredClass:"jimu._Tree",openOnClick:!0,multiple:!0,uniqueId:"",showRoot:!1,postMixInProperties:function(){this.inherited(arguments);this.uniqueId="tree_"+t.getRandomString()},postCreate:function(){this.inherited(arguments);c.addClass(this.domNode,"jimu-tree");this.own(n.before(this,"onClick",e.hitch(this,this._jimuBeforeClick)));this.rootLoadingIndicator&&c.setStyle(this.rootLoadingIndicator,"display","none");this.dndController.singular=!0;c.setAttr(this.domNode,"tabindex",0)},removeItem:function(a){this.model.store.remove(a)},
getAllItems:function(){var a=this.getAllTreeNodeWidgets();return d.map(a,e.hitch(this,function(a){var c=a.item;c.selected=a.checkNode.checked;return c}))},getSelectedItems:function(){var a=this.getAllTreeNodeWidgets(),a=d.filter(a,e.hitch(this,function(a){return a.checkNode.checked}));return d.map(a,e.hitch(this,function(a){return a.item}))},getFilteredItems:function(a){var c=this.getAllTreeNodeWidgets(),c=d.map(c,e.hitch(this,function(a){var b=a.item;b.selected=a.checkNode.checked;return b}));return d.filter(c,
e.hitch(this,function(c){return a(c)}))},getTreeNodeByItemId:function(a){for(var c=this._getAllTreeNodeDoms(),d=0;d<c.length;d++){var b=w.byNode(c[d]);if(b.item.id.toString()===a.toString())return b}return null},selectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&this.selectNodeWidget(a)},unselectItem:function(a){(a=this.getTreeNodeByItemId(a))&&a.isLeaf&&a.unselect()},getAllLeafTreeNodeWidgets:function(){var a=this.getAllTreeNodeWidgets();return d.filter(a,e.hitch(this,function(a){return a.isLeaf}))},
getAllTreeNodeWidgets:function(){var a=this._getAllTreeNodeDoms();return d.map(a,e.hitch(this,function(a){return w.byNode(a)}))},isLeafItem:function(a){return a&&a.isLeaf},_getAllTreeNodeDoms:function(){return f(".dijitTreeNode",this.domNode)},_createTreeNode:function(a){a.isLeaf=this.isLeafItem(a.item);this.multiple||(a.groupId=this.uniqueId);return new v(a)},_onTreeNodeSelect:function(a){this.emit("item-select",{item:a.item,treeNode:a})},_onTreeNodeUnselect:function(a){this.emit("item-unselect",
{item:a.item,treeNode:a})},selectNodeWidget:function(a){this.multiple||this.unselectAllLeafNodeWidgets();a.select()},_jimuBeforeClick:function(a,d,f){d.isLeaf&&(c.hasClass(f.target||f.srcElement,"jimu-tree-check-node")||(this.multiple?d.toggleSelect():this.selectNodeWidget(d)));return arguments},_onCheckNodeClick:function(c,d,f){!this.multiple&&d&&this.unselectAllLeafNodeWidgets();a.stop(f);this.focusNode(c);setTimeout(e.hitch(this,function(){d?this.selectNodeWidget(c):c.unselect();this.onClick(c.item,
c,f)}),0)},unselectAllLeafNodeWidgets:function(){var a=this.getAllLeafTreeNodeWidgets();d.forEach(a,e.hitch(this,function(a){a.unselect()}))}})})},"dijit/Tree":function(){define("dojo/_base/array dojo/aspect dojo/cookie dojo/_base/declare dojo/Deferred dojo/promise/all dojo/dom dojo/dom-class dojo/dom-geometry dojo/dom-style dojo/errors/create dojo/fx dojo/has dojo/_base/kernel dojo/keys dojo/_base/lang dojo/on dojo/topic dojo/touch dojo/when ./a11yclick ./focus ./registry ./_base/manager ./_Widget ./_TemplatedMixin ./_Container ./_Contained ./_CssStateMixin ./_KeyNavMixin dojo/text!./templates/TreeNode.html dojo/text!./templates/Tree.html ./tree/TreeStoreModel ./tree/ForestStoreModel ./tree/_dndSelector dojo/query!css2".split(" "),
function(g,h,m,l,e,c,d,a,f,n,p,k,u,w,r,t,v,q,x,z,b,C,A,D,H,y,G,E,I,L,K,M,O,P,Q){function F(b){return t.delegate(b.promise||b,{addCallback:function(b){this.then(b)},addErrback:function(b){this.otherwise(b)}})}var N=l("dijit._TreeNode",[H,y,G,E,I],{item:null,isTreeNode:!0,label:"",_setLabelAttr:function(b){this.labelNode["html"==this.labelType?"innerHTML":"innerText"in this.labelNode?"innerText":"textContent"]=b;this._set("label",b);u("dojo-bidi")&&this.applyTextDir(this.labelNode)},labelType:"text",
isExpandable:null,isExpanded:!1,state:"NotLoaded",templateString:K,baseClass:"dijitTreeNode",cssStateNodes:{rowNode:"dijitTreeRow"},_setTooltipAttr:{node:"rowNode",type:"attribute",attribute:"title"},buildRendering:function(){this.inherited(arguments);this._setExpando();this._updateItemClasses(this.item);this.isExpandable&&this.labelNode.setAttribute("aria-expanded",this.isExpanded);this.setSelected(!1)},_setIndentAttr:function(b){var a=Math.max(b,0)*this.tree._nodePixelIndent+"px";n.set(this.domNode,
"backgroundPosition",a+" 0px");n.set(this.rowNode,this.isLeftToRight()?"paddingLeft":"paddingRight",a);g.forEach(this.getChildren(),function(a){a.set("indent",b+1)});this._set("indent",b)},markProcessing:function(){this.state="Loading";this._setExpando(!0)},unmarkProcessing:function(){this._setExpando(!1)},_updateItemClasses:function(b){var a=this.tree,c=a.model;a._v10Compat&&b===c.root&&(b=null);this._applyClassAndStyle(b,"icon","Icon");this._applyClassAndStyle(b,"label","Label");this._applyClassAndStyle(b,
"row","Row");this.tree._startPaint(!0)},_applyClassAndStyle:function(b,c,d){var f="_"+c+"Class";c+="Node";var e=this[f];this[f]=this.tree["get"+d+"Class"](b,this.isExpanded);a.replace(this[c],this[f]||"",e||"");n.set(this[c],this.tree["get"+d+"Style"](b,this.isExpanded)||{})},_updateLayout:function(){var b=this.getParent(),b=!b||!b.rowNode||"none"==b.rowNode.style.display;a.toggle(this.domNode,"dijitTreeIsRoot",b);a.toggle(this.domNode,"dijitTreeIsLast",!b&&!this.getNextSibling())},_setExpando:function(b){var c=
["dijitTreeExpandoLoading","dijitTreeExpandoOpened","dijitTreeExpandoClosed","dijitTreeExpandoLeaf"];b=b?0:this.isExpandable?this.isExpanded?1:2:3;a.replace(this.expandoNode,c[b],c);this.expandoNodeText.innerHTML=["*","-","+","*"][b]},expand:function(){if(this._expandDeferred)return F(this._expandDeferred);this._collapseDeferred&&(this._collapseDeferred.cancel(),delete this._collapseDeferred);this.isExpanded=!0;this.labelNode.setAttribute("aria-expanded","true");(this.tree.showRoot||this!==this.tree.rootNode)&&
this.containerNode.setAttribute("role","group");a.add(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","true");var b=k.wipeIn({node:this.containerNode,duration:D.defaultDuration}),c=this._expandDeferred=new e(function(){b.stop()});h.after(b,"onEnd",function(){c.resolve(!0)},!0);b.play();return F(c)},collapse:function(){if(this._collapseDeferred)return F(this._collapseDeferred);
this._expandDeferred&&(this._expandDeferred.cancel(),delete this._expandDeferred);this.isExpanded=!1;this.labelNode.setAttribute("aria-expanded","false");this==this.tree.rootNode&&this.tree.showRoot&&this.tree.domNode.setAttribute("aria-expanded","false");a.remove(this.contentNode,"dijitTreeContentExpanded");this._setExpando();this._updateItemClasses(this.item);var b=k.wipeOut({node:this.containerNode,duration:D.defaultDuration}),c=this._collapseDeferred=new e(function(){b.stop()});h.after(b,"onEnd",
function(){c.resolve(!0)},!0);b.play();return F(c)},indent:0,setChildItems:function(b){var a=this.tree,f=a.model,e=[],k=a.focusedChild,B=this.getChildren();g.forEach(B,function(b){G.prototype.removeChild.call(this,b)},this);this.defer(function(){g.forEach(B,function(b){if(!b._destroyed&&!b.getParent()){var c=function(b){var d=f.getIdentity(b.item),e=a._itemNodesMap[d];1==e.length?delete a._itemNodesMap[d]:(d=g.indexOf(e,b),-1!=d&&e.splice(d,1));g.forEach(b.getChildren(),c)};a.dndController.removeTreeNode(b);
c(b);if(a.persist){var e=g.map(b.getTreePath(),function(b){return a.model.getIdentity(b)}).join("/"),B;for(B in a._openedNodes)B.substr(0,e.length)==e&&delete a._openedNodes[B];a._saveExpandedNodes()}a.lastFocusedChild&&!d.isDescendant(a.lastFocusedChild.domNode,a.domNode)&&delete a.lastFocusedChild;k&&!d.isDescendant(k.domNode,a.domNode)&&a.focus();b.destroyRecursive()}})});this.state="Loaded";b&&0<b.length?(this.isExpandable=!0,g.forEach(b,function(b){var c=f.getIdentity(b),d=a._itemNodesMap[c],
k;if(d)for(var B=0;B<d.length;B++)if(d[B]&&!d[B].getParent()){k=d[B];k.set("indent",this.indent+1);break}k||(k=this.tree._createTreeNode({item:b,tree:a,isExpandable:f.mayHaveChildren(b),label:a.getLabel(b),labelType:a.model&&a.model.labelType||"text",tooltip:a.getTooltip(b),ownerDocument:a.ownerDocument,dir:a.dir,lang:a.lang,textDir:a.textDir,indent:this.indent+1}),d?d.push(k):a._itemNodesMap[c]=[k]);this.addChild(k);(this.tree.autoExpand||this.tree._state(k))&&e.push(a._expandNode(k))},this),g.forEach(this.getChildren(),
function(b){b._updateLayout()})):this.isExpandable=!1;this._setExpando&&this._setExpando(!1);this._updateItemClasses(this.item);b=c(e);this.tree._startPaint(b);return F(b)},getTreePath:function(){for(var b=this,a=[];b&&b!==this.tree.rootNode;)a.unshift(b.item),b=b.getParent();a.unshift(this.tree.rootNode.item);return a},getIdentity:function(){return this.tree.model.getIdentity(this.item)},removeChild:function(b){this.inherited(arguments);var a=this.getChildren();0==a.length&&(this.isExpandable=!1,
this.collapse());g.forEach(a,function(b){b._updateLayout()})},makeExpandable:function(){this.isExpandable=!0;this._setExpando(!1)},setSelected:function(b){this.labelNode.setAttribute("aria-selected",b?"true":"false");a.toggle(this.rowNode,"dijitTreeRowSelected",b)},focus:function(){C.focus(this.focusNode)}});u("dojo-bidi")&&N.extend({_setTextDirAttr:function(b){!b||this.textDir==b&&this._created||(this._set("textDir",b),this.applyTextDir(this.labelNode),g.forEach(this.getChildren(),function(a){a.set("textDir",
b)},this))}});var J=l("dijit.Tree",[H,L,y,I],{baseClass:"dijitTree",store:null,model:null,query:null,label:"",showRoot:!0,childrenAttr:["children"],paths:[],path:[],selectedItems:null,selectedItem:null,openOnClick:!1,openOnDblClick:!1,templateString:M,persist:!1,autoExpand:!1,dndController:Q,dndParams:"onDndDrop itemCreator onDndCancel checkAcceptance checkItemAcceptance dragThreshold betweenThreshold".split(" "),onDndDrop:null,itemCreator:null,onDndCancel:null,checkAcceptance:null,checkItemAcceptance:null,
dragThreshold:5,betweenThreshold:0,_nodePixelIndent:19,_publish:function(b,a){q.publish(this.id,t.mixin({tree:this,event:b},a||{}))},postMixInProperties:function(){this.tree=this;this.autoExpand&&(this.persist=!1);this._itemNodesMap={};!this.cookieName&&this.id&&(this.cookieName=this.id+"SaveStateCookie");this.expandChildrenDeferred=new e;this.pendingCommandsPromise=this.expandChildrenDeferred.promise;this.inherited(arguments)},postCreate:function(){this._initState();var a=this;this.own(v(this.containerNode,
v.selector(".dijitTreeNode",x.enter),function(b){a._onNodeMouseEnter(A.byNode(this),b)}),v(this.containerNode,v.selector(".dijitTreeNode",x.leave),function(b){a._onNodeMouseLeave(A.byNode(this),b)}),v(this.containerNode,v.selector(".dijitTreeRow",b.press),function(b){a._onNodePress(A.getEnclosingWidget(this),b)}),v(this.containerNode,v.selector(".dijitTreeRow",b),function(b){a._onClick(A.getEnclosingWidget(this),b)}),v(this.containerNode,v.selector(".dijitTreeRow","dblclick"),function(b){a._onDblClick(A.getEnclosingWidget(this),
b)}));this.model||this._store2model();this.own(h.after(this.model,"onChange",t.hitch(this,"_onItemChange"),!0),h.after(this.model,"onChildrenChange",t.hitch(this,"_onItemChildrenChange"),!0),h.after(this.model,"onDelete",t.hitch(this,"_onItemDelete"),!0));this.inherited(arguments);if(this.dndController){t.isString(this.dndController)&&(this.dndController=t.getObject(this.dndController));for(var c={},d=0;d<this.dndParams.length;d++)this[this.dndParams[d]]&&(c[this.dndParams[d]]=this[this.dndParams[d]]);
this.dndController=new this.dndController(this,c)}this._load();this.onLoadDeferred=F(this.pendingCommandsPromise);this.onLoadDeferred.then(t.hitch(this,"onLoad"))},_store2model:function(){this._v10Compat=!0;w.deprecated("Tree: from version 2.0, should specify a model object rather than a store/query");var b={id:this.id+"_ForestStoreModel",store:this.store,query:this.query,childrenAttrs:this.childrenAttr};this.params.mayHaveChildren&&(b.mayHaveChildren=t.hitch(this,"mayHaveChildren"));this.params.getItemChildren&&
(b.getChildren=t.hitch(this,function(b,a,c){this.getItemChildren(this._v10Compat&&b===this.model.root?null:b,a,c)}));this.model=new P(b);this.showRoot=!!this.label},onLoad:function(){},_load:function(){this.model.getRoot(t.hitch(this,function(b){var a=this.rootNode=this.tree._createTreeNode({item:b,tree:this,isExpandable:!0,label:this.label||this.getLabel(b),labelType:this.model.labelType||"text",textDir:this.textDir,indent:this.showRoot?0:-1});this.showRoot?(this.domNode.setAttribute("aria-multiselectable",
!this.dndController.singular),this.rootLoadingIndicator.style.display="none"):(a.rowNode.style.display="none",this.domNode.setAttribute("role","presentation"),this.domNode.removeAttribute("aria-expanded"),this.domNode.removeAttribute("aria-multiselectable"),this["aria-label"]?(a.containerNode.setAttribute("aria-label",this["aria-label"]),this.domNode.removeAttribute("aria-label")):this["aria-labelledby"]&&(a.containerNode.setAttribute("aria-labelledby",this["aria-labelledby"]),this.domNode.removeAttribute("aria-labelledby")),
a.labelNode.setAttribute("role","presentation"),a.labelNode.removeAttribute("aria-selected"),a.containerNode.setAttribute("role","tree"),a.containerNode.setAttribute("aria-expanded","true"),a.containerNode.setAttribute("aria-multiselectable",!this.dndController.singular));this.containerNode.appendChild(a.domNode);b=this.model.getIdentity(b);this._itemNodesMap[b]?this._itemNodesMap[b].push(a):this._itemNodesMap[b]=[a];a._updateLayout();this._expandNode(a).then(t.hitch(this,function(){this._destroyed||
(this.rootLoadingIndicator.style.display="none",this.expandChildrenDeferred.resolve(!0))}))}),t.hitch(this,function(b){console.error(this,": error loading root: ",b)}))},getNodesByItem:function(b){if(!b)return[];b=t.isString(b)?b:this.model.getIdentity(b);return[].concat(this._itemNodesMap[b])},_setSelectedItemAttr:function(b){this.set("selectedItems",[b])},_setSelectedItemsAttr:function(b){var a=this;return this.pendingCommandsPromise=this.pendingCommandsPromise.always(t.hitch(this,function(){var c=
g.map(b,function(b){return!b||t.isString(b)?b:a.model.getIdentity(b)}),d=[];g.forEach(c,function(b){d=d.concat(a._itemNodesMap[b]||[])});this.set("selectedNodes",d)}))},_setPathAttr:function(b){return b.length?F(this.set("paths",[b]).then(function(b){return b[0]})):F(this.set("paths",[]).then(function(b){return b[0]}))},_setPathsAttr:function(b){function a(b,c){var f=b.shift(),e=g.filter(c,function(b){return b.getIdentity()==f})[0];if(e)return b.length?d._expandNode(e).then(function(){return a(b,
e.getChildren())}):e;throw new J.PathError("Could not expand path at "+f);}var d=this;return F(this.pendingCommandsPromise=this.pendingCommandsPromise.always(function(){return c(g.map(b,function(b){b=g.map(b,function(b){return b&&t.isObject(b)?d.model.getIdentity(b):b});if(b.length)return a(b,[d.rootNode]);throw new J.PathError("Empty path");}))}).then(function(b){d.set("selectedNodes",b);return d.paths}))},_setSelectedNodeAttr:function(b){this.set("selectedNodes",[b])},_setSelectedNodesAttr:function(b){this.dndController.setSelection(b)},
expandAll:function(){function b(d){return a._expandNode(d).then(function(){var a=g.filter(d.getChildren()||[],function(b){return b.isExpandable});return c(g.map(a,b))})}var a=this;return F(b(this.rootNode))},collapseAll:function(){function b(d){var f=g.filter(d.getChildren()||[],function(b){return b.isExpandable}),f=c(g.map(f,b));return!d.isExpanded||d==a.rootNode&&!a.showRoot?f:f.then(function(){return a._collapseNode(d)})}var a=this;return F(b(this.rootNode))},mayHaveChildren:function(){},getItemChildren:function(){},
getLabel:function(b){return this.model.getLabel(b)},getIconClass:function(b,a){return!b||this.model.mayHaveChildren(b)?a?"dijitFolderOpened":"dijitFolderClosed":"dijitLeaf"},getLabelClass:function(){},getRowClass:function(){},getIconStyle:function(){},getLabelStyle:function(){},getRowStyle:function(){},getTooltip:function(){return""},_onDownArrow:function(b,a){(b=this._getNext(a))&&b.isTreeNode&&this.focusNode(b)},_onUpArrow:function(b,a){if(b=a.getPreviousSibling())for(a=b;a.isExpandable&&a.isExpanded&&
a.hasChildren();)a=a.getChildren(),a=a[a.length-1];else if(b=a.getParent(),this.showRoot||b!==this.rootNode)a=b;a&&a.isTreeNode&&this.focusNode(a)},_onRightArrow:function(b,a){a.isExpandable&&!a.isExpanded?this._expandNode(a):a.hasChildren()&&(a=a.getChildren()[0])&&a.isTreeNode&&this.focusNode(a)},_onLeftArrow:function(b,a){a.isExpandable&&a.isExpanded?this._collapseNode(a):(b=a.getParent())&&b.isTreeNode&&(this.showRoot||b!==this.rootNode)&&this.focusNode(b)},focusLastChild:function(){var b=this._getLast();
b&&b.isTreeNode&&this.focusNode(b)},_getFirst:function(){return this.showRoot?this.rootNode:this.rootNode.getChildren()[0]},_getLast:function(){for(var b=this.rootNode;b.isExpanded;){var a=b.getChildren();if(!a.length)break;b=a[a.length-1]}return b},_getNext:function(b){if(b.isExpandable&&b.isExpanded&&b.hasChildren())return b.getChildren()[0];for(;b&&b.isTreeNode;){var a=b.getNextSibling();if(a)return a;b=b.getParent()}return null},childSelector:".dijitTreeRow",isExpandoNode:function(b,a){return d.isDescendant(b,
a.expandoNode)||d.isDescendant(b,a.expandoNodeText)},_onNodePress:function(b,a){this.focusNode(b)},__click:function(b,a,c,d){var f=this.isExpandoNode(a.target,b);b.isExpandable&&(c||f)?this._onExpandoClick({node:b}):(this._publish("execute",{item:b.item,node:b,evt:a}),this[d](b.item,b,a),this.focusNode(b));a.stopPropagation();a.preventDefault()},_onClick:function(b,a){this.__click(b,a,this.openOnClick,"onClick")},_onDblClick:function(b,a){this.__click(b,a,this.openOnDblClick,"onDblClick")},_onExpandoClick:function(b){b=
b.node;this.focusNode(b);b.isExpanded?this._collapseNode(b):this._expandNode(b)},onClick:function(){},onDblClick:function(){},onOpen:function(){},onClose:function(){},_getNextNode:function(b){w.deprecated(this.declaredClass+"::_getNextNode(node) is deprecated. Use _getNext(node) instead.","","2.0");return this._getNext(b)},_getRootOrFirstNode:function(){w.deprecated(this.declaredClass+"::_getRootOrFirstNode() is deprecated. Use _getFirst() instead.","","2.0");return this._getFirst()},_collapseNode:function(b){b._expandNodeDeferred&&
delete b._expandNodeDeferred;if("Loading"!=b.state&&b.isExpanded){var a=b.collapse();this.onClose(b.item,b);this._state(b,!1);this._startPaint(a);return a}},_expandNode:function(b){if(b._expandNodeDeferred)return b._expandNodeDeferred;var a=this.model,c=b.item,d=this;b._loadDeferred||(b.markProcessing(),b._loadDeferred=new e,a.getChildren(c,function(a){b.unmarkProcessing();b.setChildItems(a).then(function(){b._loadDeferred.resolve(a)})},function(a){console.error(d,": error loading "+b.label+" children: ",
a);b._loadDeferred.reject(a)}));a=b._loadDeferred.then(t.hitch(this,function(){var a=b.expand();this.onOpen(b.item,b);this._state(b,!0);return a}));this._startPaint(a);return a},focusNode:function(b){for(var a=[],c=this.domNode;c&&c.tagName&&"IFRAME"!==c.tagName.toUpperCase();c=c.parentNode)a.push({domNode:c.contentWindow||c,scrollLeft:c.scrollLeft||0,scrollTop:c.scrollTop||0});this.focusChild(b);this.defer(function(){for(var b=0,c=a.length;b<c;b++)a[b].domNode.scrollLeft=a[b].scrollLeft,a[b].domNode.scrollTop=
a[b].scrollTop},0)},_onNodeMouseEnter:function(){},_onNodeMouseLeave:function(){},_onItemChange:function(b){var a=this.model.getIdentity(b);if(a=this._itemNodesMap[a]){var c=this.getLabel(b),d=this.getTooltip(b);g.forEach(a,function(a){a.set({item:b,label:c,tooltip:d});a._updateItemClasses(b)})}},_onItemChildrenChange:function(b,a){b=this.model.getIdentity(b);(b=this._itemNodesMap[b])&&g.forEach(b,function(b){b.setChildItems(a)})},_onItemDelete:function(b){b=this.model.getIdentity(b);var a=this._itemNodesMap[b];
a&&(g.forEach(a,function(b){this.dndController.removeTreeNode(b);var a=b.getParent();a&&a.removeChild(b);this.lastFocusedChild&&!d.isDescendant(this.lastFocusedChild.domNode,this.domNode)&&delete this.lastFocusedChild;this.focusedChild&&!d.isDescendant(this.focusedChild.domNode,this.domNode)&&this.focus();b.destroyRecursive()},this),delete this._itemNodesMap[b])},_initState:function(){this._openedNodes={};if(this.persist&&this.cookieName){var b=m(this.cookieName);b&&g.forEach(b.split(","),function(b){this._openedNodes[b]=
!0},this)}},_state:function(b,a){if(!this.persist)return!1;var c=g.map(b.getTreePath(),function(b){return this.model.getIdentity(b)},this).join("/");if(1===arguments.length)return this._openedNodes[c];a?this._openedNodes[c]=!0:delete this._openedNodes[c];this._saveExpandedNodes()},_saveExpandedNodes:function(){if(this.persist&&this.cookieName){var b=[],a;for(a in this._openedNodes)b.push(a);m(this.cookieName,b.join(","),{expires:365})}},destroy:function(){this._curSearch&&(this._curSearch.timer.remove(),
delete this._curSearch);this.rootNode&&this.rootNode.destroyRecursive();this.dndController&&!t.isString(this.dndController)&&this.dndController.destroy();this.rootNode=null;this.inherited(arguments)},destroyRecursive:function(){this.destroy()},resize:function(b){b&&f.setMarginBox(this.domNode,b);this._nodePixelIndent=f.position(this.tree.indentDetector).w||this._nodePixelIndent;this.expandChildrenDeferred.then(t.hitch(this,function(){this.rootNode.set("indent",this.showRoot?0:-1);this._adjustWidths()}))},
_outstandingPaintOperations:0,_startPaint:function(b){this._outstandingPaintOperations++;this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);var a=t.hitch(this,function(){this._outstandingPaintOperations--;0>=this._outstandingPaintOperations&&!this._adjustWidthsTimer&&this._started&&(this._adjustWidthsTimer=this.defer("_adjustWidths"))});z(b,a,a)},_adjustWidths:function(){this._adjustWidthsTimer&&(this._adjustWidthsTimer.remove(),delete this._adjustWidthsTimer);
this.containerNode.style.width="auto";this.containerNode.style.width=this.domNode.scrollWidth>this.domNode.offsetWidth?"auto":"100%"},_createTreeNode:function(b){return new N(b)},focus:function(){this.lastFocusedChild?this.focusNode(this.lastFocusedChild):this.focusFirstChild()}});u("dojo-bidi")&&J.extend({_setTextDirAttr:function(b){b&&this.textDir!=b&&(this._set("textDir",b),this.rootNode.set("textDir",b))}});J.PathError=p("TreePathError");J._TreeNode=N;return J})},"dijit/tree/TreeStoreModel":function(){define(["dojo/_base/array",
"dojo/aspect","dojo/_base/declare","dojo/_base/lang"],function(g,h,m,l){return m("dijit.tree.TreeStoreModel",null,{store:null,childrenAttrs:["children"],newItemIdAttr:"id",labelAttr:"",root:null,query:null,deferItemLoadingUntilExpand:!1,constructor:function(e){l.mixin(this,e);this.connects=[];e=this.store;if(!e.getFeatures()["dojo.data.api.Identity"])throw Error("dijit.tree.TreeStoreModel: store must support dojo.data.Identity");e.getFeatures()["dojo.data.api.Notification"]&&(this.connects=this.connects.concat([h.after(e,
"onNew",l.hitch(this,"onNewItem"),!0),h.after(e,"onDelete",l.hitch(this,"onDeleteItem"),!0),h.after(e,"onSet",l.hitch(this,"onSetItem"),!0)]))},destroy:function(){for(var e;e=this.connects.pop();)e.remove()},getRoot:function(e,c){this.root?e(this.root):this.store.fetch({query:this.query,onComplete:l.hitch(this,function(c){if(1!=c.length)throw Error("dijit.tree.TreeStoreModel: root query returned "+c.length+" items, but must return exactly one");this.root=c[0];e(this.root)}),onError:c})},mayHaveChildren:function(e){return g.some(this.childrenAttrs,
function(c){return this.store.hasAttribute(e,c)},this)},getChildren:function(e,c,d){var a=this.store;if(a.isItemLoaded(e)){for(var f=[],n=0;n<this.childrenAttrs.length;n++)var p=a.getValues(e,this.childrenAttrs[n]),f=f.concat(p);var k=0;this.deferItemLoadingUntilExpand||g.forEach(f,function(c){a.isItemLoaded(c)||k++});0==k?c(f):g.forEach(f,function(e,n){a.isItemLoaded(e)||a.loadItem({item:e,onItem:function(a){f[n]=a;0==--k&&c(f)},onError:d})})}else{var u=l.hitch(this,arguments.callee);a.loadItem({item:e,
onItem:function(a){u(a,c,d)},onError:d})}},isItem:function(e){return this.store.isItem(e)},fetchItemByIdentity:function(e){this.store.fetchItemByIdentity(e)},getIdentity:function(e){return this.store.getIdentity(e)},getLabel:function(e){return this.labelAttr?this.store.getValue(e,this.labelAttr):this.store.getLabel(e)},newItem:function(e,c,d){var a={parent:c,attribute:this.childrenAttrs[0]},f;this.newItemIdAttr&&e[this.newItemIdAttr]?this.fetchItemByIdentity({identity:e[this.newItemIdAttr],scope:this,
onItem:function(n){n?this.pasteItem(n,null,c,!0,d):(f=this.store.newItem(e,a))&&void 0!=d&&this.pasteItem(f,c,c,!1,d)}}):(f=this.store.newItem(e,a))&&void 0!=d&&this.pasteItem(f,c,c,!1,d)},pasteItem:function(e,c,d,a,f){var n=this.store,p=this.childrenAttrs[0];c&&g.forEach(this.childrenAttrs,function(d){if(n.containsValue(c,d,e)){if(!a){var f=g.filter(n.getValues(c,d),function(a){return a!=e});n.setValues(c,d,f)}p=d}});if(d)if("number"==typeof f){var k=n.getValues(d,p).slice();k.splice(f,0,e);n.setValues(d,
p,k)}else n.setValues(d,p,n.getValues(d,p).concat(e))},onChange:function(){},onChildrenChange:function(){},onDelete:function(){},onNewItem:function(e,c){c&&this.getChildren(c.item,l.hitch(this,function(d){this.onChildrenChange(c.item,d)}))},onDeleteItem:function(e){this.onDelete(e)},onSetItem:function(e,c){if(-1!=g.indexOf(this.childrenAttrs,c))this.getChildren(e,l.hitch(this,function(c){this.onChildrenChange(e,c)}));else this.onChange(e)}})})},"dijit/tree/ForestStoreModel":function(){define(["dojo/_base/array",
"dojo/_base/declare","dojo/_base/kernel","dojo/_base/lang","./TreeStoreModel"],function(g,h,m,l,e){return h("dijit.tree.ForestStoreModel",e,{rootId:"$root$",rootLabel:"ROOT",query:null,constructor:function(c){this.root={store:this,root:!0,id:c.rootId,label:c.rootLabel,children:c.rootChildren}},mayHaveChildren:function(c){return c===this.root||this.inherited(arguments)},getChildren:function(c,d,a){c===this.root?this.root.children?d(this.root.children):this.store.fetch({query:this.query,onComplete:l.hitch(this,
function(a){this.root.children=a;d(a)}),onError:a}):this.inherited(arguments)},isItem:function(c){return c===this.root?!0:this.inherited(arguments)},fetchItemByIdentity:function(c){if(c.identity==this.root.id){var d=c.scope||m.global;c.onItem&&c.onItem.call(d,this.root)}else this.inherited(arguments)},getIdentity:function(c){return c===this.root?this.root.id:this.inherited(arguments)},getLabel:function(c){return c===this.root?this.root.label:this.inherited(arguments)},newItem:function(c,d,a){return d===
this.root?(this.onNewRootItem(c),this.store.newItem(c)):this.inherited(arguments)},onNewRootItem:function(){},pasteItem:function(c,d,a,f,e){if(d===this.root&&!f)this.onLeaveRoot(c);this.inherited(arguments,[c,d===this.root?null:d,a===this.root?null:a,f,e]);if(a===this.root)this.onAddToRoot(c)},onAddToRoot:function(c){console.log(this,": item ",c," added to root")},onLeaveRoot:function(c){console.log(this,": item ",c," removed from root")},_requeryTop:function(){var c=this.root.children||[];this.store.fetch({query:this.query,
onComplete:l.hitch(this,function(d){this.root.children=d;if(c.length!=d.length||g.some(c,function(a,c){return d[c]!=a}))this.onChildrenChange(this.root,d)})})},onNewItem:function(c,d){this._requeryTop();this.inherited(arguments)},onDeleteItem:function(c){-1!=g.indexOf(this.root.children,c)&&this._requeryTop();this.inherited(arguments)},onSetItem:function(c,d,a,f){this._requeryTop();this.inherited(arguments)}})})},"dijit/tree/_dndSelector":function(){define("dojo/_base/array dojo/_base/declare dojo/_base/kernel dojo/_base/lang dojo/dnd/common dojo/dom dojo/mouse dojo/on dojo/touch ../a11yclick ./_dndContainer".split(" "),
function(g,h,m,l,e,c,d,a,f,n,p){return h("dijit.tree._dndSelector",p,{constructor:function(){this.selection={};this.anchor=null;this.events.push(a(this.tree.domNode,f.press,l.hitch(this,"onMouseDown")),a(this.tree.domNode,f.release,l.hitch(this,"onMouseUp")),a(this.tree.domNode,f.move,l.hitch(this,"onMouseMove")),a(this.tree.domNode,n.press,l.hitch(this,"onClickPress")),a(this.tree.domNode,n.release,l.hitch(this,"onClickRelease")))},singular:!1,getSelectedTreeNodes:function(){var a=[],c=this.selection,
d;for(d in c)a.push(c[d]);return a},selectNone:function(){this.setSelection([]);return this},destroy:function(){this.inherited(arguments);this.selection=this.anchor=null},addTreeNode:function(a,c){this.setSelection(this.getSelectedTreeNodes().concat([a]));c&&(this.anchor=a);return a},removeTreeNode:function(a){var d=g.filter(this.getSelectedTreeNodes(),function(d){return!c.isDescendant(d.domNode,a.domNode)});this.setSelection(d);return a},isTreeNodeSelected:function(a){return a.id&&!!this.selection[a.id]},
setSelection:function(a){var c=this.getSelectedTreeNodes();g.forEach(this._setDifference(c,a),l.hitch(this,function(a){a.setSelected(!1);this.anchor==a&&delete this.anchor;delete this.selection[a.id]}));g.forEach(this._setDifference(a,c),l.hitch(this,function(a){a.setSelected(!0);this.selection[a.id]=a}));this._updateSelectionProperties()},_setDifference:function(a,c){g.forEach(c,function(a){a.__exclude__=!0});a=g.filter(a,function(a){return!a.__exclude__});g.forEach(c,function(a){delete a.__exclude__});
return a},_updateSelectionProperties:function(){var a=this.getSelectedTreeNodes(),c=[],d=[];g.forEach(a,function(a){var f=a.getTreePath();d.push(a);c.push(f)},this);a=g.map(d,function(a){return a.item});this.tree._set("paths",c);this.tree._set("path",c[0]||[]);this.tree._set("selectedNodes",d);this.tree._set("selectedNode",d[0]||null);this.tree._set("selectedItems",a);this.tree._set("selectedItem",a[0]||null)},onClickPress:function(a){if(!(this.current&&this.current.isExpandable&&this.tree.isExpandoNode(a.target,
this.current))){"mousedown"==a.type&&d.isLeft(a)&&a.preventDefault();var c="keydown"==a.type?this.tree.focusedChild:this.current;if(c){var f=e.getCopyKeyState(a),k=c.id;this.singular||a.shiftKey||!this.selection[k]?(this._doDeselect=!1,this.userSelect(c,f,a.shiftKey)):this._doDeselect=!0}}},onClickRelease:function(a){this._doDeselect&&(this._doDeselect=!1,this.userSelect("keyup"==a.type?this.tree.focusedChild:this.current,e.getCopyKeyState(a),a.shiftKey))},onMouseMove:function(){this._doDeselect=
!1},onMouseDown:function(){},onMouseUp:function(){},_compareNodes:function(a,c){if(a===c)return 0;if("sourceIndex"in document.documentElement)return a.sourceIndex-c.sourceIndex;if("compareDocumentPosition"in document.documentElement)return a.compareDocumentPosition(c)&2?1:-1;if(document.createRange){var d=doc.createRange();d.setStartBefore(a);a=doc.createRange();a.setStartBefore(c);return d.compareBoundaryPoints(d.END_TO_END,a)}throw Error("dijit.tree._compareNodes don't know how to compare two different nodes in this browser");
},userSelect:function(a,c,d){if(this.singular)this.anchor==a&&c?this.selectNone():(this.setSelection([a]),this.anchor=a);else if(d&&this.anchor){c=this._compareNodes(this.anchor.rowNode,a.rowNode);d=this.anchor;0>c?c=d:(c=a,a=d);for(d=[];c!=a;)d.push(c),c=this.tree._getNext(c);d.push(a);this.setSelection(d)}else this.selection[a.id]&&c?this.removeTreeNode(a):c?this.addTreeNode(a,!0):(this.setSelection([a]),this.anchor=a)},getItem:function(a){return{data:this.selection[a],type:["treeNode"]}},forInSelectedItems:function(a,
c){c=c||m.global;for(var d in this.selection)a.call(c,this.getItem(d),d,this)}})})},"dijit/tree/_dndContainer":function(){define("dojo/aspect dojo/_base/declare dojo/dom-class dojo/_base/lang dojo/on dojo/touch".split(" "),function(g,h,m,l,e,c){return h("dijit.tree._dndContainer",null,{constructor:function(d,a){this.tree=d;this.node=d.domNode;l.mixin(this,a);this.containerState="";m.add(this.node,"dojoDndContainer");this.events=[e(this.node,c.enter,l.hitch(this,"onOverEvent")),e(this.node,c.leave,
l.hitch(this,"onOutEvent")),g.after(this.tree,"_onNodeMouseEnter",l.hitch(this,"onMouseOver"),!0),g.after(this.tree,"_onNodeMouseLeave",l.hitch(this,"onMouseOut"),!0),e(this.node,"dragstart, selectstart",function(a){a.preventDefault()})]},destroy:function(){for(var c;c=this.events.pop();)c.remove();this.node=this.parent=null},onMouseOver:function(c){this.current=c},onMouseOut:function(){this.current=null},_changeState:function(c,a){var d="dojoDnd"+c;c=c.toLowerCase()+"State";m.replace(this.node,d+
a,d+this[c]);this[c]=a},_addItemClass:function(c,a){m.add(c,"dojoDndItem"+a)},_removeItemClass:function(c,a){m.remove(c,"dojoDndItem"+a)},onOverEvent:function(){this._changeState("Container","Over")},onOutEvent:function(){this._changeState("Container","")}})})},"jimu/serviceBrowserRuleUtils":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/Deferred","jimu/utils","jimu/ServiceBrowserRule"],function(g,h,m,l,e){var c={combineRules:function(c){var a=new e;h.forEach(c,function(c){h.forEach(c.leafTypes,
function(c){0>a.leafTypes.indexOf(c)&&a.leafTypes.push(c)});h.forEach(c.serviceTypes,function(c){0>a.serviceTypes.indexOf(c)&&a.serviceTypes.push(c)})});a.getMatchedRule=function(a){var d=null;h.some(c,function(c){return c.isUrlContainsServiceType(a)?(d=c,!0):!1});return d};a.getItem=function(c){var d=null;return d=(d=a.getMatchedRule(c))?d.getItem(c):a.defaultGetItem(c)};a.getSubItemUrls=function(c){var d=null;return d=(d=a.getMatchedRule(c))?d.getSubItemUrls(c):a.defaultGetSubItemUrls(c)};a.getIconImageName=
function(c,d){var e="";if(c.url){var f=a.getMatchedRule(c.url);f&&"function"===typeof f.getIconImageName&&(e=f.getIconImageName(c,d))}return e};return a},getFeaturelayerServiceBrowserRule:function(d,a,e){d=g.clone(d);var f=["point","polyline","polygon"];g.isArrayLike(d)&&0<d.length?(d=h.filter(d,function(a){return 0<=f.indexOf(a)}),0===d.length&&(d=f)):d=f;return c._getFeaturelayerServiceBrowserRule(d,a,e)},_getFeaturelayerServiceBrowserRule:function(c,a,f){return new e({types:c,leafTypes:["Feature Layer",
"Table"],serviceTypes:["MapServer","FeatureServer"],_groupLayerType:"Group Layer",_featureLayerType:"Feature Layer",_tableType:"Table",getItem:function(a){var c=new m;this.isUrlEndWithServiceType(a,this.serviceTypes)?c=this.defaultGetItem(a):this.getRestInfo(a).then(g.hitch(this,function(d){d=this._getItemByLayerDefinition(a,d);c.resolve(d)}),g.hitch(this,function(a){c.reject(a)}));return c},getSubItemUrls:function(a){var c=new m;return c=this.isUrlEndWithServiceType(a)?this._getSubUrlsByServiceUrl(a):
this._getSubUrlsByGroupUrl(a)},getIconImageName:function(a,c){var d="";"MapServer"===a.type||"FeatureServer"===a.type?d=c?"mapserver_open.png":"mapserver_close.png":a.type===this._groupLayerType?d=c?"group_layer2.png":"group_layer1.png":a.type===this._featureLayerType?(a=l.getTypeByGeometryType(a.definition&&a.definition.geometryType),"point"===a?d="point_layer1.png":"polyline"===a?d="line_layer1.png":"polygon"===a&&(d="polygon_layer1.png")):a.type===this._tableType?d="table.png":"root"===a.type&&
this._currentUrl&&h.some(this.serviceTypes,g.hitch(this,function(a){return l.isStringEndWith(this._currentUrl,"/"+a)}))&&(d=c?"mapserver_open.png":"mapserver_close.png");return d},_getSubUrlsByServiceUrl:function(a){var c=new m;this.getRestInfo(a).then(g.hitch(this,function(d){var e=[];h.forEach(d.layers,g.hitch(this,function(c){0<=c.parentLayerId||e.push(a+"/"+c.id)}));f&&h.forEach(d.tables,g.hitch(this,function(c){0<=c.parentLayerId||e.push(a+"/"+c.id)}));c.resolve(e)}),g.hitch(this,function(a){c.reject(a)}));
return c},_getSubUrlsByGroupUrl:function(a){var c=new m;this.getRestInfo(a).then(g.hitch(this,function(d){var e=[];if(d.type===this._groupLayerType)var f=this._getServiceUrlByLayerUrl(a),e=h.map(d.subLayers||[],g.hitch(this,function(a){return f+"/"+a.id}));c.resolve(e)}),g.hitch(this,function(a){c.reject(a)}));return c},_getItemByLayerDefinition:function(c,d){var e=null,f=d.type;if(f===this._groupLayerType)e={name:d.name,type:f,url:c,definition:d};else if(f===this._featureLayerType||f===this._tableType){var n=
!1;f===this._featureLayerType?n=this._validateEsriGeometryType(d.geometryType):f===this._tableType&&(n=!0);n&&(n=!1,(n=a?l.isFeaturelayerUrlSupportQuery(c,d.capabilities):!0)&&(e={name:d.name,type:f,url:c,definition:d}))}return e},_validateEsriGeometryType:function(a){a=l.getTypeByGeometryType(a);return 0<=this.types.indexOf(a)},_getServiceUrlByLayerUrl:function(a){for(var c="",d=0;d<this.serviceTypes.length;d++){var e=this.serviceTypes[d].toLowerCase(),f=a.toLowerCase().lastIndexOf("/"+e+"/");if(0<=
f){c=a.slice(0,f+e.length+1);break}}return c}})},getGeocodeServiceBrowserRule:function(){return new e({leafTypes:["GeocodeServer"],serviceTypes:["GeocodeServer"]})},getGpServiceBrowserRule:function(){return new e({leafTypes:["GPTask"],serviceTypes:["GPServer"],getItem:function(c){var a=new m;this.isUrlEndWithServiceType(c)?a=this.defaultGetItem(c):this.getRestInfo(c).then(g.hitch(this,function(d){a.resolve({name:d.displayName||d.name,type:"GPTask",url:c,definition:d})}),g.hitch(this,function(c){a.reject(c)}));
return a},getSubItemUrls:function(c){var a=new m;this.isUrlEndWithServiceType(c)?this.getRestInfo(c).then(g.hitch(this,function(d){d=h.map(d.tasks||[],g.hitch(this,function(a){return c+"/"+a}));a.resolve(d)}),g.hitch(this,function(c){a.reject(c)})):a.resolve([]);return a},getIconImageName:function(c,a){a="";"GPServer"===c.type?a="toolbox.png":"GPTask"===c.type&&(a="tool.png");return a}})},getImageServiceBrowserRule:function(c){return new e({leafTypes:["ImageServer"],serviceTypes:["ImageServer"],getItem:function(a){var d=
new m;this.isUrlEndWithServiceType(a)?this.defaultGetItem(a).then(g.hitch(this,function(a){c?l.isImageServiceSupportQuery(a.definition.capabilities)?d.resolve(a):d.resolve(null):d.resolve(a)}),g.hitch(this,function(a){d.reject(a)})):d.resolve(null);return d},getIconImageName:function(a,c){c="";"ImageServer"===a.type&&(c="image_layer.png");return c}})},getQueryableServiceBrowserRule:function(){var d=c.getFeaturelayerServiceBrowserRule(["point","polyline","polygon"],!0,!0),a=c.getImageServiceBrowserRule(!0);
return c.combineRules([d,a])}};return c})},"jimu/ServiceBrowserRule":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/Deferred jimu/utils esri/request esri/IdentityManager".split(" "),function(g,h,m,l,e,c,d){return g([],{leafTypes:null,serviceTypes:null,_restInfoCache:{},constructor:function(a){h.mixin(this,a);h.isArrayLike(this.leafTypes)||(this.leafTypes=[]);h.isArrayLike(this.serviceTypes)||(this.serviceTypes=[])},getItem:function(a){return this.defaultGetItem(a)},getSubItemUrls:function(a){return this.defaultGetSubItemUrls(a)},
getIconImageName:function(a,c){return""},defaultGetItem:function(a){var c=new l;a=a.replace(/\/*$/g,"");if(this.isUrlEndWithServiceType(a)){var d=a.split("/"),e=d[d.length-1],k=d[d.length-2];this.getRestInfo(a).then(h.hitch(this,function(d){c.resolve({name:k,type:e,url:a,definition:d})}),h.hitch(this,function(a){console.error(a);c.reject({errorCode:"NETWORK_ERROR",error:a})}))}else c.resolve(null);return c},defaultGetSubItemUrls:function(a){a=new l;a.resolve([]);return a},getRestInfo:function(a){var e=
new l;a=a.replace(/\/*$/g,"");var g=this._restInfoCache[a];if(g)e.resolve(g);else{var g={url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback",timeout:2E4},p=d.findCredential(a);p&&p.token&&(g.content.token=p.token);c(g).then(h.hitch(this,function(c){this._restInfoCache[a]=c;e.resolve(c)}),function(a){e.reject(a)})}return e},isServiceTypeSupported:function(a){a=a.toLowerCase();return m.some(this.serviceTypes,h.hitch(this,function(c){return c.toLowerCase()===a}))},isUrlEndWithServiceType:function(a){return m.some(this.serviceTypes,
h.hitch(this,function(c){return e.isStringEndWith(a,"/"+c)}))},isUrlContainsServiceType:function(a){a=a.toLowerCase();return m.some(this.serviceTypes,h.hitch(this,function(c){c=c.toLowerCase();return 0<=a.indexOf("/"+c)}))}})})},"jimu/dijit/_GpServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./GpServiceBrowser"],function(g,h,m){return g([h],{baseClass:"jimu-gp-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/myservice/GpServer",
"http://sampleserver6.arcgisonline.com/arcgis/rest/services/Elevation/ESRI_Elevation_World/GPServer/Viewshed"],_createServiceBrowser:function(g){return new m(g)}})})},"jimu/dijit/_BasicServiceChooserContent":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/_BasicServiceChooserContent.html dojo/Evented dojo/Deferred dojo/_base/html dojo/_base/array dojo/_base/lang dojo/on dojo/aspect dojo/promise/all jimu/dijit/URLInput jimu/dijit/LoadingIndicator".split(" "),
function(g,h,m,l,e,c,d,a,f,n,p,k,u,w,r){return g([h,m,l,c],{templateString:e,_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/servicetype"],multiple:!1,url:"",getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},postMixInProperties:function(){this.nls=n.mixin({},window.jimuNls.common);this.nls=n.mixin(this.nls,window.jimuNls.basicServiceChooser)},postCreate:function(){this.inherited(arguments);
a.addClass(this.domNode,"jimu-basic-service-chooser-content");this.multiple=!!this.multiple;this._initSelf();this.exampleTd.innerHTML=this.exampleTd.innerHTML},setUrl:function(a){var c=new d;(this.url=a)&&"string"===typeof this.url?(this.urlInput.set("value",this.url),c=this._onBtnValidateClick()):c.reject();return c},focusInput:function(){this.urlInput.focus()},_initSelf:function(){this._examples&&0<this._examples.length?f.forEach(this._examples,n.hitch(this,function(c){a.create("div",{innerHTML:c,
"class":"example-url"},this.exampleTd)})):a.setStyle(this.exampleTr,"display","none");var c={multiple:this.multiple,_onTreeClick:n.hitch(this,this._onTreeClick)};this.serviceBrowser=this._createServiceBrowser(c);this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup();this.own(k.after(this.urlInput,"validator",n.hitch(this,this._afterUrlValidate)));this.url&&"string"===typeof this.url&&this.urlInput.set("value",this.url);this.own(p(this.serviceBrowser,"error",n.hitch(this,
this._onServiceBrowserError)))},_createServiceBrowser:function(a){},_validateUrl:function(a){a=a.replace(/\/*$/g,"");if((a=a.match(/\/rest\/services\/*(.*)/gi))&&0<a.length)if(a=a[0].replace(/\/rest\/services\/*/,"")){var c=a.split("/");if(1===c.length)return!0;if(2===c.length)return this.serviceBrowser.isServiceTypeSupported(c[1]);if(3<=c.length)return a=this.serviceBrowser.isServiceTypeSupported(c[1]),c=this.serviceBrowser.isServiceTypeSupported(c[2]),a||c}else return!0;else return!1},_afterUrlValidate:function(c){c&&
(c=this.urlInput.get("value"),c=this._validateUrl(c));c?a.removeClass(this.btnValidate,"jimu-state-disabled"):a.addClass(this.btnValidate,"jimu-state-disabled");return c},_onServiceBrowserError:function(a){this._showErrorMessage(a)},_showErrorMessage:function(c){c&&"string"===typeof c?(this.errorNode.innerHTML=c,a.addClass(this.errorSection,"visible")):a.removeClass(this.errorSection,"visible")},_clearErrorMessage:function(){this.errorNode.innerHTML="";a.removeClass(this.errorSection,"visible")},
_onBtnValidateClick:function(){this._clearErrorMessage();var a=new d;if(this.urlInput.validate()){var c=this.urlInput.get("value");this.serviceBrowser.setUrl(c).then(n.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();a.resolve()}),n.hitch(this,function(){this.domNode&&this._checkSelectedItemsNumber();a.reject()}));this.emit("validate-click")}else a.reject();return a},_checkSelectedItemsNumber:function(){0<this.getSelectedItems().length?a.removeClass(this.btnOk,"jimu-state-disabled"):
a.addClass(this.btnOk,"jimu-state-disabled")},_onTreeClick:function(){this._checkSelectedItemsNumber()},_onBtnOkClick:function(){var a=this.getSelectedItems();0<a.length&&this.emit("ok",a)},_onBtnCancelClick:function(){this.emit("cancel")}})})},"jimu/dijit/PageUtils":function(){define([],function(){var g={};g.Orientation={Landscape:{Type:"Landscape",Text:window.jimuNls.report.landscape},Portrait:{Type:"Portrait",Text:window.jimuNls.report.portrait}};g.PageSizes={A0:{Height:46.8,Width:33.1,SizeName:window.jimuNls.report.a0,
MapLayout:"MAP_ONLY"},A1:{Height:33.1,Width:23.4,SizeName:window.jimuNls.report.a1,MapLayout:"MAP_ONLY"},A2:{Height:23.4,Width:16.5,SizeName:window.jimuNls.report.a2,MapLayout:"MAP_ONLY"},A3:{Height:16.5,Width:11.7,SizeName:window.jimuNls.report.a3,MapLayout:"A3"},A4:{Height:11.7,Width:8.3,SizeName:window.jimuNls.report.a4,MapLayout:"A4"},A5:{Height:8.3,Width:5.8,SizeName:window.jimuNls.report.a5,MapLayout:"MAP_ONLY"},Letter_ANSI_A:{Height:11,Width:8.5,SizeName:window.jimuNls.report.letter+" "+window.jimuNls.report.ansi_a,
MapLayout:"Letter ANSI A"},Tabloid_ANSI_B:{Height:17,Width:11,SizeName:window.jimuNls.report.tabloid+" "+window.jimuNls.report.ansi_b,MapLayout:"Tabloid ANSI B"},ANSI_C:{Height:22,Width:17,SizeName:window.jimuNls.report.ansi_c,MapLayout:"MAP_ONLY"},ANSI_D:{Height:34,Width:22,SizeName:window.jimuNls.report.ansi_d,MapLayout:"MAP_ONLY"},ANSI_E:{Height:44,Width:34,SizeName:window.jimuNls.report.ansi_e,MapLayout:"MAP_ONLY"},Legal:{Height:14,Width:8.5,SizeName:window.jimuNls.report.legal,MapLayout:"MAP_ONLY"},
Custom:window.jimuNls.common.custom};g.getPageSizeInPixels=function(g,m){return{Height:g.Height*m,Width:g.Width*m}};return g})},"jimu/dijit/LayerChooserFromMap":function(){define("dojo/on dojo/Evented dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/store/Memory dojo/Deferred dojo/store/Observable dijit/tree/ObjectStoreModel dojo/promise/all dojo/_base/lang dojo/_base/html dojo/_base/array jimu/utils jimu/dijit/_Tree jimu/LayerInfos/LayerInfos jimu/dijit/LoadingIndicator".split(" "),
function(g,h,m,l,e,c,d,a,f,n,p,k,u,w,r,t,v,q){var x=m([l,e,c,h],{templateString:'\x3cdiv style\x3d"width:100%;"\x3e\x3cdiv data-dojo-attach-point\x3d"errorTipSection" class\x3d"error-tip-section"\x3e\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\x3cspan class\x3d"jimu-state-error-text" data-dojo-attach-point\x3d"errTip"\x3e${nls.noLayersTip}\x3c/span\x3e\x3c/div\x3e\x3c/div\x3e',_store:null,_id:0,_treeClass:"layer-chooser-tree",createMapResponse:null,multiple:!1,onlyShowVisible:!1,
updateWhenLayerInfosIsShowInMapChanged:!1,onlyShowWebMapLayers:!1,displayTooltipForTreeNode:!1,postMixInProperties:function(){this.nls=window.jimuNls.basicLayerChooserFromMap},postCreate:function(){this.inherited(arguments);u.addClass(this.domNode,"jimu-basic-layer-chooser-from-map");this.multiple=!!this.multiple;this.shelter=new q({hidden:!0});this.shelter.placeAt(this.domNode);this.shelter.startup();this._createTree();this.basicFilter=k.hitch(this,this.basicFilter);this.filter=x.andCombineFilters([this.basicFilter,
this.filter]);this.createMapResponse&&this.setCreateMapResponse(this.createMapResponse)},basicFilter:function(c){var b=new a;this.onlyShowVisible?b.resolve(c.isShowInMap()):b.resolve(!0);return b},filter:function(c){c=new a;c.resolve(!0);return c},getSelectedItems:function(){var a=this.tree.getSelectedItems();return w.map(a,k.hitch(this,function(a){return this.getHandledItem(a)}))},getAllItems:function(){var a=this.tree.getAllItems(),b=[];w.forEach(a,k.hitch(this,function(a){"root"!==a.id&&(a=this.getHandledItem(a),
b.push(a))}));return b},getHandledItem:function(a){return{name:a.name,layerInfo:a.layerInfo}},_isLeafItem:function(a){return a.isLeaf},setCreateMapResponse:function(a){this.createMapResponse=a;v.getInstance(this.createMapResponse.map,this.createMapResponse.itemInfo).then(k.hitch(this,function(a){this.layerInfosObj=a;this.own(g(this.layerInfosObj,"layerInfosChanged",k.hitch(this,this._onLayerInfosChanged)));this.updateWhenLayerInfosIsShowInMapChanged&&this.own(g(this.layerInfosObj,"layerInfosIsShowInMapChanged",
k.hitch(this,this._onLayerInfosIsShowInMapChanged)));this._buildTree(this.layerInfosObj)}))},_onLayerInfosChanged:function(a,b){this._buildTree(this.layerInfosObj);this.emit("update")},_onLayerInfosIsShowInMapChanged:function(a){this._buildTree(this.layerInfosObj);this.emit("update")},_buildTree:function(a){this._clear();u.setStyle(this.errorTipSection,"display","block");var b=[];this.onlyShowWebMapLayers?(b=a.getLayerInfoArrayOfWebmap(),b=b.concat(a.getTableInfoArrayOfWebmap())):(b=a.getLayerInfoArray(),
b=b.concat(a.getTableInfoArray()));0!==b.length&&(u.setStyle(this.errorTipSection,"display","none"),w.forEach(b,k.hitch(this,function(a){this._addDirectLayerInfo(a)})))},_addDirectLayerInfo:function(a){a&&a.getLayerObject().then(k.hitch(this,function(){this._addItem("root",a)}),k.hitch(this,function(a){console.error(a)}))},_clear:function(){var a=this._store.query({parent:"root"});w.forEach(a,k.hitch(this,function(a){a&&"root"!==a.id&&this._store.remove(a.id)}))},_addItem:function(a,b){var c=null,
d=b.getLayerType(),e=this.filter(b);p({layerType:d,valid:e}).then(k.hitch(this,function(d){if(d.valid){var e=k.hitch(this,function(e,f){this._id++;c={name:b.title||"",parent:a,layerInfo:b,type:d.layerType,layerClass:b.layerObject.declaredClass,id:this._id.toString(),isLeaf:e,hasChildren:f};this._store.add(c)}),f=b.getSubLayers(),g=0===f.length;g?e(g,!1):(f=w.map(f,k.hitch(this,function(a){return this.filter(a)})),p(f).then(k.hitch(this,function(a){(a=w.some(a,function(a){return a}))&&e(g,a)})))}}))},
_getRootItem:function(){return{id:"root",name:"Map Root",type:"root",isLeaf:!1,hasChildren:!0}},_createTree:function(){var a=this._getRootItem(),a=new d({data:[a],getChildren:function(a){return this.query({parent:a.id})}});this._store=new f(a);a=new n({store:this._store,query:{id:"root"},mayHaveChildren:k.hitch(this,this._mayHaveChildren)});this.tree=new t({multiple:this.multiple,model:a,showRoot:!1,isLeafItem:k.hitch(this,this._isLeafItem),style:{width:"100%"},onOpen:k.hitch(this,function(a,c){"root"!==
a.id&&this._onTreeOpen(a,c)}),onClick:k.hitch(this,function(a,c,d){this._onTreeClick(a,c,d);this.emit("tree-click",a,c,d)}),getIconStyle:k.hitch(this,function(a,c){var b=null;if(!a||"root"===a.id)return null;var d={width:"20px",height:"20px",backgroundRepeat:"no-repeat",backgroundPosition:"center center",backgroundImage:""},e=window.location.protocol+"//"+window.location.host+require.toUrl("jimu");if(a=this._getIconInfo(a,c).imageName)d.backgroundImage="url("+e+"/css/images/"+a+")",b=d;return b}),
getIconClass:k.hitch(this,function(a,c){return this._getIconInfo(a,c).className}),getTooltip:k.hitch(this,function(a){return this.displayTooltipForTreeNode?a.layerInfo.title:""})});u.addClass(this.tree.domNode,this._treeClass);this.tree.placeAt(this.shelter.domNode,"before")},_mayHaveChildren:function(a){return a.hasChildren},_getIconInfo:function(a,b){var c="",d="";"ArcGISDynamicMapServiceLayer"===a.type||"ArcGISTiledMapServiceLayer"===a.type?b?(c="mapserver_open.png",d="mapservice-layer-icon open"):
(c="mapserver_close.png",d="mapservice-layer-icon close"):"GroupLayer"===a.type?b?(c="group_layer2.png",d="group-layer-icon open"):(c="group_layer1.png",d="group-layer-icon close"):"FeatureLayer"===a.type?(a=r.getTypeByGeometryType(a.layerInfo.layerObject.geometryType),"point"===a?(c="point_layer1.png",d="point-layer-icon"):"polyline"===a?(c="line_layer1.png",d="line-layer-icon"):"polygon"===a&&(c="polygon_layer1.png",d="polygon-layer-icon")):"Table"===a.type?(c="table.png",d="table-icon"):"ArcGISImageServiceLayer"===
a.type||"ArcGISImageServiceVectorLayer"===a.type?(c="image_layer.png",d="iamge-layer-icon"):b?(c="mapserver_open.png",d="mapservice-layer-icon open"):(c="mapserver_close.png",d="mapservice-layer-icon close");return{imageName:c,className:d}},_onTreeOpen:function(a,b){if("root"!==a.id){var c=[];b=[];c=a.layerInfo.getSubLayers();a.checked||(this.shelter.show(),b=w.map(c,k.hitch(this,function(a){return a.getLayerObject()})),p(b).then(k.hitch(this,function(){this.domNode&&(w.forEach(c,k.hitch(this,function(b){this._addItem(a.id,
b)})),a.checked=!0,this.shelter.hide())}),k.hitch(this,function(a){console.error(a);this.shelter.hide()})))}},_onTreeClick:function(a,b,c){},destroy:function(){this.shelter&&(this.shelter.destroy(),this.shelter=null);this.tree&&this.tree.destroy();this.inherited(arguments)}});x.createFilterByLayerType=function(c){k.isArrayLike(c)||(c=[]);return function(b){var d=new a;if(0===c.length)d.resolve(!0);else{var e=[];b.traversal(function(a){e.push(a.getLayerType())});p(e).then(function(a){for(var b=0;b<
a.length;b++)for(var e=0;e<c.length;e++)if(a[b]===c[e]){d.resolve(!0);return}d.resolve(!1)},function(a){console.error(a);d.reject(a)})}return d}};x.createFeaturelayerFilter=function(a,b,c,d){var e=["point","polyline","polygon"];a&&0<a.length?(a=w.filter(a,function(a){return 0<=e.indexOf(a)}),0===a.length&&(a=e)):a=e;return function(e){var f=e.getLayerType();e=e.getLayerObject();return p({layerType:f,layerObject:e}).then(function(e){var f=e.layerType;e=e.layerObject;if("ArcGISDynamicMapServiceLayer"===
f||"ArcGISTiledMapServiceLayer"===f||"GroupLayer"===f||"FeatureCollection"===f)return!0;if("FeatureLayer"===f){var f=r.getTypeByGeometryType(e.geometryType),f=0<=w.indexOf(a,f),k=x._shouldPassStatisticsCheck(d,e);return e.url?(e=r.isFeaturelayerUrlSupportQuery(e.url,e.capabilities),f&&e&&k):b&&f}return"Table"===f?(f=r.isFeaturelayerUrlSupportQuery(e.url,e.capabilities),e=x._shouldPassStatisticsCheck(d,e),c&&f&&e):!1})}};x.createImageServiceLayerFilter=function(a,b){return function(c){var d=c.getLayerType();
c=c.getLayerObject();return p({layerType:d,layerObject:c}).then(function(c){var d=c.layerType,e=c.layerObject;return"ArcGISImageServiceLayer"===d||"ArcGISImageServiceVectorLayer"===d?a?r.isImageServiceSupportQuery(c.layerObject.capabilities)?b?x._shouldPassStatisticsCheck(b,e):!0:!1:!0:!1})}};x._shouldPassStatisticsCheck=function(a,b){return a?(a=!1,a=b.advancedQueryCapabilities?!!b.advancedQueryCapabilities.supportsStatistics:!!b.supportsStatistics):!0};x.createQueryableLayerFilter=function(a){var b=
x.createFeaturelayerFilter(["point","polyline","polygon"],!1,!0,a);a=x.createImageServiceLayerFilter(!0,a);return x.orCombineFilters([b,a])};x.andCombineFilters=function(a){return x._combineFilters(a,!0)};x.orCombineFilters=function(a){return x._combineFilters(a,!1)};x._combineFilters=function(c,b){return function(d){var e=new a,f=w.map(c,function(a){return a(d)});p(f).then(function(a){var c=!1,c=b?w.every(a,function(a){return a}):w.some(a,function(a){return a});e.resolve(c)},function(a){console.error(a);
e.reject(a)});return e}};return x})},"jimu/dijit/LayerChooserFromMapWithDropbox":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/keys dojo/Evented dojo/Deferred dijit/popup dijit/_WidgetBase dijit/_TemplatedMixin dojo/text!./templates/LayerChooserFromMapWithDropbox.html jimu/LayerInfos/LayerInfos".split(" "),function(g,h,m,l,e,c,d,a,f,n,p,k){return g([f,n,c],{templateString:p,baseClass:"jimu-layer-chooser-from-map-withdropbox",declaredClass:"jimu.dijit.LayerChooserFromMapWithDropbox",
_selectedItem:null,_isLayerChooserShow:!1,layerInfosObj:null,layerChooser:null,customClass:"",postMixInProperties:function(){this.inherited(arguments);this.nls=window.jimuNls.queryableLayerSource},postCreate:function(){this.inherited(arguments);this.layerInfosObj=k.getInstanceSync();this.layerChooser.domNode.style.zIndex=1;this.layerChooser.tree.domNode.style.borderTop="0";this.layerChooser.tree.domNode.style.maxHeight="290px";this.own(l(this.layerChooser,"tree-click",h.hitch(this,this._onTreeClick)));
this.own(l(this.layerChooser,"update",h.hitch(this,this._onLayerChooserUpdate)));this.own(l(document.body,"click",h.hitch(this,this._onBodyClicked)));this.own(l(document.body,"keydown",h.hitch(this,function(a){a.keyCode===e.ENTER&&this._onBodyClicked(a)})));this.own(l(this.layerChooser.domNode,"keydown",h.hitch(this,function(a){a.keyCode===e.ESCAPE&&this.hideLayerChooser()})))},destroy:function(){this.hideLayerChooser();this.layerChooser&&this.layerChooser.destroy();this.layerChooser=null;this.inherited(arguments)},
getLayerChooser:function(){return this.layerChooser},setSelectedLayer:function(a){var c=new d;if(a){var e=this.layerInfosObj.getLayerInfoById(a.id);e?this.layerChooser.filter(e).then(h.hitch(this,function(d){d?(this._onSelectNewItem({layerInfo:e,name:e.title,url:a.url}),c.resolve(!0)):c.resolve(!1)}),h.hitch(this,function(){c.resolve(!1)})):c.resolve(!1)}else this._onSelectNewItem(null),c.resolve(!0);return c},getSelectedItem:function(){return this._selectedItem},getSelectedItems:function(){return[this._selectedItem]},
_onBodyClicked:function(a){a=a.target||a.srcElement;a===this.domNode||m.isDescendant(a,this.domNode)||a===this.layerChooser.domNode||m.isDescendant(a,this.layerChooser.domNode)||this.hideLayerChooser()},_onDropDownClick:function(a){a.stopPropagation();a.preventDefault();this._isLayerChooserShow?this.hideLayerChooser():(this.isActive=!0,this.showLayerChooser())},_onDropDownKeydown:function(a){a.keyCode===e.ENTER&&this._onDropDownClick(a)},_getSelectedItems:function(){return this.layerChooser.getSelectedItems()},
showLayerChooser:function(){this.layerChooser.domNode.style.minWidth=this.domNode.clientWidth+2+"px";a.open({parent:this,popup:this.layerChooser,around:this.domNode});var c=this.layerChooser.domNode.parentNode;c&&(m.addClass(c,"jimu-layer-chooser-from-map-withdropbox-popup"),this.customClass&&m.addClass(c,this.customClass),this.layerChooser.tree.domNode.focus());this._isLayerChooserShow=!0},hideLayerChooser:function(){a.close(this.layerChooser);this._isLayerChooserShow=!1;this.isActive&&(this.dropDownBtn.focus(),
this.isActive=!1)},_onLayerChooserUpdate:function(){this._selectedItem&&this.layerChooser.onlyShowVisible&&!this._selectedItem.layerInfo.isShowInMap()&&(this._selectedItem=null,this.emit("selection-change",[]))},_onSelectNewItem:function(a){var c=h.getObject("layerInfo.id",!1,this._selectedItem)||-1,d=h.getObject("layerInfo.id",!1,a)||-1,c=c!==d;this._selectedItem=a;this.hideLayerChooser();a=h.getObject("layerInfo.title",!1,this._selectedItem)||"";this.layerNameNode.innerHTML=a;m.setAttr(this.layerNameNode,
"title",a);a=h.getObject("layerInfo.layerObject",!1,this._selectedItem);c&&this.emit("selection-change",[a])},_onTreeClick:function(){var a=this._getSelectedItems();this._onSelectNewItem(0<a.length?a[0]:null)}})})},"widgets/Screening/setting/FieldPicker":function(){define("dojo/_base/declare dijit/_WidgetsInTemplateMixin dijit/form/Select dijit/form/ValidationTextBox dojo/_base/array dojo/_base/lang dojo/_base/html dojo/on jimu/BaseWidget dojo/text!./FieldPicker.html dojo/Evented jimu/dijit/SimpleTable dojo/query dojo/dom-class jimu/utils".split(" "),
function(g,h,m,l,e,c,d,a,f,n,p,k,u,w,r){return g([f,h,p],{templateString:n,baseClass:"jimu-widget-screening-setting",_fieldsTable:null,_entireFieldsArr:[],_selectedFieldsArr:[],_entireFieldObj:{},_configuredField:null,_configuredLabel:null,constructor:function(a){this._fieldsTable=null;this._entireFieldsArr=[];this._selectedFieldsArr=[];this._entireFieldObj={};this._configuredLabel=this._configuredField=null;c.mixin(this,a)},postMixInProperties:function(){this.nls.common={};c.mixin(this.nls.common,
window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this._init()},_init:function(){this._clearData();this._addValidFields();this._createFieldsTable();this._attachEventsToElement();this._displayPreviousConfiguredFields()},_clearData:function(){this._entireFieldsArr=[];this._selectedFieldsArr=[]},_displayPreviousConfiguredFields:function(){var a;if(this.selectedFields)for(a in this.selectedFields)this._configuredField=a,this._configuredLabel=this.selectedFields[a].label,this.btnAddField.click()},
_addValidFields:function(){var a;a="esriFieldTypeInteger esriFieldTypeSingle esriFieldTypeSmallInteger esriFieldTypeDouble esriFieldTypeString esriFieldTypeDate".split(" ");e.forEach(this.featureLayer.fields,c.hitch(this,function(d){this._entireFieldObj[d.name]=d;-1<a.indexOf(d.type)&&(this._entireFieldsArr.push(d.name),this._entireFieldObj[d.name]=c.clone(d),this.selectedFields&&this.selectedFields[d.name]&&(this._entireFieldObj[d.name].label=this.selectedFields[d.name].label))}));0===this._entireFieldsArr.length&&
this._disableAddFieldButton()},_createFieldsTable:function(){this._fieldsTable=new k({fields:[{name:"layer",title:this.nls.analysisTab.addFieldsNameTitle,"class":"label",type:"empty",width:"40%"},{name:"field",title:this.nls.common.label,type:"empty",editable:"true",width:"40%"},{name:"actions",title:this.nls.common.actions,"class":"actions",type:"actions",actions:["up","down","delete"],width:"20%"}]});this._fieldsTable.placeAt(this.fieldTable);d.setStyle(this._fieldsTable.domNode,{height:"100%"});
this._fieldsTable.startup()},_attachEventsToElement:function(){this.own(a(this.btnAddField,"click",c.hitch(this,function(){var a;w.contains(this.btnAddField,"esriCTDisabled")||(a=this._getDistinctFields(this._entireFieldsArr,this._selectedFieldsArr),this._addFieldsRow(a))})));this.own(a(this._fieldsTable,"row-delete",c.hitch(this,function(a){this._deleteFieldRow(a)})))},_addFieldsRow:function(a){var c,d,e;c=this._fieldsTable.addRow({});c.success&&c.tr&&(c=c.tr,e=u(".simple-table-cell",c),d=e[0],e=
e[1],this._addFieldDropdown(a,d,c),this._addLabelTextbox(e,c))},_deleteFieldRow:function(a){var c;w.remove(this.btnAddField,"esriCTDisabled");c=this._selectedFieldsArr.indexOf(a.fieldDropdownInstance.value);-1<c&&this._selectedFieldsArr.splice(c,1);this._addSelectedFieldInOtherDropdown(a.fieldDropdownInstance.value,null)},_addFieldDropdown:function(d,e,f){d=this._getDistinctFieldsOptionsObj(d);d=new m({"class":"esriCTFieldChooserDropdown",options:d});d.placeAt(e);d.startup();this._configuredField&&
(d.set("value",this._configuredField),this._configuredField=null);f.fieldDropdownInstance=d;this.own(a(d,"change",c.hitch(this,function(a){var c;c=this._selectedFieldsArr[f.rowIndex];this._selectedFieldsArr[f.rowIndex]=a;this._addSelectedFieldInOtherDropdown(c,a);this._removeSelectedFieldFromOtherDropdown(a)})));this._selectedFieldsArr.push(d.value);this._removeSelectedFieldFromOtherDropdown(d.value);this._disableAddFieldButton()},_disableAddFieldButton:function(){this._selectedFieldsArr.length===
this._entireFieldsArr.length&&w.add(this.btnAddField,"esriCTDisabled")},_addLabelTextbox:function(a,c){var d;d=new l({"class":"esriCTFieldValidationTextBox"});d.placeAt(a);d.startup();this._configuredLabel&&(d.set("value",this._configuredLabel),this._configuredLabel=null);c.fieldLabelInstance=d},_getDistinctFieldsOptionsObj:function(a){var d=[];e.forEach(a,c.hitch(this,function(a){d.push({label:this._entireFieldObj[a].alias||this._entireFieldObj[a].name,value:a})}));return d},_removeSelectedFieldFromOtherDropdown:function(a){var d;
d=this._fieldsTable.getRows();e.forEach(d,c.hitch(this,function(c){a!==c.fieldDropdownInstance.value&&c.fieldDropdownInstance.removeOption(a)}))},_addSelectedFieldInOtherDropdown:function(a,d){var f;f=this._fieldsTable.getRows();e.forEach(f,c.hitch(this,function(c){d!==c.fieldDropdownInstance.value&&c.fieldDropdownInstance.addOption({label:this._entireFieldObj[a].alias,value:a})}))},okButtonClicked:function(){var a,d;d={};a=this._fieldsTable.getRows();0===a.length?this.selectedFields=null:(e.forEach(a,
c.hitch(this,function(a){this._entireFieldObj[a.fieldDropdownInstance.value].label=r.stripHTML(c.trim(a.fieldLabelInstance.value));d[a.fieldDropdownInstance.value]=this._entireFieldObj[a.fieldDropdownInstance.value]})),this.selectedFields=d);return this.selectedFields},_getDistinctFields:function(a,c){return a.filter(function(a){return 0>c.indexOf(a)})}})})},"widgets/Screening/setting/SearchSourceSettings":function(){define("dojo/_base/declare jimu/BaseWidgetSetting dijit/_WidgetsInTemplateMixin dojo/Evented dojo/text!./SearchSourceSettings.html dojo/_base/html jimu/dijit/SimpleTable ./QuerySourceSetting ./LocatorSourceSetting jimu/LayerInfos/LayerInfos ../searchSourceUtils jimu/utils dojo/when esri/lang dojo/_base/lang dojo/_base/array dojo/query dojo/on dojo/dom-class jimu/dijit/CheckBox dojo/domReady!".split(" "),
function(g,h,m,l,e,c,d,a,f,n,p,k,u,w,r,t,v,q,x,z){return g([h,m,l],{baseClass:"jimu-widget-screening-search-source-settings",templateString:e,startup:function(){this.inherited(arguments)},postCreate:function(){this.inherited(arguments);this.own(q(this.menuItemClickNode,"click",r.hitch(this,this._onMenuItemClick)));this._createSourceListTable();this.showInfoWindowOnSelect=new z({checked:!1,label:this.nls.searchSourceSetting.generalSettingCheckboxLabel},this.showInfoWindowOnSelectNode);this.config&&
this.config.sources||(this.config.sources=[]);n.getInstance(this.map,this.map.itemInfo).then(r.hitch(this,function(a){this.layerInfosObj=a;p.setMap(this.map);p.setLayerInfosObj(this.layerInfosObj);p.setAppConfig(this.appConfig);u(p.getConfigInfo(this.config)).then(r.hitch(this,this._loadConfig))}))},_loadConfig:function(a){this.domNode&&this.setConfig(a)},setConfig:function(a){this.config=a;a=a.sources;this.allPlaceholder.set("value",k.stripHTML(this.config.allPlaceholder));this.showInfoWindowOnSelect.setValue(w.isDefined(this.config.showInfoWindowOnSelect)?
!!this.config.showInfoWindowOnSelect:!0);t.forEach(a,r.hitch(this,function(a,b){var c=this.sourceList.addRow({name:a.name||""});c&&c.success?(this._setRelatedConfig(c.tr,a),0===b&&setTimeout(r.hitch(this,function(){this.sourceList.selectRow(c.tr)}),100)):console.error("add row failed ",c)}))},getConfig:function(){if(this._currentSourceSetting)if(this._currentSourceSetting.isValidConfig())this._closeSourceSetting();else return null;var a={allPlaceholder:k.stripHTML(this.allPlaceholder.get("value")),
showInfoWindowOnSelect:this.showInfoWindowOnSelect.checked},c=this.sourceList.getRows(),d=[];t.forEach(c,r.hitch(this,function(a){var b=this._getRelatedConfig(a);delete b._definition;this._removeRelatedConfig(a);d.push(b)}));a.sources=d;return a},destroy:function(){p.setMap(null);p.setLayerInfosObj(null);p.setAppConfig(null);this.inherited(arguments)},_onAllPlaceholderBlur:function(){this.allPlaceholder.set("value",k.stripHTML(this.allPlaceholder.get("value")))},_createSourceListTable:function(){this.sourceList=
new d({autoHeight:!1,selectable:!0,fields:[{name:"name",title:this.nls.common.name,width:"auto",type:"text",editable:!1},{name:"actions",title:"",width:"70px",type:"actions",actions:["up","down","delete"]}]},this.sourceList);c.setStyle(this.sourceList.domNode,"height","100%");this.sourceList.startup();this.own(q(this.sourceList,"row-select",r.hitch(this,this._onSourceItemSelected)));this.own(q(this.sourceList,"row-delete",r.hitch(this,this._onSourceItemRemoved)))},_onSourceItemRemoved:function(a){this._currentSourceSetting&&
this._currentSourceSetting.getRelatedTr()===a&&(this._currentSourceSetting.destroy(),this._currentSourceSetting=null)},_onSourceItemSelected:function(a){var b=this._getRelatedConfig(a),c=this._currentSourceSetting&&this._currentSourceSetting.tr;b&&a!==c&&(this._currentSourceSetting&&!this._currentSourceSetting.isValidConfig()?(this._currentSourceSetting.showValidationTip(),this.sourceList.selectRow(c)):(x.remove(this.searchSources,"esriCTSourcesExtraHeight"),"query"===b.type?this._createNewQuerySourceSettingFromSourceList(b,
b._definition||{},a):"locator"===b.type&&this._createNewLocatorSourceSettingFromSourceList(b,b._definition||{},a)))},_setRelatedConfig:function(a,c){v(a).data("config",r.clone(c))},_getRelatedConfig:function(a){return v(a).data("config")[0]},_removeRelatedConfig:function(a){return v(a).removeData("config")},_onMenuItemClick:function(a){a=a&&a.target&&c.getAttr(a.target,"type");this._currentSourceSetting&&!this._currentSourceSetting.isValidConfig()?this.emit("invalid-source-setting"):(x.remove(this.searchSources,
"esriCTSourcesExtraHeight"),"locator"===a?this._addNewLocator():"query"===a&&this._addNewQuerySource())},_addNewLocator:function(){this._createNewLocatorSourceSettingFromMenuItem({},{})},_addNewQuerySource:function(){this._createNewQuerySourceSettingFromMenuItem({},{})},_createNewLocatorSourceSettingFromMenuItem:function(a,c){var b=new f({nls:r.mixin(this.nls.searchSourceSetting,window.jimuNls.units),map:this.map});b.setDefinition(c);b.setConfig({url:a.url||"",name:a.name||"",singleLineFieldName:a.singleLineFieldName||
"",placeholder:a.placeholder||"",countryCode:a.countryCode||"",maxSuggestions:a.maxSuggestions||6,maxResults:a.maxResults||6,searchInCurrentMapExtent:!!a.searchInCurrentMapExtent,type:"locator"});b._openLocatorChooser();b.own(q(b,"select-locator-url-ok",r.hitch(this,function(a){(a=this.sourceList.addRow({name:a.name||"New Geocoder"},this.sourceList.getRows().length))&&a.success&&(this._currentSourceSetting&&this._closeSourceSetting(),b.setRelatedTr(a.tr),b.placeAt(this.sourceSettingNode),this.sourceList.selectRow(a.tr),
this._currentSourceSetting=b)})));b.own(q(b,"reselect-locator-url-ok",r.hitch(this,function(a){var b=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(b,{name:a.name})})));b.own(q(b,"select-locator-url-cancel",r.hitch(this,function(){this._currentSourceSetting!==b&&(b.destroy(),b=null)})))},_createNewLocatorSourceSettingFromSourceList:function(a,c,d){this._currentSourceSetting&&this._closeSourceSetting();this._currentSourceSetting=new f({nls:r.mixin(this.nls.searchSourceSetting,window.jimuNls.units),
map:this.map});this._currentSourceSetting.own(q(this._currentSourceSetting,"enable-local-search",r.hitch(this,function(){x.add(this.searchSources,"esriCTSourcesExtraHeight")})));this._currentSourceSetting.own(q(this._currentSourceSetting,"disable-local-search",r.hitch(this,function(){x.remove(this.searchSources,"esriCTSourcesExtraHeight")})));this._currentSourceSetting.setDefinition(c);this._currentSourceSetting.setConfig({url:a.url||"",name:a.name||"",singleLineFieldName:a.singleLineFieldName||"",
placeholder:a.placeholder||"",countryCode:a.countryCode||"",maxSuggestions:a.maxSuggestions||6,maxResults:a.maxResults||6,searchInCurrentMapExtent:!!a.searchInCurrentMapExtent,enableLocalSearch:!!a.enableLocalSearch,localSearchMinScale:a.localSearchMinScale,localSearchDistance:a.localSearchDistance,type:"locator"});this._currentSourceSetting.setRelatedTr(d);this._currentSourceSetting.placeAt(this.sourceSettingNode);this._currentSourceSetting.own(q(this._currentSourceSetting,"reselect-locator-url-ok",
r.hitch(this,function(a){var b=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(b,{name:a.name})})))},_closeSourceSetting:function(){var a=this._currentSourceSetting.getRelatedTr(),c=this._currentSourceSetting.getConfig();c._definition=this._currentSourceSetting.getDefinition();this._setRelatedConfig(a,c);this.sourceList.editRow(a,{name:c.name});this._currentSourceSetting.destroy()},_createNewQuerySourceSettingFromMenuItem:function(b,c){var d=new a({nls:this.nls.searchSourceSetting,
map:this.map,appConfig:this.appConfig});d.setDefinition(c);d.setConfig({url:b.url,name:b.name||"",layerId:b.layerId,placeholder:b.placeholder||"",searchFields:b.searchFields||[],displayField:b.displayField||c.displayField||"",exactMatch:!!b.exactMatch,maxSuggestions:b.maxSuggestions||6,maxResults:b.maxResults||6,searchInCurrentMapExtent:!!b.searchInCurrentMapExtent,type:"query"});d._openQuerySourceChooser();d.own(q(d,"select-query-source-ok",r.hitch(this,function(a){(a=this.sourceList.addRow({name:a.name},
0))&&a.success&&(this._currentSourceSetting&&this._closeSourceSetting(),d.setRelatedTr(a.tr),d.placeAt(this.sourceSettingNode),this.sourceList.selectRow(a.tr),this._currentSourceSetting=d)})));d.own(q(d,"reselect-query-source-ok",r.hitch(this,function(a){var b=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(b,{name:a.name})})));d.own(q(d,"select-query-source-cancel",r.hitch(this,function(){this._currentSourceSetting!==d&&(d.destroy(),d=null)})))},_createNewQuerySourceSettingFromSourceList:function(b,
c,d){this._currentSourceSetting&&this._closeSourceSetting();this._currentSourceSetting=new a({nls:this.nls.searchSourceSetting,map:this.map,appConfig:this.appConfig});this._currentSourceSetting.placeAt(this.sourceSettingNode);this._currentSourceSetting.setDefinition(c);this._currentSourceSetting.setConfig({url:b.url,name:b.name||"",layerId:b.layerId,placeholder:b.placeholder||"",searchFields:b.searchFields||[],displayField:b.displayField||c.displayField||"",exactMatch:!!b.exactMatch,maxSuggestions:b.maxSuggestions||
6,maxResults:b.maxResults||6,searchInCurrentMapExtent:!!b.searchInCurrentMapExtent,type:"query"});this._currentSourceSetting.setRelatedTr(d);this._currentSourceSetting.own(q(this._currentSourceSetting,"reselect-query-source",r.hitch(this,function(a){var b=this._currentSourceSetting.getRelatedTr();this.sourceList.editRow(b,{name:a.name})})))}})})},"widgets/Screening/setting/QuerySourceSetting":function(){define("dojo/_base/declare dojo/_base/html dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./QuerySourceSetting.html dojo/_base/lang dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented jimu/dijit/_FeaturelayerSourcePopup jimu/portalUrlUtils esri/request esri/lang jimu/utils jimu/dijit/Popup jimu/dijit/CheckBox jimu/dijit/LoadingShelter dijit/form/ValidationTextBox dojo/NodeList-data".split(" "),
function(g,h,m,l,e,c,d,a,f,n,p,k,u,w,r,t,v,q,x){return g([m,l,e,k],{baseClass:"jimu-widget-screening-query-source-setting",templateString:c,_layerDefinition:null,_fieldsCheckBox:null,_layerId:null,_suggestible:!1,_clickSet:!1,nls:null,appConfig:null,map:null,tr:null,config:null,fieldsPopup:null,constructor:function(a){this._layerId=this._fieldsCheckBox=this._layerDefinition=null;this._clickSet=this._suggestible=!1;this.fieldsPopup=this.config=this.tr=this.map=this.appConfig=this.nls=null;d.mixin(this,
a)},postMixInProperties:function(){this.nls.common={};this.nls.common=window.jimuNls.common},postCreate:function(){this.inherited(arguments);this.own(f(this.setSourceBtnClickNode,"click",d.hitch(this,this._onSetSourceClick)));this.own(f(this.sourceName,"Blur",d.hitch(this,this._onSourceNameBlur)));this.own(f(this.placeholder,"Blur",d.hitch(this,this._onPlaceholderBlur)));this.own(f(this.fieldsSelectorNode,"click",d.hitch(this,this._onFieldsSelectorClick)));this.exactMatch=new x({checked:!1,label:this.nls.exactMatch},
this.exactMatch);this.searchInCurrentMapExtent=new x({checked:!1,label:this.nls.searchInCurrentMapExtent},this.searchInCurrentMapExtent);this._layerDefinition={};this._fieldsCheckBox=[];this._setMessageNodeContent("")},setDefinition:function(a){this._layerDefinition=a||{}},getDefinition:function(){return this._layerDefinition},setRelatedTr:function(a){this.tr=a},getRelatedTr:function(){return this.tr},setConfig:function(a){if("[object Object]"===Object.prototype.toString.call(a)){var b=a.url;b&&(this.config=
a,this.shelter.show(),this._layerDefinition.url!==b?this._getDefinitionFromRemote(b).then(d.hitch(this,function(a){b&&a&&"error"!==a.type?(this._layerDefinition=a,this._layerDefinition.url=b,this._setSourceItems(),this._setMessageNodeContent("")):b&&a&&"error"===a.type&&(this._setSourceItems(),this._disableSourceItems(),this._setMessageNodeContent(t.substitute({URL:a.url},d.clone(this.nls.invalidUrlTip)),!0));this.shelter.hide()})):(this._setMessageNodeContent(""),this._setSourceItems(),this.shelter.hide()))}},
isValidConfig:function(){var a=this.getConfig();return a.url&&a.name&&a.displayField?!0:!1},showValidationTip:function(){this._showValidationErrorTip(this.sourceUrl);this._showValidationErrorTip(this.sourceName)},getConfig:function(){return{layerId:this._layerId,url:this.sourceUrl.get("value"),name:v.stripHTML(this.sourceName.get("value")),placeholder:v.stripHTML(this.placeholder.get("value")),searchFields:this._getSearchFields(),displayField:this.displayField.get("value"),exactMatch:this.exactMatch.getValue(),
searchInCurrentMapExtent:this.searchInCurrentMapExtent.checked,maxSuggestions:this.maxSuggestions.get("value")||6,maxResults:this.maxResults.get("value")||6,type:"query"}},destroy:function(){this.inherited(arguments);this.fieldsPopup&&(this.fieldsPopup.close(),this.fieldsPopup=null);this.tr=this.nls=this.config=this._layerDefinition=null},_onSourceNameBlur:function(){this.sourceName.set("value",v.stripHTML(this.sourceName.get("value")))},_onPlaceholderBlur:function(){this.placeholder.set("value",
v.stripHTML(this.placeholder.get("value")))},_disableSourceItems:function(){this.sourceName.set("disabled",!0);this.placeholder.set("disabled",!0);this.searchFields.set("disabled",!0);h.setStyle(this.fieldsSelectorNode,"display","none");this.displayField.set("disabled",!0);this.maxSuggestions.set("disabled",!0);this.maxResults.set("disabled",!0)},_enableSourceItems:function(){this.sourceName.set("disabled",!1);this.placeholder.set("disabled",!1);this.searchFields.set("disabled",!1);h.setStyle(this.fieldsSelectorNode,
"display","inline-block");this.displayField.set("disabled",!1);this.maxSuggestions.set("disabled",!1);this.maxResults.set("disabled",!1)},_setSourceItems:function(){this.sourceUrl.set("value",this.config.url);this.sourceName.set("value",v.stripHTML(this.config.name||""));this.placeholder.set("value",v.stripHTML(this.config.placeholder||""));this._setSearchFields2Node();this.searchFields.set("value",this._getSearchFieldsAlias());this._setDisplayFieldOptions();this.displayField.set("value",this.config.displayField||
"");this.exactMatch.setValue(!!this.config.exactMatch);this.searchInCurrentMapExtent.setValue(!!this.config.searchInCurrentMapExtent);this.maxSuggestions.set("value",this.config.maxSuggestions||6);this.maxResults.set("value",this.config.maxResults||6);this._layerId=this.config.layerId;(this._suggestible=this._layerDefinition&&this._layerDefinition.advancedQueryCapabilities&&this._layerDefinition.advancedQueryCapabilities.supportsPagination)?this._hideSuggestibleTips():this._showSuggestibleTips();
this._enableSourceItems()},_getDefinitionFromRemote:function(a){var b=new p,c=r({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});this.own(c);c.then(d.hitch(this,function(a){b.resolve(a)}),d.hitch(this,function(c){console.error(c);b.resolve({type:"error",url:this._getRequestUrl(a)})}));return b.promise},_setMessageNodeContent:function(a,b){h.empty(this.messageNode);a.nodeType||(a=h.toDom(a));h.place(a,this.messageNode);b?h.setStyle(this.messageTr,"display",""):h.setStyle(this.messageTr,
"display","none")},_getRequestUrl:function(a){var b=window.location.protocol;return"http:"===b?w.setHttpProtocol(a):"https:"===b?w.setHttpsProtocol(a):a},_setSearchFields2Node:function(){var c=null,b=this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length;this.config&&this.config.searchFields&&0<this.config.searchFields.length||(c=[]);if(b)var d=this._layerDefinition.fields,c=a.filter(this.config.searchFields,function(b){return a.some(d,function(a){return a.name===
b})});else c=this.config.searchFields;this.searchFields.set("_fields",c)},_setDisplayFieldOptions:function(){var c=[];this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length?c=a.map(this._layerDefinition.fields,function(a){return{label:a.alias||a.name||"",value:a.name||""}}):this.config&&this.config.displayField&&(c=[{label:this.config.displayField,value:this.config.displayField}]);this.displayField.set("options",c)},_getSearchFieldsAlias:function(){var c=this._getSearchFields();
if(!(c&&0<c.length))return"";if(this._layerDefinition&&this._layerDefinition.fields&&0<this._layerDefinition.fields.length){for(var b=this._layerDefinition.fields,d=a.map(b,function(a){return a&&a.name}),e=[],f=0,k=c.length;f<k;f++){var g=d.indexOf(c[f]);-1<g&&(b[g].alias?e.push(b[g].alias):e.push(b[g].name))}return e.join(",")}return c.join(",")},_getSearchFields:function(){return this.searchFields.get("_fields")},_setSearchFields:function(a){this.searchFields.set("_fields",a)},_onSetSourceClick:function(){this._clickSet=
!0;this._openServiceChooser()},_openQuerySourceChooser:function(){this._clickSet=!1;this._openServiceChooser()},_openServiceChooser:function(){var a=new u({titleLabel:this.nls.setLayerSource,dijitArgs:{multiple:!1,createMapResponse:this.map.webMapResponse,portalUrl:this.appConfig.portalUrl,style:{height:"100%"}}});f.once(a,"ok",d.hitch(this,function(b){a.close();this.setDefinition(b.definition||{});this.setConfig({layerId:b.layerInfo&&b.layerInfo.id||null,url:b.url,name:b.name||"",placeholder:"",
searchFields:[],displayField:this._layerDefinition.displayField||"",exactMatch:!1,maxSuggestions:6,maxResults:6,type:"query"});a=null;this._setMessageNodeContent("");this._clickSet?this.emit("reselect-query-source-ok",b):this.emit("select-query-source-ok",b)}));f.once(a,"cancel",d.hitch(this,function(){a.close();a=null;this.emit("select-query-source-cancel")}))},_onFieldsSelectorClick:function(){var c=h.create("div",{style:{maxHeight:"480px"}}),b=this._layerDefinition.fields;this._fieldsCheckBox=
[];a.forEach(b,d.hitch(this,function(a,b){var d=new x({checked:this._isSearchable(a),label:a.alias||a.name});h.addClass(d.domNode,"esriCTSearchSourceFieldCheckbox");h.addClass(d.labelNode,"jimu-ellipsis");h.setAttr(d.domNode,{title:a.alias||a.name});0===b%3&&(window.isRTL?h.setStyle(d.domNode,"marginRight",0):h.setStyle(d.domNode,"marginLeft",0));d.placeAt(c);n(d.domNode).data("fieldName",a.name);this._fieldsCheckBox.push(d)}));this.fieldsPopup=new q({titleLabel:this.nls.setSearchFields,autoHeight:!0,
content:c,container:window.jimuConfig.layoutId,width:640,maxHeight:600,buttons:[{label:this.nls.common.ok,onClick:d.hitch(this,"_onSearchFieldsOk")},{label:this.nls.common.cancel}],onClose:d.hitch(this,function(){this.fieldsPopup=null})});h.addClass(this.fieldsPopup.domNode,this.baseClass)},_onSearchFieldsOk:function(){var c=[];a.forEach(this._fieldsCheckBox,function(a){if(a.getValue()){var b=n(a.domNode).data("fieldName");c.push(b[0]);n(a.domNode).removeData()}});this._setSearchFields(c);this.searchFields.set("value",
this._getSearchFieldsAlias());this.fieldsPopup.close()},_isSearchable:function(c){var b=this._getSearchFields();return a.some(b,d.hitch(this,function(a){return c.name===a}))},_showSuggestibleTips:function(){h.removeClass(this.tipsNode,"esriCTHidden");h.setStyle(this.maxSuggestions.domNode,"display","none")},_hideSuggestibleTips:function(){h.addClass(this.tipsNode,"esriCTHidden");h.setStyle(this.maxSuggestions.domNode,"display","block")},_showValidationErrorTip:function(a){if(!a.validate()&&a.domNode&&
a.focusNode){var b=a.get("disabled");b&&a.set("disabled",!1);a.focusNode.focus();setTimeout(d.hitch(this,function(){a.focusNode.blur();b&&a.set("disabled",!0);a=null}),100)}}})})},"jimu/dijit/_FeaturelayerSourcePopup":function(){define("dojo/_base/declare dojo/Evented dojo/on dojo/_base/lang dojo/_base/html jimu/dijit/Popup jimu/dijit/FeaturelayerSource jimu/dijit/LoadingIndicator esri/request".split(" "),function(g,h,m,l,e,c,d,a,f){return g([c,h],{width:830,height:560,titleLabel:"",dijitArgs:null,
postCreate:function(){this.inherited(arguments);e.addClass(this.domNode,"jimu-featurelayer-source-popup");this._initFls();this._initLoading()},getSelectedRadioType:function(){return this.fls.getSelectedRadioType()},_initFls:function(){this.fls=new d(this.dijitArgs);this.fls.placeAt(this.contentContainerNode);this.fls.startup();this.own(m(this.fls,"ok",l.hitch(this,function(a){if(0!==a.length){var c=a[0];if(c.definition)try{c.definition.name=c.name,c.definition.url=c.url,this.emit("ok",c)}catch(k){console.error(k)}else this.loading.show(),
f({url:c.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(l.hitch(this,function(a){if(this.domNode){this.loading.hide();c.definition=a;try{c.definition.name=c.name,c.definition.url=c.url,this.emit("ok",c)}catch(u){console.error(u)}}}),l.hitch(this,function(a){console.error(a);this.domNode&&this.loading.hide()}))}})));this.own(m(this.fls,"cancel",l.hitch(this,function(){try{this.emit("cancel")}catch(n){console.error(n)}})))},_initLoading:function(){this.loading=new a({hidden:!0});
this.loading.placeAt(this.domNode);this.loading.startup()}})})},"jimu/dijit/FeaturelayerSource":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerSource.html dojo/_base/lang dojo/_base/html dojo/on dojo/Evented jimu/dijit/RadioBtn jimu/dijit/_FeaturelayerChooserWithButtons jimu/dijit/FeaturelayerChooserFromPortal jimu/dijit/_FeaturelayerServiceChooserContent jimu/portalUrlUtils".split(" "),function(g,h,m,l,
e,c,d,a,f,n,p,k,u,w){return g([h,m,l,f],{templateString:e,baseClass:"jimu-layer-source jimu-featurelayer-source",declaredClass:"jimu.dijit.FeaturelayerSource",nls:null,multiple:!1,createMapResponse:null,portalUrl:null,layerChooserFromMap:null,postMixInProperties:function(){this.nls=window.jimuNls.featureLayerSource;this.portalUrl=w.getStandardPortalUrl(this.portalUrl)},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedRadioType:function(){if(this.mapRadio.checked)return"map";
if(this.portalRadio.checked)return"portal";if(this.urlRadio.checked)return"url"},getSelectedItems:function(){var a=[];this.mapRadio.checked?a=this.flcMap.getSelectedItems():this.portalRadio.checked?a=this.flcPortal.getSelectedItems():this.urlRadio.checked&&(a=this.flcUrl.getSelectedItems());return a},startup:function(){this.inherited(arguments);this.flcMap.startup();this.flcPortal.startup();this.flcUrl.startup()},_initSelf:function(){this._initRadios();this._createFeaturelayerChooserWithButtons();
this._createFeaturelayerChooserFromPortal();this._createFeaturelayerServiceChooserContent();this._onRadioClicked()},_createFeaturelayerChooserWithButtons:function(){this.flcMap=new p({style:{width:"100%",height:"100%"},multiple:this.multiple,createMapResponse:this.createMapResponse,onlyShowWebMapLayers:!0,layerChooserFromMap:this.layerChooserFromMap});this.flcMap.operationTip=this.nls.selectLayer;this.flcMap.placeAt(this.flcContainer);this.own(a(this.flcMap,"ok",c.hitch(this,function(a){a&&0<a.length&&
this.emit("ok",a)})));this.own(a(this.flcMap,"cancel",c.hitch(this,function(){this.emit("cancel")})))},_createFeaturelayerChooserFromPortal:function(){this.flcPortal=new k({multiple:this.multiple,portalUrl:this.portalUrl,style:{width:"100%",height:"100%"}});this.flcPortal.operationTip=this.nls.chooseItem;this.flcPortal.placeAt(this.hflcContainer);this.own(a(this.flcPortal,"next",c.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem+" -\x3e "+this.nls.chooseLayer;this._updateOperationTip()})));
this.own(a(this.flcPortal,"back",c.hitch(this,function(){this.flcPortal.operationTip=this.nls.chooseItem;this._updateOperationTip()})));this.own(a(this.flcPortal,"ok",c.hitch(this,function(a){a&&0<a.length&&this.emit("ok",a)})));this.own(a(this.flcPortal,"cancel",c.hitch(this,function(){this.emit("cancel")})));0<=(this.portalUrl||"").toLowerCase().indexOf(".arcgis.com")?this.portalLabel.innerHTML=this.nls.selectFromOnline:this.portalLabel.innerHTML=this.nls.selectFromPortal},_createFeaturelayerServiceChooserContent:function(){this.flcUrl=
new u({multiple:this.multiple,style:{width:"100%",height:"100%"}});this.flcUrl.operationTip=this.nls.setServiceUrl;this.flcUrl.placeAt(this.flscContainer);this.own(a(this.flcUrl,"ok",c.hitch(this,function(a){a&&0<a.length&&this.emit("ok",a)})));this.own(a(this.flcUrl,"cancel",c.hitch(this,function(){this.emit("cancel")})))},_initRadios:function(){var d="featureLayerSourceRadios_"+this._getRandomString(),e=c.hitch(this,this._onRadioClicked);this.mapRadio=new n({group:d,onStateChange:e,checked:!0});
this.mapRadio.placeAt(this.mapTd,"first");this.portalRadio=new n({group:d,onStateChange:e,checked:!1});this.portalRadio.placeAt(this.portalTd,"first");this.urlRadio=new n({group:d,onStateChange:e,checked:!1});this.urlRadio.placeAt(this.urlTd,"first");this.own(a(this.mapLabel,"click",c.hitch(this,function(){this.mapRadio.check()})));this.own(a(this.portalLabel,"click",c.hitch(this,function(){this.portalRadio.check()})));this.own(a(this.urlLabel,"click",c.hitch(this,function(){this.urlRadio.check()})))},
_getRandomString:function(){var a=Math.random().toString();return a=a.slice(2,a.length)},_onRadioClicked:function(){d.setStyle(this.flcContainer,"display","none");d.setStyle(this.hflcContainer,"display","none");d.setStyle(this.flscContainer,"display","none");this.mapRadio.checked?(d.setStyle(this.flcContainer,"display","block"),this.operationTip.innerHTML=this.nls.selectLayer):this.portalRadio.checked?(d.setStyle(this.hflcContainer,"display","block"),this.operationTip.innerHTML=this.nls.chooseItem):
this.urlRadio.checked&&(d.setStyle(this.flscContainer,"display","block"),this.operationTip.innerHTML=this.nls.setServiceUrl);this._updateOperationTip()},_updateOperationTip:function(){this.mapRadio.checked?this.operationTip.innerHTML=this.flcMap.operationTip:this.portalRadio.checked?this.operationTip.innerHTML=this.flcPortal.operationTip:this.urlRadio.checked&&(this.operationTip.innerHTML=this.flcUrl.operationTip)}})})},"jimu/dijit/_FeaturelayerChooserWithButtons":function(){define("dojo/on dojo/Evented dojo/_base/lang dojo/_base/html dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/dijit/FeaturelayerChooserFromMap".split(" "),
function(g,h,m,l,e,c,d,a,f){return e([c,d,a,h],{baseClass:"jimu-layer-chooser-with-buttons jimu-feature-layer-chooser-with-buttons",declaredClass:"jimu.dijit.FeaturelayerChooserWithButtons",templateString:'\x3cdiv\x3e\x3cdiv class\x3d"chooser-container" data-dojo-attach-point\x3d"chooserContainer"\x3e\x3c/div\x3e\x3cdiv class\x3d"footer"\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel"\x3e${nls.cancel}\x3c/div\x3e\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-trailing-margin1 jimu-state-disabled" data-dojo-attach-point\x3d"btnOk"\x3e${nls.ok}\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e',
layerChooserFromMap:null,constructor:function(a){this.options=a},postMixInProperties:function(){this.nls=m.clone(window.jimuNls.common)},postCreate:function(){this.inherited(arguments);this.layerChooser=this.layerChooserFromMap?this.layerChooserFromMap:new f(this.options);this.layerChooser.placeAt(this.chooserContainer);l.setStyle(this.layerChooser.domNode,{width:"100%",height:"100%"});this.own(g(this.layerChooser,"tree-click",m.hitch(this,function(){0<this.getSelectedItems().length?l.removeClass(this.btnOk,
"jimu-state-disabled"):l.addClass(this.btnOk,"jimu-state-disabled")})));this.own(g(this.btnOk,"click",m.hitch(this,function(){var a=this.getSelectedItems();0<a.length&&this.emit("ok",a)})));this.own(g(this.btnCancel,"click",m.hitch(this,function(){this.emit("cancel")})))},getSelectedItems:function(){return this.layerChooser.getSelectedItems()},startup:function(){this.inherited(arguments);this.layerChooser.startup()}})})},"jimu/dijit/FeaturelayerChooserFromMap":function(){define(["dojo/_base/declare",
"dojo/Deferred","dojo/_base/html","dojo/_base/lang","./LayerChooserFromMap"],function(g,h,m,l,e){return g([e],{baseClass:"jimu-featurelayer-chooser-from-map",declaredClass:"jimu.dijit.FeaturelayerChooserFromMap",types:null,showLayerFromFeatureSet:!1,showTable:!1,onlyShowVisible:!1,ignoredFeaturelayerIds:null,mustSupportStatistics:!1,ignoreVirtualLayer:!1,postMixInProperties:function(){this.inherited(arguments);this.ignoredFeaturelayerIds||(this.ignoredFeaturelayerIds=[]);this.basicFilter=l.hitch(this,
this.basicFilter);this.filter=e.createFeaturelayerFilter(this.types,this.showLayerFromFeatureSet,this.showTable,this.mustSupportStatistics);this.ignoreVirtualLayer&&(this.filter=e.andCombineFilters([this.filter,l.hitch(this,this._ignoreVirtualLayerFilter)]))},postCreate:function(){this.inherited(arguments);m.addClass(this.domNode,"jimu-basic-layer-chooser-from-map")},_ignoreVirtualLayerFilter:function(c){return c.getLayerType().then(function(c){return!("ArcGISDynamicMapServiceLayer"===c||"ArcGISTiledMapServiceLayer"===
c||"GroupLayer"===c)})},basicFilter:function(c){var d=new h;0<=this.ignoredFeaturelayerIds.indexOf(c.id)?d.resolve(!1):this.onlyShowVisible&&"Table"!==c.getLayerType()?d.resolve(c.isShowInMap()):d.resolve(!0);return d},getHandledItem:function(c){var d=this.inherited(arguments),a=c&&c.layerInfo,a=a&&a.layerObject;d.url=a&&a.url||"";return d}})})},"jimu/dijit/FeaturelayerChooserFromPortal":function(){define("dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./templates/FeaturelayerChooserFromPortal.html dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/query dojo/Deferred dojo/Evented dojo/promise/all jimu/dijit/ItemSelector jimu/dijit/FeaturelayerServiceBrowser jimu/portalUrlUtils esri/request".split(" "),
function(g,h,m,l,e,c,d,a,f,n,p,k,u,w,r,t,v){return g([h,m,l,k],{templateString:e,declaredClass:"jimu.dijit.FeaturelayerChooserFromPortal",baseClass:"jimu-service-chooser-from-portal jimu-featurelayer-chooser-from-portal",_serviceBrowserDef:null,portalUrl:null,multiple:!1,postMixInProperties:function(){this.nls=c.mixin({},window.jimuNls.common);this.nls=c.mixin(this.nls,window.jimuNls.featureLayerChooserFromPortal);this.portalUrl=t.getStandardPortalUrl(this.portalUrl);this.multiple=!0===this.multiple?
!0:!1},postCreate:function(){this.inherited(arguments);this._initSelf()},getSelectedItems:function(){return this.serviceBrowser.getSelectedItems()},_initSelf:function(){this.selector=new w({portalUrl:this.portalUrl,itemTypes:["Feature Service","Map Service"],onlyShowOnlineFeaturedItems:!1});this.own(f(this.selector,"item-selected",c.hitch(this,this._onItemSelected)));this.own(f(this.selector,"none-item-selected",c.hitch(this,this._onNoneItemSelected)));this.selector.placeAt(this.selectorContainer);
this.selector.startup();this.serviceBrowser=new r({multiple:this.multiple});this.own(f(this.serviceBrowser,"tree-click",c.hitch(this,this._onServiceBrowserClicked)));this.serviceBrowser.placeAt(this.serviceBrowserContainer);this.serviceBrowser.startup()},_onItemSelected:function(){d.removeClass(this.btnNext,"jimu-state-disabled")},_onNoneItemSelected:function(){d.addClass(this.btnNext,"jimu-state-disabled")},_onBtnBackClicked:function(){this._serviceBrowserDef&&!this._serviceBrowserDef.isFulfilled()&&
this._serviceBrowserDef.cancel();d.setStyle(this.btnOk,"display","none");d.setStyle(this.btnNext,"display","block");d.setStyle(this.btnBack,"display","none");d.addClass(this.btnOk,"jimu-state-disabled");d.setStyle(this.selectorContainer,"display","block");d.setStyle(this.serviceBrowserContainer,"display","none");this.serviceBrowser.reset();this.emit("back")},_onBtnOkClicked:function(){var a=this.getSelectedItems();0<a.length&&this.emit("ok",a)},_onBtnNextClicked:function(){var a=this.selector.getSelectedItem();
a&&(d.setStyle(this.btnNext,"display","none"),d.setStyle(this.btnBack,"display","block"),d.setStyle(this.btnOk,"display","block"),d.addClass(this.btnOk,"jimu-state-disabled"),d.setStyle(this.selectorContainer,"display","none"),d.setStyle(this.serviceBrowserContainer,"display","block"),this.serviceBrowser.reset(),this._serviceBrowserDef=this.serviceBrowser.setUrl(a.url||a.item),this._serviceBrowserDef.then(c.hitch(this,function(){this._serviceBrowserDef=null;this._setOkStateBySelectedItems()}),c.hitch(this,
function(){this._serviceBrowserDef=null})),this.emit("next"))},_setOkStateBySelectedItems:function(){0<this.serviceBrowser.getSelectedItems().length?d.removeClass(this.btnOk,"jimu-state-disabled"):d.addClass(this.btnOk,"jimu-state-disabled")},_onServiceBrowserClicked:function(){this._setOkStateBySelectedItems()},_onBtnCancelClicked:function(){this.emit("cancel")}})})},"jimu/dijit/FeaturelayerServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array",
"jimu/serviceBrowserRuleUtils"],function(g,h,m,l,e){return g([h],{baseClass:"jimu-featurelayer-service-browser",declaredClass:"jimu.dijit.FeaturelayerServiceBrowser",url:"",multiple:!1,types:null,isSupportQuery:!0,postMixInProperties:function(){this.inherited(arguments);this.rule=e.getFeaturelayerServiceBrowserRule(this.types,this.isSupportQuery)},getSelectedItems:function(){var c=this.inherited(arguments);return c=l.map(c,m.hitch(this,function(c){return{name:c.name,url:c.url,definition:c.definition}}))}})})},
"jimu/dijit/_FeaturelayerServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./FeaturelayerServiceBrowser"],function(g,h,m){return g([h],{baseClass:"jimu-featurelayer-service-chooser-content",_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/MapServer","http://myserver/arcgis/rest/services/myservice/FeatureServer"],_createServiceBrowser:function(g){return new m(g)}})})},
"dojo/NodeList-data":function(){define(["./_base/kernel","./query","./_base/lang","./_base/array","./dom-attr"],function(g,h,m,l,e){var c=h.NodeList,d={},a=0,f=function(c){var d=e.get(c,"data-dojo-dataid");d||(d="pid"+a++,e.set(c,"data-dojo-dataid",d));return d},n=g._nodeData=function(a,c,e){var g=f(a),k;d[g]||(d[g]={});if(1==arguments.length)return d[g];"string"==typeof c?2<arguments.length?d[g][c]=e:k=d[g][c]:k=m.mixin(d[g],c);return k},p=g._removeNodeData=function(a,c){a=f(a);d[a]&&(c?delete d[a][c]:
delete d[a])};c._gcNodeData=g._gcNodeData=function(){var a=h("[data-dojo-dataid]").map(f),c;for(c in d)0>l.indexOf(a,c)&&delete d[c]};m.extend(c,{data:c._adaptWithCondition(n,function(a){return 0===a.length||1==a.length&&"string"==typeof a[0]}),removeData:c._adaptAsForEach(p)});return c})},"widgets/Screening/setting/LocatorSourceSetting":function(){define("dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on dojo/Evented dojo/Deferred dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin jimu/portalUrlUtils jimu/dijit/Message jimu/dijit/_GeocodeServiceChooserContent jimu/dijit/Popup jimu/dijit/LoadingShelter esri/request esri/lang ../searchSourceUtils jimu/utils dojo/text!./LocatorSourceSetting.html jimu/dijit/CheckBox dijit/form/ValidationTextBox dijit/form/NumberTextBox".split(" "),
function(g,h,m,l,e,c,d,a,f,n,p,k,u,w,r,t,v,q,x,z){return g([d,a,f,e],{baseClass:"jimu-widget-screening-locator-source-setting",templateString:x,_clickSet:!1,_suggestible:!1,_locatorDefinition:null,_esriLocatorRegExp:/http(s)?:\/\/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g,tr:null,nls:null,config:null,geocoderPopup:null,singleLineFieldName:null,serviceChooserContent:null,constructor:function(a){this._suggestible=this._clickSet=!1;this._locatorDefinition=null;this._esriLocatorRegExp=
/http(s)?:\/\/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g;this.serviceChooserContent=this.singleLineFieldName=this.geocoderPopup=this.config=this.nls=this.tr=null;h.mixin(this,a)},postCreate:function(){this.inherited(arguments);this.exampleHint=this.nls.locatorExample+": http://\x26lt;myServerName\x26gt;/arcgis/rest/services/World/GeocodeServer";this.own(l(this.setButtonNode,"click",h.hitch(this,this._onSetLocatorUrlClick)));this.own(l(this.locatorName,"Blur",h.hitch(this,
this._onLocatorNameBlur)));this.own(l(this.placeholder,"Blur",h.hitch(this,this._onPlaceholderBlur)));this.own(l(this.countryCode,"Blur",h.hitch(this,this._onCountryCodeBlur)));this.searchInCurrentMapExtent=new z({checked:!1,label:this.nls.searchInCurrentMapExtent},this.searchInCurrentMapExtent);this.enableLocalSearch=new z({checked:!1,label:this.nls.enableLocalSearch},this.enableLocalSearch);this._processLocalSearchTable(!1);this.own(l(this.enableLocalSearch,"change",h.hitch(this,function(){this._processLocalSearchTable(this.enableLocalSearch.getValue())})));
m.setStyle(this.enableLocalSearch.domNode,"display","none");this._setMessageNodeContent(this.exampleHint);this.config=this.config?this.config:{};this.setConfig(this.config)},setRelatedTr:function(a){this.tr=a},getRelatedTr:function(){return this.tr},setDefinition:function(a){this._locatorDefinition=a||{}},getDefinition:function(){return this._locatorDefinition},setConfig:function(a){if("[object Object]"===Object.prototype.toString.call(a)){var b=a.url;b&&(this.config=a,this.shelter.show(),this._locatorDefinition.url!==
b?this._getDefinitionFromRemote(b).then(h.hitch(this,function(a){b&&a&&"error"!==a.type?(this._locatorDefinition=a,this._locatorDefinition.url=b,this._setSourceItems(),this._setMessageNodeContent(this.exampleHint)):b&&a&&"error"===a.type&&(this._setSourceItems(),this._disableSourceItems(),this._setMessageNodeContent(t.substitute({URL:a.url},h.clone(this.nls.invalidUrlTip)),!0));this.shelter.hide()})):(this._setSourceItems(),this._setMessageNodeContent(this.exampleHint),this.shelter.hide()))}},isValidConfig:function(){var a=
this.getConfig();return a.url&&a.name&&a.singleLineFieldName?!0:!1},showValidationTip:function(){this._showValidationErrorTip(this.locatorUrl);this._showValidationErrorTip(this.locatorName)},getConfig:function(){return{url:this.locatorUrl.get("value"),name:q.stripHTML(this.locatorName.get("value")),singleLineFieldName:this.singleLineFieldName,placeholder:q.stripHTML(this.placeholder.get("value")),countryCode:q.stripHTML(this.countryCode.get("value")),maxSuggestions:this.maxSuggestions.get("value")||
6,maxResults:this.maxResults.get("value")||6,searchInCurrentMapExtent:this.searchInCurrentMapExtent.checked,enableLocalSearch:this.enableLocalSearch.getValue(),localSearchMinScale:this.localSearchMinScale.get("value"),localSearchDistance:this.localSearchDistance.get("value"),type:"locator"}},_onLocatorNameBlur:function(){this.locatorName.set("value",q.stripHTML(this.locatorName.get("value")))},_onPlaceholderBlur:function(){this.placeholder.set("value",q.stripHTML(this.placeholder.get("value")))},
_onCountryCodeBlur:function(){this.countryCode.set("value",q.stripHTML(this.countryCode.get("value")))},_disableSourceItems:function(){this.locatorName.set("disabled",!0);this.placeholder.set("disabled",!0);this.countryCode.set("disabled",!0);this.maxSuggestions.set("disabled",!0);this.maxResults.set("disabled",!0)},_enableSourceItems:function(){this.locatorName.set("disabled",!1);this.placeholder.set("disabled",!1);this.countryCode.set("disabled",!1);this.maxSuggestions.set("disabled",!1);this.maxResults.set("disabled",
!1)},_setSourceItems:function(){var a=this.config;a.url&&(this.locatorUrl.set("value",a.url),this._processCountryCodeRow(a.url));a.name&&this.locatorName.set("value",q.stripHTML(a.name));a.singleLineFieldName&&(this.singleLineFieldName=a.singleLineFieldName);a.placeholder&&this.placeholder.set("value",q.stripHTML(a.placeholder));a.countryCode&&this.countryCode.set("value",q.stripHTML(a.countryCode));"capabilities"in this._locatorDefinition?(m.setStyle(this.enableLocalSearch.domNode,"display",""),
this._processLocalSearchTable(a.enableLocalSearch),this.enableLocalSearch.setValue(a.enableLocalSearch),a.localSearchMinScale&&a.enableLocalSearch&&this.localSearchMinScale.set("value",a.localSearchMinScale),a.localSearchDistance&&a.enableLocalSearch&&this.localSearchDistance.set("value",a.localSearchDistance)):(this.enableLocalSearch.setValue(!1),m.setStyle(this.enableLocalSearch.domNode,"display","none"));(this._suggestible=this._locatorDefinition&&this._locatorDefinition.capabilities&&-1<this._locatorDefinition.capabilities.indexOf("Suggest"))?
this._hideSuggestibleTips():this._showSuggestibleTips();this.searchInCurrentMapExtent.setValue(!!a.searchInCurrentMapExtent);this.maxSuggestions.set("value",a.maxSuggestions||6);this.maxResults.set("value",a.maxResults||6);this._enableSourceItems()},_isEsriLocator:function(a){this._esriLocatorRegExp.lastIndex=0;return this._esriLocatorRegExp.test(a)},_getDefinitionFromRemote:function(a){var b=new c;if(this._isEsriLocator(a))b.resolve({singleLineAddressField:{name:"SingleLine",type:"esriFieldTypeString",
alias:"Single Line Input",required:!1,length:200,localizedNames:{},recognizedNames:{}},capabilities:"Geocode,ReverseGeocode,Suggest"});else{var d=r({url:a,content:{f:"json"},handleAs:"json",callbackParamName:"callback"});this.own(d);d.then(h.hitch(this,function(a){b.resolve(a)}),h.hitch(this,function(c){console.error(c);b.resolve({type:"error",url:this._getRequestUrl(a)})}))}return b.promise},_setMessageNodeContent:function(a,c){m.empty(this.messageNode);a.nodeType||(a=m.toDom(a));m.place(a,this.messageNode);
c?m.addClass(this.messageNode,"esriCTErrorMessage"):m.removeClass(this.messageNode,"esriCTErrorMessage")},_getRequestUrl:function(a){var b=window.location.protocol;return"http:"===b?n.setHttpProtocol(a):"https:"===b?n.setHttpsProtocol(a):a},_onSetLocatorUrlClick:function(){this._clickSet=!0;this._openServiceChooser()},_openLocatorChooser:function(){this._clickSet=!1;this._openServiceChooser()},_openServiceChooser:function(){this.serviceChooserContent=new k({url:this.locatorUrl.get("value")||""});
this.shelter=new w({hidden:!0});this.geocoderPopup=new u({titleLabel:this.nls.setGeocoderURL,autoHeight:!0,content:this.serviceChooserContent.domNode,container:window.jimuConfig.layoutId,width:640});this.shelter.placeAt(this.geocoderPopup.domNode);m.setStyle(this.serviceChooserContent.domNode,"width","580px");m.addClass(this.serviceChooserContent.domNode,"override-geocode-service-chooser-content");this.serviceChooserContent.own(l(this.serviceChooserContent,"validate-click",h.hitch(this,function(){m.removeClass(this.serviceChooserContent.domNode,
"override-geocode-service-chooser-content")})));this.serviceChooserContent.own(l(this.serviceChooserContent,"ok",h.hitch(this,"_onSelectLocatorUrlOk")));this.serviceChooserContent.own(l(this.serviceChooserContent,"cancel",h.hitch(this,"_onSelectLocatorUrlCancel")))},_onSelectLocatorUrlOk:function(a){a&&a[0]&&a[0].url&&this.domNode&&(this.shelter.show(),r({url:a[0].url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(h.hitch(this,function(b){this.shelter.hide();b&&b.singleLineAddressField&&
b.singleLineAddressField.name?(this._enableSourceItems(),this.locatorUrl.set("value",a[0].url),this.locatorName.get("value")||this.locatorName.set("value",v.getGeocoderName(a[0].url)),"capabilities"in b?(m.setStyle(this.enableLocalSearch.domNode,"display",""),this._isEsriLocator(a[0].url)?this.enableLocalSearch.setValue(!0):this.enableLocalSearch.setValue(!1)):(this.enableLocalSearch.setValue(!1),m.setStyle(this.enableLocalSearch.domNode,"display","none")),this.singleLineFieldName=b.singleLineAddressField.name,
this._processCountryCodeRow(a[0].url),this._locatorDefinition=b,this._locatorDefinition.url=a[0].url,(this._suggestible=b.capabilities&&-1<this._locatorDefinition.capabilities.indexOf("Suggest"))?this._hideSuggestibleTips():this._showSuggestibleTips(),this._clickSet?this.emit("reselect-locator-url-ok",this.getConfig()):this.emit("select-locator-url-ok",this.getConfig()),this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null),this._setMessageNodeContent(this.exampleHint)):new p({message:this.nls.locatorWarning})}),
h.hitch(this,function(b){console.error(b);this.shelter.hide();new p({message:t.substitute({URL:this._getRequestUrl(a[0].url)},h.clone(this.nls.invalidUrlTip))})})))},_onSelectLocatorUrlCancel:function(){this.geocoderPopup&&(this.geocoderPopup.close(),this.geocoderPopup=null,this.emit("select-locator-url-cancel"))},_processLocalSearchTable:function(a){a?(m.removeClass(this.minScaleNode,"esriCTHidden"),m.removeClass(this.radiusNode,"esriCTHidden"),this.emit("enable-local-search")):(m.addClass(this.minScaleNode,
"esriCTHidden"),m.addClass(this.radiusNode,"esriCTHidden"),this.emit("disable-local-search"))},_processCountryCodeRow:function(a){this._isEsriLocator(a)?(this.countryCode.set("value",""),m.removeClass(this.countryCodeRow,"hide-country-code-row")):m.addClass(this.countryCodeRow,"hide-country-code-row")},_showSuggestibleTips:function(){m.removeClass(this.tipsNode,"esriCTHidden");m.setStyle(this.maxSuggestions.domNode,"display","none")},_hideSuggestibleTips:function(){m.addClass(this.tipsNode,"esriCTHidden");
m.setStyle(this.maxSuggestions.domNode,"display","block")},_showValidationErrorTip:function(a){if(!a.validate()&&a.domNode&&a.focusNode){var b=a.get("disabled");b&&a.set("disabled",!1);a.focusNode.focus();setTimeout(h.hitch(this,function(){a.focusNode.blur();b&&a.set("disabled",!0);a=null}),100)}}})})},"jimu/dijit/_GeocodeServiceChooserContent":function(){define(["dojo/_base/declare","./_BasicServiceChooserContent","./GeocodeServiceBrowser"],function(g,h,m){return g([h],{baseClass:"jimu-geocode-service-chooser-content",
_examples:["http://myserver/arcgis/rest/services","http://myserver/arcgis/rest/services/folder","http://myserver/arcgis/rest/services/myservice/GeocodeServer"],_createServiceBrowser:function(g){return new m(g)}})})},"jimu/dijit/GeocodeServiceBrowser":function(){define(["dojo/_base/declare","./_BasicServiceBrowser","dojo/_base/lang","dojo/_base/array","jimu/serviceBrowserRuleUtils"],function(g,h,m,l,e){return g([h],{baseClass:"jimu-geocode-service-browser",declaredClass:"jimu.dijit.GeocodeServiceBrowser",
url:"",multiple:!1,postMixInProperties:function(){this.inherited(arguments);this.rule=e.getGeocodeServiceBrowserRule()},getSelectedItems:function(){var c=this.inherited(arguments);return c=l.map(c,m.hitch(this,function(c){return{name:c.name,url:c.url}}))}})})},"widgets/Screening/searchSourceUtils":function(){define("dojo/_base/lang dojo/_base/array dojo/Deferred dojo/when dojo/promise/all jimu/portalUtils esri/lang esri/request".split(" "),function(g,h,m,l,e,c,d,a){return{map:null,layerInfosObj:null,
appConfig:null,_esriLocatorRegExp:/geocode(.){0,3}\.arcgis.com\/arcgis\/rest\/services\/World\/GeocodeServer/g,setMap:function(a){this.map=a},setLayerInfosObj:function(a){this.layerInfosObj=a},setAppConfig:function(a){this.appConfig=a},getConfigInfo:function(a){if(a&&a.sources&&0<a.sources.length){var c=null;return this.searchLayer(this.map)&&a.upgradeFromGeocoder?(c=this.map.itemInfo.itemData.applicationProperties.viewing.search,c=h.map(c.layers,g.hitch(this,function(a,c){c.hintText=a;return this._getQueryTypeGeocoder(c)},
c.hintText)),e(c).then(g.hitch(this,function(c){a.sources=[].concat(c).concat(a.sources);return a}))):a}return l(this._getSourcesFromPortalAndWebmap()).then(g.hitch(this,function(a){return{allPlaceholder:"",showInfoWindowOnSelect:!0,sources:a}}))},_getSourcesFromPortalAndWebmap:function(){var a=[],d=null;this.searchLayer(this.map)&&(d=this.map.itemInfo.itemData.applicationProperties.viewing.search,h.forEach(d.layers,g.hitch(this,function(c,d){d.hintText=c;a.push(this._getQueryTypeGeocoder(d))},d.hintText)));
return c.getPortalSelfInfo(this.appConfig.portalUrl).then(g.hitch(this,function(c){if((c=c.helperServices&&c.helperServices.geocode)&&0<c.length)for(var d=0,f=c.length;d<f;d++){var h=c[d];h&&a.push(this._processSingleLine(h))}return e(a).then(g.hitch(this,function(a){for(var c=[],d=0;d<a.length;d++){var e=a[d];e&&(e&&"query"===e.type||(e={name:e.name||this._getGeocodeName(e.url),url:e.url,singleLineFieldName:e.singleLineFieldName,placeholder:e.placeholder||e.name||this._getGeocodeName(e.url),maxResults:6,
searchInCurrentMapExtent:!1,type:"locator"},e.enableLocalSearch=this._isEsriLocator(e.url),e.localSearchMinScale=3E5,e.localSearchDistance=5E4),c.push(e))}return c}))}))},_getQueryTypeGeocoder:function(a){var c=this.map.getLayer(a.id),e=null,f=null,g=null,g=d.isDefined(a.subLayer)?a.id+"_"+a.subLayer:a.id,e=this.layerInfosObj.traversal(function(a){return a.id===g?(f=a,!0):!1});return c&&e&&f?(e=d.isDefined(a.subLayer)?f.url||c.url+"/"+a.subLayer:f.url||c.url,{name:f.title,layerId:g,url:e,placeholder:a.hintText,
searchFields:[a.field.name],displayField:a.field.name,exactMatch:a.field.exactMatch||!1,maxResults:6,searchInCurrentMapExtent:!1,type:"query"}):null},_isEsriLocator:function(a){this._esriLocatorRegExp.lastIndex=0;return this._esriLocatorRegExp.test(a)},_processSingleLine:function(c){if(c.singleLineFieldName)return c;if(this._isEsriLocator(c.url))return c.singleLineFieldName="SingleLine",c;var d=new m;a({url:c.url,content:{f:"json"},handleAs:"json",callbackParamName:"callback"}).then(g.hitch(this,
function(a){a.singleLineAddressField&&a.singleLineAddressField.name?(c.singleLineFieldName=a.singleLineAddressField.name,d.resolve(c)):(console.warn(c.url+"has no singleLineFieldName"),d.resolve(null))}),g.hitch(this,function(a){console.error(a);d.resolve(null)}));return d.promise},_getGeocodeName:function(a){if("string"!==typeof a)return"geocoder";a=a.split("/");return a[a.length-2]||"geocoder"},getGeocoderName:function(a){return this._getGeocodeName(a)},hasAppSearchInfo:function(a){return a.itemInfo&&
a.itemInfo.itemData&&a.itemInfo.itemData.applicationProperties&&a.itemInfo.itemData.applicationProperties.viewing&&a.itemInfo.itemData.applicationProperties.viewing.search},searchLayer:function(a){if(!this.hasAppSearchInfo(a))return!1;a=a.itemInfo.itemData.applicationProperties.viewing.search;return a.enabled&&0!==a.layers.length?!0:!1}}})},"widgets/Screening/setting/_build-generate_module":function(){define(["dojo/text!./Setting.html","dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},
"url:widgets/Screening/setting/SymbolChooserPopup.html":'\x3cdiv style\x3d"width: 100%; height: 100%;"\x3e\r\n  \x3cdiv class\x3d"esriCTSymbolChooserContainer"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"symbolData" title\x3d"${symbolChooserTitle}" class\x3d"common-input esriCTSymbolData"\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"buttonsDiv" class\x3d"buttonsDiv"\x3e\r\n    \x3cdiv class\x3d"button-container button-container-absolute" style\x3d"padding: 0px;"\x3e\r\n      \x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"okButton"\x3e\r\n        ${nls.common.ok}\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/DownloadSettings.html":'\x3cdiv\x3e\r\n  \x3c!--Download Settings--\x3e\r\n  \x3cfieldset class\x3d"esriCTFieldSet esriCTDownloadTabFieldSet"\x3e\r\n    \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.downloadTab.downloadLegend}\x3c/legend\x3e\r\n    \x3c!--Sync enable download Option--\x3e\r\n    \x3cform data-dojo-attach-point\x3d"downloadOptionForm" class\x3d"esriCTDownloadOptionForm"\x3e\r\n      \x3c!--Sync-enable feature service option--\x3e\r\n      \x3cdiv class\x3d"esriCTSyncEnableOptionDiv"\x3e\r\n        \x3c!--Sync-enable radio button--\x3e\r\n        \x3cinput class\x3d"esriCTDownloadRadioButton" id\x3d"syncEnableOption" name\x3d"downloadOption" type\x3d"radio" class\x3d"jimu-radio-btn" data-dojo-type\x3d"dijit/form/RadioButton" value\x3d"syncEnable"\r\n          data-dojo-attach-point\x3d"syncEnableRadioButton" data-dojo-props\x3d"group:\'radioButtonDownloadOption\'"\x3e\r\n        \x3clabel class\x3d"esriCTDownloadOptionLabel esriCTDownloadLabel" for\x3d"syncEnableOption"\x3e\r\n          ${nls.downloadTab.syncEnableOptionLabel}\r\n        \x3c/label\x3e\r\n        \x3c!--Sync-enable download option label and hint container--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadLabelDiv"\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e\r\n            ${nls.downloadTab.syncEnableOptionHint}\r\n            \x3cbr\x3e${nls.downloadTab.syncEnableOptionNote}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Table representation of download file options for each layer--\x3e\r\n      \x3cdiv class\x3d"esriCTLayerDownloadOptionTable" data-dojo-attach-point\x3d"downloadOptionTable"\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Extract data task geoprocessing service option--\x3e\r\n      \x3cdiv class\x3d"esriCTGPServiceOptionDiv"\x3e\r\n        \x3c!--Extract data task radio button--\x3e\r\n        \x3cinput class\x3d"esriCTDownloadRadioButton" id\x3d"gpServiceOption" name\x3d"downloadOption" type\x3d"radio" class\x3d"jimu-radio-btn" data-dojo-type\x3d"dijit/form/RadioButton" value\x3d"extractDataTask"\r\n          data-dojo-attach-point\x3d"gpServiceRadioButton" data-dojo-props\x3d"group:\'radioButtonDownloadOption\'"\x3e\r\n        \x3c!--Extract data task download option label and hint container--\x3e\r\n        \x3clabel class\x3d"esriCTDownloadOptionLabel esriCTDownloadLabel" for\x3d"gpServiceOption"\x3e\r\n          ${nls.downloadTab.extractDataTaskOptionLabel}\r\n        \x3c/label\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadLabelDiv"\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e\r\n            ${nls.downloadTab.extractDataTaskOptionHint}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Extract data task INPUT Container--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabInputContainer esriCTHidden" data-dojo-attach-point\x3d"extractDataTaskInputContainer"\x3e\r\n        \x3c!--Extract data task INPUT TEXTBOX label--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.GPTaskLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Extract data task TEXTBOX--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"extractDataTaskTextBox" class\x3d"esriCTDownloadTabTextbox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n          data-dojo-props\x3d\'required:true,trim:true,disabled:true\'\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--Set Button--\x3e\r\n        \x3cdiv class\x3d"jimu-btn jimu-float-trailing esriCTDownloadTabSetButton" data-dojo-attach-point\x3d"extractDataTaskSetButton" title\x3d"${nls.downloadTab.setButtonLabel}"\x3e\r\n          ${nls.downloadTab.setButtonLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--User cannot download--\x3e\r\n      \x3cdiv class\x3d"esriCTCannotDownloadOptionDiv"\x3e\r\n        \x3c!--User cannot download radio button--\x3e\r\n        \x3cinput class\x3d"esriCTDownloadRadioButton" id\x3d"cannotDownloadOption" name\x3d"downloadOption" type\x3d"radio" class\x3d"jimu-radio-btn" data-dojo-type\x3d"dijit/form/RadioButton" value\x3d"cannotDownload"\r\n          data-dojo-attach-point\x3d"cannotDownloadRadioButton" data-dojo-props\x3d"group:\'radioButtonDownloadOption\'"\x3e\r\n        \x3c!--User cannot download option label div--\x3e\r\n        \x3clabel class\x3d"esriCTDownloadOptionLabel esriCTDownloadLabel" for\x3d"cannotDownloadOption"\x3e\r\n          ${nls.downloadTab.cannotDownloadOptionLabel}\r\n        \x3c/label\x3e\r\n      \x3c/div\x3e\r\n    \x3c/form\x3e\r\n  \x3c/fieldset\x3e\r\n  \x3c!--Report Settings--\x3e\r\n  \x3cfieldset class\x3d"esriCTFieldSet esriCTDownloadTabFieldSet"\x3e\r\n    \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.downloadTab.reportLegend}\x3c/legend\x3e\r\n    \x3cdiv class\x3d"esriCTReportSettingsContainer"\x3e\r\n      \x3c!--Print service URL container starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabInputContainer" data-dojo-attach-point\x3d"printGPServiceInputContainer"\x3e\r\n        \x3c!--Print Service url LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.printGPServiceLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Print Service url TEXTBOX--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"printGPServiceTextBox" class\x3d"esriCTDownloadTabTextbox" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n          data-dojo-props\x3d\'required:true,trim:true,disabled:true\'\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--Set BUTTON--\x3e\r\n        \x3cdiv class\x3d"jimu-btn jimu-float-trailing esriCTDownloadTabSetButton" data-dojo-attach-point\x3d"printGPServiceSetButton" title\x3d"${nls.downloadTab.setButtonLabel}"\x3e\r\n          ${nls.downloadTab.setButtonLabel}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Print service URL container ends--\x3e\r\n      \x3c!-- Print layout container starts --\x3e\r\n      \x3c!-- Defaut layout starts --\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"defaultLayoutTable" class\x3d"esriCTDefaultLayoutTable"\x3e\x3c/div\x3e\r\n      \x3c!-- Default layout ends --\x3e\r\n      \x3c!-- Custom Layout button starts --\x3e\r\n      \x3cdiv class\x3d"esriCTAddCustomLayoutParentContainer esriCTCustomOptionBtnAddSection esriCTCustomOptionButtonDisable" data-dojo-attach-point\x3d"addCustomOptionButton"\x3e\r\n        \x3cspan class\x3d"esriCTCustomOptionBtnAddIcon esriCTCustomOptionBtnAddIconDisable" data-dojo-attach-point\x3d"addCustomOptionButtonIcon"\x3e\x3c/span\x3e\r\n        \x3cspan class\x3d"esriCTCustomOptionBtnAddLabel"\x3e${nls.downloadTab.addCustomLayoutTitle}\x3c/span\x3e\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTHint esriCTCustomLayoutHintText"\x3e${nls.downloadTab.customLayoutOptionHint}\x3c/div\x3e\r\n      \x3c!-- Custom Layout button ends --\x3e\r\n      \x3c!-- Custom layout starts --\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"customLayoutTable" class\x3d"esriCTCustomLayoutTable"\x3e\x3c/div\x3e\r\n      \x3c!-- Custom layout ends --\x3e\r\n      \x3c!-- Default print layout option starts --\x3e\r\n      \x3cdiv class\x3d"esriCTDefaultPrintTemplateContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDefaultPrintTemplateText"\x3e${nls.downloadTab.reportDefaultOptionLabel}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDefaultPrintTemplateDropdown" data-dojo-attach-point\x3d"defaultPrintTemplateDropdown"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!-- Default print layout option ends --\x3e\r\n      \x3c!-- Print layout container ends --\x3e\r\n      \x3c!--Logo chooser starts--\x3e\r\n      \x3cdiv class\x3d"esriCTLogoChooserMainContainer"\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.logoLabel}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTLogoChooserDiv"\x3e\r\n          \x3cdiv class\x3d"esriCTImageChooserPreviewContainer"\x3e\r\n            \x3cimg class\x3d"esriCTImageChooserPreview" data-dojo-attach-point\x3d"imageChooserPreview"\x3e\r\n            \x3cdiv class\x3d"esriCTLogoChooser" data-dojo-attach-point\x3d"logoChooserNode"\x3e\x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e\r\n            ${nls.downloadTab.logoChooserHint}\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Logo chooser ends--\x3e\r\n      \x3c!--Report Title container start--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"reportTitle"\x3e\r\n        \x3c!--Report Title  LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.reportTitleLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Report Title  TEXTAREA--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"reportTitleTextBox" class\x3d"esriCTDownloadTabReportInputNode" data-dojo-type\x3d"dijit/form/ValidationTextBox"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Report Title container end--\x3e\r\n      \x3c!--No data string representation starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"noDataTextRepresentation"\x3e\r\n        \x3c!--No data String Representation  LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.noDataTextRepresentation}\r\n        \x3c/div\x3e\r\n        \x3c!--No data string representation TEXTAREA--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"noDataTextRepresentationTextBox" class\x3d"esriCTDownloadTabReportInputNode" data-dojo-type\x3d"dijit/form/TextBox"\r\n          value\x3d"${nls.downloadTab.noDataDefaultText}"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--No data string representation ends--\x3e\r\n      \x3c!--NA string representation starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"naTextRepresentation"\x3e\r\n        \x3c!--NA String Representation  LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.naTextRepresentation}\r\n        \x3c/div\x3e\r\n        \x3c!--NA string representation TEXTAREA--\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"naTextRepresentationTextBox" class\x3d"esriCTDownloadTabReportInputNode" data-dojo-type\x3d"dijit/form/TextBox"\r\n          value\x3d"${nls.downloadTab.notApplicableDefaultText}"\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--NA String Representation ends--\x3e\r\n      \x3c!--Column title Color Picker container starts--\x3e\r\n      \x3cdiv class\x3d"esriCTDownloadTabReportTitleContainer" data-dojo-attach-point\x3d"reportTitle"\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.columnTitleColorPickerLabel}\r\n        \x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabReportInputNode"\x3e\r\n          \x3cdiv class\x3d"esriCTColorPickerPreviewField" data-dojo-attach-point\x3d"columnTitleColorPickerNode"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Column title Color Picker container ends--\x3e\r\n      \x3c!--Footnote container starts--\x3e\r\n      \x3cdiv class\x3d"esriCTFootnoteContainer"\x3e\r\n        \x3c!--Footnote LABEL--\x3e\r\n        \x3cdiv class\x3d"esriCTDownloadTabLabel"\x3e\r\n          ${nls.downloadTab.footnoteLabel}\r\n        \x3c/div\x3e\r\n        \x3c!--Footnote TEXTAREA--\x3e\r\n        \x3ctextarea class\x3d"esriCTFootnoteTextArea" data-dojo-attach-point\x3d"footnoteTextArea" rows\x3d"5"\x3e\x3c/textarea\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Footnote container ends--\x3e\r\n    \x3c/div\x3e\r\n  \x3c/fieldset\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/GpSource.html":'\x3cdiv\x3e\r\n  \x3cdiv style\x3d"display: flex;"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cinput name\x3d"gpsource_mode" id\x3d"gpsource_fromportal_${uniqueID}" data-dojo-attach-point\x3d"portalRadio" data-dojo-type\x3d"dijit/form/RadioButton"/\x3e\r\n      \x3clabel for\x3d"gpsource_fromportal_${uniqueID}" data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv style\x3d"margin-left: 20px;"\x3e\r\n      \x3cinput name\x3d"gpsource_mode" id\x3d"gpsource_fromurl_${uniqueID}" data-dojo-attach-point\x3d"urlRadio" data-dojo-type\x3d"dijit/form/RadioButton"/\x3e\r\n      \x3clabel for\x3d"gpsource_fromurl_${uniqueID}" data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv class\x3d"source-content"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"hflcContainer" class\x3d"dijit-container hflc-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"flscContainer" class\x3d"dijit-container flsc-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/GpChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"layers" data-dojo-attach-point\x3d"browserContainer"\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/GpServiceBrowser" data-dojo-attach-point\x3d"gpServiceBrowser"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing cancel" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn  jimu-float-trailing back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/ItemSelector.html":'\r\n\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"setting-tab-container"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"tabNode"\x3e\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content mycontent-tab" data-dojo-attach-point\x3d"mycontentTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main mycontent-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onMyContentSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"mycontentItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content organization-tab" data-dojo-attach-point\x3d"organizationTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main organization-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onOrganizationSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"organizationItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:50px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content group-tab" data-dojo-attach-point\x3d"groupTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main group-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv class\x3d"groups-section" data-dojo-attach-point\x3d"groupsSection"\x3e\r\n\t\t\t\t\t\x3cdiv\x3e${nls.groups}:\x3c/div\x3e\r\n\t\t\t\t\t\x3cselect class\x3d"groups-select" data-dojo-attach-point\x3d"groupsSelect"\x3e\r\n\t\t\t\t\t\t\x3coption value\x3d"nodata"\x3e${nls.noneGroups}\x3c/option\x3e\r\n\t\t\t\t\t\x3c/select\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onGroupSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"groupItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\' style\x3d"top:85px;"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\r\n\t\t\x3cdiv class\x3d"tab-content public-tab" data-dojo-attach-point\x3d"publicTabNode"\x3e\r\n\t\t\t\x3cdiv class\x3d"tab-content-main public-tab-content-main"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicSearch" data-dojo-type\x3d"jimu/dijit/Search" data-dojo-props\x3d\'searchWhenInput:false\' data-dojo-attach-event\x3d"onSearch:_onPublicSearch" style\x3d"position:absolute;width:100%;top:0;"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"public-search-radios"\x3e\r\n\t\t\t\t\t\x3cfieldset id\x3d"publicSearchRaido"\x3e\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"portalPublicRaido" data-dojo-type\x3d"dijit/form/RadioButton" \r\n\t\t\t\t\t\t\tid\x3d"portalPublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading portal-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalPublicLabel" for\x3d"portalPublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3ePortal\x3c/label\x3e\r\n\r\n\t\t\t\t\t\t\x3cinput data-dojo-attach-point\x3d"onlinePublicRaido" data-dojo-type\x3d"dijit/form/RadioButton"\r\n\t\t\t\t\t\t\tid\x3d"onlinePublicRaido" name\x3d"publicSearchRaido" class\x3d"jimu-float-leading online-public-radio" /\x3e\r\n\t\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"onlinePublicLabel" for\x3d"onlinePublicRaido" class\x3d"jimu-float-leading portal-public-label"\x3eArcGIS Online\x3c/label\x3e\r\n\t\t\t\t\t\x3c/fieldset\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicItemSection" class\x3d"public-item-section"\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicPortalItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"publicOnlineItemTable" data-dojo-type\x3d"jimu/dijit/_ItemTable" data-dojo-props\x3d\'types:${_itemTypes},typeKeywords:${_typeKeywords}\'\x3e\x3c/div\x3e\r\n\t\t\t\t\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"signin-section" data-dojo-attach-point\x3d"signinSection" style\x3d"display:none;"\x3e\r\n\t\t\x3cdiv class\x3d"signin-tip"\x3e${nls.signInTip}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_ItemTable.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"items-section all-items-section" data-dojo-attach-point\x3d"allItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"allItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onAllItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"allItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"allItemTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"allItemsShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"items-section filtered-items-section" data-dojo-attach-point\x3d"filteredItemsSection"\x3e\r\n\t\t\x3cdiv class\x3d"items-table-div" data-dojo-attach-point\x3d"filteredItemsTableDiv" data-dojo-attach-event\x3d"onscroll:_onFilteredItemsSectionScroll"\x3e\r\n\t\t\t\x3ctable class\x3d"items-table" cellpadding\x3d"10" data-dojo-attach-point\x3d"filteredItemsTable" data-dojo-attach-event\x3d"onclick:_onItemsTableClicked"\x3e\r\n\t\t\t\t\x3ctbody data-dojo-attach-point\x3d"filteredItemsTbody"\x3e\x3c/tbody\x3e\r\n\t\t\t\x3c/table\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"search-none-tip-section" data-dojo-attach-point\x3d"searchNoneTipSection" style\x3d"display:none;"\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-icon jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan class\x3d"search-none-tip jimu-state-error-text"\x3e${nls.searchNone}\x3c/span\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-attach-point\x3d"filteredItemShelter" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/_TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\x3e\r\n\t\t\x3cspan data-dojo-attach-point\x3d"contentNode" class\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem" tabindex\x3d"-1" aria-selected\x3d"false"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation" style\x3d"display: none;"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:dijit/templates/TreeNode.html":'\x3cdiv class\x3d"dijitTreeNode" role\x3d"presentation"\r\n\t\x3e\x3cdiv data-dojo-attach-point\x3d"rowNode" class\x3d"dijitTreeRow" role\x3d"presentation"\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNode" class\x3d"dijitInline dijitTreeExpando" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"expandoNodeText" class\x3d"dijitExpandoText" role\x3d"presentation"\x3e\x3c/span\r\n\t\t\x3e\x3cspan data-dojo-attach-point\x3d"contentNode"\r\n\t\t\tclass\x3d"dijitTreeContent" role\x3d"presentation"\x3e\r\n\t\t\t\x3cspan role\x3d"presentation" class\x3d"dijitInline dijitIcon dijitTreeIcon" data-dojo-attach-point\x3d"iconNode"\x3e\x3c/span\r\n\t\t\t\x3e\x3cspan data-dojo-attach-point\x3d"labelNode,focusNode" class\x3d"dijitTreeLabel" role\x3d"treeitem"\r\n\t\t\t\t   tabindex\x3d"-1" aria-selected\x3d"false" id\x3d"${id}_label"\x3e\x3c/span\x3e\r\n\t\t\x3c/span\r\n\t\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeNodeContainer" role\x3d"presentation"\r\n\t\t style\x3d"display: none;" aria-labelledby\x3d"${id}_label"\x3e\x3c/div\x3e\r\n\x3c/div\x3e\r\n',
"url:dijit/templates/Tree.html":'\x3cdiv role\x3d"tree"\x3e\r\n\t\x3cdiv class\x3d"dijitInline dijitTreeIndent" style\x3d"position: absolute; top: -9999px" data-dojo-attach-point\x3d"indentDetector"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"dijitTreeExpando dijitTreeExpandoLoading" data-dojo-attach-point\x3d"rootLoadingIndicator"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"containerNode" class\x3d"dijitTreeContainer" role\x3d"presentation"\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e\r\n',"url:jimu/dijit/templates/_BasicServiceChooserContent.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"content-section"\x3e\r\n\t\t\x3ctable class\x3d"layout"\x3e\r\n\t\t\t\x3ccolgroup\x3e\r\n\t\t\t\t\x3ccol width\x3d"80px" align\x3d"right"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n\t\t\t\t\x3ccol width\x3d"170px"\x3e\x3c/col\x3e\r\n\t\t\t\x3c/colgroup\x3e\r\n\t\t\t\x3ctbody\x3e\r\n\t\t\t\t\x3ctr\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td"\x3e\r\n\t\t\t\t\t\t\x3cspan\x3eURL:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"urlInput" data-dojo-type\x3d"jimu/dijit/URLInput" style\x3d"width:100%;"\x3e\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd\x3e\r\n\t\t\t\t\t\t\x3cdiv class\x3d"jimu-btn jimu-state-disabled validate-btn jimu-float-trailing" data-dojo-attach-point\x3d"btnValidate" data-dojo-attach-event\x3d"onclick:_onBtnValidateClick"\x3e${nls.validate}\x3c/div\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\t\x3ctr data-dojo-attach-point\x3d"exampleTr" class\x3d"example-tr"\x3e\r\n\t\t\t\t\t\x3ctd class\x3d"first-td" style\x3d"padding-top:5px;"\x3e\r\n\t\t\t\t\t\t\x3cspan title\x3d"${nls.example}:"\x3e${nls.example}:\x3c/span\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\t\x3ctd data-dojo-attach-point\x3d"exampleTd" colspan\x3d"2" style\x3d"padding-top:5px;font-style:italic;color:#ccc;"\x3e\r\n\t\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3c/tr\x3e\r\n\t\t\t\x3c/tbody\x3e\r\n\t\t\x3c/table\x3e\r\n\t\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\r\n\t\t\t\x3cdiv class\x3d"error-section" data-dojo-attach-point\x3d"errorSection"\x3e\r\n\t\t\t\t\x3cspan class\x3d"jimu-icon jimu-icon-error"\x3e\x3c/span\x3e\r\n\t\t\t\t\x3cspan class\x3d"error-message" data-dojo-attach-point\x3d"errorNode"\x3e\x3c/span\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv class\x3d"operations"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-event\x3d"onclick:_onBtnCancelClick"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing jimu-state-disabled ok" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClick"\x3e${nls.ok}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"loading" data-dojo-type\x3d"jimu/dijit/LoadingIndicator" data-dojo-props\x3d\'hidden:true\'\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/LayerChooserFromMapWithDropbox.html":'\x3cdiv\x3e\r\n\x3ctable data-dojo-attach-point\x3d"dropDownBtn" data-dojo-attach-event\x3d"onclick: _onDropDownClick,onkeydown: _onDropDownKeydown"\r\n  tabindex\x3d"0" title\x3d"${nls.selectLayer}"\x3e\r\n    \x3ccolgroup\x3e\r\n      \x3ccol width\x3d"10px"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"auto"\x3e\x3c/col\x3e\r\n      \x3ccol width\x3d"30px"\x3e\x3c/col\x3e\r\n    \x3c/colgroup\x3e\r\n    \x3ctbody\x3e\r\n      \x3ctr\x3e\r\n        \x3ctd\x3e\x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"layer-name jimu-ellipsis" data-dojo-attach-point\x3d"layerNameNode"\x3e\x3c/div\x3e\r\n        \x3c/td\x3e\r\n        \x3ctd\x3e\r\n          \x3cdiv class\x3d"drop-select jimu-float-trailing" data-dojo-attach-point\x3d"dropArrowNode"\x3e\r\n            \x3cdiv class\x3d"jimu-icon jimu-icon-down-arrow-8"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c/td\x3e\r\n      \x3c/tr\x3e\r\n    \x3c/tbody\x3e\r\n  \x3c/table\x3e\r\n\x3c/div\x3e\r\n',
"url:widgets/Screening/setting/FieldPicker.html":'\x3cdiv\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"tableArea" class\x3d"esriCTLayerFieldSelector"\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"btnAddField" class\x3d"esriCTBtnAddSection"\x3e\r\n      \x3cspan class\x3d"esriCTBtnAddIcon"\x3e\x3c/span\x3e\r\n      \x3cspan class\x3d"esriCTBtnAddLabel" data-dojo-attach-point\x3d"addFieldLabel"\x3e\r\n        ${nls.analysisTab.addFieldsLabel}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTHidden esriCTNoLayersOrFieldsForAnalysisLabel" data-dojo-attach-point\x3d"lblNoValidFields"\x3e\r\n      ${nls.analysisTab.noValidFieldsForAnalysis}\r\n    \x3c/div\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"fieldTable"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/SearchSourceSettings.html":'\x3cdiv\x3e\r\n  \x3c!--Search source setting hint text --\x3e\r\n  \x3cdiv class\x3d"esriCTHint" style\x3d"width: 99%"\x3e ${nls.searchSourceSetting.searchSourceSettingTitleHintText}\r\n  \x3c/div\x3e\r\n  \x3c!--Add Search Source Label and click--\x3e\r\n  \x3cdiv class\x3d"esriCTDropdownButton" role\x3d"button"\x3e\r\n    \x3cdiv\x3e\r\n      \x3cspan\x3e ${nls.searchSourceSetting.addSearchSourceLabel}\x3c/span\x3e\r\n    \x3c/div\x3e\r\n    \x3cul class\x3d"esriCTDropdownMenu" role\x3d"menu" data-dojo-attach-point\x3d"menuItemClickNode"\x3e\r\n      \x3cli class\x3d"esriCTDropdownItem" type\x3d"query"\x3e${nls.searchSourceSetting.featureLayerLabel}\x3c/li\x3e\r\n      \x3cli class\x3d"esriCTDropdownItem" type\x3d"locator"\x3e${nls.searchSourceSetting.geocoderLabel}\x3c/li\x3e\r\n    \x3c/ul\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Add Search Source Label and click--\x3e\r\n  \x3cdiv class\x3d"esriCTSources" data-dojo-attach-point\x3d"searchSources"\x3e\r\n    \x3cdiv class\x3d"esriCTSourceList jimu-float-leading"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"sourceList" style\x3d"100%"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3cdiv class\x3d"esriCTSourceSetting jimu-float-trailing" data-dojo-attach-point\x3d"sourceSettingNode"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3cdiv\x3e\r\n    \x3c!--General setting: Label--\x3e\r\n    \x3cdiv class\x3d"esriCTlabel esriCTGeneralSettingLabelStyle"\x3e\r\n      ${nls.searchSourceSetting.generalSettingLabel}\r\n    \x3c/div\x3e\r\n    \x3c!--General setting: All Place Holder Label--\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTlabel esriCTLabelContainer" title\x3d"${nls.searchSourceSetting.allPlaceholderLabel}"\x3e\r\n        ${nls.searchSourceSetting.allPlaceholderLabel}\r\n      \x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTLayerField esriCTSearchSourceFloatRight" style\x3d"width: 72%;"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"allPlaceholder" style\x3d"width: 100%;" data-dojo-type\x3d"dijit/form/TextBox" trim\x3d"true"\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--General setting: All Place Holder Hint--\x3e\r\n        \x3cdiv class\x3d"esriCTHint"\x3e\r\n          ${nls.searchSourceSetting.allPlaceholderHintText}\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--General setting: Checkbox--\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont " data-dojo-attach-point\x3d"showInfoWindowOnSelectNode"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/QuerySourceSetting.html":'\x3cdiv class\x3d"esriCTMainContainer" style\x3d"width: 100%; height: 100%;"\x3e\r\n  \x3c!--Select geocoder url --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceUrlSection"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTURLWidthLabel esriCTlabel" title\x3d"${nls.layerSource}"\x3e\r\n        ${nls.layerSource}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceURLField"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayer" data-dojo-attach-point\x3d"sourceUrl" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTURLSetButton jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"setSourceBtnClickNode"\r\n          title\x3d"${nls.set}"\x3e${nls.set}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"messageTr"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"messageNode" class\x3d"esriCTHint esriCTErrorMessage"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Details section --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceDetailsSection"\x3e\r\n    \x3c!--Details section: Name --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.common.name}"\x3e\r\n        ${nls.common.name}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"sourceName" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true,required:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: Placeholder --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.placeholder}"\x3e\r\n        ${nls.placeholder}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"placeholder" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"trim:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: searchFields --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.searchFields}"\x3e\r\n        ${nls.searchFields}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"searchFields" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'95%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTsearchFieldsSelector jimu-float-trailing" data-dojo-attach-point\x3d"fieldsSelectorNode"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: displayField --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.displayField}"\x3e\r\n        ${nls.displayField}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"displayField" data-dojo-type\x3d"dijit/form/Select" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: maxSuggestions --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxSuggestions}"\x3e\r\n        ${nls.maxSuggestions}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.searchLayerTips}" data-dojo-attach-point\x3d"tipsNode"\x3e\r\n          ${nls.searchLayerTips}\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxSuggestions" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: maxResult --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxResults}"\x3e\r\n        ${nls.maxResults}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxResults" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: exactMatch --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"exactMatch"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: search in current map extent --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"searchInCurrentMapExtent"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Details section: loading shelter --\x3e\r\n  \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/FeaturelayerSource.html":'\x3cdiv\x3e\r\n\t\x3ctable class\x3d"radio-table" cellpadding\x3d"0" cellspacing\x3d"0"\x3e\r\n\t\t\x3ctbody\x3e\r\n\t\t\t\x3ctr\x3e\r\n\t\t\t\t\x3ctd class\x3d"map-td" nowrap data-dojo-attach-point\x3d"mapTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"mapLabel"\x3e${nls.selectFromMap}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"portal-td" nowrap data-dojo-attach-point\x3d"portalTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"portalLabel"\x3e${nls.selectFromPortal}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\t\x3ctd class\x3d"url-td" nowrap data-dojo-attach-point\x3d"urlTd"\x3e\r\n\t\t\t\t\t\x3clabel data-dojo-attach-point\x3d"urlLabel"\x3e${nls.addServiceUrl}\x3c/label\x3e\r\n\t\t\t\t\x3c/td\x3e\r\n\t\t\t\x3c/tr\x3e\r\n\t\t\x3c/tbody\x3e\r\n\t\x3c/table\x3e\r\n\t\x3cdiv class\x3d"source-content"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"operationTip" class\x3d"operation-tip"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flcContainer" class\x3d"dijit-container map-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"hflcContainer" class\x3d"dijit-container portal-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"flscContainer" class\x3d"dijit-container url-dijit-container" style\x3d"display:none;"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:jimu/dijit/templates/FeaturelayerChooserFromPortal.html":'\x3cdiv\x3e\r\n\t\x3cdiv class\x3d"selector-container" data-dojo-attach-point\x3d"selectorContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"service-browser-container" data-dojo-attach-point\x3d"serviceBrowserContainer"\x3e\x3c/div\x3e\r\n\t\x3cdiv class\x3d"footer"\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing cancel jimu-btn-vacation" data-dojo-attach-point\x3d"btnCancel" data-dojo-attach-event\x3d"onclick:_onBtnCancelClicked"\x3e${nls.cancel}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing next jimu-state-disabled" data-dojo-attach-point\x3d"btnNext" data-dojo-attach-event\x3d"onclick:_onBtnNextClicked"\x3e${nls.next}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing ok jimu-state-disabled" data-dojo-attach-point\x3d"btnOk" data-dojo-attach-event\x3d"onclick:_onBtnOkClicked"\x3e${nls.ok}\x3c/div\x3e\r\n\t\t\x3cdiv class\x3d"jimu-btn jimu-float-trailing back" data-dojo-attach-point\x3d"btnBack" data-dojo-attach-event\x3d"onclick:_onBtnBackClicked"\x3e${nls.back}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/LocatorSourceSetting.html":'\x3cdiv\x3e\r\n  \x3c!--Select Locator URL --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceUrlSection"\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTURLWidthLabel esriCTlabel" title\x3d"${nls.locatorUrl}"\x3e\r\n        ${nls.locatorUrl}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceURLField"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayer" data-dojo-attach-point\x3d"locatorUrl" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-props\x3d"required:true,trim:true,disabled:true,style:{width:\'100%\'}"\x3e\x3c/div\x3e\r\n        \x3cdiv title\x3d"${nls.set}" class\x3d"esriCTURLSetButton jimu-btn jimu-float-trailing jimu-leading-margin1" data-dojo-attach-point\x3d"setButtonNode"\x3e${nls.set}\x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"messageTr"\x3e\r\n          \x3cdiv data-dojo-attach-point\x3d"messageNode" class\x3d"esriCTHint"\x3e\r\n          \x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n  \x3c!--Locator Details section --\x3e\r\n  \x3cdiv class\x3d"esriCTSourceDetailsSection" ata-dojo-attach-point\x3d"detailsSection"\x3e\r\n    \x3c!--Details section: locatorName --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.locatorName}"\x3e\r\n        ${nls.locatorName}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"locatorName" placeHolder\x3d"${nls.locatorName}"\r\n          required\x3d"true" data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: placeholder --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.placeholder}"\x3e\r\n        ${nls.placeholder}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"placeholder" placeHolder\x3d"${nls.placeholder}"\r\n          data-dojo-props\x3d\'style:{width:"100%"}\'\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: country --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"countryCodeRow"\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.countryCode}"\x3e\r\n          ${nls.countryCode}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n          \x3cdiv type\x3d"text" data-dojo-type\x3d"dijit/form/TextBox" data-dojo-attach-point\x3d"countryCode" placeHolder\x3d"${nls.countryCodeEg} USA,CHN"\r\n            data-dojo-props\x3d\'style:{width:"97%"}\'\x3e\x3c/div\x3e\r\n          \x3ca class\x3d"jimu-float-trailing" target\x3d"_blank" href\x3d"https://developers.arcgis.com/rest/geocode/api-reference/geocode-coverage.htm"\r\n            style\x3d"line-height:30px;"\x3e${nls.questionMark}\x3c/a\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e${nls.countryCodeHint}\x3c/div\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: max suggestion --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxSuggestions}"\x3e\r\n        ${nls.maxSuggestions}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"esriCTHint" data-dojo-attach-point\x3d"tipsNode"\x3e\r\n          ${nls.locatorTips}\r\n        \x3c/div\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxSuggestions" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: max result --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabel esriCTlabel" title\x3d"${nls.maxResults}"\x3e\r\n        ${nls.maxResults}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv data-dojo-attach-point\x3d"maxResults" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1,places:0},style:{width:\'100%\'},value:6"\x3e\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"enableLocalSearch"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search - minimum scale --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"minScaleNode"\x3e\r\n      \x3cdiv class\x3d"esriCTLocalSearchLabel esriCTlabel" title\x3d"${nls.minScale}"\x3e\r\n        ${nls.minScale}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading esriCTSearchSourceLabelFont" style\x3d"line-height:30px;"\x3e1: \x3c/div\x3e\r\n        \x3cdiv class\x3d"jimu-float-trailing" data-dojo-attach-point\x3d"localSearchMinScale" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1},style:{width:\'96%\'},value:300000"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint" title\x3d"${nls.minScaleHint}"\x3e${nls.minScaleHint}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: local search - radius --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row" data-dojo-attach-point\x3d"radiusNode"\x3e\r\n      \x3cdiv class\x3d"esriCTLocalSearchLabel esriCTlabel" title\x3d"${nls.radius}"\x3e\r\n        ${nls.radius}\x3c/div\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLayerField esriCTLayerField"\x3e\r\n        \x3cdiv class\x3d"jimu-float-leading" data-dojo-attach-point\x3d"localSearchDistance" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-props\x3d"constraints:{min:1},style:{width:\'75%\'},value:50000"\x3e\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint esriCTLocalSearchRadiusUnit"\x3e${nls.meters}\x3c/div\x3e\r\n        \x3cdiv class\x3d"esriCTHint" data-dojo-attach-point\x3d"radiusHintNode" title\x3d"${nls.radiusHint}"\x3e${nls.radiusHint}\x3c/div\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: Search in current map extent --\x3e\r\n    \x3cdiv class\x3d"esriCTLayerContainer row"\x3e\r\n      \x3cdiv class\x3d"esriCTSearchSourceLabelFont" data-dojo-attach-point\x3d"searchInCurrentMapExtent"\x3e\x3c/div\x3e\r\n    \x3c/div\x3e\r\n    \x3c!--Details section: loading shelter --\x3e\r\n    \x3cdiv data-dojo-attach-point\x3d"shelter" data-dojo-type\x3d"jimu/dijit/LoadingShelter" data-dojo-props\x3d"hidden:true"\x3e\x3c/div\x3e\r\n  \x3c/div\x3e',
"url:widgets/Screening/setting/Setting.html":'\x3cdiv style\x3d"width: 100%;height: 100%;"\x3e\r\n  \x3cdiv class\x3d"esriCTMainConfigurationContainer"\x3e\r\n    \x3cdiv class\x3d"esriCTTabDiv" data-dojo-attach-point\x3d"tabContainer"\x3e\r\n      \x3c!--Analysis tab contents--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"analysisTabNode" class\x3d"esriCTTabNode"\x3e\r\n        \x3c!--Add Layers section --\x3e\r\n        \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n          \x3cdiv\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"selectAnalysisLayerLabel" class\x3d"esriCTSelectAnalysisLayerLabel"\x3e\r\n              ${nls.analysisTab.selectAnalysisLayerLabel}\r\n            \x3c/div\x3e\r\n            \x3cdiv data-dojo-attach-point\x3d"btnAddLayer" class\x3d"esriCTBtnAddSection"\x3e\r\n              \x3cspan class\x3d"esriCTBtnAddIcon"\x3e\x3c/span\x3e\r\n              \x3cspan class\x3d"esriCTBtnAddLabel"\x3e${nls.analysisTab.addLayerLabel}\x3c/span\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTHidden esriCTNoLayersOrFieldsForAnalysisLabel" data-dojo-attach-point\x3d"lblNoValidLayers"\x3e\r\n              ${nls.analysisTab.noValidLayersForAnalysis}\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTHint"\x3e${nls.analysisTab.addLayersHintText}\x3c/div\x3e\r\n          \x3cdiv class\x3d"esriCTAddLayerTableNode" data-dojo-attach-point\x3d"addLayerTableNode"\x3e\x3c/div\x3e\r\n        \x3c/div\x3e\r\n        \x3c!--Add Layers section end--\x3e\r\n        \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n          \x3c!--AOI Tools section--\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e\r\n              ${nls.analysisTab.aoiToolsLegendLabel}\x3c/legend\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer" data-dojo-attach-point\x3d"aoiToolsSection"\x3e\r\n              \x3cdiv class\x3d"esriCTFieldsetContainer"\x3e\r\n                \x3cdiv class\x3d"esriCTAnalysisAOIToolsDescriptionLabel esriCTEllipsis"\x3e\r\n                  ${nls.analysisTab.aoiToolsDescriptionLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3c!--Place Name section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTAOIToolsOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                        data-dojo-attach-point\x3d"placeNameCheckBox"\x3e\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.analysisTab.placenameLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"placeNameTextBox"\r\n                      trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Place Name section ends--\x3e\r\n                  \x3c!--Draw Tool section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTAOIToolsOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                        data-dojo-attach-point\x3d"drawToolCheckBox"\x3e\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.analysisTab.drawToolsLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"drawToolTextBox"\r\n                      trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Draw Tool section ends--\x3e\r\n                  \x3c!--Upload Shapfile section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTAOIToolsOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                        data-dojo-attach-point\x3d"uploadShapefileCheckBox"\x3e\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.analysisTab.uploadShapeFileLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"uploadShapeFileTextBox"\r\n                      trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Upload Shapfile section ends--\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3c!--Co-ordinates section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTAOIToolsOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox"\r\n                        data-dojo-attach-point\x3d"coordinatesCheckBox"\x3e\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.analysisTab.coordinatesLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"coordinatesTextBox"\r\n                      trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Co-ordinates section ends--\x3e\r\n                  \x3c!--Traverses Units section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTTraverseUnits"\x3e\r\n                    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n                      \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"traverseUnitsNode"\x3e\r\n                        \x3coption value\x3d"uSSurveyFeet" selected\x3d"selected"\x3e${nls.units.uSSurveyFeet}\x3c/option\x3e\r\n                        \x3coption value\x3d"meters"\x3e${nls.units.meters}\x3c/option\x3e\r\n                      \x3c/select\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                      ${nls.analysisTab.coordinatesDrpDwnHintText}\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Traverses Units section ends--\x3e\r\n                  \x3c!--Traverse Direction Units section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTTraverseUnits esriCTTraverseDirectionUnits"\x3e\r\n                    \x3cdiv class\x3d"esriCTDropDownContainer"\x3e\r\n                      \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"traverseDirectionUnitsNode"\x3e\r\n                        \x3coption value\x3d"decimalDegree" selected\x3d"selected"\x3e${nls.units.decimalDegree}\x3c/option\x3e\r\n                        \x3coption value\x3d"degreeMinuteSeconds"\x3e${nls.units.degreeMinuteSeconds}\x3c/option\x3e\r\n                      \x3c/select\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTHint"\x3e\r\n                      ${nls.analysisTab.coordinatesBearingDrpDwnHintText}\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Traverse Direction Units section ends--\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!--AOI Tools section ends--\x3e\r\n          \x3c!-- Select draw tools starts --\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet esriCTHidden" data-dojo-attach-point\x3d"selectDrawToolFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.analysisTab.drawToolsSettingsFieldsetLabel}\x3c/legend\x3e\r\n            \x3cdiv class\x3d"esriCTSelectDrawToolMainContainer"\x3e\r\n              \x3cdiv class\x3d"esriCTSelectDrawToolLabel"\x3e\r\n                ${nls.analysisTab.selectDrawToolsText}\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTSelectDrawToolsParentContainer"\x3e\r\n                \x3c!-- Point tool starts --\x3e\r\n                \x3cdiv class\x3d"esriCTSelectPointToolParentContainer"\x3e\r\n                  \x3cdiv class\x3d"jimu-checkbox esriCTPointToolCheckBox" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                    data-dojo-attach-point\x3d"pointSelectToolCheckBox" checked\x3d"true"\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPointToolLabel esriCTEllipsis"\x3e${nls.analysisTab.drawToolPointLabel}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Point tool ends --\x3e\r\n                \x3c!-- Polyline tool starts --\x3e\r\n                \x3cdiv class\x3d"esriCTSelectPolylineToolParentContainer"\x3e\r\n                  \x3cdiv class\x3d"jimu-checkbox esriCTPolylineToolCheckBox" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                    data-dojo-attach-point\x3d"polylineSelectToolCheckBox" checked\x3d"true"\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPolylineToolLabel esriCTEllipsis"\x3e${nls.analysisTab.drawToolPolylineLabel}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Polyline tool ends --\x3e\r\n                \x3c!-- Extent tool starts --\x3e\r\n                \x3cdiv class\x3d"esriCTSelectExtentToolParentContainer"\x3e\r\n                  \x3cdiv class\x3d"jimu-checkbox esriCTExtentToolCheckBox" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                    data-dojo-attach-point\x3d"extentSelectToolCheckBox" checked\x3d"true"\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTExtentToolLabel esriCTEllipsis"\x3e${nls.analysisTab.drawToolExtentLabel}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Extent tool ends --\x3e\r\n                \x3c!-- Polygon tool starts --\x3e\r\n                \x3cdiv class\x3d"esriCTSelectPolygonToolParentContainer"\x3e\r\n                  \x3cdiv class\x3d"jimu-checkbox esriCTPolygonToolCheckBox" data-dojo-type\x3d"jimu/dijit/CheckBox"\r\n                    data-dojo-attach-point\x3d"polygonSelectToolCheckBox" checked\x3d"true"\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCPolygonToolLabel esriCTEllipsis"\x3e${nls.analysisTab.drawToolPolygonLabel}\x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!-- Polygon tool ends --\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3cdiv class\x3d"esriCTSelectToolLayersParentContainer"\x3e\r\n              \x3cdiv\x3e${nls.analysisTab.drawToolSelectableLayersLabel}\x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTHint"\x3e${nls.analysisTab.drawToolSelectableLayersHint}\x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTSelectDrawToolLayerTableNode" data-dojo-attach-point\x3d"drawToolSelectableLayerContainer"\x3e\x3c/div\x3e\r\n            \x3c/div\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!-- Select draw tools ends --\x3e\r\n          \x3c!--Allow Uploading shapefiles section starts--\x3e\r\n          \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer" data-dojo-attach-point\x3d"uploadShapefileSection"\x3e\r\n              \x3c!--upload shapefile options section starts--\x3e\r\n              \x3cdiv class\x3d"esriCTFieldSetOptionsContainer esriCTAllowShapeFileOption"\x3e\r\n                \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox" data-dojo-attach-point\x3d"allowUploadShapefileCheckBox"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                  ${nls.analysisTab.allowShapefilesUploadLabel}\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTHint"\x3e\r\n                ${nls.analysisTab.allowShapefilesUploadLabelHintText}\r\n              \x3c/div\x3e\r\n              \x3c!--upload shapefile options section ends--\x3e\r\n              \x3c!--layer analysis options section starts--\x3e\r\n              \x3cdiv class\x3d"esriCTFieldSetOptionsContainer esriCTAllowShapeFileOption"\x3e\r\n                \x3cdiv data-dojo-type\x3d"jimu/dijit/CheckBox" class\x3d"jimu-checkbox esriCTCheckBox" data-dojo-attach-point\x3d"allowVisibleLayerAnalysisCheckBox"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTFieldsLabel esriCTEllipsis"\x3e\r\n                  ${nls.analysisTab.allowVisibleLayerAnalysisLabel}\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3cdiv class\x3d"esriCTHint"\x3e\r\n                ${nls.analysisTab.allowVisibleLayerAnalysisHintText}\r\n              \x3c/div\x3e\r\n              \x3c!--layer analysis options section ends--\x3e\r\n              \x3c!--Area units options section starts--\x3e\r\n              \x3c!-- \x3cdiv class\x3d"esriCTAreaUnitsMainContainer"\x3e --\x3e\r\n              \x3cdiv class\x3d"esriCTFieldSetOptionsContainer esriCTAllowShapeFileOption"\x3e\r\n                \x3cdiv class\x3d"esriCTAreaUnitsLabel"\x3e\r\n                  ${nls.analysisTab.areaUnitsLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTAreaUnitsDropDownContainer"\x3e\r\n                  \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"areaUnitsDropDown"\x3e\r\n                    \x3coption selected\x3d"selected" value\x3d"Feet"\x3e${nls.units.feetUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Miles"\x3e${nls.units.milesUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Meters"\x3e${nls.units.metersUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Kilometers"\x3e${nls.units.kilometersUnit}\x3c/option\x3e\r\n                    \x3coption value\x3d"Hectares"\x3e${nls.units.hectaresUnit}\x3c/option\x3e\r\n                  \x3c/select\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3c!-- \x3c/div\x3e --\x3e\r\n              \x3c!--units options section ends--\x3e\r\n              \x3c!--max feature for analysis starts--\x3e\r\n              \x3cdiv class\x3d"esriCTMaxFeatureForAnalysisMainDiv"\x3e\r\n                \x3cdiv class\x3d"esriCTMaxFeatureForAnalysisLabel"\x3e\r\n                  ${nls.analysisTab.maxFeatureForAnalysisLabel}\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTMaxFeatureInputDiv"\x3e\r\n                  \x3cdiv class\x3d"esriCTMaxFeatureInputParentContainer"\x3e\r\n                    \x3cdiv class\x3d"esriCTMaxFeatureTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                      data-dojo-attach-point\x3d"maxFeatureCountTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTMaxFeatureHint esriCTHint"\x3e\r\n                    ${nls.analysisTab.maxFeatureForAnalysisHintText}\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3c!--max feature for analysis ends--\x3e\r\n              \x3c!--search tolerance--\x3e\r\n              \x3cdiv class\x3d"esriCTMaxFeatureForAnalysisMainDiv" data-dojo-attach-point\x3d"toleranceSection"\x3e\r\n                \x3cdiv class\x3d"esriCTMaxFeatureForAnalysisLabel" data-dojo-attach-point\x3d"searchToleranceLabel"\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTMaxFeatureInputDiv"\x3e\r\n                  \x3cdiv class\x3d"esriCTMaxFeatureInputParentContainer"\x3e\r\n                    \x3cdiv class\x3d"esriCTMaxFeatureTextBox esriCTTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox"\r\n                      data-dojo-attach-point\x3d"searchToleranceTextBox" trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTMaxFeatureHint esriCTHint"\x3e\r\n                    ${nls.analysisTab.searchToleranceHint}\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n              \x3c!--search tolerance ends--\x3e\r\n            \x3c/div\x3e\r\n          \x3c/div\x3e\r\n          \x3c!--Allow Uploading shapefiles section ends--\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Analysis tab contents end--\x3e\r\n      \x3c!--Download tab contents--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"downloadTabNode" class\x3d"esriCTTabNode"\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--Download tab contents end--\x3e\r\n      \x3c!--General tab contents--\x3e\r\n      \x3cdiv data-dojo-attach-point\x3d"generalTabNode" class\x3d"esriCTTabNode"\x3e\r\n        \x3cdiv class\x3d"esriCTTabContainer row"\x3e\r\n          \x3c!--Tab Labels Fieldset starts--\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.generalTab.tabLabelsLegend}\x3c/legend\x3e\r\n            \x3c!--Tab Label Fieldset Content Section starts--\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer" data-dojo-attach-point\x3d"tabLabelsSection"\x3e\r\n              \x3cdiv class\x3d"esriCTFieldsetContainer"\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3c!--AOI Tab label section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTBufferSettingsFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.generalTab.AOITabLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"aoiTabTextBox"\r\n                      trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--AOI Tab label section ends--\x3e\r\n                  \x3c!--Reports Tab label section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTBufferSettingsFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.generalTab.ReportTabLabel}\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                    \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/ValidationTextBox" data-dojo-attach-point\x3d"reportsTabTextBox"\r\n                      trim\x3d"true" required\x3d"true"\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Reports Tab label section ends--\x3e\r\n                \x3c/div\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3c!--Tab Label Fieldset Content Section starts--\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!--Tab Labels Fieldset ends--\x3e\r\n          \x3c!--Buffer Settings Fieldset starts--\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e${nls.generalTab.bufferSettingsLegend}\x3c/legend\x3e\r\n            \x3c!--Buffer Settings Fieldset Content Section starts--\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer" data-dojo-attach-point\x3d"bufferSettingsSection"\x3e\r\n              \x3cdiv class\x3d"esriCTFieldsetContainer"\x3e\r\n                \x3c!--Default Buffer Settings section starts--\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3c!--Default Buffer Distance section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTBufferSettingsFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.generalTab.defaultBufferDistanceLabel}\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTTextBox" data-dojo-type\x3d"dijit/form/NumberTextBox" data-dojo-attach-point\x3d"defaultBufferDistanceTextBox"\r\n                        trim\x3d"true" required\x3d"true"\x3e\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Default Buffer Distance section ends--\x3e\r\n                  \x3c!--Buffer Units section starts--\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTBufferSettingsFieldsLabel esriCTEllipsis"\x3e\r\n                        ${nls.generalTab.defaultBufferUnitsLabel}\r\n                      \x3c/div\x3e\r\n                      \x3cdiv class\x3d"esriCTGeneralDropDownContainer"\x3e\r\n                        \x3cselect class\x3d"esriCTDropBox" data-dojo-type\x3d"dijit/form/Select" data-dojo-attach-point\x3d"defaultBufferUnitsNode"\x3e\r\n                          \x3coption value\x3d"UNIT_FOOT"\x3e${nls.units.feet}\x3c/option\x3e\r\n                          \x3coption value\x3d"UNIT_STATUTE_MILE"\x3e${nls.units.miles}\x3c/option\x3e\r\n                          \x3coption value\x3d"UNIT_KILOMETER"\x3e${nls.units.kilometers}\x3c/option\x3e\r\n                          \x3coption value\x3d"UNIT_METER"\x3e${nls.units.meters}\x3c/option\x3e\r\n                        \x3c/select\x3e\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                  \x3c!--Buffer Units section ends--\x3e\r\n                \x3c/div\x3e\r\n                \x3c!--Default Buffer Settings section ends--\x3e\r\n                \x3c!--Buffer Symbology section starts--\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralFieldSetOptions esriCTGeneralBufferSymbologyContainer"\x3e\r\n                    \x3cdiv class\x3d"esriCTGeneralFieldSetOptionsContainer"\x3e\r\n                      \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                        \x3cdiv class\x3d"esriCTGeneralSymbologyLabel esriCTEllipsis"\x3e\r\n                          ${nls.generalTab.aoiBufferSymbologyLabel}\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"aoiSymbolNode"\x3e\r\n                        \x3c/div\x3e\r\n                        \x3cdiv class\x3d"esriCTHint esriCTGeneraBufferSymbologylHint"\x3e\r\n                          ${nls.generalTab.generalBufferSymbologyHint}\r\n                        \x3c/div\x3e\r\n                      \x3c/div\x3e\r\n                    \x3c/div\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!--Buffer Symbology section starts--\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3c!--Tab Label Fieldset Content Section starts--\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!--Buffer Settings Fieldset ends--\x3e\r\n          \x3c!--AOI Graphics Symbology Fieldset starts--\x3e\r\n          \x3cfieldset class\x3d"esriCTFieldSet"\x3e\r\n            \x3clegend class\x3d"esriCTFieldSetLegend"\x3e\r\n              ${nls.generalTab.aoiGraphicsSymbologyLegend}\x3c/legend\x3e\r\n            \x3c!--AOI Graphics Symbology Fieldset Content Section starts--\x3e\r\n            \x3cdiv class\x3d"esriCTFieldsetMainContainer"\x3e\r\n              \x3cdiv class\x3d"esriCTFieldsetContainer"\x3e\r\n                \x3cdiv class\x3d"esriCTHint"\x3e\r\n                  ${nls.generalTab.aoiGraphicsSymbologyHint}\r\n                \x3c/div\x3e\r\n                \x3c!--AOI Point Symbology section starts--\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralSymbologyLabel esriCTEllipsis"\x3e\r\n                    ${nls.generalTab.pointSymbologyLabel}\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"pointSymbolNode"\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralSymbologyLabel esriCTEllipsis"\x3e\r\n                    ${nls.generalTab.lineSymbologyLabel}\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPreviewField" data-dojo-attach-point\x3d"lineSymbolNode"\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3cdiv class\x3d"esriCTInputsSection"\x3e\r\n                  \x3cdiv class\x3d"esriCTGeneralSymbologyLabel esriCTEllipsis"\x3e\r\n                    ${nls.generalTab.polygonSymbologyLabel}\r\n                  \x3c/div\x3e\r\n                  \x3cdiv class\x3d"esriCTPolygonPreview" data-dojo-attach-point\x3d"polygonSymbolNode"\x3e\r\n                  \x3c/div\x3e\r\n                \x3c/div\x3e\r\n                \x3c!--AOI Point Symbology section ends--\x3e\r\n              \x3c/div\x3e\r\n            \x3c/div\x3e\r\n            \x3c!--AOI Graphics Symbology Fieldset Content Section ends--\x3e\r\n          \x3c/fieldset\x3e\r\n          \x3c!--AOI Graphics Symbology Fieldset ends--\x3e\r\n        \x3c/div\x3e\r\n      \x3c/div\x3e\r\n      \x3c!--General tab contents end--\x3e\r\n      \x3c!-- Search Source Settings tab --\x3e\r\n      \x3cdiv class\x3d"esriCTTabNode" data-dojo-attach-point\x3d"searchSourceTabNode"\x3e\r\n      \x3c/div\x3e\r\n    \x3c/div\x3e\r\n  \x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Screening/setting/css/style.css":".jimu-widget-screening-setting .esriCTMainConfigurationContainer {width: 100%; height: 100%; color: #596679; font-size: 14px;}.jimu-widget-screening-setting .jimu-tab3 {height: 100%; overflow: hidden;}.jimu-widget-screening-setting .esriCTFieldError {float: right; line-height: 0;}.jimu-widget-screening-setting .jimu-viewstack {height: calc(100% - 45px); overflow: auto;}.jimu-widget-screening-setting .esriCTHidden {display: none;}.jimu-widget-screening-setting .esriCTTabNode {padding-right: 20px; margin-top: 20px; height: calc(100% - 20px);}.jimu-widget-screening-setting .esriCTTabContainer {width: 100%; float: left; margin-bottom: 20px;}.jimu-widget-screening-setting .row {clear: both;}.jimu-widget-screening-setting .esriCTEllipsis {overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-screening-setting .esriCTHint {margin: 5px 5px 10px 0px; float: left; font-size: 12px; color: #a0acbf; font-style: oblique;}.jimu-widget-screening-setting::-ms-clear {display: none;}.jimu-widget-screening-setting .esriCTFieldSet {height: auto; width: 100%; border: 1px solid #a0acbf; border-radius: 5px; font-size: 14px; color: #596679; margin-bottom: 10px; min-width: 0px;}.jimu-widget-screening-setting .esriCTFieldSetLegend {margin-left: 20px;}.jimu-widget-screening-setting .esriCTFieldSetOptionsContainer {width: 100%; float: left;}.esriRtl .jimu-widget-screening-setting .esriCTFieldSetOptionsContainer {float: right;}.jimu-widget-screening-setting .esriCTTextBox {width: 90%; margin-top: 10px;}.jimu-widget-screening-setting .esriCTFieldsetMainContainer {clear: both; width: 95%; margin: 0 auto; padding-top: 5px;}.jimu-widget-screening-setting .esriCTFieldsetContainer {width: 100%; float: left; margin-bottom: 20px;}.jimu-widget-screening-setting .esriCTInputsSection {height: auto; width: 100%; float: left;}.jimu-widget-screening-setting .esriCTFieldsLabel {float: left; padding-left: 10px; width: 80%;}.jimu-widget-screening-setting .esriCTCheckBox {float: left; margin-right: 0px;}.jimu-widget-screening-setting .esriCTAnalysisAOIToolsDescriptionLabel {padding: 10px 0; width: 100%;}.jimu-widget-screening-setting .esriCTAOIToolsOptions {width: 33%; float: left; padding-top: 10px;}.jimu-widget-screening-setting .esriCTTraverseUnits {width: 31%; float: left; padding-right: 10px; padding-top: 36px;}.jimu-widget-screening-setting .esriCTTraverseDirectionUnits {margin-left: 16px;}.jimu-widget-screening-setting .esriCTDropBox {width: 100%;}.jimu-widget-screening-setting .esriCTDropDownContainer {width: 100%; float: left; padding-bottom: 5px;}.jimu-widget-screening-setting .esriCTFieldChooserDropdown, .jimu-widget-screening-setting .esriCTFieldValidationTextBox {height: 26px; width: 100%; float: left;}.jimu-widget-screening-setting .esriCTAddLayerTableNode {margin-top: 30px; margin-bottom: 20px;}.jimu-widget-screening-setting .esriCTSelectDrawToolLayerTableNode {margin-top: 30px; margin-bottom: 20px;}.jimu-widget-screening-setting .esriCTBtnAddSection, .jimu-widget-screening-setting .esriCTCustomOptionBtnAddSection {display: inline-block; overflow: hidden; height: 20px; cursor: pointer; font-size: 13px; color: #538ec8;}.jimu-widget-screening-setting .esriCTLayerFieldSelector .jimu-simple-table {max-height: 350px !important;}.jimu-widget-screening-setting .esriCTBtnAddIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/add.png); display: inline-block; vertical-align: top;}.jimu-widget-screening-setting .esriCTCustomOptionBtnAddIcon {height: 100%; width: 14px; background-repeat: no-repeat; background-position: center center; background-image: url(images/custom-button-enable.png); display: inline-block; vertical-align: top;}.jimu-widget-screening-setting .esriCTCustomOptionBtnAddIconDisable {background-image: url(images/custom-button-disable.png) !important;}.jimu-widget-screening-setting .esriCTBtnAddLabel, .jimu-widget-screening-setting .esriCTCustomOptionBtnAddLabel {height: 100%; line-height: 20px; margin-left: 7px; text-decoration: none; display: inline-block; vertical-align: top;}.jimu-widget-screening-setting .esriCTDisabled {cursor: default; color: #a0acbf; opacity: 0.6;}.jimu-widget-screening-setting .esriCTSelectAnalysisLayerLabel {padding-left: 0px; float: left; text-align: center; vertical-align: middle; padding-right: 10px;}.jimu-widget-screening-setting .esriCTNoLayersOrFieldsForAnalysisLabel {color: red; font-style: italic; margin: 0 10px;}.jimu-widget-screening-setting .esriCTTRPreviewText {height: 26px;}.jimu-widget-screening-setting .esriCTLayerLabelTextBox {width: 100%; height: 29px; float: left;}.jimu-widget-screening-setting .esriCTLayerInputCell {padding-left: 0;}.jimu-widget-screening-setting .esriCTAllowShapeFileOption {padding-bottom: 5px;}.jimu-widget-screening-setting .esriCTAreaUnitsLabel {float: left; padding-left: 0px; width: 40%;}.jimu-widget-screening-setting .esriCTAreaUnitsDropDownContainer {width: 60%; float: left;}.jimu-widget-screening-setting .esriCTMaxFeatureForAnalysisMainDiv {width: 100%; float: left; padding-top: 10px;}.jimu-widget-screening-setting .esriCTMaxFeatureForAnalysisLabel {float: left; padding-left: 0px; width: 40%;}.jimu-widget-screening-setting .esriCTMaxFeatureInputDiv, .jimu-widget-screening-setting .esriCTMaxFeatureHint {float: left;}.jimu-widget-screening-setting .esriCTMaxFeatureInputParentContainer {clear: both; width: 100%; overflow: hidden;}.jimu-widget-screening-setting .esriCTMaxFeatureTextBox {width: 200px; float: left; margin: 0px 5px 0px 0px;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureForAnalysisMainDiv {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureForAnalysisLabel {float: right;}.jimu-widget-screening-setting .esriCTMaxFeatureInputDiv {width: 60%;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureInputDiv, .esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureHint {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureInputDiv {width: 60%;}.esriRtl .jimu-widget-screening-setting .esriCTMaxFeatureTextBox {float: right; margin: 0px 0px 0px 0px;}.jimu-widget-screening-setting .esriCTDownloadRadioButton {float: left;}.jimu-widget-screening-setting .esriCTDownloadLabelDiv {float: left; width: 97%; margin-left: 27px;}.jimu-widget-screening-setting .esriCTDownloadLabel {float: left; margin-left: 10px;}.jimu-widget-screening-setting .esriCTLayerDownloadOptionTable {margin-bottom: 15px;}.jimu-widget-screening-setting .esriCTTableHeader {text-align: center;}.jimu-widget-screening-setting .esriCTAvailableDownloadOption {background: url(../css/images/check.png) center no-repeat;}.jimu-widget-screening-setting .esriCTHidden {display: none;}.jimu-widget-screening-setting .esriCTDownloadTabInputContainer {width: 100%; float: left; margin-bottom: 15px;}.jimu-widget-screening-setting .esriCTDownloadTabReportTitleContainer {width: 100%; float: left; margin-bottom: 15px; padding-top: 15px;}.jimu-widget-screening-setting .esriCTDownloadTabLabel {width: 35%; line-height: 30px; float: left; clear: left; white-space: nowrap; text-overflow: ellipsis; overflow: hidden;}.jimu-widget-screening-setting .esriCTDownloadTabTextbox {width: 55%; float: left;}.jimu-widget-screening-setting .esriCTDownloadTabReportInputNode {width: 65%; float: left;}.jimu-widget-screening-setting .esriCTDownloadTabSetButton {width: 8%; float: left; margin-left: 17px; line-height: 28px;}.jimu-widget-screening-setting .esriCTDownloadTabFieldSet {padding: 15px 0px;}.jimu-widget-screening-setting .esriCTDownloadOptionForm, .jimu-widget-screening-setting .esriCTReportSettingsContainer {margin: 0px auto; width: 96%;}.jimu-widget-screening-setting .esriCTFootnoteTextArea {width: 65% !important; padding: 5px !important; float: right; color: #596679;}.jimu-widget-screening-setting .esriCTLogoChooserDiv {width: 65%; float: left;}.jimu-widget-screening-setting .esriCTImageChooserPreviewContainer {position: relative;}.jimu-widget-screening-setting .esriCTImageChooserPreview {position: absolute; top: 0; bottom: 0; margin: auto; max-height: 100%;}.jimu-widget-screening-setting .esriCTImageChooserContent {height: 50px !important; width: 50px !important;}.jimu-widget-screening-setting .esriCTColorChooserNode {text-align: center; cursor: pointer; min-width: 80px;}.jimu-widget-screening-setting .esriCTColorPickerPreviewField {float: left; margin-bottom: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadLabelDiv {float: right; margin-right: 27px; margin-left: 0px;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadLabel {float: right; margin-right: 10px; margin-left: 0px;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadRadioButton {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadTabSetButton {float: left; margin-left: 0px;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadTabTextbox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTDownloadTabLabel {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTColorPickerPreviewField {float: right;}.jimu-widget-screening-setting .esriCTGeneralFieldSetOptions {width: 45%; float: left; padding-top: 10px;}.jimu-widget-screening-setting .esriCTGeneralDropDownContainer {width: 90%; float: left; margin-top: 10px;}.jimu-widget-screening-setting .esriCTGeneralSymbologyLabel {max-width: 50%; width: auto; min-width: 15px; float: left; color: rgb(89, 102, 121); font-size: 14px; line-height: 40px;}.jimu-widget-screening-setting .esriCTGeneralBufferSymbologyContainer {width: 100%;}.jimu-widget-screening-setting .esriCTGeneraBufferSymbologylHint {clear: both;}.jimu-widget-screening-setting .esriCTBufferSettingsFieldsLabel {float: left; padding-left: 0px; width: 80%;}.jimu-widget-screening-setting .esriCTSymbolChooserNode {cursor: pointer; min-width: 80px;}.jimu-widget-screening-setting .esriCTSymbolPreviewText {padding-right: 5px; color: #596679; font-size: 14px; max-width: 130px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;}.jimu-widget-screening-setting .esriCTPreviewField {float: left; margin-bottom: 5px; padding: 5px 0px 0px 45px;}.jimu-widget-screening-setting .esriCTSymbolChooserContainer {height: calc(100% - 50px); overflow: auto;}.jimu-widget-screening-setting .esriCTPolygonPreview {float: left; margin-top: 5px; margin-bottom: 5px; padding: 5px 0px 0px 0px;}.claro .dijitTextBox, .claro .dijitSelect {color: #7989a0; background-color: #fafafc; border: 1px solid #d2dae2;}.dj_webkit .claro .dijitTextBox .dijitInputInner {color: #7989a0;}.claro .dijitSelectDisabled, .claro .dijitTextBoxDisabled, .claro .dijitTextBoxDisabled .dijitInputContainer {background-color: #e3ecf2;}.claro .dijitSelect .dijitInputField {background-color: #fafafc !important; color: #7989a0; font-size: 14px;}.claro .dijitTextBox, .claro .dijitSelect {border-color: #d2dae2;}.claro .dijitSelect .dijitArrowButton {background-color: #fafafc; background-image: none; border-color: #fafafc;}.jimu-widget-screening-setting .dijitSelect .dijitButtonContents {border-style: none none none none; background-color: #fafafc;}.jimu-widget-screening-setting .esriCTURLSetButton {height: 30px; line-height: 30px; margin: 0 0 0 10px; float: right; max-width: 70px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;}.jimu-widget-screening-setting .esriCTlabel {width: 25%; padding: 5px 10px 5px 0px; word-break: break-all; margin-top: 5px; margin-bottom: 5px; float: left; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; min-width: 250px; color: #596679; font-size: 14px;}.jimu-widget-screening-setting .esriCTDropdownButton {margin: 8px 0; display: inline-block; background-repeat: no-repeat; background-position: left; position: relative; padding-left: 16px; color: #518dca; background-image: url(images/add.png); cursor: pointer;}.jimu-widget-screening-setting .esriCTDropdownButton .esriCTDropdownMenu {position: absolute; display: none; list-style-type: none; top: 18px; left: 0; margin: 0; padding: 0; background: #fafafa; color: #7989a0; z-index: 999;}.esriRtl .jimu-widget-screening-setting .esriCTDropdownButton .esriCTDropdownMenu {right: 0; left: auto;}.jimu-widget-screening-setting .esriCTDropdownButton:hover .esriCTDropdownMenu {display: inline-block;}.jimu-widget-screening-setting .esriCTDropdownMenu .esriCTDropdownItem {white-space: nowrap; height: 30px; padding: 0 25px; line-height: 30px;}.jimu-widget-screening-setting .esriCTDropdownMenu .esriCTDropdownItem:hover {background: #edf2f5; color: #15a4fa;}.jimu-widget-screening-setting .esriCTSources {height: 366px;}.jimu-widget-screening-setting .esriCTSourcesExtraHeight {height: 516px !important;}.jimu-widget-screening-setting .esriCTSourceList {width: 270px; height: 100%;}.jimu-widget-screening-setting .esriCTSourceSetting {width: 650px; position: relative;}.jimu-widget-screening-setting .source-table, .jimu-widget-screening-setting .general-setting-table {width: 100%;}.jimu-widget-screening-setting .esriCTSearchSourceLayerField {width: 70%;}.jimu-widget-screening-setting .esriCTSearchSourceLabel {width: 25%; min-width: 182px;}.jimu-widget-screening-setting .esriCTLocalSearchLabel {margin-left: 22px; width: 24%; min-width: 146px;}.jimu-widget-screening-setting .esriCTSearchSourceLabelFont {font-size: 14px; color: #596679;}.jimu-widget-screening-setting .esriCTLayerSource {width: 80% !important;}.jimu-widget-screening-setting .esriCTsearchFieldsSelector {display: inline-block; background-repeat: no-repeat; background-position: center; margin: 6px 0; width: 18px; height: 18px; cursor: pointer; background-image: url(images/selector.png);}.jimu-widget-screening-setting .esriCTSearchSourceURLField {width: 82%; float: left;}.jimu-widget-screening-setting .esriCTSearchSourceLayer {width: 84% !important;}.jimu-widget-screening-setting .esriCTURLWidthLabel {width: 105px; min-width: 105px;}.jimu-widget-screening-setting .esriCTSearchDetailsSection {width: 175px;}.jimu-widget-screening-setting .esriCTGeneralSettingLabelStyle {font-weight: bold;}.jimu-widget-screening-query-source-setting .esriCTSearchSourceFieldCheckbox {width: 167px; margin-bottom: 20px; color: #596679; font-size: 14px; margin-left: 30px;}.jimu-widget-screening-query-source-setting .esriCTSearchSourceFieldCheckbox .label {width: 140px;}.jimu-widget-screening-setting .jimu-simple-table .simple-table-field, .jimu-simple-table .simple-table-cell {cursor: pointer;}.jimu-widget-screening-setting .esriCTLayerContainer {width: 100%; float: left; margin: 0px;}.jimu-widget-screening-setting .esriCTLayerField {float: left;}.jimu-widget-screening-setting .esriCTSearchSourceURLField {width: 82%; float: left;}.jimu-widget-screening-setting .esriCTLocalSearchRadiusUnit {line-height: 30px; float: right;}.jimu-widget-screening-setting .esriCTErrorMessage {color: #e84b4b;}.esriRtl .jimu-widget-screening-setting .esriCTInputsSection {height: auto; width: 100%; float: right;}.esriRtl .jimu-widget-screening-setting .esriCTTabNode {padding-left: 20px; padding-right: 0px;}.esriRtl .jimu-widget-screening-setting .esriCTHint {float: right; margin: 5px 0px 10px 5px;}.esriRtl .jimu-widget-screening-setting .esriCTDropDownContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTFieldSetLegend {margin-right: 20px;}.esriRtl .jimu-widget-screening-setting .esriCTFieldsetContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTFieldsLabel {padding-left: 0px; padding-right: 10px; float: right;}.esriRtl .jimu-widget-screening-setting .esriCTAOIToolsOptions {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTAnalysisAOIToolsDescriptionLabel {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTBtnAddLabel {margin-right: 7px;}.esriRtl .jimu-widget-screening-setting .esriCTSelectAnalysisLayerLabel {padding-right: 0px; float: right; padding-left: 10px;}.esriRtl .jimu-widget-screening-setting .esriCTLayerInputCell {padding-left: 8px; padding-right: 0;}.esriRtl .jimu-widget-screening-setting .esriCTAreaUnitsLabel {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTAreaUnitsDropDownContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTGeneralFieldSetOptions {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTGeneralDropDownContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTBufferSettingsFieldsLabel {float: right; padding-left: 0px; width: 80%;}.esriRtl .jimu-widget-screening-setting .esriCTGeneralDropDownContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPreviewField {float: right; padding: 5px 45px 0px 0px;}.esriRtl .jimu-widget-screening-setting .esriCTInputsSection {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTGeneralSymbologyLabel {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPolygonPreview {padding-right: 0px; float: right;}.esriRtl .jimu-widget-screening-setting .esriCTlabel {padding: 5px 0px 5px 10px; float: right;}.esriRtl .jimu-widget-screening-setting .esriCTDropdownButton {padding-right: 16px; background-position: right;}.esriRtl .jimu-widget-screening-setting .esriCTSearchSourceURLField {float: left;}.esriRtl .jimu-widget-screening-setting .esriCTLocalSearchRadiusUnit {float: left;}.esriRtl .jimu-widget-screening-setting .esriCTTraverseUnits {float: right; width: 30%; padding-right: 0;}.esriRtl .jimu-widget-screening-setting .esriCTTraverseDirectionUnits {margin-left: 0px; margin-right: 25px;}.esriRtl .jimu-widget-screening-setting .esriCTURLSetButton {float: left; margin: 0px 0px 0px 0px;}.jimu-widget-screening-setting .esriRTLTabContainerNode{overflow: overlay;}.jimu-widget-screening-download-settings .esriCTDefaultLayoutTable {padding-bottom: 15px;}.jimu-widget-screening-download-settings .esriCTCustomLayoutTable {padding-bottom: 15px;}.jimu-widget-screening-download-settings .esriCTAddCustomLayoutParentContainer {clear: both; float: left;}.jimu-widget-screening-download-settings .esriCTAddLayoutText {float: left; padding-left: 10px;}.jimu-widget-screening-download-settings .esriCTCustomLayoutHintText {clear: both}.jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateContainer {clear: both; width: 100%; padding-bottom: 15px; overflow: auto;}.jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateText {float: left; width: 35%;}.jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateDropdown {float: left; width: 33%;}.jimu-widget-screening-download-settings .esriCTCustomOptionButtonDisable {color: #808080 !important; cursor: default;}.esriRtl .jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateText {float: right;}.esriRtl .jimu-widget-screening-download-settings .esriCTAddCustomLayoutParentContainer {float: right;}.esriRtl .jimu-widget-screening-download-settings .esriCTDefaultPrintTemplateDropdown {float: right;}.jimu-widget-screening-setting .esriCTSelectDrawToolsParentContainer {width: 100%; height: 100%; clear: both; overflow: hidden; padding: 10px;}.jimu-widget-screening-setting .esriCTSelectPointToolParentContainer {width: 25%; float: left;}.jimu-widget-screening-setting .esriCTSelectPolylineToolParentContainer {width: 25%; float: left;}.jimu-widget-screening-setting .esriCTSelectExtentToolParentContainer {width: 25%; float: left;}.jimu-widget-screening-setting .esriCTSelectPolygonToolParentContainer {width: 25%; float: left;}.esriRtl .jimu-widget-screening-setting .esriCTSelectPointToolParentContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTSelectPolylineToolParentContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTSelectExtentToolParentContainer {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTSelectPolygonToolParentContainer {float: right;}.jimu-widget-screening-setting .esriCTPointToolCheckBox {float: left;}.jimu-widget-screening-setting .esriCTPolylineToolCheckBox {float: left;}.jimu-widget-screening-setting .esriCTExtentToolCheckBox {float: left;}.jimu-widget-screening-setting .esriCTPolygonToolCheckBox {float: left;}.jimu-widget-screening-setting .esriCTPointToolLabel {float: left; width: calc(100% - 16px); padding-left: 5px;}.jimu-widget-screening-setting .esriCTPolylineToolLabel {float: left; width: calc(100% - 16px); padding-left: 5px;}.jimu-widget-screening-setting .esriCTExtentToolLabel {float: left; width: calc(100% - 16px); padding-left: 5px;}.jimu-widget-screening-setting .esriCPolygonToolLabel {float: left; width: calc(100% - 16px); padding-left: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTPointToolCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPolylineToolCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTExtentToolCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPolygonToolCheckBox {float: right;}.esriRtl .jimu-widget-screening-setting .esriCTPointToolLabel {float: right; padding-left: 0px; padding-right: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTPolylineToolLabel {float: right; padding-left: 0px; padding-right: 5px;}.esriRtl .jimu-widget-screening-setting .esriCTExtentToolLabel {float: right; padding-left: 0px; padding-right: 5px;}.esriRtl .jimu-widget-screening-setting .esriCPolygonToolLabel {float: right; padding-left: 0px; padding-right: 5px;}.jimu-widget-screening-setting .esriCTSelectDrawToolMainContainer {padding-left: 10px;}.esriRtl .jimu-widget-screening-setting .esriCTSelectDrawToolMainContainer {padding-left: 0px; padding-right: 10px;}.jimu-widget-screening-setting .esriCTSelectToolLayersParentContainer {padding-left: 10px; padding-right: 10px;}",
"*now":function(g){g(['dojo/i18n!*preload*widgets/Screening/setting/nls/Setting*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dijit/_WidgetsInTemplateMixin jimu/dijit/TabContainer3 jimu/BaseWidgetSetting dojo/_base/lang dojo/on dojo/query dojo/_base/array jimu/utils esri/symbols/jsonUtils dojo/dom-construct jimu/symbolUtils jimu/utils jimu/dijit/LoadingIndicator ./SymbolChooserPopup ./DownloadSettings dojo/query dijit/registry jimu/dijit/Message jimu/dijit/Popup dijit/form/ValidationTextBox jimu/dijit/SimpleTable dojo/dom-class jimu/dijit/LayerChooserFromMap jimu/dijit/LayerChooserFromMapWithDropbox ./FieldPicker ./SearchSourceSettings dojo/string dojo/Deferred dojo/promise/all dojo/dom-style jimu/LayerInfos/LayerInfos esri/request dijit/form/Select".split(" "),function(g,
h,m,l,e,c,d,a,f,n,p,k,u,w,r,t,v,q,x,z,b,C,A,D,H,y,G,E,I,L,K,M,O){return g([l,h],{baseClass:"jimu-widget-screening-setting",_configurationTabsContainer:null,_symbolParams:{},_addLayerTable:null,_curRow:null,_totalLayers:[],_idsOfSelectedLayers:[],_layerInfosObj:null,_selectLayerTable:null,constructor:function(a){this._configurationTabsContainer=null;this._symbolParams={};this._curRow=this._addLayerTable=null;this._totalLayers=[];this._idsOfSelectedLayers=[];this._selectLayerTable=null;e.mixin(this,
a)},postMixInProperties:function(){this.nls.common={};e.mixin(this.nls.common,window.jimuNls.common);e.mixin(this.nls.units,window.jimuNls.units)},postCreate:function(){M.getInstance(this.map,this.map.itemInfo).then(e.hitch(this,function(a){this._layerInfosObj=a;this._initLoading();this._initConfiguration();this._initLayerSelector();this._initDownloadTab();this._attachComponentEvents()}))},_attachComponentEvents:function(){this.own(c(this.drawToolCheckBox,"change",e.hitch(this,function(a){a?A.remove(this.selectDrawToolFieldSet,
"esriCTHidden"):A.add(this.selectDrawToolFieldSet,"esriCTHidden")})))},getConfig:function(){var a,c;if(v(".esriCTFieldError",this.addLayerTableNode).length!==v(".esriCTFieldError \x3e .esriCTHidden",this.addLayerTableNode).length)return this._showErrorMsgforInvalidFields(),!1;c=this._downloadTab.getExtractDataTaskURL();if(this._validateConfigForCheckBoxes()&&this._validateConfigForInputFields(this.aoiToolsSection,this.nls.errorMsg.textboxFieldsEmptyErrorMsg,"analysis")&&this._validateConfigForInputFields(this.toleranceSection,
this.nls.errorMsg.invalidSearchToleranceErrorMsg,"analysis")&&this._validateConfigForInputFields(this.tabLabelsSection,this.nls.errorMsg.textboxFieldsEmptyErrorMsg,"general")&&this._validateConfigForBufferDistanceFields(this.bufferSettingsSection,this.nls.errorMsg.bufferDistanceFieldsErrorMsg)&&this._validateGPTaskDownloadOption(c)&&this._validateLayers()&&this._validateMaxFeatureCount()&&this._validateCustomOptions()&&this._validateDrawTools()){a=this._searchSourceSettings.getConfig();if(!a||0===
a.sources.length)return this._errorMessage(this.nls.searchSourceSetting.invalidSearchSources,this.nls.searchSourceSetting.searchSourceSettingTabTitle),!1;var b=this.placeNameTextBox.get("value");this.config.placenameButtonText=u.stripHTML(b?b:"");this.config.showPlacenameWidget=this.placeNameCheckBox.checked;this.config.showDrawToolsWidget=this.drawToolCheckBox.checked;this.config.showShapefileWidget=this.uploadShapefileCheckBox.checked;this.config.showCoordinatesWidget=this.coordinatesCheckBox.checked;
this.config.allowShapefilesUpload=this.allowUploadShapefileCheckBox.checked;this.config.allowVisibleLayerAnalysisOnly=this.allowVisibleLayerAnalysisCheckBox.checked;b=this.aoiTabTextBox.get("value");this.config.aoiTabText=u.stripHTML(b?b:"");b=this.reportsTabTextBox.get("value");this.config.reportTabText=u.stripHTML(b?b:"");b=this.drawToolTextBox.get("value");this.config.drawToolsButtonText=u.stripHTML(b?b:"");b=this.uploadShapeFileTextBox.get("value");this.config.shapefileButtonText=u.stripHTML(b?
b:"");b=this.coordinatesTextBox.get("value");this.config.coordinatesButtonText=u.stripHTML(b?b:"");this.config.traverseUnit=this.traverseUnitsNode.get("value");this.config.traverseDirectionUnit=this.traverseDirectionUnitsNode.get("value");this.config.maxFeaturesForAnalysis=this.maxFeatureCountTextBox.get("value");this.config.areaUnits=this.areaUnitsDropDown.get("value");this.config.defaultBufferDistance=this.defaultBufferDistanceTextBox.get("value");this.config.defaultBufferUnit=this.defaultBufferUnitsNode.get("value");
this.config.searchTolerance=this.searchToleranceTextBox.get("value");this.config.placenameSymbology=this._symbolParams;this.config.coordinatesSymbology=this._symbolParams;this.config.shapefileSymbology=this._symbolParams;this.config.drawToolSymbology=this._symbolParams;this.config.aoiSymbol=this._symbolParams.aoiSymbol;this.config.layers=this._getSelectedLayers(!1);this.config.searchSourceSettings=a;this.config.downloadSettings={type:v("input[type\x3dradio]:checked",this.downloadTabNode)[0].value,
layers:this._downloadTab.getLayers(),extractDataTaskURL:c,downloadingFileOptions:this._downloadTab.getDownloadingFileOptions()};this.config.reportSettings={printTaskURL:this._downloadTab.getPrintReportGPServiceURL(),footnote:this._downloadTab.getFootnoteForReport(),logo:this._downloadTab.getLogo(),columnTitleColor:this._downloadTab.getTableHeaderColor(),reportTitle:this._downloadTab.getReportTitle(),noDataConfiguredText:this._downloadTab.getNoDataText(),naTextConfiguredValue:this._downloadTab.getNaTextValue(),
customOptions:this._downloadTab.getCustomOptions(),defaultPrintOption:this._downloadTab.getDefaultPrintOption()};this.config.drawToolSelectableLayers=this._getDrawToolSelectableLayers();this.pointSelectToolCheckBox&&(this.config.showPointTool=this.pointSelectToolCheckBox.checked);this.polylineSelectToolCheckBox&&(this.config.showPolylineTool=this.polylineSelectToolCheckBox.checked);this.extentSelectToolCheckBox&&(this.config.showExtentTool=this.extentSelectToolCheckBox.checked);this.polygonSelectToolCheckBox&&
(this.config.showPolygonTool=this.polygonSelectToolCheckBox.checked);return this.config}return!1},_getDrawToolSelectableLayers:function(){var c,b;c=[];b=this._selectLayerTable.getRows();a.forEach(b,e.hitch(this,function(a){a=this._selectLayerTable.getRowData(a);a.selectable&&c.push(a.selectableLayerID)}));return c},_validateLayers:function(){var a=!0;0===this._getSelectedLayers(!1).length&&(a=!1,this._errorMessage(this.nls.errorMsg.noLayerSelected,this.nls.analysisTab.analysisTabLabel));return a},
_validateDuplicateLabelsForFields:function(a){var c=!0,b=[],d;for(d in a){var b=[],e;for(e in a)a[d]===a[e]&&b.push({label:e,item:a[d]});if(1<b.length)break}this._showDuplicateLabelsErrorMessage(b)||(c=!1);return c},_showDuplicateLabelsErrorMessage:function(c){var b;return 1<c.length?(b="",a.forEach(c,e.hitch(this,function(a,d){b+=a.label;d<c.length-1&&(b+=",")})),this._errorMessage(E.substitute(this.nls.errorMsg.duplicateFieldsLabels,{labelText:c[0].item,itemNames:b}),this.nls.analysisTab.analysisTabLabel),
!1):!0},_initConfiguration:function(){var b;this._symbolParams={};this.defaultBufferDistanceTextBox.constraints={min:0};this.defaultBufferDistanceTextBox.validator=e.hitch(this,function(){return this._numberValidator(this.defaultBufferDistanceTextBox)});this.maxFeatureCountTextBox.constraints={min:1,places:0};this.searchToleranceTextBox.constraints={min:0};this.searchToleranceTextBox.intermediateChanges=!0;b=[{node:this.pointSymbolNode,symbolType:"point",geometryType:"esriGeometryPoint",title:this.nls.generalTab.pointSymbolChooserPopupTitle},
{node:this.lineSymbolNode,symbolType:"polyline",geometryType:"esriGeometryLine",title:this.nls.generalTab.lineSymbolChooserPopupTitle},{node:this.polygonSymbolNode,symbolType:"polygon",geometryType:"esriGeometryPolygon",title:this.nls.generalTab.polygonSymbolChooserPopupTitle},{node:this.aoiSymbolNode,symbolType:"aoiSymbol",geometryType:"esriGeometryPolygon",title:this.nls.generalTab.aoiSymbolChooserPopupTitle}];this._initTabs();this._enableDisableAOIToolsTextBox();a.forEach(b,e.hitch(this,function(a){this._createSymbolPicker(a.node,
a.symbolType,a.geometryType,a.title)}));c(this.areaUnitsDropDown,"change",e.hitch(this,function(a){this._displaySearchTolerance(a)}));this.searchToleranceTextBox.validator=e.hitch(this,function(){return this._numberValidator(this.searchToleranceTextBox)})},_numberValidator:function(a){a=a.get("value");return isNaN(a)?!1:!0},_initTabs:function(){this._configurationTabsContainer=new m({tabs:[{title:this.nls.analysisTab.analysisTabLabel,content:this.analysisTabNode},{title:this.nls.downloadTab.downloadTabLabel,
content:this.downloadTabNode},{title:this.nls.generalTab.generalTabLabel,content:this.generalTabNode},{title:this.nls.searchSourceSetting.searchSourceSettingTabTitle,content:this.searchSourceTabNode}]},this.tabContainer);this.own(c(this._configurationTabsContainer,"tabChanged",e.hitch(this,function(){this._configurationTabsContainer.containerNode.scrollTop=0})));this.own(c(this._configurationTabsContainer.containerNode,"scroll",e.hitch(this,function(){var c;c=this._addLayerTable.getRows();a.forEach(c,
e.hitch(this,function(a){a.layerSelector&&a.layerSelector.hideLayerChooser()}));this._searchSourceSettings&&this._searchSourceSettings._currentSourceSetting&&this._searchSourceSettings._currentSourceSetting.displayField&&this._searchSourceSettings._currentSourceSetting.displayField.closeDropDown();this.traverseUnitsNode.closeDropDown();this.traverseDirectionUnitsNode.closeDropDown();this.areaUnitsDropDown.closeDropDown();this.defaultBufferUnitsNode.closeDropDown();this._downloadTab.closeDownloadTabDropdowns()})));
this._configurationTabsContainer.startup();u.has("chrome")&&A.add(this._configurationTabsContainer.containerNode,"esriRTLTabContainerNode")},_initLoading:function(){var a;this.loading=new w({hidden:!0});a=d(".widget-setting-popup")[0];this.loading.placeAt(a);this.loading.startup()},_createSearchSourceSettings:function(){var a={};this.config&&this.config.hasOwnProperty("searchSourceSettings")&&(a=this.config.searchSourceSettings);this._searchSourceSettings=new G({nls:this.nls,map:this.map,appConfig:this.appConfig,
shelter:this.loading,config:a},p.create("div",{},this.searchSourceTabNode));this.own(c(this._searchSourceSettings,"invalid-source-setting",e.hitch(this,function(){this._errorMessage(this.nls.searchSourceSetting.invalidSearchSources,this.nls.searchSourceSetting.searchSourceSettingTabTitle)})))},setConfig:function(){if(this.config){this.config.aoiTabText?this.aoiTabTextBox.set("value",this.config.aoiTabText):this.aoiTabTextBox.set("value",this.nls.generalTab.aoiTabText);this.config.reportTabText?this.reportsTabTextBox.set("value",
this.config.reportTabText):this.reportsTabTextBox.set("value",this.nls.generalTab.reportTabText);this.config.placenameButtonText?this.placeNameTextBox.set("value",this.config.placenameButtonText):this.placeNameTextBox.set("value",this.nls.analysisTab.placenameButtonText);this.config.drawToolsButtonText?this.drawToolTextBox.set("value",this.config.drawToolsButtonText):this.drawToolTextBox.set("value",this.nls.analysisTab.drawToolsButtonText);this.config.shapefileButtonText?this.uploadShapeFileTextBox.set("value",
this.config.shapefileButtonText):this.uploadShapeFileTextBox.set("value",this.nls.analysisTab.shapefileButtonText);this.config.coordinatesButtonText?this.coordinatesTextBox.set("value",this.config.coordinatesButtonText):this.coordinatesTextBox.set("value",this.nls.analysisTab.coordinatesButtonText);(this.config.defaultBufferDistance||0===this.config.defaultBufferDistance)&&this.defaultBufferDistanceTextBox.set("value",this.config.defaultBufferDistance);this.config.traverseUnit&&this._setDropDownSavedOptionSelected(this.traverseUnitsNode,
this.config.traverseUnit);this.config.traverseDirectionUnit&&this._setDropDownSavedOptionSelected(this.traverseDirectionUnitsNode,this.config.traverseDirectionUnit);this.config.areaUnits&&("Standard"===this.config.areaUnits||"Metric"===this.config.areaUnits?this._setBackwardCompatibilityAreaUnit(this.areaUnitsDropDown,this.config.areaUnits):this._setDropDownSavedOptionSelected(this.areaUnitsDropDown,this.config.areaUnits));this.config.maxFeaturesForAnalysis&&this.maxFeatureCountTextBox.set("value",
this.config.maxFeaturesForAnalysis);this.config.defaultBufferUnit&&this._setDropDownSavedOptionSelected(this.defaultBufferUnitsNode,this.config.defaultBufferUnit);(this.config.searchTolerance||0===this.config.searchTolerance)&&this.searchToleranceTextBox.set("value",this.config.searchTolerance);this._displaySearchTolerance(this.areaUnitsDropDown.get("value"));this.placeNameCheckBox.setValue(this.config.showPlacenameWidget);this.drawToolCheckBox.setValue(this.config.showDrawToolsWidget);this.drawToolCheckBox.checked?
A.remove(this.selectDrawToolFieldSet,"esriCTHidden"):A.add(this.selectDrawToolFieldSet,"esriCTHidden");this.uploadShapefileCheckBox.setValue(this.config.showShapefileWidget);this.coordinatesCheckBox.setValue(this.config.showCoordinatesWidget);this.allowUploadShapefileCheckBox.setValue(this.config.allowShapefilesUpload);this.allowVisibleLayerAnalysisCheckBox.setValue(this.config.allowVisibleLayerAnalysisOnly);if(this._addLayerTable&&this.config.layers){this._addLayerTable.clear();for(var a=0;a<this.config.layers.length;a++)this._populateLayerTableRow(this.config.layers[a],
!1)}this._createSearchSourceSettings();this.config.hasOwnProperty("showPointTool")&&this.pointSelectToolCheckBox.setValue(this.config.showPointTool);this.config.hasOwnProperty("showPolylineTool")&&this.polylineSelectToolCheckBox.setValue(this.config.showPolylineTool);this.config.hasOwnProperty("showExtentTool")&&this.extentSelectToolCheckBox.setValue(this.config.showExtentTool);this.config.hasOwnProperty("showPolygonTool")&&this.polygonSelectToolCheckBox.setValue(this.config.showPolygonTool)}},_displaySearchTolerance:function(a){this.searchToleranceTextBox.get("value");
this.searchToleranceLabel.innerHTML="Feet"===a||"Miles"===a?this.nls.analysisTab.searchToleranceLabelText+" ("+this.nls.units.feet+")":"Meters"===a||"Kilometers"===a||"Hectares"===a?this.nls.analysisTab.searchToleranceLabelText+" ("+this.nls.units.meters+")":this.nls.analysisTab.searchToleranceLabelText},_onEditLayerClicked:function(a){var c=a.layerInfo;this._curRow=a;a.layerSelector&&a.layerSelector.hideLayerChooser();c||(c={selectedFields:null},a.layerInfo=c);c.layerLabel=a.labelText.value;a.layerSelector.getSelectedItem()&&
(a.layerSelector.getSelectedItem().name&&(c.layerName=a.layerSelector.getSelectedItem().name),a.layerSelector.getSelectedItem().layerInfo&&(c.layer=a.layerSelector.getSelectedItem().layerInfo));this._createFieldSelectorPopup({nls:this.nls,featureLayer:c.layer.layerObject,selectedFields:a.selectedFields,layerGridInfo:c},a)},_createFieldSelectorPopup:function(a,c){var b,d,f,g=!0,k;k=a.layerGridInfo.selectedFields;var h=new y(a);d=p.create("button",{title:this.nls.common.ok});d.label=this.nls.common.ok;
f=p.create("button",{title:this.nls.common.cancel});f.label=this.nls.common.cancel;b=new z({titleLabel:this.nls.analysisTab.addFieldsPopupTitle+": "+c.layerSelector.getSelectedItem().name,content:h,width:830,height:500,autoHeight:!0,buttons:[d,f]});d.onClick=e.hitch(this,function(){var c={};g=!0;this._curRow.selectedFields=h.okButtonClicked();this._validateFields(this._curRow.selectedFields,this._curRow);for(var d in this._curRow.selectedFields)""!==this._curRow.selectedFields[d].label.trim()&&(c[this._curRow.selectedFields[d].alias]=
this._curRow.selectedFields[d].label.trim());(g=this._validateDuplicateLabelsForFields(c))?(this._curRow=null,h.destroy(),h=null,b.close()):this._curRow.selectedFields=a.layerGridInfo.selectedFields=k});f.onClick=e.hitch(this,function(){this._curRow=null;h.destroy();h=null;b.close()})},_enableDisableAOIToolsTextBox:function(){this.own(c(this.placeNameCheckBox,"change",e.hitch(this,function(a){a?this.placeNameTextBox.set("disabled",!1):this.placeNameTextBox.set("disabled",!0)})));this.own(c(this.drawToolCheckBox,
"change",e.hitch(this,function(a){a?this.drawToolTextBox.set("disabled",!1):this.drawToolTextBox.set("disabled",!0)})));this.own(c(this.uploadShapefileCheckBox,"change",e.hitch(this,function(a){a?this.uploadShapeFileTextBox.set("disabled",!1):this.uploadShapeFileTextBox.set("disabled",!0)})));this.own(c(this.coordinatesCheckBox,"change",e.hitch(this,function(a){a?(this.coordinatesTextBox.set("disabled",!1),this.traverseUnitsNode.set("disabled",!1),this.traverseDirectionUnitsNode.set("disabled",!1)):
(this.coordinatesTextBox.set("disabled",!0),this.traverseUnitsNode.set("disabled",!0),this.traverseDirectionUnitsNode.set("disabled",!0))})))},_setBackwardCompatibilityAreaUnit:function(c,b){"Standard"===b?(b="Miles",c.set("value","Miles")):"Metric"===b&&(b="Kilometers",c.set("value","Kilometers"));a.forEach(c.options,e.hitch(this,function(a){a.selected=a.value===b?"selected":!1}))},_setDropDownSavedOptionSelected:function(c,b){c.setValue(b);a.forEach(c.options,e.hitch(this,function(a){a.selected=
a.value===b?"selected":!1}))},_validateConfigForInputFields:function(c,b,d){var f=!0;a.some(v(".esriCTTextBox",c),e.hitch(this,function(a){if(q.byNode(a)&&!q.byNode(a).disabled&&!q.byNode(a).isValid())return"analysis"===d?this._errorMessage(b,this.nls.analysisTab.analysisTabLabel):this._errorMessage(b,this.nls.generalTab.generalTabLabel),f=!1,!0}));return f},_validateConfigForBufferDistanceFields:function(c,b){var d=!0;a.some(v(".esriCTTextBox",c),e.hitch(this,function(a){if(q.byNode(a)&&(!q.byNode(a).isValid()||
isNaN(q.byNode(a).get("value"))))return this._errorMessage(b,this.nls.generalTab.generalTabLabel),d=!1,!0}));return d},_validateConfigForCheckBoxes:function(){var c=!1;a.some(v(".esriCTCheckBox",this.aoiToolsSection),e.hitch(this,function(a){if(q.byNode(a).checked)return c=!0}));c||this._errorMessage(this.nls.errorMsg.atLeastOneCheckboxCheckedErrorMsg,this.nls.analysisTab.analysisTabLabel);return c},_errorMessage:function(a,c){(new x({message:a,buttons:[{label:this.nls.common.ok}]})).message=a;this._configurationTabsContainer&&
c&&this._configurationTabsContainer.getSelectedTitle()!==c&&this._configurationTabsContainer.selectTab(c)},_createSymbolPicker:function(a,b,d,g){var h={},k,l;d&&(h.type=f.getSymbolTypeByGeometryType(d),h.symbol=this.config&&this.config.placenameSymbology[b]?n.fromJson(this.config.placenameSymbology[b]):n.fromJson(this.config.aoiSymbol),k=this._createPreviewContainer(a,!1),l={symbolChooserTitle:g,symbolParams:h,symbolType:b,nls:this.nls},this._showSelectedSymbol(k,h.symbol,b),this.own(c(k,"click",
e.hitch(this,function(){h.symbol=n.fromJson(this._symbolParams[b]);this._initSymbolChooserPopup(l,k)}))));return k},_createPreviewContainer:function(a,c){c&&(a=p.create("table",{cellspacing:"0",cellpadding:"0"},a),a=p.create("tr",{"class":"esriCTTRPreviewText"},a),c=p.create("td",{},a),p.create("div",{innerHTML:this.nls.generalTab.previewLabel,"class":"esriCTSymbolPreviewText"},c),a=p.create("td",{},a));return a=p.create("div",{"class":"esriCTSymbolChooserNode"},a)},_initSymbolChooserPopup:function(a,
c){var b=new r(a);b.onOkClick=e.hitch(this,function(){var d;b.symbolChooser.getValidSymbol?(d=b.symbolChooser.getValidSymbol())?(this._showSelectedSymbol(c,d,a.symbolType),b.popup.close()):this._errorMessage(this.nls.generalTab.invalidSymbolValue):(d=b.symbolChooser.getSymbol(),this._showSelectedSymbol(c,d,a.symbolType),b.popup.close())})},_showSelectedSymbol:function(a,c,b){p.empty(a);if(c){var d=k.createSymbolNode(c);d||(d=p.create("div"));p.place(d,a);this._symbolParams[b]=c.toJson()}},_initDownloadTab:function(){this._downloadTab=
new t({map:this.map,downloadOptions:this.config.downloadSettings,reportSettings:this.config.reportSettings,loadingIndicator:this.loading,nls:this.nls,appConfig:this.appConfig,folderUrl:this.folderUrl,layerInfosObj:this._layerInfosObj});this._downloadTab.placeAt(this.downloadTabNode)},_setDownloadInfo:function(a){var c,b;this._downloadTab&&(c=this._getLayerInfo(a,!0))&&(b=O({url:c.url+"?f\x3dpjson"}),b.then(e.hitch(this,function(b){c.capabilities=b.capabilities;this._downloadTab.checkLayerForDownloadOptions(c,
a.rowIndex)})))},_removeDownloadInfo:function(a){this._downloadTab&&this._downloadTab.deleteRow(a)},_validateGPTaskDownloadOption:function(a){return"extractDataTask"===v("input[type\x3dradio]:checked",this.downloadTabNode)[0].value&&""===a?(this._errorMessage(this.nls.downloadTab.errorMessages.noExtractDataTaskURL,this.nls.downloadTab.downloadTabLabel),!1):!0},_getSelectedLayers:function(c){var b,d=[],f;f=this._addLayerTable.getRows();a.forEach(f,e.hitch(this,function(a){a.layerSelector&&(b=this._getLayerInfo(a,
c),b.selectedFields=a.selectedFields,d.push(b))}));return d},_getLayerInfo:function(a,c){var b,d;if(d=a.layerSelector.getSelectedItem())b={url:d.layerInfo.layerObject.url,geometryType:d.layerInfo.layerObject.geometryType,id:d.layerInfo.id,label:u.stripHTML(a.labelText&&a.labelText.value?a.labelText.value.trim():""),layerName:d.layerInfo.title,layerVersion:d.layerInfo.layerObject.version},c&&(b.capabilities=d.layerInfo.layerObject.capabilities),a.layerInfo&&a.layerInfo.selectedFields&&(b.selectedFields=
a.layerInfo.selectedFields),b.layerId=d.layerId?d.layerId:b.url.substr(b.url.lastIndexOf("/")+1,b.url.length),a=b.url.substr(0,b.url.lastIndexOf("/")+1),b.baseURL=a;return b},_createLayerChooserMapArgs:function(){return{multiple:!1,createMapResponse:this.map.webMapResponse,filter:D.createFeaturelayerFilter([],!1,!1)}},_initLayerSelector:function(){var a;this.loading.show();this._idsOfSelectedLayers=[];this._totalLayers=[];a=this._createLayerChooserMapArgs();this._layerChooserFromMap=new D(a);this._layerChooserFromMap.startup();
a=this._layerChooserFromMap.layerInfosObj.getLayerInfoArray();var b=[];this._getAllFilteredLayers(a,b);L(b).then(e.hitch(this,function(){this.loading.hide();0<this._totalLayers.length?A.remove(this.btnAddLayer,"esriCTDisabled"):(A.add(this.btnAddLayer,"esriCTDisabled"),A.remove(this.lblNoValidLayers,"esriCTHidden"));this._createAddLayerGrid();this._createSelectLayerGrid();this.setConfig(this.config);this.own(c(this.btnAddLayer,"click",e.hitch(this,this._addLayerButtonClicked)));this._populateSelectableLayer()}))},
_getAllFilteredLayers:function(b,c){a.forEach(b,e.hitch(this,function(a){var b;a.isLeaf()?(b=new I,this._layerChooserFromMap.filter(a).then(e.hitch(this,function(c){c&&this._totalLayers.push(a);b.resolve()})),c.push(b)):this._getAllFilteredLayers(a.newSubLayers,c)}))},_captureAddLayerTableEvents:function(){var a,b,d;this.own(c(this._addLayerTable,"actions-edit",e.hitch(this,this._onEditLayerClicked)));this.own(c(this._addLayerTable,"row-up",e.hitch(this,function(c){a=this._idsOfSelectedLayers[c.rowIndex];
b=this._idsOfSelectedLayers[c.rowIndex+1];this._idsOfSelectedLayers.splice(c.rowIndex,2,b,a);this._downloadTab&&this._downloadTab.rowUp(c.rowIndex)})));this.own(c(this._addLayerTable,"row-down",e.hitch(this,function(a){d=this._idsOfSelectedLayers[a.rowIndex];b=this._idsOfSelectedLayers[a.rowIndex-1];this._idsOfSelectedLayers.splice(a.rowIndex-1,2,d,b);this._downloadTab&&this._downloadTab.rowDown(a.rowIndex)})));this._addLayerTable.onBeforeRowDelete=e.hitch(this,this._deleteLayer)},_createAddLayerGrid:function(){this._addLayerTable=
new C({fields:[{name:"field",title:this.nls.analysisTab.addLayerNameTitle,type:"empty",editable:"true",width:"200px"},{name:"field",title:this.nls.common.label,type:"empty",editable:"true",width:"200px"},{name:"actions",title:this.nls.common.actions,width:"80px",type:"actions",actions:["up","down","edit","delete"]}],selectable:!1});this._addLayerTable.placeAt(this.addLayerTableNode);this._captureAddLayerTableEvents();this._addLayerTable.startup()},_createSelectLayerGrid:function(){this._selectLayerTable=
new C({fields:[{name:"selectable",title:"",type:"checkbox","class":"isSelectable",width:"5%",editable:!0,hidden:!1},{name:"selectableLayerName",title:this.nls.analysisTab.addLayerNameTitle,type:"text",editable:!1,width:"95%",hidden:!1},{name:"selectableLayerID",title:"",type:"text",editable:!1,width:"0%",hidden:!0}],selectable:!1});this._selectLayerTable.placeAt(this.drawToolSelectableLayerContainer);this._selectLayerTable.startup()},_populateSelectableLayer:function(){a.forEach(this._totalLayers,
e.hitch(this,function(a){var b;b=!0;this.config&&this.config.hasOwnProperty("drawToolSelectableLayers")&&(b=!1,-1<this.config.drawToolSelectableLayers.indexOf(a.id)&&(b=!0));this._selectLayerTable.addRow({selectable:b,selectableLayerName:a.title,selectableLayerID:a.id})}))},_addLayerLabel:function(a,c){var d,e;d=v(".simple-table-cell",a)[1];A.add(d,"esriCTLayerInputCell");e=new b({"class":"esriCTLayerLabelTextBox"});e.placeAt(d);e.startup();a.labelText=e;c&&a.labelText.set("value",c)},_populateLayerTableRow:function(b,
c){var d,f,g,h,k;d=this._addLayerTable.addRow({});if(d.success&&d.tr){d=d.tr;f=b.selectedFields;if(!f){f={};if(h=b.getPopupInfo())g=h.fieldInfos;k=b.layerObject.fields;a.forEach(g,e.hitch(this,function(c){c.visible&&c.fieldName.toLowerCase()!==b.layerObject.objectIdField.toLowerCase()&&a.forEach(k,e.hitch(this,function(a){c.fieldName===a.name&&(c=e.clone(c),c.label=null,f[c.fieldName]=c)}))}));0===Object.keys(f).length&&(f=null)}this._validateFields(f,d);d.layerInfo=b;d.selectedFields=f;this._addLayerLabel(d,
b.label);this._addLayerDropDown(d,b,c)}},_validateFields:function(a,b){var c;(c=v(".simple-table-cell",b)[2])&&!a?(b.errorDiv||(b.errorDiv=p.create("div",{"class":"esriCTFieldError"},c),b.errorSpan=p.create("span",{"class":"jimu-icon jimu-icon-error",title:this.nls.errorMsg.noFieldSelected},b.errorDiv)),A.remove(b.errorSpan,"esriCTHidden")):this._enableOk(b)},_enableOk:function(a){a&&a.errorSpan&&(A.add(a.errorSpan,"esriCTHidden"),v(".esriCTFieldError",this.addLayerTableNode).length===v(".esriCTFieldError \x3e .esriCTHidden",
this.addLayerTableNode).length&&(a=d(".button-container")[0],K.set(a.children[2],"display","inline-block"),K.set(a.children[3],"display","none")))},_addLayerButtonClicked:function(){this.loading.show();var a;A.contains(this.btnAddLayer,"esriCTDisabled")||(a=this._pickUnusedLayer(),this._populateLayerTableRow(a[0],!0))},_pickUnusedLayer:function(){return this._idsOfSelectedLayers.length<this._totalLayers.length?a.filter(this._totalLayers,e.hitch(this,function(a){return 0>this._idsOfSelectedLayers.indexOf(a.id)})):
this._totalLayers},_addLayerDropDown:function(a,b,d){var f,g,h;a.layerSelector&&a.layerSelector.destroy();g=this._createLayerChooserMapArgs();h=new D(g);h.startup();f=v(".simple-table-cell",a)[0];A.add(f,"esriCTLayerInputCell");h=new H({layerChooser:h});h.placeAt(f);h.startup();a.layerSelector=h;if(b&&(h.setSelectedLayer(b),this._addLayer(a,b,d),g.createMapResponse.errors&&g.createMapResponse.errors[0]&&g.createMapResponse.errors[0].name&&"Error"===g.createMapResponse.errors[0].name&&null===h.getSelectedItem())){for(d=
0;d<this.config.downloadSettings.layers.length;d++)if(b.url===this.config.downloadSettings.layers[d].url){this.config.downloadSettings.layers.splice(d,1);break}this._deleteLayer(a);this._addLayerTable.deleteRow(a)}this.own(c(h,"selection-change",e.hitch(this,function(b){b&&0<b.length&&b[0]&&b[0].hasOwnProperty("id")?a.layerInfo&&b[0].id!==a.layerInfo.id&&(this._updateLayer(a,b),a.layerInfo=b[0]):(this._errorMessage(this.nls.errorMsg.errorInSelectingLayer),this._deleteLayer(a),this._addLayerTable.deleteRow(a))})))},
_addLayer:function(a,b,c){b&&b.hasOwnProperty("id")&&(this._idsOfSelectedLayers.push(b.id),c&&this._setDownloadInfo(a))},_updateLayer:function(b,c){var d,f,g,h;this.loading.show();this._idsOfSelectedLayers[b.rowIndex]=c[0].id;this._setDownloadInfo(b);d=this._layerInfosObj.getLayerInfoById(c[0].id);f={};if(c=d.getPopupInfo())g=c.fieldInfos;h=d.layerObject.fields;a.forEach(g,e.hitch(this,function(b){b.visible&&b.fieldName.toLowerCase()!==d.layerObject.objectIdField.toLowerCase()&&a.forEach(h,e.hitch(this,
function(a){b.fieldName===a.name&&(b=e.clone(b),b.label=null,f[b.fieldName]=b)}))}));0===Object.keys(f).length&&(f=null);b.selectedFields=f;this._validateFields(b.selectedFields,b);this.loading.hide()},_deleteLayer:function(a){this.loading.show();a.layerSelector&&a.layerSelector.destroy();this._removeDownloadInfo(a.rowIndex);this._idsOfSelectedLayers.splice(a.rowIndex,1);A.remove(this.btnAddLayer,"esriCTDisabled");this._enableOk(a);this.loading.hide();return!0},_validateMaxFeatureCount:function(){if(0<
this.maxFeatureCountTextBox.get("value")&&this.maxFeatureCountTextBox.isValid())return!0;this._errorMessage(this.nls.errorMsg.errorInMaxFeatureCount,this.nls.analysisTab.analysisTabLabel);return!1},_showErrorMsgforInvalidFields:function(){var a,b,c,e;c=this._addLayerTable.getRows();for(var f in c)if(e=c[f],a=d(".esriCTFieldError",e),b=d(".esriCTFieldError \x3e .esriCTHidden",e),a.length!==b.length){this._errorMessage(this.nls.analysisTab.invalidLayerErrorMsg+" "+e.layerSelector.getSelectedItem().name,
this.nls.analysisTab.analysisTabLabel);break}},_validateCustomOptions:function(){var a=this._downloadTab.validateCustomOptions();return 0<a.length?(this._errorMessage(a[0],this.nls.downloadTab.downloadTabLabel),!1):!0},_validateDrawTools:function(){return!this.drawToolCheckBox.checked||this.pointSelectToolCheckBox.checked||this.polylineSelectToolCheckBox.checked||this.extentSelectToolCheckBox.checked||this.polygonSelectToolCheckBox.checked||0!==this._getDrawToolSelectableLayers().length?!0:(this._errorMessage(this.nls.analysisTab.selectingDrawToolErrorMessage,
this.nls.analysisTab.analysisTabLabel),!1)}})});