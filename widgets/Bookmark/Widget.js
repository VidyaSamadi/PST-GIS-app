// All material copyright ESRI, All Rights Reserved, unless otherwise specified.
// See http://js.arcgis.com/3.15/esri/copyright.txt and http://www.arcgis.com/apps/webappbuilder/copyright.txt for details.
//>>built
require({cache:{"widgets/Bookmark/HeadBar":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/on ./a11y/HeadBar dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dojo/text!./HeadBar.html".split(" "),function(h,g,c,b,m,k,p,n,a,d){h=g([p,n,a,h],{baseClass:"dojoDndSource dojoDndTarget dojoDndContainer",templateString:d,nls:null,map:null,bookmarksContainer:null,layout:null,editingName:!1,initMapState:null,postMixInProperties:function(){this.nls=
c.mixin(this.nls,window.jimuNls.common)},startup:function(){this.inherited(arguments);this.refreshUI();this.a11y_initEvents();this.own(m(this.filterInput,"blur",c.hitch(this,this.onFilterChange)));this.own(m(this.filterInput,"keyUp",c.hitch(this,this.onFilterChange)))},refreshUI:function(){this.editable?(b.addClass(this.domNode,"editable"),b.removeClass(this.addBtn,"hide")):(b.removeClass(this.domNode,"editable"),b.addClass(this.addBtn,"hide"));this._toggleLayoutBtnDisplay(this.layout.defaultMode);
!1!==this.editable||!0===this.layout.list&&!0===this.layout.cards?b.removeClass(this.domNode,"hide"):b.addClass(this.domNode,"hide")},_toggleLayoutBtnDisplay:function(a){b.addClass(this.listBtn,"hide");b.addClass(this.cardsBtn,"hide");"list"===a?this.listMode():this.cardsMode();!0===this.layout.list&&!0===this.layout.cards?("list"===a?b.removeClass(this.cardsBtn,"hide"):b.removeClass(this.listBtn,"hide"),b.addClass(this.displayMode,"two-modes")):b.removeClass(this.displayMode,"two-modes")},cardsMode:function(){b.removeClass(this.bookmarksContainer,
"list");b.addClass(this.bookmarksContainer,"cards");b.addClass(this.domNode,"list");b.removeClass(this.domNode,"cards");this.emit("layout-cards")},listMode:function(){b.removeClass(this.bookmarksContainer,"cards");b.addClass(this.bookmarksContainer,"list");b.addClass(this.domNode,"cards");b.removeClass(this.domNode,"list");this.emit("layout-list")},addingBookmark:function(){this.emit("add")},onFilterChange:function(){var a=this.filterInput.getValue();this.emit("filter-change",a)},onFilterBlur:function(){var a=
this.filterInput.getValue();this.emit("filter-blur",a)}});h.extend(k);return h})},"widgets/Bookmark/a11y/HeadBar":function(){define(["dojo/_base/lang","dojo/on","dijit/a11yclick"],function(h,g,c){return{a11y_initEvents:function(){this.own(g(this.addBtn,c,h.hitch(this,function(){this.addingBookmark()})));this.own(g(this.cardsBtn,c,h.hitch(this,function(b){this._toggleLayoutBtnDisplay("cards");this._isKeyEvent(b)&&this.listBtn&&this.listBtn.focus()})));this.own(g(this.listBtn,c,h.hitch(this,function(b){this._toggleLayoutBtnDisplay("list");
this._isKeyEvent(b)&&this.cardsBtn&&this.cardsBtn.focus()})))},_isKeyEvent:function(b){return b&&b._origType?!0:!1}}})},"widgets/Bookmark/WebmapBookmarks":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on esri/SpatialReference jimu/BaseWidget dijit/_TemplatedMixin ./utils".split(" "),function(h,g,c,b,m,k,p,n,a,d){var e=window.Sortable;return g([n,a,h],{baseClass:"dojoDndSource dojoDndTarget dojoDndContainer bookmarker-nodes",templateString:"\x3cdiv\x3e\x3c/div\x3e",
nls:null,postCreate:function(){this.inherited(arguments);this.drawerHandle=b.create("div",{"class":"drawer-handle"},this.domNode);this.bookMarkerContainer=b.create("div",{"class":"webmap"},this.domNode)},startup:function(){this.inherited(arguments);this.config.syncMode&&(!1===this.config.syncMode.webmap&&!1===this.config.syncMode.custom?b.addClass(this.domNode,"hide"):b.removeClass(this.domNode,"hide"));this.sortableBookMarkerNodes=e.create(this.bookMarkerContainer,{sort:!1,disabled:!0,animation:100})},
refresh:function(){d.empty(this.bookmarks);this.bookmarks=[];this.config.syncMode&&!0===this.config.syncMode.webmap&&(this.bookmarks=d.readBookmarksInWebmap(this.map));var a=c.clone(this.config.bookmarks2D);m.forEach(a,function(a){a&&!0===this.config.syncMode.custom&&this.bookmarks.push(a)},this);d.updateBookmarks(this.bookmarks);this.displayBookmarks(this.bookmarks)},_onBookmarkClick:function(a){require(["esri/geometry/Extent"],c.hitch(this,function(b){if(!1!==a.isSaveExtent){var f=a.extent;f.spatialReference?
new p(f.spatialReference):new p({wkid:4326});this.map.setExtent(new b(f))}d.layerInfosRestoreState(a.isSaveLayers,a.layerOptions)}))},filter:function(a){d.filter(a,this.bookmarks)},displayBookmarks:function(a){d.empty(a,this.bookMarkerContainer);m.forEach(a,function(a){if(a){var f={editBtn:!1,changeImgBtn:!0,layerInfosIcon:d.isWithLayerInfos(a)},f=d.createBookMarkNode(a,this.nls,this.folderUrl,f,{editBtn:!1,deleteBtn:!1,renameBtn:!1,changeImgBtn:!1});a.itemNode=f;this.own(k(f,"thumbnail-click",c.hitch(this,
c.partial(this._onBookmarkClick,a))))}},this);a.forEach(c.hitch(this,function(a){a&&a.itemNode&&a.itemNode.domNode&&b.place(a.itemNode.domNode,this.bookMarkerContainer,"last")}))}})})},"widgets/Bookmark/utils":function(){define("dojo/_base/lang dojo/_base/array dojo/_base/html jimu/utils ./ItemNode libs/storejs/store jimu/LayerInfos/LayerInfos".split(" "),function(h,g,c,b,m,k,p){var n={_uID:0,getUID:function(){return n._uID++},findBookMark:function(a,b){var e=-1,d=null;g.some(b,function(b,f){if(parseInt(b._uID,
10)===parseInt(a._uID,10))return e=f,d=b,!0},this);return-1!==e?{bookmark:d,idx:e}:null},findBookMarkByUID:function(a,b){var e=-1,d=null;g.some(b,function(b,f){if(parseInt(b._uID,10)===parseInt(a,10))return e=f,d=b,!0},this);return-1!==e?{bookmark:d,idx:e}:null},findNextBookMarkByIdx:function(a,b){var e=null;a+1<=b.length-1&&(e=b[a+1]);return e},findBookMarkByNameAndExtent:function(a,b){var e=-1,d=null;g.some(b,function(b,f){if(b.name===a.name&&b.extent&&a.extent&&b.extent.xmax===a.extent.xmax&&b.extent.xmin===
a.extent.xmin&&b.extent.ymax===a.extent.ymax&&b.extent.ymin===a.extent.ymin)return e=f,d=b,!0},this);return-1!==e?{bookmark:d,idx:e}:null},isBookmarksDataEmpty:function(a){return Array.isArray(a)&&0===a.length?!0:!1},empty:function(a,b){var e=a;g.forEach(a,function(a){a&&a.itemNode&&a.itemNode.destroy()},this);a=[];a=e;b&&c.empty(b)},createBookMarkNode:function(a,d,e,c,l){e=a.thumbnail||"undefined"!==typeof a.thumbnail&&""!==a.thumbnail?b.processUrlInWidgetConfig(a.thumbnail,e):b.processUrlInWidgetConfig("images/thumbnail_default.png",
e);var f=n.getUID();a._uID=f;return new m({dataId:f,img:e,label:a.displayName||a.name,display:c,nls:d,a11y:l})},cloneBookmarksDataWithOutDom:function(a){var b=[];if("undefined"===typeof a)return b;a.forEach(h.hitch(this,function(a){a.itemNode&&a.itemNode.domNode&&(a=h.clone(a),delete a.itemNode,b.push(a))}));return b},readBookmarksInWebmap:function(a){var b=[];if(!a.itemInfo||!a.itemInfo.itemData||!a.itemInfo.itemData.bookmarks)return b;g.forEach(a.itemInfo.itemData.bookmarks,function(a){a=h.mixin({},
a);a.isInWebmap=!0;b.push(a)},this);return b},filterBookmarkFromTarget:function(a,b){for(var e=[],d=0,c=a.length;d<c;d++){var f=a[d];n.findBookmarkByNameOrExtent(f,b)||e.push(f)}return e},findBookmarkByNameOrExtent:function(a,b){var e=-1,d=null;g.some(b,function(b,f){if((b.displayName||b.name)===(a.displayName||a.name)||b.extent&&a.extent&&b.extent.xmax===a.extent.xmax&&b.extent.xmin===a.extent.xmin&&b.extent.ymax===a.extent.ymax&&b.extent.ymin===a.extent.ymin)return e=f,d=b,!0},this);return-1!==
e?{bookmark:d,idx:e}:null},filter:function(a,b){b.forEach(function(b){"undefined"!==typeof a&&""!==a?-1!==(b.displayName||b.name).indexOf(a)?m.show(b):m.hide(b):m.show(b)})},getKeysKey:function(){return this.appConfig.map["3D"]?this.name+".3D":this.name+".2D"},getAutoRenameBeforeAdd:function(a,b,e){var d=0,c=new RegExp(/\((\d+)\){1}$/g);g.forEach(b,function(f){f&&"undefined"!==typeof f.name&&-1!==f.name.indexOf(a)&&("undefined"===typeof e||!0===e&&a.length===f.name.length)&&(f=c.exec(f.displayName),
null===f&&0===d?d=1:f&&"undefined"!==typeof f[1]&&f[1]>=d&&(d=parseInt(f[1],10)+1))});return 0===d?a:a+"("+d+")"},processDuplicateName:function(a){for(var b=[],e={},c=a.length-1;0<=c;c--){var k=a[c];if(!k||"undefined"===typeof k.name)return;var f=k.name;f in e?e[f]++:e[f]=0;if(0<e[f]){var r=f+"("+e[f]+")";r in e?(e[r]++,e[f]++):e[r]=0;k.displayName=0<e[r]?f+"("+e[f]+")":r;k._autoRename=!0}else k.displayName=f;b.push(k)}a=b},toogleCheckboxChecked:function(a){a&&a.setValue&&a.setValue(!a.checked)},
setCheckboxWithoutEvent:function(a,b){a&&a.check&&a.uncheck&&(!0===b?a.check(!0):a.uncheck(!0))},layerInfosRestoreState:function(a,b){var e=p.getInstanceSync(),c={};if(b&&a){for(var d in b)if(b.hasOwnProperty(d)){a=b[d];var f=!1,f="undefined"===typeof a.visible?a.selected:a.visible;c[d]={visible:f}}e.restoreState({layerOptions:c})}},getlayerInfos:function(){var a={},b=p.getInstanceSync();b&&b.traversal&&b.traversal(h.hitch(this,function(b){a[b.id]={visible:b.isVisible()}}));return a},isWithLayerInfos:function(a){return a.layerOptions&&
!1!==a.isSaveLayers?!0:!1},stringifyBookmarks:function(a){var b=[];g.forEach(a,function(a){a=h.mixin({},a);a.itemNode&&delete a.itemNode;b.push(a)},this);return b},parseBookmarks:function(a){return h.clone(a)},getKey:function(a){return"Bookmark.2D."+encodeURIComponent(b.getAppIdFromUrl())+"."+a},isConfigBefore5_3:function(a){return"undefined"===typeof a.syncMode||!0===a.needToUpdateFlag?!0:!1},getUpdateCacheKey:function(a){return"bookmark_cache_updated_"+encodeURIComponent(n.getKey(a))},setUpdateCacheKey:function(a){k.set(n.getUpdateCacheKey(a),
!0)},isCacheKeyUpdatedy:function(a){return k.get(n.getUpdateCacheKey(a))},setDefaultConfigForUpdate:function(a){a.needToUpdateFlag=!0;a.layout={cards:!0,list:!1,defaultMode:"cards"};a.editable=!0;Array.isArray(a.bookmarks2D)&&0<a.bookmarks2D.length?a.syncMode={webmap:!1,custom:!0}:a.syncMode={webmap:!0,custom:!0}},completeUpdateConfig:function(a){a.needToUpdateFlag&&delete a.needToUpdateFlag},updateBookmarks:function(a){for(var b=0;b<a.length;b++)"undefined"===typeof a[b]&&(a.splice(b,1),b--);var c=
/\/widgets\/Bookmark\/images\/thumbnail_default.png$/;g.forEach(a,function(a){"undefined"===typeof a.isSaveExtent&&(a.isSaveExtent=!0);a.thumbnail&&c.test(a.thumbnail)&&delete a.thumbnail},this)},getLayoutRecorderKey:function(){return"bookMarkLayout_"+encodeURIComponent(b.getAppIdFromUrl())},cleanLayoutRecorder:function(a){k.remove(n.getLayoutRecorderKey(a))},setLastLayout:function(a){k.set(n.getLayoutRecorderKey(),a)},getLastLayout:function(){return k.get(n.getLayoutRecorderKey())},oldBookmarksBackup:'[{"displayName":"Greater Manchester or Greater Lincolnshire HAHAHAHA","name":"Greater Manchester or Greater Lincolnshire HAHAHAHA","extent":{"type":"extent","xmin":8997982.70263581,"ymin":2110475.6293307655,"xmax":14672667.682525788,"ymax":6024051.4775307495,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"Peterborough and Cambridgeshire HEHEHEHEHEH","name":"Peterborough and Cambridgeshire HEHEHEHEHEH","extent":{"type":"extent","xmin":9055621.33977054,"ymin":445965.34674161975,"xmax":14730306.319660518,"ymax":4359541.194941604,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"mentougou biejing china","name":"mentougou biejing china","extent":{"type":"extent","xmin":9502343.119353313,"ymin":3151483.465165457,"xmax":15177028.09924329,"ymax":7065059.313365442,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u51e4\u51f0\u7f6e\u5730\u4e09\u5143\u6865\u5317\u4eac\u4e2d\u56fd\u4e16\u754c\u592a\u9633\u7cfb\u5b87\u5b99","name":"\u51e4\u51f0\u7f6e\u5730\u4e09\u5143\u6865\u5317\u4eac\u4e2d\u56fd\u4e16\u754c\u592a\u9633\u7cfb\u5b87\u5b99","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u77ed\u4e2d\u6587","name":"\u77ed\u4e2d\u6587","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"short","name":"short","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u4e2d\u6587 English","name":"\u4e2d\u6587 English","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"Underneath the icons","name":"Underneath the icons","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"\u4e2d\u6587\u4e2d\u6587 \u5475\u5475","name":"\u4e2d\u6587\u4e2d\u6587 \u5475\u5475","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false},{"displayName":"eee RTL","name":"eee RTL","extent":{"type":"extent","xmin":-22698739.91955998,"ymin":-13654303.392799985,"xmax":22698739.91955998,"ymax":17654303.39279999,"spatialReference":{"wkid":102100}},"thumbnail":"","isInWebmap":false}]',
_testUpdateOldConfig:function(){return{bookmarks2D:[{extent:{spatialReference:{wkid:102100},xmax:-1656069.6628128502,xmin:-1.0861390956860503E7,ymax:1.510258315961978E7,ymin:-1119447.7364922247},name:"bm1",isInWebmap:!0,displayName:"bm1"},{extent:{spatialReference:{wkid:102100},xmax:-1656069.6628128502,xmin:-1.0861390956860503E7,ymax:1.510258315961978E7,ymin:-1119447.7364922247},name:"bm1",isInWebmap:!0,displayName:"bm1(1)"},{extent:{spatialReference:{wkid:102100},xmax:-3197863.7584074493,xmin:-1.3112899816301128E7,
ymax:1.1466459916526379E7,ymin:-4859686.568575533},name:"bm2",isInWebmap:!0,displayName:"bm2"},{extent:{spatialReference:{wkid:102100},xmax:-3767577.3201611056,xmin:-1.430429896767071E7,ymax:1.5120033300894285E7,ymin:-4622246.062418217},name:"Untitled",isInWebmap:!0,displayName:"Untitled"},{extent:{spatialReference:{wkid:102100},xmax:-4334684.982862408,xmin:-1.6556089386187213E7,ymax:1.6750523655935397E7,ymin:-5666212.383958025},name:"Untitled",isInWebmap:!0,displayName:"Untitled(1)"}],bookmarks3D:[],
flyTime:3E3}},_testSetOldCache:function(a){var b=[];g.forEach(a,function(a){var c="Bookmark.2D."+a.displayName;b.push(c);a=h.mixin({},a);a.itemNode&&delete a.itemNode;a._uID&&delete a._uID;try{k.set(c,a)}catch(l){alert("store error\x3d\x3d\x3e")}},this);k.set("Bookmark.2D",b)},_testSetOldCacheBookmark:function(){return JSON.parse('[{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-8273877.24778316,"xmin":-14295892.084200885,"ymax":6466269.8495007465,"ymin":2983187.344602761},"name":"bm1","isInWebmap":true,"displayName":"bm1"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-8004818.908219411,"xmin":-11015826.326428276,"ymax":5527011.645932751,"ymin":3785470.393483758},"name":"bm1","isInWebmap":true,"displayName":"bm1(1)"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-12874774.854323175,"xmin":-13627526.708875552,"ymax":4655629.523482032,"ymin":4220244.210369689},"name":"bm2","isInWebmap":true,"displayName":"bm2"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-11618761.605541585,"xmin":-14629769.023750449,"ymax":6691911.956998556,"ymin":4950370.704549563},"name":"bm3","isInWebmap":true,"displayName":"bm3"},{"extent":{"spatialReference":{"wkid":102100,"latestWkid":3857},"xmax":-4317189.3003047705,"xmin":-16361218.973140221,"ymax":10449906.504800193,"ymin":3483741.495004222},"name":"bm4","isInWebmap":true,"displayName":"bm4"},{"name":"add-inRT-1","displayName":"add-inRT-1","extent":{"xmin":-14714155.502977258,"ymin":2694561.125798012,"xmax":-7855613.8290067855,"ymax":6754896.068305495,"spatialReference":{"wkid":102100,"latestWkid":3857}}},{"name":"add-inRT-2","displayName":"add-inRT-2","extent":{"xmin":-14714155.502977258,"ymin":2694561.125798012,"xmax":-7855613.8290067855,"ymax":6754896.068305495,"spatialReference":{"wkid":102100,"latestWkid":3857}}}]')}};
return n})},"widgets/Bookmark/ItemNode":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/_base/html dijit/a11yclick jimu/BaseWidget dijit/_WidgetsInTemplateMixin ./a11y/ItemNode dojo/on dojo/query jimu/utils dojo/text!./ItemNode.html dojo/mouse dijit/form/ValidationTextBox".split(" "),function(h,g,c,b,m,k,p,n,a,d,e,q){var l={},l=g([k,p,h],{templateString:q,isSelected:!1,postMixInProperties:function(){this.nls=c.mixin(this.nls,window.jimuNls.common)},postCreate:function(){b.setAttr(this.domNode,
"data-id",e.sanitizeHTML(this.dataId));this.img&&b.setAttr(this.thumbnail,"src",this.img);this.nls&&(b.setAttr(this.deleteBtn,"title",this.nls.deleteBtnTip),b.setAttr(this.editBtn,"title",this.nls.editBtnTip),b.setAttr(this.changeImgBtn,"title",this.nls.changeThumbnailTip),b.setAttr(this.renameBtn,"title",this.nls.editBtnTip),b.setAttr(this.thumbnail,"title",this.nls.dragReorderTip),b.setAttr(this.layerInfosIcon,"title",this.nls.withVisibility));this.display&&(!1===this.display.selectedBtn&&b.addClass(this.selectedBtn,
"hide"),!1===this.display.editBtn&&b.addClass(this.editBtn,"hide"),!1===this.display.deleteBtn&&b.addClass(this.deleteBtn,"hide"),!1===this.display.renameBtn&&b.addClass(this.renameBtn,"hide"),!0===this.display.selectedBtn&&b.removeClass(this.selectedBtn,"hide"),!0===this.display.changeImgBtn&&b.removeClass(this.changeImgBtn,"hide"),!0===this.display.layerInfosIcon&&(b.removeClass(this.layerInfosIcon,"hide"),b.addClass(this.nodeBox,"with-layer-visibility")));this.a11y_display();this.nodeLabel.setValue(this.label);
this._updateLabelTooltips(this.label);this.own(a(this.selectedBtn,m,c.hitch(this,this.onSelected)));this.own(a(this.deleteBtn,m,c.hitch(this,this.onDelete)));this.own(a(this.editBtn,m,c.hitch(this,this.onEdit)));this.own(a(this.changeImgBtn,m,c.hitch(this,this.onChangeImg)));this.own(a(this.renameBtn,m,c.hitch(this,this.onRenameClick)));this.own(a(this.nodeBox,m,c.hitch(this,this.onNodeBoxClick)));this.own(a(this.dragMasker,"click",c.hitch(this,this.onNodeBoxClick)));!0===this.display.enableEditLabel?
(this.own(a(this.nodeLabel,m,c.hitch(this,this.onLabelClick))),this.own(a(this.nodeLabel,"change",c.hitch(this,this.onLabelChange))),this.own(a(this.nodeLabel,"blur",c.hitch(this,this.onLabelBlur)))):this.nodeLabel.setDisabled(!0);this.own(a(this.nodeLabel,"contextmenu",c.hitch(this,function(a){a.preventDefault()})));this.own(a(this.nodeBox,"contextmenu",c.hitch(this,function(a){a.preventDefault()})));this.a11y_initEvents()},onClick:function(){d(".jimu-img-node",this.getParent().domNode).removeClass("jimu-state-selected");
d(this.domNode).addClass("jimu-state-selected");this.emit("click")},onNodeBoxClick:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());this.emit("thumbnail-click")},onLabelClick:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());this.emit("label-click")},onLabelChange:function(a){this._updateLabelTooltips(a)},onLabelBlur:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());a=
this.nodeLabel.get("value");this._updateLabelTooltips(a);this.emit("label-blur")},onSelected:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());b.hasClass(this.domNode,"selected")?(b.removeClass(this.domNode,"selected"),this.isSelected=!1,!1!==a&&this.emit("unselected")):(b.addClass(this.domNode,"selected"),this.isSelected=!0,!1!==a&&this.emit("selected"))},onDelete:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());
this.emit("delete")},onEdit:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());this.emit("edit")},onChangeImg:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());this.emit("change-img")},changeImg:function(a){b.setAttr(this.thumbnail,"src",a)},onRenameClick:function(a){a&&a.stopPropagation&&a.preventDefault&&(a.stopPropagation(),a.preventDefault());this.emit("rename")},highLight:function(){d(".jimu-img-node",this.getParent().domNode).removeClass("jimu-state-selected");
d(this.domNode).addClass("jimu-state-selected")},startup:function(){this.inherited(arguments)},destroy:function(){this.inherited(arguments);b.destroy(this.domNode)},_updateLabelTooltips:function(a){a&&(b.setAttr(this.nodeLabel,"title",a),this.dragMasker&&b.setAttr(this.dragMasker,"title",a),this.a11y_updateItemLabel(a))}});l.addFloatLeading=function(a){a.itemNode&&a.itemNode.domNode&&(d(".selected-btn",a.itemNode.domNode).forEach(function(a){b.addClass(a,"jimu-float-leading")}),d(".node-box",a.itemNode.domNode).forEach(function(a){b.addClass(a,
"jimu-float-leading")}),d(".node-label",a.itemNode.domNode).forEach(function(a){b.addClass(a,"jimu-float-leading")}),d(".close-btn",a.itemNode.domNode).forEach(function(a){b.addClass(a,"jimu-float-leading")}))};l.removeFloatLeading=function(a){a.itemNode&&a.itemNode.domNode&&(d(".selected-btn",a.itemNode.domNode).forEach(function(a){b.removeClass(a,"jimu-float-leading")}),d(".node-box",a.itemNode.domNode).forEach(function(a){b.removeClass(a,"jimu-float-leading")}),d(".node-label",a.itemNode.domNode).forEach(function(a){b.removeClass(a,
"jimu-float-leading")}),d(".close-btn",a.itemNode.domNode).forEach(function(a){b.removeClass(a,"jimu-float-leading")}))};l.toggleEditable=function(a){a.itemNode&&a.itemNode.nodeLabel&&(a.itemNode.nodeLabel.disabled?l.enableEditable(a):l.disableEditable(a))};l.disableEditable=function(){};l.enableEditable=function(){};l.focusLabel=function(a){a.itemNode&&a.itemNode.nodeLabel&&(a.itemNode.nodeLabel.focus(),a.itemNode.domNode&&b.addClass(a.itemNode.domNode,"a11y_hover"))};l.focusItem=function(a){a&&
a.itemNode&&a.itemNode.domNode&&a.itemNode.domNode.focus()};l.unSelected=function(a){a.itemNode&&a.itemNode&&(a=a.itemNode,b.removeClass(a.domNode,"selected"),a.isSelected=!1)};l.show=function(a){a&&a.itemNode&&(a=a.itemNode,b.removeClass(a.domNode,"hide"),a.isShow=!0)};l.hide=function(a){a&&a.itemNode&&(a=a.itemNode,b.addClass(a.domNode,"hide"),a.isShow=!1)};l.extend(n);return l})},"widgets/Bookmark/a11y/ItemNode":function(){define(["dojo/_base/lang","dojo/on","dojo/_base/html","dojo/keys"],function(h,
g,c,b){return{a11y_removeTabindex:function(b){c.removeAttr(b,"tabindex")},a11y_setTabindex:function(b,k){c.setAttr(b,"tabindex",k||0)},a11y_display:function(){this.a11y&&(!1===this.a11y.selectedBtn&&this.a11y_removeTabindex(this.selectedBtn),!1===this.a11y.editBtn&&this.a11y_removeTabindex(this.editBtn),!1===this.a11y.deleteBtn&&this.a11y_removeTabindex(this.deleteBtn),!1===this.a11y.renameBtn&&this.a11y_removeTabindex(this.renameBtn),!1===this.a11y.changeImgBtn&&this.a11y_removeTabindex(this.changeImgBtn))},
a11y_updateItemLabel:function(b){c.setAttr(this.domNode,"aria-label",b)},a11y_initEvents:function(){this.own(g(this.domNode,"keydown",h.hitch(this,function(g){var k=c.hasClass(g.target,"jimu-img-node");if(g.keyCode===b.ENTER&&k)this.onNodeBoxClick();this.a11y_checkFocus()})));this.own(g(this.domNode,"mouseout",h.hitch(this,function(){c.removeClass(this.domNode,"a11y_hover")})));this.own(g(this.domNode,"focus",h.hitch(this,function(){c.addClass(this.domNode,"a11y_hover")})))},a11y_focusToLabel:function(b){setTimeout(function(){b.focus()},
0)},a11y_focusToBtns:function(b){setTimeout(function(){b.focus()},0)},a11y_checkFocus:function(){setTimeout(h.hitch(this,function(){c.isDescendant(document.activeElement,this.domNode)||c.removeClass(this.domNode,"a11y_hover")}),50)}}})},"widgets/Bookmark/CustomBookmarks":function(){define("dojo/Evented dojo/_base/declare dojo/_base/lang dojo/_base/html dojo/_base/array dojo/on dojo/sniff esri/SpatialReference jimu/BaseWidget dijit/_TemplatedMixin ./utils ./ItemNode jimu/dijit/ImageChooser".split(" "),
function(h,g,c,b,m,k,p,n,a,d,e,q,l){var f=window.Sortable;return g([a,d,h],{baseClass:"dojoDndSource dojoDndTarget dojoDndContainer bookmarker-nodes",templateString:"\x3cdiv\x3e\x3c/div\x3e",nls:null,_CHANGING_IMG_BM:null,postCreate:function(){this.inherited(arguments);this.drawerHandle=b.create("div",{"class":"drawer-handle hide",innerHTML:"\x3cdiv class\x3d'separate-line'\x3e\x3c/div\x3e"},this.domNode);this.bookMarkerContainer=b.create("div",{"class":"custom editing"},this.domNode);this.imageChooserContainer=
b.create("div",{"class":"hide"},this.domNode)},startup:function(){this.inherited(arguments);var a=e.readBookmarksInWebmap(this.map);(!0===this.config.syncMode.webmap&&0<a.length||!0===this.config.syncMode.custom&&0<this.config.bookmarks2D.length)&&b.removeClass(this.drawerHandle,"hide");this.sortableBookMarkerNodes=f.create(this.bookMarkerContainer,{handle:".drag-masker",filter:".disable-drag .hide",sort:!0,disabled:!1,animation:100,onSort:c.hitch(this,function(){this.saveBookMarkersBySortable();
this.emit("sort",this.bookmarks)})});this.imageChooser=new l({cropImage:!1,showSelfImg:!0,goldenWidth:108,goldenHeight:71,maxSize:100,label:this.nls.selectFile,format:["image/gif","image/png","image/jpeg"]},this.imageChooserContainer);this.imageChooser.startup();this.own(k(this.imageChooser,"imageChange",c.hitch(this,"_onImageChange")))},toggleMobile:function(a){(this._IS_MOBILE=a)?this.sortableBookMarkerNodes.option("disabled",!0):this.sortableBookMarkerNodes.option("disabled",!1)},refresh:function(a){this.bookmarks=
a;e.updateBookmarks(this.bookmarks);this.displayBookmarks(this.bookmarks);this.toggleDrawer()},add:function(){var a=e.getAutoRenameBeforeAdd("bookmark",this.bookmarks),t={name:"bookmark",displayName:a,extent:this.map.extent.toJson(),isSaveLayers:this.config.isSaveLayerVisibility,isSaveExtent:!0};!0===this.config.isSaveLayerVisibility&&(t.layerOptions=e.getlayerInfos());"bookmark"!==a&&(t._autoRename=!0);this._doAddBookmark(t);this.bookmarks.unshift(t);t.itemNode&&t.itemNode.domNode&&b.place(t.itemNode.domNode,
this.bookMarkerContainer,"first");this.displayBookmarks(this.bookmarks);this.toggleDrawer();this.bookmarks.forEach(c.hitch(this,function(a,b){0===b?(q.enableEditable(a),q.focusLabel(a)):q.disableEditable(a)}));this.emit("added",this.bookmarks)},_doAddBookmark:function(a){var b={enableEditLabel:!0,editBtn:!1,changeImgBtn:!0,layerInfosIcon:e.isWithLayerInfos(a)},b=e.createBookMarkNode(a,this.nls,this.folderUrl,b);a.itemNode=b;this.own(k(b,"thumbnail-click",c.hitch(this,c.partial(this._onNodeBoxClick,
a))));this.own(k(b,"label-click",c.hitch(this,c.partial(this._onLebelClick,a))));this.own(k(b,"label-blur",c.hitch(this,c.partial(this._onLabelBlur,a))));this.own(k(b,"delete",c.hitch(this,c.partial(this._onBookmarkDeleteImmediately,a))));this.own(k(b,"change-img",c.hitch(this,c.partial(this._onBookmarkChangeImg,a))));this.own(k(b,"rename",c.hitch(this,c.partial(this._onRename,a))));return b},filter:function(a){this._LAST_FILTER_STR=a;e.filter(a,this.bookmarks)},displayBookmarks:function(a){e.empty(a,
this.bookMarkerContainer);m.forEach(a,function(a){a&&this._doAddBookmark(a)},this);a.forEach(c.hitch(this,function(a){a&&a.itemNode&&a.itemNode.domNode&&b.place(a.itemNode.domNode,this.bookMarkerContainer,"last")}))},saveBookMarkersBySortable:function(a){for(var b=this.sortableBookMarkerNodes.toArray(),r=[],c=0,d=b.length;c<d;c++){var f=e.findBookMarkByUID(b[c],this.bookmarks);f&&r.push(f.bookmark)}this.bookmarks=r;a&&a.isRefresh&&this.displayBookmarks(this.bookmarks)},_isListMode:function(){if(this.domNode){var a=
this.domNode.parentElement||this.domNode.parentNode;if(a)return b.hasClass(a,"list")}return!1},_onNodeBoxClick:function(a){require(["esri/geometry/Extent"],c.hitch(this,function(b){if(!1!==a.isSaveExtent){var r=a.extent;r.spatialReference?new n(r.spatialReference):new n({wkid:4326});this.map.setExtent(new b(r))}e.layerInfosRestoreState(a.isSaveLayers,a.layerOptions)}))},_onLebelClick:function(a){this._isListMode()||!0===this._IS_MOBILE?this._onNodeBoxClick(a):q.focusLabel(a)},_onLabelBlur:function(a){var b=
a.itemNode.nodeLabel.get("value");a.displayName=b;a.name=b;this.emit("label-blur",this.bookmarks);this.filter(this._LAST_FILTER_STR)},_onBookmarkDeleteImmediately:function(a){this.removeBookMarks([a])},removeBookMarks:function(a){for(var b=null,c=0,r=a.length;c<r;c++){var d=e.findBookMark(a[c],this.bookmarks);d&&d.bookmark&&(d.bookmark.itemNode&&d.bookmark.itemNode.destroy(),b=e.findNextBookMarkByIdx(d.idx,this.bookmarks),this.bookmarks.splice(d.idx,1))}this.emit("delete",{bookmarks:this.bookmarks,
nextBookmark:b});this.toggleDrawer()},_onBookmarkChangeImg:function(a){this._CHANGING_IMG_BM=a;a=this.imageChooser.mask;if(p("safari")){var b=document.createEvent("MouseEvents");b.initEvent("click",!0,!0);a.dispatchEvent(b)}else a.click()},_onImageChange:function(a){this._CHANGING_IMG_BM&&this._CHANGING_IMG_BM.itemNode&&(""!==a&&(this._CHANGING_IMG_BM.itemNode.changeImg(a),this._CHANGING_IMG_BM.thumbnail=a),this.emit("change-img",this.bookmarks))},_onRename:function(a){q.focusLabel(a)},toggleDrawer:function(){!0===
e.isBookmarksDataEmpty(this.bookmarks)?b.addClass(this.domNode,"hide"):b.removeClass(this.domNode,"hide")},hideDrawer:function(){b.addClass(this.bookMarkerContainer,"hide")},showDrawer:function(){b.removeClass(this.bookMarkerContainer,"hide")}})})},"widgets/Bookmark/a11y/Widget":function(){define(["dojo/query","dojo/_base/array","dojo/_base/html","jimu/utils","../ItemNode"],function(h,g,c,b,m){return{a11y_initFocusNodes:function(){var c=this._getFocusableNodes();c&&c.length&&(this._508_FIRST_FOCUS_NODE=
c[0],b.initFirstFocusNode(this.domNode,this._508_FIRST_FOCUS_NODE),0<c.length&&b.initLastFocusNode(this.domNode,c[c.length-1]))},a11y_focusAfterDelete:function(b){b&&b.itemNode&&b.itemNode.domNode?m.focusItem(b):this._508_FIRST_FOCUS_NODE.focus()},_getFocusableNodes:function(){var b=h('[tabindex $\x3d"0"]',this.domNode);return b=g.filter(b,function(b){return!c.hasClass(b,"dijitInputInner")&&(c.hasClass(b,"delete-btn")||"none"!==c.getStyle(b,"display"))},this)}}})},"widgets/Bookmark/_build-generate_module":function(){define(["dojo/text!./Widget.html",
"dojo/text!./css/style.css","dojo/i18n!./nls/strings"],function(){})},"url:widgets/Bookmark/HeadBar.html":'\x3cdiv class\x3d"header"\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"editableBtns" class\x3d"editable-btns"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"addBtn" class\x3d"add hide" title\x3d"${nls.labelBookmarkName}" tabindex\x3d"0" role\x3d"button"\x3e${nls.addBtn}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv class\x3d"oper-btns"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"filter" class\x3d"filter-container hide"\x3e\r\n\t\t\t\x3cdiv class\x3d"filter-input"\x3e\r\n\t\t\t\t\x3cdiv data-dojo-attach-point\x3d"filterInput" data-dojo-type\x3d"dijit/form/ValidationTextBox"\r\n\t\t\t\t\tplaceHolder\x3d"${nls.searchBookmark}" required\x3d"false"\x3e\x3c/div\x3e\r\n\t\t\t\t\x3cdiv class\x3d"search" data-dojo-attach-point\x3d"filterBtn" title\x3d"${nls.searchBookmark}"\x3e\x3c/div\x3e\r\n\t\t\t\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\t\x3c!--\x3cdiv data-dojo-attach-point\x3d"commonFunBtns" class\x3d"common-fun-btns"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"syncBtn" class\x3d"head-btns sync-btn" title\x3d"${nls.syncTip}"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"backToInitBtn" class\x3d"head-btns back-to-init hide" title\x3d""\x3e\x3c/div\x3e--\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"displayMode" class\x3d"display-mode"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"cardsBtn" class\x3d"head-btns cards hide" title\x3d"${nls.cardsTips}" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"listBtn" class\x3d"head-btns list hide" title\x3d"${nls.listTips}" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3c!--\x3cdiv data-dojo-attach-point\x3d"editBtns" class\x3d"edit-btns"\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"renameBtn" class\x3d"head-btns rename" title\x3d"rename"\x3e\x3c/div\x3e\r\n\t\t\t\x3cdiv data-dojo-attach-point\x3d"deleteBtn" class\x3d"head-btns delete" title\x3d"delete"\x3e\x3c/div\x3e\r\n\t\t\x3c/div\x3e\r\n\t\x3c/div\x3e--\x3e\r\n\x3c/div\x3e',
"url:widgets/Bookmark/ItemNode.html":'\x3cdiv class\x3d"jimu-img-node jimu-float-leading clearFix" data-id\x3d"" tabindex\x3d"0" aria-label\x3d""\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"nodeBox" class\x3d"node-box verticalCenter no-user-select"\x3e\r\n\t\t\x3cimg data-dojo-attach-point\x3d"thumbnail" class\x3d"thumbnail" src\x3d""\x3e\r\n\t\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"nodeLabel" data-dojo-type\x3d"dijit/form/ValidationTextBox" required\x3d"true" data-dojo-props\x3d"trim:true"\x3e\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"changeImgBtn" class\x3d"change-img-btn oper-btns no-user-select hide" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"editBtn" class\x3d"edit-btn oper-btns no-user-select" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"renameBtn" class\x3d"rename-btn oper-btns no-user-select" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"deleteBtn" class\x3d"delete-btn oper-btns no-user-select" tabindex\x3d"0" role\x3d"button"\x3e\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"dragMasker" class\x3d"drag-masker" tabindex\x3d"-1"\x3e\x3c/div\x3e\x3c!--for different browsers drag behavior--\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"layerInfosIcon" class\x3d"layer-info-icon icons no-user-select hide"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"selectedBtn" class\x3d"selected-btn oper-btns no-user-select hide"\x3e\x3c/div\x3e\r\n\x3c/div\x3e',
"url:widgets/Bookmark/Widget.html":'\x3cdiv class\x3d""\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"headBarContainer" class\x3d"head-bar"\x3e\x3c/div\x3e\r\n\r\n\t\x3cdiv data-dojo-attach-point\x3d"bookmarksContainer" class\x3d"bookmarks-container cards"\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"webmapBookmarksContainer"\x3e\x3c/div\x3e\r\n\t\t\x3cdiv data-dojo-attach-point\x3d"customBookmarksContainer"\x3e\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\x3c!--\r\n\t\x3cdiv data-dojo-attach-point\x3d"bookMarkerContainer" class\x3d"bookmarker-nodes cards"\x3e\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"editMenuContainer" class\x3d"edit-menu"\x3e\r\n\t\t\x3cdiv class\x3d"delete-btn edit-menu-btns" data-dojo-attach-point\x3d"deleteBtn" data-dojo-attach-event\x3d"onclick:_onEditMenuDelete"\x3e${nls.labelDelete}\x3c/div\x3e\r\n\t\x3c/div\x3e\r\n\t\x3cdiv data-dojo-attach-point\x3d"imageChooserContainer" class\x3d"hide"\x3e\x3c/div\x3e\r\n--\x3e\r\n\x3c/div\x3e',
"url:widgets/Bookmark/css/style.css":'.jimu-img-node{font-size: 12px; position: relative; float: left; color: #666; overflow: hidden;}.jimu-img-node .node-box{position: relative; border-radius: 4px; overflow: hidden;}.jimu-img-node img{width: 100%; height: 100%; cursor: pointer;}.jimu-img-node .node-label{height: 30px; text-align: center; overflow: hidden; text-overflow: ellipsis;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled{opacity: 1;}.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner {color: #000; opacity: 0.9;}.jimu-widget-bookmark .no-user-select{user-select: none; -moz-user-select: none; -webkit-user-select: none; -ms-user-select: none;}.jimu-widget-bookmark .hide {display: none !important;}.jimu-widget-bookmark .clearFix {*overflow: hidden; *zoom: 1;}.jimu-widget-bookmark .clearFix:after {display: table; content: ""; width: 0; clear: both;}.jimu-widget-bookmark .verticalCenter{display: flex; align-items: center;}.jimu-widget-bookmark .jimu-img-node .node-box{margin: 0 auto; width: 100px; height: 60px;}.jimu-widget-bookmark .cards .jimu-img-node .drag-masker{width: 100px; height: 60px;}.jimu-widget-bookmark .jimu-img-node .dijitTextBox {border: none; width: 100%; background-color: transparent;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled,.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputField{background-color: transparent; width: 100%; overflow: hidden;}.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner{white-space: nowrap; text-overflow: ellipsis; text-align: center;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxFocused.dijitFocused{border:none !important; box-shadow: none; background-image: none;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxFocused.dijitValidationTextBoxFocused{background-image: none;}.jimu-widget-bookmark .jimu-img-node .dijitTextBoxFocused.dijitFocused .dijitInputInner{box-shadow: none; background: rgba(36, 181, 204, 0.2) !important;}.jimu-img-node .oper-btns{display: none; position: absolute; z-index: 10;}.jimu-img-node .icons{position: absolute; width: 20px; height: 20px; z-index: 10; background-color: #FFF;}.list .jimu-img-node .icons{display: none;}.editing .jimu-img-node .thumbnail{}.jimu-img-node .drag-masker{position: absolute; z-index: 5; top: 0; width: 100%; height: 60px; cursor: pointer;}.jimu-img-node .drag-masker:hover{background-color: transparent}.editing .jimu-img-node .oper-btns{width:20px; height:20px; cursor: pointer; background-color: rgba(0,0,0,0.5);}.editing .jimu-img-node .oper-btns:hover{background-color: rgba(0,0,0,0.7);}.editing .jimu-img-node .selected-btn{background: url("../images/btns/unselected.svg") no-repeat; left:0; top:0;}.editing .jimu-img-node.selected .selected-btn{background: url("../images/btns/selected.svg") no-repeat;}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .delete-btn{cursor: pointer; top:0;}.jimu-rtl .jimu-widget-bookmark:not(.mobile) .jimu-img-node .delete-btn{right: auto;}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .delete-btn::before{position: absolute; background-image: url("../images/btns/x.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.editing .jimu-img-node .edit-btn{right: 0; bottom: 30px;}.jimu-rtl .jimu-img-node .edit-btn{right: auto; left: 0;}.editing .jimu-img-node .edit-btn::before{position: absolute; display: block; background-image: url("../setting/css/images/btns/edit.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .rename-btn{display: none; top: 0px; left: 0px;}.jimu-widget-bookmark:not(.mobile) .editing .jimu-img-node .rename-btn::before{position: absolute; display: block; background-image: url("../setting/css/images/btns/edit.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.editing .jimu-img-node .change-img-btn{right: calc((100% - 100px)/2); bottom: 30px;}.jimu-rtl .jimu-img-node .change-img-btn{right: auto; left: calc((100% - 100px)/2);}.editing .jimu-img-node .change-img-btn::before{position: absolute; background-image: url("../images/btns/change.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.jimu-img-node .layer-info-icon{left: calc((100% - 100px)/2); bottom: 30px;}.jimu-rtl .jimu-img-node .layer-info-icon{right: auto; right: calc((100% - 100px)/2);}.jimu-img-node .layer-info-icon::before{position: absolute; background-image: url("../images/btns/layer_infos.svg"); background-size: 100%; background-repeat: no-repeat; width: 10px; height: 10px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.jimu-widget-bookmark .header {display: flex; align-items: center; justify-content: space-between; height: 30px; margin: 2px; margin-bottom: 15px;}.jimu-widget-bookmark .header .editable-btns,.jimu-widget-bookmark .header .common-fun-btns,.jimu-widget-bookmark .header .edit-btns,.jimu-widget-bookmark .header .common-fun-btns .display-mode{display: flex; align-items: center;}.jimu-widget-bookmark .header .common-fun-btns .display-mode {margin: 0 5px;}.jimu-widget-bookmark .header .two-modes .list{background: url("../images/btns/list.svg") no-repeat;}.jimu-widget-bookmark .header .two-modes .list:hover{background: url("../images/btns/list_selected.svg") no-repeat;}.jimu-widget-bookmark .header .two-modes .cards{background: url("../images/btns/cards.svg") no-repeat;}.jimu-widget-bookmark .header .two-modes .cards:hover{background: url("../images/btns/cards_selected.svg") no-repeat;}.jimu-widget-bookmark .adding .header .add{background: url("../images/btns/add_selected.svg") no-repeat;}.jimu-widget-bookmark .header .edit{background: url("../images/btns/edit.svg") no-repeat;}.jimu-widget-bookmark .editing .header .edit{background: url("../images/btns/edit_selected.svg") no-repeat;}.jimu-widget-bookmark .header .sync-btn{background: url("../images/btns/sync.svg") no-repeat;}.jimu-widget-bookmark .header .sync-btn.marked{background: url("../images/btns/sync.svg") no-repeat; background-color: red;}.jimu-widget-bookmark .header .back-to-init{background: url("../images/btns/backtoinit.svg") no-repeat;}.jimu-widget-bookmark .header .back-to-init.marked{background: url("../images/btns/backtoinit_selected.svg") no-repeat;}.jimu-widget-bookmark .header .rename{background: url("../images/btns/rename_selected.svg") no-repeat;}.jimu-widget-bookmark .header .rename.disable{background: url("../images/btns/rename.svg") no-repeat;}.jimu-widget-bookmark .header .delete{background: url("../images/btns/delete_selected.svg") no-repeat;}.jimu-widget-bookmark .header .delete.disable{background: url("../images/btns/delete.svg") no-repeat;}.jimu-widget-bookmark .header .edit-btns{display: none;}.jimu-widget-bookmark .editing .header .edit-btns{display: flex;}.jimu-widget-bookmark .header .common-fun-btns{display: flex;}.jimu-widget-bookmark .editing .header .common-fun-btns{display: none;}.bookmark-notice-popup{font-family: "Avenir Medium"; font-size: 12px;}.bookmark-notice-popup .tips{color: #000000; letter-spacing: 0;}.bookmark-notice-popup .check-box{position: absolute; bottom: 20px;}.bookmark-notice-popup .check-box .jimu-checkbox .label{font-size: 12px; color: #353535; letter-spacing: 0.3px;}.DartTheme .jimu-widget-bookmark .dijitTextBox{border: none !important;}.DartTheme .jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner {color: #FFF !important;}.jimu-widget-bookmark{width: 100%; height: 100%; overflow: hidden; position: relative;}.jimu-widget-bookmark .add-section{position: relative; height: 30px; margin-top: 7px; overflow: visible;}.jimu-widget-bookmark .input-bookmark-name{border-top-right-radius: 0; border-bottom-right-radius: 0; position: absolute; left: 0; top: 0; width: 100%;}.jimu-widget-bookmark .jimu-state-error{margin-top: 4px; visibility: hidden;}.jimu-widget-bookmark .bookmark-list{margin-bottom: 35px; width: 100%;}.jimu-widget-bookmark .play-section{overflow: hidden; margin-top: 20px; position: absolute; bottom: 0;}.jimu-widget-bookmark .jimu-btn{float: none; margin: auto; width: 100%;}.jimu-widget-bookmark .jimu-img-node{margin: 3px 0 8px 3px;}.jimu-rtl .jimu-widget-bookmark .jimu-img-node{margin: 3px 3px 8px 0;}.jimu-widget-bookmark .jimu-img-node .node-label{height: 2.7em; line-height: 16px; vertical-align: middle; padding: 0 5px; margin: 0 auto; width: 100px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;}.jimu-widget-bookmark .jimu-img-node .node-box{border-radius: 0; position: relative;}.jimu-widget-bookmark .jimu-img-node img{display: flex; width: 100%; height: 60px; opacity: 1; min-width: 80px;}.jimu-widget-bookmark .jimu-img-node.selected img{opacity: 0.4; transition: opacity .5s;}.jimu-widget-bookmark .cards .jimu-img-node:hover .dijitTextBox .dijitInputInner{color: #51B1FE !important;}.jimu-widget-bookmark .cards .jimu-img-node .drag-masker{left: 50%; transform: translate(-50%, 0%);}.jimu-widget-bookmark .cards .jimu-img-node .delete-btn{display: none; right:calc((100% - 100px)/2); justify-content: center; align-items: center;}.jimu-rtl .jimu-widget-bookmark .cards .jimu-img-node .delete-btn{right: auto; left: calc((100% - 100px)/2);}.jimu-widget-bookmark .cards .jimu-img-node.a11y_hover .delete-btn,.jimu-widget-bookmark .cards .jimu-img-node:hover .delete-btn{display: flex;}.jimu-widget-bookmark .cards .jimu-img-node .change-img-btn{display: none;}.jimu-widget-bookmark .cards .jimu-img-node.a11y_hover .change-img-btn,.jimu-widget-bookmark .cards .jimu-img-node:hover .change-img-btn{display: block;}.jimu-widget-bookmark .cards .jimu-img-node .dijitTextBox{max-width: 104px; width: 100%; margin: 0 auto; display: flex;}.jimu-widget-bookmark .list{}.jimu-widget-bookmark .list .jimu-img-node{width: calc(100% - 10px) !important; display: flex; height: 36px; margin-bottom: 8px;}.jimu-widget-bookmark .list .jimu-img-node:hover{background-color: #E2E2E2;}.DartTheme .jimu-widget-bookmark .list .jimu-img-node:hover{background-color: #444;}.jimu-widget-bookmark .list .node-box{height: 36px; width: 20px; margin: 0;}.jimu-widget-bookmark .list .jimu-img-node .dijitTextBoxFocused.dijitValidationTextBoxFocused{z-index: 99;}.jimu-widget-bookmark .list .node-box img{display: none;}.jimu-widget-bookmark .node-box:after{display: none;}.jimu-widget-bookmark .list .node-box:after{position: absolute; content: url(../images/btns/place.svg); display: block; height: 16px; top: 9px; left: 4px;}.jimu-widget-bookmark .list .with-layer-visibility.node-box:after{position: absolute; content: url(../images/btns/place_with_layer_visibility.svg); display: block; height: 16px; top: 9px; left: 4px;}.jimu-widget-bookmark .list .editing .node-box:after{top: 10px;}.jimu-rtl .jimu-widget-bookmark .list .node-box:after{left: auto; right: 3px;}.jimu-widget-bookmark .list.editing .node-box{display: none;}.jimu-widget-bookmark .list.editing .node-box:after{display: none;}.jimu-widget-bookmark .list.editing .jimu-img-node .node-box{margin: 0;}.jimu-widget-bookmark .list .jimu-img-node .dijitTextBox{height: 36px;}.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled,.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputField,.jimu-widget-bookmark .list .jimu-img-node .dijitTextBoxDisabled,.jimu-widget-bookmark .list .jimu-img-node .dijitTextBox .dijitInputField{width: calc(100% - 70px); height: 100%;}.jimu-widget-bookmark .list .jimu-img-node .dijitTextBox .dijitInputInner{height: 100%;}.jimu-widget-bookmark .list .jimu-img-node .dijitTextBox .dijitInputInner{text-align: left;}.jimu-rtl .jimu-widget-bookmark .list .jimu-img-node .dijitTextBox .dijitInputInner{text-align: right;}.jimu-widget-bookmark .list.editing .head-btns{}.jimu-widget-bookmark .list .jimu-img-node .oper-btns{top: 8px;}.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .oper-btns{top: 8px;}.mobile .jimu-img-node .oper-btns{display: none;}.mobile .editing .jimu-img-node .oper-btns,.mobile .editing .jimu-img-node .oper-btns:hover,.jimu-widget-bookmark .list .editing .jimu-img-node .oper-btns,.jimu-widget-bookmark .list .editing .jimu-img-node .oper-btns:hover{background-color: transparent;}.mobile .editing .jimu-img-node .rename-btn:before,.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .rename-btn:before{position: absolute; display: block; background-image: url(images/pencil.svg); background-size: 100%; width: 16px; height: 16px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.mobile .editing .jimu-img-node .rename-btn:hover:before,.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .rename-btn:hover:before{background-image: url(images/pencil_hover.svg);}.mobile .editing .jimu-img-node .delete-btn:before,.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .delete-btn:before{position: absolute; display: block; background-image: url(images/clear.svg); background-size: 100%; width: 16px; height: 16px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.mobile .editing .jimu-img-node .delete-btn:hover:before,.jimu-widget-bookmark:not(.mobile) .list .editing .jimu-img-node .delete-btn:hover:before{background-image: url(images/clear_hover.svg);}.mobile .editing .jimu-img-node .change-img-btn:before{position: absolute; display: block; background-image: url(images/change_img.svg); background-size: 100%; width: 16px; height: 16px; content: ""; left: 50%; top: 50%; transform: translate(-50%, -50%);}.mobile .editing .jimu-img-node .change-img-btn:hover:before{background-image: url(images/change_img_hover.svg);}.jimu-widget-bookmark .list.editing .jimu-img-node .selected-btn{position: relative; align-self: center;}.jimu-widget-bookmark .list.editing .jimu-img-node .close-btn{position: relative; background-color: green;}.jimu-widget-bookmark .list .jimu-img-node .delete-btn{left: auto; right: 15px; display: block;}.jimu-rtl .list .jimu-img-node .delete-btn{left: 15px; right: auto;}.jimu-widget-bookmark .list .jimu-img-node .change-img-btn{display: none;}.jimu-widget-bookmark .list .editing .jimu-img-node .rename-btn{display: block; left: auto; right: 50px;}.jimu-rtl .jimu-widget-bookmark .list .editing .jimu-img-node .rename-btn{left: 50px; right: auto;}.jimu-rtl .jimu-widget-bookmark .list .editing .jimu-img-node .change-img-btn{left: 85px; right: auto;}.jimu-widget-bookmark {position: relative; overflow: hidden;}.jimu-widget-bookmark .drawer-handle{width: 100%; display: flex; align-items: center; font-family: "Avenir Medium"; font-size: 14px; color: #000000; letter-spacing: 0.39px;}.jimu-widget-bookmark .drawer-handle .separate-line{margin: 10px 0 25px 0; border-top: 1px solid #eee; width: 100%;}.DartTheme .jimu-widget-bookmark .drawer-handle .separate-line{border-top: 1px solid #666;}.jimu-widget-bookmark .drop-down{display: flex; align-items: center; background: url(images/dropDown.svg) no-repeat; background-size: 6px 6px; width: 6px; height: 6px; cursor: pointer;}.jimu-widget-bookmark .drop-down.open{transform: rotate(0deg); -ms-transform: rotate(0deg); -moz-transform: rotate(0deg); -webkit-transform: rotate(0deg); -o-transform: rotate(0deg);}.jimu-widget-bookmark .drop-down{margin: 0 10px; transform: rotate(90deg); -ms-transform: rotate(90deg); -moz-transform: rotate(90deg); -webkit-transform: rotate(90deg); -o-transform: rotate(90deg);}.jimu-widget-bookmark .bookmarks-container{overflow-x: hidden; overflow-y: auto;}.jimu-widget-bookmark .bookmarker-nodes{overflow: inherit;}.jimu-widget-bookmark .dojoDndItemAnchor{padding: 0; border: none;}.jimu-widget-bookmark .header .oper-btns{width: 100%; height: 100%; display: flex; align-items: center; justify-content: flex-end;}.jimu-widget-bookmark .header .head-btns{width:16px; height:16px; margin: 4px; overflow: hidden; cursor: pointer;}.jimu-widget-bookmark .header .add{display: flex; align-items: center; justify-content: center; height:30px; min-width: 65px; padding: 0 10px; border: 1px solid #c7c7c7; color: #000; font-family: Avenir-Medium; font-size: 12px; cursor: pointer;}.jimu-widget-bookmark .header .add:hover{border: 1px solid #000;}.DartTheme .jimu-widget-bookmark .header .add{border: 1px solid #666; color: #FFF;}.DartTheme .jimu-widget-bookmark .header .add:hover{border: 1px solid #FFF;}.jimu-widget-bookmark .editable .header .filter-container{margin-left:20px;}.jimu-rtl .jimu-widget-bookmark .editable .header .filter-container{margin-left: auto; margin-right: 20px;}.jimu-widget-bookmark .header .filter-container{display: flex; position: relative; width: 100%; height: 100%; overflow: hidden;}.jimu-widget-bookmark .header .filter-container .filter-input{position: absolute; height: 30px; width: 100%;}.jimu-widget-bookmark .header .filter-container .dijitTextBox {width: 100%;}.jimu-widget-bookmark .header .filter-container .search{position: absolute; background: url(images/search.svg) no-repeat; background-size: contain; width: 16px; height: 16px; margin: 7px; right: 0; top: 0;}.jimu-rtl .jimu-widget-bookmark .header .filter-container .search{right: auto; left: 0;}.jimu-widget-bookmark .header .display-mode{margin: 0 10px;}.jimu-widget-bookmark:not(.mobile) .cards .header{margin-bottom: 25px;}.mobile.jimu-widget-bookmark {}.mobile.jimu-widget-bookmark .dojoDndSource:not(.editable) .header{height: 20px; margin-bottom: 5px;}.mobile.jimu-widget-bookmark .jimu-img-node{width:calc(100% - 10px) !important; display: flex; align-items: center; border-top: 1px solid rgba(230,230,230,0.5); margin-top: 0; margin-bottom: 0; padding: 4px 0;}.mobile.jimu-widget-bookmark .jimu-img-node .layer-info-icon {left: 0px; bottom: 9px;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .layer-info-icon {left: auto; right: 0;}.DartTheme .mobile.jimu-widget-bookmark .jimu-img-node{border-top: 1px solid #333333}.mobile.jimu-widget-bookmark .jimu-img-node .drag-masker{width: 100%;}.mobile.jimu-widget-bookmark .cards .jimu-img-node .dijitTextBox{margin: 0; max-width: 100%;}.mobile.jimu-widget-bookmark .node-box{}.mobile.jimu-widget-bookmark .list.editing .node-box{display: flex;}.mobile.jimu-widget-bookmark .node-box img{max-height: 50px; max-width: 75px;}.mobile.jimu-widget-bookmark .editing .node-box{}.mobile.jimu-widget-bookmark .jimu-img-node .node-box{margin-left: 0; margin-right:10px;}.mobile.jimu-widget-bookmark .cards .jimu-img-node .node-box{min-width: 80px;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .node-box{margin-left: 10px; margin-right:0;}.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBoxDisabled,.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputField{max-width: 300px;}.mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner{text-align: left;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .dijitTextBox .dijitInputInner{text-align: right;}.mobile.jimu-widget-bookmark .drawer-handle .separate-line{margin-bottom: 0; border-top: 4px solid #F2F2F2;}.mobile.jimu-widget-bookmark {-webkit-touch-callout:none; -webkit-user-select:none; -khtml-user-select:none; -moz-user-select:none; -ms-user-select:none; user-select:none;}.mobile.jimu-widget-bookmark .jimu-img-node .node-label{user-select: none; -moz-user-select: none; -webkit-user-select: none; -ms-user-select: none;}.mobile.jimu-widget-bookmark .editing .jimu-img-node .selected-btn{position: relative; align-self: center;}.mobile.jimu-widget-bookmark .editing .jimu-img-node .close-btn{position: relative;}.mobile.jimu-widget-bookmark .jimu-img-node .change-img-btn {display: block; left: auto; right: 85px; bottom: auto;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .change-img-btn {left: 85px; right: auto;}.mobile.jimu-widget-bookmark .list .jimu-img-node .change-img-btn {display: none;}.mobile.jimu-widget-bookmark .jimu-img-node .rename-btn {display: block; left: auto; right: 50px;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .rename-btn {left: 50px; right: auto;}.mobile.jimu-widget-bookmark .jimu-img-node .delete-btn {display: block; right: 15px;}.jimu-rtl .mobile.jimu-widget-bookmark .jimu-img-node .delete-btn {left: 15px; right: auto;}',
"*now":function(h){h(['dojo/i18n!*preload*widgets/Bookmark/nls/Widget*["ar","bs","ca","cs","da","de","en","el","es","et","fi","fr","he","hi","hr","hu","id","it","ja","ko","lt","lv","nb","nl","pl","pt-br","pt-pt","ro","ru","sl","sr","sv","th","tr","zh-cn","uk","vi","zh-hk","zh-tw","ROOT"]'])},"*noref":1}});
define("dojo/_base/declare dojo/_base/lang dojo/_base/array dojo/_base/html jimu/BaseWidget dojo/query dojo/on dojo/Deferred ./HeadBar ./WebmapBookmarks ./CustomBookmarks ./utils libs/storejs/store ./a11y/Widget".split(" "),function(h,g,c,b,m,k,p,n,a,d,e,q,l,f){h=h([m],{baseClass:"jimu-widget-bookmark dojoDndSource dojoDndTarget dojoDndContainer",name:"Bookmark",bookmarks:[],jimuNls:null,postMixInProperties:function(){this.jimuNls=window.jimuNls},startup:function(){this.inherited(arguments);q.isConfigBefore5_3(this.config)&&
q.setDefaultConfigForUpdate(this.config);this.headBar=new a({map:this.map,nls:this.nls,bookmarksContainer:this.bookmarksContainer,editMenuContainer:this.editMenuContainer,editable:this.config.editable,layout:this.config.layout},this.headBarContainer);this.headBar.startup();this.own(p(this.headBar,"add",g.hitch(this,function(){this.customBookmarks.add()})));this.own(p(this.headBar,"filter-change",g.hitch(this,function(a){this.webmapBookmarks.filter(a);this.customBookmarks.filter(a)})));this.webmapBookmarks=
new d({nls:this.nls,map:this.map,folderUrl:this.folderUrl,config:this.config},this.webmapBookmarksContainer);this.webmapBookmarks.startup();this.customBookmarks=new e({nls:this.nls,map:this.map,folderUrl:this.folderUrl,widgetId:this.id,config:this.config},this.customBookmarksContainer);this.customBookmarks.startup();this.own(p(this.customBookmarks,"sort",g.hitch(this,"_onSort")));this.own(p(this.customBookmarks,"change-img",g.hitch(this,"_onChangeImg")));this.own(p(this.customBookmarks,"delete",g.hitch(this,
"_onDelete")));this.own(p(this.customBookmarks,"label-blur",g.hitch(this,"_onLabelBlur")));this.own(p(this.customBookmarks,"added",g.hitch(this,"_onAdded")));this.resize()},_onLabelBlur:function(a){this.onBookmarksChange(a)},_onSort:function(a){this.onBookmarksChange(a)},_onChangeImg:function(a){this.onBookmarksChange(a)},_onDelete:function(a){var b=a.nextBookmark;this.onBookmarksChange(a.bookmarks);this.a11y_initFocusNodes();this.a11y_focusAfterDelete(b)},_onAdded:function(a){this.onBookmarksChange(a);
this.a11y_initFocusNodes()},onBookmarksChange:function(a){this._saveAllToLocalCache(a);this.resize()},onOpen:function(){this.webmapBookmarks.refresh();var a=this._getLocalCache();this.customBookmarks.refresh(a);this.resize();this.a11y_initFocusNodes()},destroy:function(){this.headBar&&(this.headBar.destroy(),this.headBar=null);this.webmapBookmarks&&(this.webmapBookmarks.destroy(),this.webmapBookmarks=null);this.customBookmarks&&(this.customBookmarks.destroy(),this.customBookmarks=null);this.inherited(arguments)},
onMinimize:function(){this.resize()},onMaximize:function(){this.resize()},resize:function(){window.appInfo.isRunInMobile?b.addClass(this.domNode,"mobile"):b.removeClass(this.domNode,"mobile");this.customBookmarks.toggleMobile(window.appInfo.isRunInMobile);var a=this.domNode.parentElement||this.domNode.parentNode;a&&(window.isRTL?b.setStyle(a,"padding-left","0"):b.setStyle(a,"padding-right","0"));this._getParentSize(a).then(g.hitch(this,function(c){var d=this.domNode;if(d){if(279<=c.w&&329>c.w)this._setNodeWidths(d,
130,100);else if(1>=Math.abs(c.w-330))this._setNodeWidths(d,100,100);else{var e=b.getMarginBox(d).w-20,f=parseInt(e/100,10);0<f&&(e=parseInt(e%100/f,10),this._setNodeWidths(d,100+e,100))}this.setContainerHeight(c,a)}}))},_setNodeWidths:function(a,c,d){d+=4;c<d&&(c=d);k(".jimu-img-node",a).forEach(function(a){b.setStyle(a,"width",c+"px")})},getItemSize:function(){var a={};a.width=this.itemSize.width;a.height=this.itemSize.height;return a},setContainerWidth:function(a,c){b.setStyle(this.domNode,{width:(c.width+
2*this.hmargin)*Math.floor(a.w/(c.width+2*this.hmargin))+20+"px",margin:"0px auto"})},setContainerHeight:function(a,c){c=this._getDomHeight(".header",c);b.setStyle(this.bookmarksContainer,{height:a.h-c+"px"})},setItemPosition:function(a,c){var d={position:"relative",margin:this.vmargin+"px "+this.hmargin+"px"};0<=c.width&&(d.width=c.width+"px");0<=c.height&&(d.height=c.height+"px");b.setStyle(a.domNode,d);b.addClass(a.domNode,"jimu-float-leading")},_getDomHeight:function(a,c){var d=0;(a=k(a,c)[0])&&
(a=b.getMarginBox(a))&&a.h&&(d=a.h);return d},_getParentSize:function(a){var c=new n;setTimeout(g.hitch(this,function(){var d=b.getMarginBox(a),e=b.getPadExtents(a);d.h-=e.h;c.resolve(d)}),10);return c},_saveAllToLocalCache:function(a){var b=[];c.forEach(l.get(q.getKey(this.id)),function(a){l.remove(a)},this);c.forEach(a,function(a){var c=q.getKey(this.id)+"."+a.displayName;b.push(c);a=g.mixin({},a);a.itemNode&&delete a.itemNode;a._uID&&delete a._uID;try{l.set(c,a)}catch(u){alert("localcache store error")}},
this);l.set(q.getKey(this.id),b)},_getLocalCache:function(){var a=this._getCacheByKeys(this._getOldKey()),b=this._getCacheByKeys(q.getKey(this.id)),c=this._getCacheUpdatedKey();0===b.length&&0<a.length&&!0!==l.get(c)&&(b=q.filterBookmarkFromTarget(a,this.config.bookmarks2D),this._saveAllToLocalCache(b),l.set(c,!0));return b},_getCacheUpdatedKey:function(){return q.getKey(this.id)+".BookmarkCacheUpdated"},_getCacheByKeys:function(a){var b=[];l.get(a)&&c.forEach(l.get(a),function(c){c.startWith(a)&&
(c=l.get(c),b.push(c))},this);return b},_getOldKey:function(){return this.appConfig.map["3D"]?this.name+".3D":this.name+".2D"}});h.extend(f);return h});